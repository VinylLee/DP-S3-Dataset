{'sequence': 'public class War extends Jar private File deploymentDescriptor private boolean descriptorAdded public War super archiveType emptyBehavior public void setWarfile File warFile setDestFile warFile public void setWebxml File descr deploymentDescriptor descr if deploymentDescriptor exists throw new BuildException deploymentDescriptor ZipFileSet fs new ZipFileSet fs setDir new File deploymentDescriptor getParent fs setIncludes deploymentDescriptor getName fs setFullpath super addFileset fs public void addLib ZipFileSet fs fs setPrefix super addFileset fs public void addClasses ZipFileSet fs fs setPrefix super addFileset fs public void addWebinf ZipFileSet fs fs setPrefix super addFileset fs protected void initZipOutputStream ZipOutputStream zOut throws IOException BuildException if deploymentDescriptor null isInUpdateMode throw new BuildException location super initZipOutputStream zOut protected void zipFile File file ZipOutputStream zOut String vPath throws IOException if vPath equalsIgnoreCase if deploymentDescriptor null deploymentDescriptor equals file descriptorAdded log archiveType archiveType Project MSG_WARN else super zipFile file zOut vPath descriptorAdded true else super zipFile file zOut vPath protected void cleanUp descriptorAdded false super cleanUp', 'bug': '1'}
{'sequence': 'public final class LoadProperties extends Task private File srcFile null private final Vector filterChains new Vector public final void setSrcFile final File srcFile this srcFile srcFile public final void execute throws BuildException if srcFile null throw new BuildException if srcFile exists throw new BuildException if srcFile isFile throw new BuildException FileInputStream fis null BufferedInputStream bis null Reader instream null try final long len srcFile length final int size int len fis new FileInputStream srcFile bis new BufferedInputStream fis instream new InputStreamReader bis ChainReaderHelper crh new ChainReaderHelper crh setBufferSize size crh setPrimaryReader instream crh setFilterChains filterChains crh setProject project instream crh getAssembledReader String text crh readFully instream if text null if text endsWith text text final StringInputStream sis new StringInputStream text final Properties props new Properties props load sis final Enumeration props keys while hasMoreElements final String key String nextElement final String value props getProperty key if key null value null value trim length project setNewProperty key value sis close catch final IOException ioe final String message ioe toString throw new BuildException message ioe location catch final BuildException be throw be finally try if fis null fis close catch IOException ioex public final void addFilterChain FilterChain filter filterChains addElement filter', 'bug': '0'}
{'sequence': 'public class ChangeLogTask extends Task private File m_usersFile private Vector m_cvsUsers new Vector private File m_dir private File m_destfile private Date m_start private Date m_stop private final Vector m_filesets new Vector public void setDir final File dir m_dir dir public void setDestfile final File destfile m_destfile destfile public void setUsersfile final File usersFile m_usersFile usersFile public void addUser final CvsUser user m_cvsUsers addElement user public void setStart final Date start m_start start public void setEnd final Date stop m_stop stop public void setDaysinpast final int days final long time System currentTimeMillis long days setStart new Date time public void addFileset final FileSet fileSet m_filesets addElement fileSet public void execute throws BuildException try validate final Properties userList new Properties loadUserlist userList for Enumeration m_cvsUsers elements hasMoreElements final CvsUser user CvsUser nextElement user validate userList put user getUserID user getDisplayname final Commandline command new Commandline command setExecutable command createArgument setValue if null m_start final SimpleDateFormat outputDate new SimpleDateFormat final String dateRange outputDate format m_start command createArgument setValue dateRange if m_filesets isEmpty final Enumeration m_filesets elements while hasMoreElements final FileSet fileSet FileSet nextElement final DirectoryScanner scanner fileSet getDirectoryScanner project final String files scanner getIncludedFiles for int files length command createArgument setValue files final ChangeLogParser parser new ChangeLogParser final RedirectingStreamHandler handler new RedirectingStreamHandler parser log command toString Project MSG_VERBOSE final Execute exe new Execute handler exe setWorkingDirectory m_dir exe setCommandline command getCommandline exe setAntRun getProject try final int resultCode exe execute if resultCode throw new BuildException catch final IOException ioe throw new BuildException ioe toString final String errors handler getErrors if null errors log errors Project MSG_ERR final CVSEntry entrySet parser getEntrySetAsArray final CVSEntry filteredEntrySet filterEntrySet entrySet replaceAuthorIdWithName userList filteredEntrySet writeChangeLog filteredEntrySet finally m_dir savedDir private void validate throws BuildException if null m_dir m_dir getProject getBaseDir if null m_destfile final String message throw new BuildException message if m_dir exists final String message m_dir getAbsolutePath throw new BuildException message if null m_usersFile m_usersFile exists final String message m_usersFile getAbsolutePath throw new BuildException message private void loadUserlist final Properties userList throws BuildException if null m_usersFile try userList load new FileInputStream m_usersFile catch final IOException ioe throw new BuildException ioe toString ioe private CVSEntry filterEntrySet final CVSEntry entrySet final Vector results new Vector for int entrySet length final CVSEntry cvsEntry entrySet final Date date cvsEntry getDate if null m_start m_start after date continue if null m_stop m_stop before date continue results addElement cvsEntry final CVSEntry resultArray new CVSEntry results size results copyInto resultArray return resultArray private void replaceAuthorIdWithName final Properties userList final CVSEntry entrySet for int entrySet length final CVSEntry entry entrySet if userList containsKey entry getAuthor entry setAuthor userList getProperty entry getAuthor private void writeChangeLog final CVSEntry entrySet throws BuildException FileOutputStream output null try output new FileOutputStream m_destfile final PrintWriter writer new PrintWriter new OutputStreamWriter output final ChangeLogWriter serializer new ChangeLogWriter serializer printChangeLog writer entrySet catch final UnsupportedEncodingException uee getProject log uee toString Project MSG_ERR catch final IOException ioe throw new BuildException ioe toString ioe finally if null output try output close catch final IOException ioe', 'bug': '0'}
{'sequence': 'public class TarOutputStream extends FilterOutputStream public static final int LONGFILE_ERROR public static final int LONGFILE_TRUNCATE public static final int LONGFILE_GNU protected boolean debug protected int currSize protected int currBytes protected byte oneBuf protected byte recordBuf protected int assemLen protected byte assemBuf protected TarBuffer buffer protected int longFileMode LONGFILE_ERROR public TarOutputStream OutputStream os this os TarBuffer DEFAULT_BLKSIZE TarBuffer DEFAULT_RCDSIZE public TarOutputStream OutputStream os int blockSize this os blockSize TarBuffer DEFAULT_RCDSIZE public TarOutputStream OutputStream os int blockSize int recordSize super os this buffer new TarBuffer os blockSize recordSize this debug false this assemLen this assemBuf new byte recordSize this recordBuf new byte recordSize this oneBuf new byte public void setLongFileMode int longFileMode this longFileMode longFileMode public void setDebug boolean debugF this debug debugF public void setBufferDebug boolean debug this buffer setDebug debug public void finish throws IOException this writeEOFRecord public void close throws IOException this finish this buffer close public int getRecordSize return this buffer getRecordSize public void putNextEntry TarEntry entry throws IOException if entry getName length TarConstants NAMELEN if longFileMode LONGFILE_GNU TarEntry longLinkEntry new TarEntry TarConstants GNU_LONGLINK TarConstants LF_GNUTYPE_LONGNAME longLinkEntry setSize entry getName length putNextEntry longLinkEntry write entry getName getBytes write closeEntry else if longFileMode LONGFILE_TRUNCATE throw new RuntimeException entry getName TarConstants NAMELEN entry writeEntryHeader this recordBuf this buffer writeRecord this recordBuf this currBytes if entry isDirectory this currSize else this currSize int entry getSize public void closeEntry throws IOException if this assemLen for int this assemLen this assemBuf length this assemBuf this buffer writeRecord this assemBuf this currBytes this assemLen this assemLen if this currBytes this currSize throw new IOException this currBytes this currSize public void write int throws IOException this oneBuf byte this write this oneBuf public void write byte wBuf throws IOException this write wBuf wBuf length public void write byte wBuf int wOffset int numToWrite throws IOException if this currBytes numToWrite this currSize throw new IOException numToWrite this currSize if this assemLen if this assemLen numToWrite this recordBuf length int aLen this recordBuf length this assemLen System arraycopy this assemBuf this recordBuf this assemLen System arraycopy wBuf wOffset this recordBuf this assemLen aLen this buffer writeRecord this recordBuf this currBytes this recordBuf length wOffset aLen numToWrite aLen this assemLen else System arraycopy wBuf wOffset this assemBuf this assemLen numToWrite wOffset numToWrite this assemLen numToWrite numToWrite numToWrite while numToWrite if numToWrite this recordBuf length System arraycopy wBuf wOffset this assemBuf this assemLen numToWrite this assemLen numToWrite break this buffer writeRecord wBuf wOffset int num this recordBuf length this currBytes num numToWrite num wOffset num private void writeEOFRecord throws IOException for int this recordBuf length this recordBuf this buffer writeRecord this recordBuf', 'bug': '0'}
{'sequence': 'public interface Parameterizable void setParameters Parameter parameters', 'bug': '0'}
{'sequence': 'public class SignJar extends Task protected File jar protected String alias protected File keystore protected String storepass protected String storetype protected String keypass protected File sigfile protected File signedjar protected boolean verbose protected boolean internalsf protected boolean sectionsonly protected Vector filesets new Vector protected boolean lazy public void setJar final File jar this jar jar public void setAlias final String alias this alias alias public void setKeystore final File keystore this keystore keystore public void setStorepass final String storepass this storepass storepass public void setStoretype final String storetype this storetype storetype public void setKeypass final String keypass this keypass keypass public void setSigfile final File sigfile this sigfile sigfile public void setSignedjar final File signedjar this signedjar signedjar public void setVerbose final boolean verbose this verbose verbose public void setInternalsf final boolean internalsf this internalsf internalsf public void setSectionsonly final boolean sectionsonly this sectionsonly sectionsonly public void setLazy final boolean lazy this lazy lazy public void addFileset final FileSet set filesets addElement set public void execute throws BuildException if null jar null filesets throw new BuildException if null jar doOneJar jar signedjar return else for int filesets size FileSet fs FileSet filesets elementAt DirectoryScanner ds fs getDirectoryScanner project String jarFiles ds getIncludedFiles for int jarFiles length doOneJar new File fs getDir project jarFiles null private void doOneJar File jarSource File jarTarget throws BuildException if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 throw new BuildException if null alias throw new BuildException if null storepass throw new BuildException if isUpToDate jarSource jarTarget return final ExecTask cmd ExecTask project createTask cmd setExecutable if null keystore cmd createArg setValue cmd createArg setValue keystore toString if null storepass cmd createArg setValue cmd createArg setValue storepass if null storetype cmd createArg setValue cmd createArg setValue storetype if null keypass cmd createArg setValue cmd createArg setValue keypass if null sigfile cmd createArg setValue cmd createArg setValue sigfile toString if null jarTarget cmd createArg setValue cmd createArg setValue jarTarget toString if verbose cmd createArg setValue if internalsf cmd createArg setValue if sectionsonly cmd createArg setValue cmd createArg setValue jarSource toString cmd createArg setValue alias log jarSource getAbsolutePath cmd setFailonerror true cmd setTaskName getTaskName cmd execute protected boolean isUpToDate File jarFile File signedjarFile if null jarFile return false if null signedjarFile if jarFile exists return false if signedjarFile exists return false if jarFile equals signedjarFile return false if signedjarFile lastModified jarFile lastModified return true else if lazy return isSigned jarFile return false protected boolean isSigned File file final String SIG_START final String SIG_END if file exists return false ZipFile jarFile null try jarFile new ZipFile file if null alias Enumeration entries jarFile entries while entries hasMoreElements String name ZipEntry entries nextElement getName if name startsWith SIG_START name endsWith SIG_END return true return false else return jarFile getEntry SIG_START alias toUpperCase SIG_END null catch IOException return false finally if jarFile null try jarFile close catch IOException', 'bug': '0'}
{'sequence': 'public interface BuildLogger extends BuildListener void setMessageOutputLevel int level void setOutputPrintStream PrintStream output void setEmacsMode boolean emacsMode void setErrorPrintStream PrintStream err', 'bug': '0'}
{'sequence': 'public class ExecuteOn extends ExecTask protected Vector filesets new Vector private boolean relative false private boolean parallel false protected String type protected Commandline Marker srcFilePos null private boolean skipEmpty false protected Commandline Marker targetFilePos null protected Mapper mapperElement null protected FileNameMapper mapper null protected File destDir null protected boolean srcIsFirst true public void addFileset FileSet set filesets addElement set public void setRelative boolean relative this relative relative public void setParallel boolean parallel this parallel parallel public void setType FileDirBoth type this type type getValue public void setSkipEmptyFilesets boolean skip skipEmpty skip public void setDest File destDir this destDir destDir public Commandline Marker createSrcfile if srcFilePos null throw new BuildException taskType location srcFilePos cmdl createMarker return srcFilePos public Commandline Marker createTargetfile if targetFilePos null throw new BuildException taskType location targetFilePos cmdl createMarker srcIsFirst srcFilePos null return targetFilePos public Mapper createMapper throws BuildException if mapperElement null throw new BuildException location mapperElement new Mapper project return mapperElement protected void checkConfiguration if equals taskName log super checkConfiguration if filesets size throw new BuildException location if targetFilePos null mapperElement null destDir null if mapperElement null throw new BuildException location if destDir null throw new BuildException location mapper mapperElement getImplementation protected void runExec Execute exe throws BuildException try Vector fileNames new Vector Vector baseDirs new Vector for int filesets size FileSet fs FileSet filesets elementAt File base fs getDir project DirectoryScanner ds fs getDirectoryScanner project if equals type String getFiles base ds for int length fileNames addElement baseDirs addElement base if equals type String getDirs base ds for int length fileNames addElement baseDirs addElement base if fileNames size skipEmpty log base Project MSG_INFO continue if parallel String new String fileNames size fileNames copyInto for int length String command getCommandline base log Commandline describeCommand command Project MSG_VERBOSE exe setCommandline command runExecute exe fileNames removeAllElements baseDirs removeAllElements if parallel fileNames size skipEmpty String new String fileNames size fileNames copyInto File new File baseDirs size baseDirs copyInto String command getCommandline log Commandline describeCommand command Project MSG_VERBOSE exe setCommandline command runExecute exe catch IOException throw new BuildException location finally logFlush protected String getCommandline String srcFiles File baseDirs Vector targets new Vector if targetFilePos null Hashtable addedFiles new Hashtable for int srcFiles length String subTargets mapper mapFileName srcFiles if subTargets null for int subTargets length String name null if relative name new File destDir subTargets getAbsolutePath else name subTargets if addedFiles contains name targets addElement name addedFiles put name name String targetFiles new String targets size targets copyInto targetFiles String orig cmdl getCommandline String result new String orig length srcFiles length targetFiles length int srcIndex orig length if srcFilePos null srcIndex srcFilePos getPosition if targetFilePos null int targetIndex targetFilePos getPosition if srcIndex targetIndex srcIndex targetIndex srcIsFirst System arraycopy orig result srcIndex System arraycopy orig srcIndex result srcIndex srcFiles length targetIndex srcIndex System arraycopy targetFiles result targetIndex srcFiles length targetFiles length System arraycopy orig targetIndex result targetIndex srcFiles length targetFiles length orig length targetIndex else System arraycopy orig result targetIndex System arraycopy targetFiles result targetIndex targetFiles length System arraycopy orig targetIndex result targetIndex targetFiles length srcIndex targetIndex System arraycopy orig srcIndex result srcIndex srcFiles length targetFiles length orig length srcIndex srcIndex targetFiles length System arraycopy orig result srcIndex System arraycopy orig srcIndex result srcIndex srcFiles length orig length srcIndex for int srcFiles length if relative result srcIndex new File baseDirs srcFiles getAbsolutePath else result srcIndex srcFiles return result protected String getCommandline String srcFile File baseDir return getCommandline new String srcFile new File baseDir protected String getFiles File baseDir DirectoryScanner ds if mapper null SourceFileScanner sfs new SourceFileScanner this return sfs restrict ds getIncludedFiles baseDir destDir mapper else return ds getIncludedFiles protected String getDirs File baseDir DirectoryScanner ds if mapper null SourceFileScanner sfs new SourceFileScanner this return sfs restrict ds getIncludedDirectories baseDir destDir mapper else return ds getIncludedDirectories public static class FileDirBoth extends EnumeratedAttribute public String getValues return new String', 'bug': '0'}
{'sequence': 'public class Echo extends Task protected File file null protected boolean append false protected int logLevel Project MSG_WARN public void execute throws BuildException if file null log message logLevel else FileWriter out null try out new FileWriter file getAbsolutePath append out write message message length catch IOException ioe throw new BuildException ioe location finally if out null try out close catch IOException ioex public void setMessage String msg this message msg public void setFile File file this file file public void setAppend boolean append this append append public void addText String msg message project replaceProperties msg public void setLevel EchoLevel echoLevel String option echoLevel getValue if option equals logLevel Project MSG_ERR else if option equals logLevel Project MSG_WARN else if option equals logLevel Project MSG_INFO else if option equals logLevel Project MSG_VERBOSE else logLevel Project MSG_DEBUG public static class EchoLevel extends EnumeratedAttribute public String getValues return new String', 'bug': '0'}
{'sequence': 'public interface ExecuteStreamHandler void setProcessInputStream OutputStream os throws IOException void setProcessErrorStream InputStream is throws IOException void setProcessOutputStream InputStream is throws IOException void start throws IOException void stop', 'bug': '0'}
{'sequence': 'public class Parallel extends Task implements TaskContainer private Vector nestedTasks new Vector public void addTask Task nestedTask throws BuildException nestedTasks addElement nestedTask public void execute throws BuildException TaskThread threads new TaskThread nestedTasks size int threadNumber for Enumeration nestedTasks elements hasMoreElements threadNumber Task nestedTask Task nextElement threads threadNumber new TaskThread threadNumber nestedTask for int threads length threads start for int threads length try threads join catch InterruptedException ie StringBuffer exceptionMessage new StringBuffer int numExceptions Throwable firstException null Location firstLocation Location UNKNOWN_LOCATION for int threads length Throwable threads getException if null numExceptions if firstException null firstException if instanceof BuildException firstLocation Location UNKNOWN_LOCATION firstLocation BuildException getLocation exceptionMessage append StringUtils LINE_SEP exceptionMessage append getMessage if numExceptions if firstException instanceof BuildException throw BuildException firstException else throw new BuildException firstException else if numExceptions throw new BuildException exceptionMessage toString firstLocation class TaskThread extends Thread private Throwable exception private Task task private int taskNumber TaskThread int taskNumber Task task this task task this taskNumber taskNumber public void run try task perform catch Throwable exception public Throwable getException return exception', 'bug': '0'}
{'sequence': 'public interface TaskContainer void addTask Task task', 'bug': '0'}
{'sequence': 'public final class StripLineBreaks extends BaseParamFilterReader implements ChainableReader private static final String DEFAULT_LINE_BREAKS private static final String LINE_BREAKS_KEY private String lineBreaks DEFAULT_LINE_BREAKS public StripLineBreaks super public StripLineBreaks final Reader in super in public final int read throws IOException if getInitialized initialize setInitialized true int ch in read while ch if lineBreaks indexOf ch break else ch in read return ch public final void setLineBreaks final String lineBreaks this lineBreaks lineBreaks private final String getLineBreaks return lineBreaks public final Reader chain final Reader rdr StripLineBreaks newFilter new StripLineBreaks rdr newFilter setLineBreaks getLineBreaks newFilter setInitialized true return newFilter private final void initialize String userDefinedLineBreaks null Parameter params getParameters if params null for int params length if LINE_BREAKS_KEY equals params getName userDefinedLineBreaks params getValue break if userDefinedLineBreaks null lineBreaks userDefinedLineBreaks', 'bug': '0'}
{'sequence': 'public class Environment protected Vector variables public static class Variable private String key value public Variable super public void setKey String key this key key public void setValue String value this value value public String getKey return this key public String getValue return this value public void setPath Path path this value path toString public void setFile java io File file this value file getAbsolutePath public String getContent throws BuildException if key null value null throw new BuildException StringBuffer sb new StringBuffer key trim sb append append value trim return sb toString public Environment variables new Vector public void addVariable Variable var variables addElement var public String getVariables throws BuildException if variables size return null String result new String variables size for int result length result Variable variables elementAt getContent return result', 'bug': '0'}
{'sequence': 'public class DependSet extends MatchingTask private Vector sourceFileSets new Vector private Vector sourceFileLists new Vector private Vector targetFileSets new Vector private Vector targetFileLists new Vector public DependSet public void addSrcfileset FileSet fs sourceFileSets addElement fs public void addSrcfilelist FileList fl sourceFileLists addElement fl public void addTargetfileset FileSet fs targetFileSets addElement fs public void addTargetfilelist FileList fl targetFileLists addElement fl public void execute throws BuildException if sourceFileSets size sourceFileLists size throw new BuildException if targetFileSets size targetFileLists size throw new BuildException long now new Date getTime if Os isFamily now Vector allTargets new Vector long oldestTargetTime File oldestTarget null Enumeration enumTargetSets targetFileSets elements while enumTargetSets hasMoreElements FileSet targetFS FileSet enumTargetSets nextElement if targetFS getDir getProject exists continue DirectoryScanner targetDS targetFS getDirectoryScanner project String targetFiles targetDS getIncludedFiles for int targetFiles length File dest new File targetFS getDir project targetFiles allTargets addElement dest if dest lastModified now log targetFiles Project MSG_WARN if oldestTarget null dest lastModified oldestTargetTime oldestTargetTime dest lastModified oldestTarget dest boolean upToDate true Enumeration enumTargetLists targetFileLists elements while enumTargetLists hasMoreElements FileList targetFL FileList enumTargetLists nextElement String targetFiles targetFL getFiles project for int targetFiles length File dest new File targetFL getDir project targetFiles if dest exists log targetFiles Project MSG_VERBOSE upToDate false continue else allTargets addElement dest if dest lastModified now log targetFiles Project MSG_WARN if oldestTarget null dest lastModified oldestTargetTime oldestTargetTime dest lastModified oldestTarget dest if oldestTarget null log oldestTarget Project MSG_VERBOSE else upToDate false if upToDate Enumeration enumSourceLists sourceFileLists elements while upToDate enumSourceLists hasMoreElements FileList sourceFL FileList enumSourceLists nextElement String sourceFiles sourceFL getFiles project for int upToDate sourceFiles length File src new File sourceFL getDir project sourceFiles if src lastModified now log sourceFiles Project MSG_WARN if src exists log sourceFiles Project MSG_VERBOSE upToDate false break if src lastModified oldestTargetTime upToDate false log oldestTarget sourceFiles Project MSG_VERBOSE if upToDate Enumeration enumSourceSets sourceFileSets elements while upToDate enumSourceSets hasMoreElements FileSet sourceFS FileSet enumSourceSets nextElement DirectoryScanner sourceDS sourceFS getDirectoryScanner project String sourceFiles sourceDS getIncludedFiles for int upToDate sourceFiles length File src new File sourceFS getDir project sourceFiles if src lastModified now log sourceFiles Project MSG_WARN if src lastModified oldestTargetTime upToDate false log oldestTarget sourceFiles Project MSG_VERBOSE if upToDate log Project MSG_VERBOSE for Enumeration allTargets elements hasMoreElements File fileToRemove File nextElement log fileToRemove getAbsolutePath Project MSG_VERBOSE fileToRemove delete', 'bug': '0'}
{'sequence': 'public class ExtendSelector extends BaseSelector private String classname null private FileSelector dynselector null private Vector paramVec new Vector private Path classpath null public ExtendSelector public void setClassname String classname this classname classname public void selectorCreate if classname null classname length try Class null if classpath null Class forName classname else AntClassLoader al new AntClassLoader getProject classpath al loadClass classname AntClassLoader initializeClass dynselector FileSelector newInstance catch ClassNotFoundException cnfexcept setError classname catch InstantiationException iexcept setError classname catch IllegalAccessException iaexcept setError classname else setError public void addParam Parameter paramVec addElement public final void setClasspath Path classpath if isReference throw tooManyAttributes if this classpath null this classpath classpath else this classpath append classpath public final Path createClasspath if isReference throw noChildrenAllowed if this classpath null this classpath new Path getProject return this classpath createPath public final Path getClasspath return classpath public void setClasspathref Reference if isReference throw tooManyAttributes createClasspath setRefid public void verifySettings if dynselector null selectorCreate if classname null classname length setError else if dynselector null setError else if dynselector instanceof ExtendFileSelector paramVec size setError public boolean isSelected File basedir String filename File file throws BuildException validate if paramVec size dynselector instanceof ExtendFileSelector Parameter paramArray new Parameter paramVec size paramVec copyInto paramArray ExtendFileSelector dynselector setParameters paramArray return dynselector isSelected basedir filename file', 'bug': '0'}
{'sequence': 'public class Available extends Task implements Condition private String property private String classname private String file private Path filepath private String resource private FileDir type private Path classpath private AntClassLoader loader private String value private boolean isTask false private boolean ignoreSystemclasses false public void setClasspath Path classpath createClasspath append classpath public Path createClasspath if this classpath null this classpath new Path project return this classpath createPath public void setClasspathRef Reference createClasspath setRefid public void setFilepath Path filepath createFilepath append filepath public Path createFilepath if this filepath null this filepath new Path project return this filepath createPath public void setProperty String property this property property public void setValue String value this value value public void setClassname String classname if equals classname this classname classname public void setFile File this file FileUtils newFileUtils removeLeadingPath getProject getBaseDir public void setResource String resource this resource resource public void setType String type log this type new FileDir this type setValue type public void setType FileDir type this type type public void setIgnoresystemclasses boolean ignore this ignoreSystemclasses ignore public void execute throws BuildException if property null throw new BuildException location isTask true try if eval if null getProject getProperty property log StringUtils LINE_SEP getProject setProperty property value finally isTask false public boolean eval throws BuildException if classname null file null resource null throw new BuildException location if type null if file null throw new BuildException location if classpath null classpath setProject project this loader new AntClassLoader project classpath String appendix if isTask appendix property else setTaskName if classname null checkClass classname log classname appendix Project MSG_VERBOSE return false if file null checkFile if type null log type file appendix Project MSG_VERBOSE else log file appendix Project MSG_VERBOSE return false if resource null checkResource resource log resource appendix Project MSG_VERBOSE return false if loader null loader cleanup loader null if isTask setTaskName null return true private boolean checkFile if filepath null return checkFile project resolveFile file file else String paths filepath list for int paths length log paths Project MSG_DEBUG File path new File paths if path exists file equals paths if type null log path Project MSG_VERBOSE return true else if type isDir path isDirectory log path Project MSG_VERBOSE return true else if type isFile path isFile log path Project MSG_VERBOSE return true return false FileUtils fileUtils FileUtils newFileUtils File parent fileUtils getParentFile path if parent null parent exists file equals parent getAbsolutePath if type null log parent Project MSG_VERBOSE return true else if type isDir log parent Project MSG_VERBOSE return true return false if path exists path isDirectory if checkFile new File path file file path return true if parent null parent exists if checkFile new File parent file file parent return true if parent null File grandParent fileUtils getParentFile parent if grandParent null grandParent exists if checkFile new File grandParent file file grandParent return true return false private boolean checkFile File String text if type null if type isDir if isDirectory log text Project MSG_VERBOSE return isDirectory else if type isFile if isFile log text Project MSG_VERBOSE return isFile if exists log text Project MSG_VERBOSE return exists private boolean checkResource String resource if loader null return loader getResourceAsStream resource null else ClassLoader cL this getClass getClassLoader if cL null return cL getResourceAsStream resource null else return ClassLoader getSystemResourceAsStream resource null private boolean checkClass String classname try Class requiredClass null if ignoreSystemclasses loader new AntClassLoader null getProject classpath false if loader null try requiredClass loader findClass classname catch SecurityException se return true else return false else if loader null requiredClass loader loadClass classname else ClassLoader this getClass getClassLoader if null requiredClass loadClass classname else requiredClass Class forName classname AntClassLoader initializeClass requiredClass return true catch ClassNotFoundException log classname Project MSG_DEBUG return false catch NoClassDefFoundError log getMessage classname Project MSG_DEBUG return false public static class FileDir extends EnumeratedAttribute private static final String values public String getValues return values public boolean isDir return equalsIgnoreCase getValue public boolean isFile return equalsIgnoreCase getValue', 'bug': '0'}
{'sequence': 'public interface FileSelector public boolean isSelected File basedir String filename File file throws BuildException', 'bug': '0'}
{'sequence': 'public final class StripLineComments extends BaseParamFilterReader implements ChainableReader private static final String COMMENTS_KEY private Vector comments new Vector private String line null public StripLineComments super public StripLineComments final Reader in super in public final int read throws IOException if getInitialized initialize setInitialized true int ch if line null ch line charAt if line length line null else line line substring else line readLine if line null ch else int commentsSize comments size for int commentsSize String comment String comments elementAt if line startsWith comment line null break return read return ch public final void addConfiguredComment final Comment comment comments addElement comment getValue private void setComments final Vector comments this comments comments private final Vector getComments return comments public final Reader chain final Reader rdr StripLineComments newFilter new StripLineComments rdr newFilter setComments getComments newFilter setInitialized true return newFilter private final void initialize Parameter params getParameters if params null for int params length if COMMENTS_KEY equals params getType comments addElement params getValue public static class Comment private String value public final void setValue String comment value comment public final String getValue return value', 'bug': '0'}
{'sequence': 'public class Sequential extends Task implements TaskContainer private Vector nestedTasks new Vector public void maybeConfigure throws BuildException if isInvalid super maybeConfigure else getRuntimeConfigurableWrapper maybeConfigure getProject false public void addTask Task nestedTask nestedTasks addElement nestedTask public void execute throws BuildException for Enumeration nestedTasks elements hasMoreElements Task nestedTask Task nextElement nestedTask perform', 'bug': '0'}
{'sequence': 'public final class TaskLogger private Task m_task public TaskLogger final Task task this m_task task public void info final String message m_task log message Project MSG_INFO public void error final String message m_task log message Project MSG_ERR public void warning final String message m_task log message Project MSG_WARN public void verbose final String message m_task log message Project MSG_VERBOSE public void debug final String message m_task log message Project MSG_DEBUG', 'bug': '0'}
{'sequence': 'public class Gcj extends DefaultCompilerAdapter public boolean execute throws BuildException Commandline cmd attributes log Project MSG_VERBOSE cmd setupGCJCommand int firstFileName cmd size logAndAddFilesToCompile cmd return executeExternalCompile cmd getCommandline firstFileName protected Commandline setupGCJCommand Commandline cmd new Commandline Path classpath new Path project if bootclasspath null classpath append bootclasspath classpath addExtdirs extdirs if bootclasspath null bootclasspath size includeJavaRuntime true classpath append getCompileClasspath if compileSourcepath null classpath append compileSourcepath else classpath append src cmd setExecutable if destDir null cmd createArgument setValue cmd createArgument setFile destDir if destDir mkdirs throw new BuildException cmd createArgument setValue cmd createArgument setPath classpath if encoding null cmd createArgument setValue encoding if debug cmd createArgument setValue if optimize cmd createArgument setValue cmd createArgument setValue addCurrentCompilerArgs cmd return cmd', 'bug': '0'}
{'sequence': 'public class FilenameSelector extends BaseExtendSelector private String pattern null private boolean casesensitive true private boolean negated false public final static String NAME_KEY public final static String CASE_KEY public final static String NEGATE_KEY public FilenameSelector public String toString StringBuffer buf new StringBuffer buf append pattern buf append if negated buf append else buf append buf append if casesensitive buf append else buf append buf append return buf toString public void setName String pattern pattern pattern replace File separatorChar replace File separatorChar if pattern endsWith File separator pattern this pattern pattern public void setCasesensitive boolean casesensitive this casesensitive casesensitive public void setNegate boolean negated this negated negated public void setParameters Parameter parameters super setParameters parameters if parameters null for int parameters length String paramname parameters getName if NAME_KEY equalsIgnoreCase paramname setName parameters getValue else if CASE_KEY equalsIgnoreCase paramname setCasesensitive Project toBoolean parameters getValue else if NEGATE_KEY equalsIgnoreCase paramname setNegate Project toBoolean parameters getValue else setError paramname public void verifySettings if pattern null setError public boolean isSelected File basedir String filename File file validate return SelectorUtils matchPath pattern filename casesensitive negated', 'bug': '0'}
{'sequence': 'public class Http extends ProjectComponent implements Condition private String spec null public void setUrl String url spec url private int errorsBeginAt public void SetErrorsBeginAt int errorsBeginAt this errorsBeginAt errorsBeginAt public boolean eval throws BuildException if spec null throw new BuildException log spec Project MSG_VERBOSE try URL url new URL spec try URLConnection conn url openConnection if conn instanceof HttpURLConnection HttpURLConnection http HttpURLConnection conn int code http getResponseCode log spec code Project MSG_VERBOSE if code code errorsBeginAt return true else return false catch java io IOException return false catch MalformedURLException throw new BuildException spec return true', 'bug': '1'}
{'sequence': 'public class GUnzip extends Unpack private static final String DEFAULT_EXTENSION protected String getDefaultExtension return DEFAULT_EXTENSION protected void extract if source lastModified dest lastModified log source getAbsolutePath dest getAbsolutePath FileOutputStream out null GZIPInputStream zIn null FileInputStream fis null try out new FileOutputStream dest fis new FileInputStream source zIn new GZIPInputStream fis byte buffer new byte int count do out write buffer count count zIn read buffer buffer length while count catch IOException ioe String msg ioe getMessage throw new BuildException msg ioe location finally if fis null try fis close catch IOException ioex if out null try out close catch IOException ioex if zIn null try zIn close catch IOException ioex', 'bug': '0'}
{'sequence': 'public class FixCRLF extends MatchingTask private static final int UNDEF private static final int NOTJAVA private static final int LOOKING private static final int IN_CHAR_CONST private static final int IN_STR_CONST private static final int IN_SINGLE_COMMENT private static final int IN_MULTI_COMMENT private static final int ASIS private static final int CR private static final int LF private static final int CRLF private static final int ADD private static final int REMOVE private static final int SPACES private static final int TABS private static final int INBUFLEN private static final int LINEBUFLEN private static final char CTRLZ private int tablength private String spaces private StringBuffer linebuf new StringBuffer private StringBuffer linebuf2 new StringBuffer private int eol private String eolstr private int ctrlz private int tabs private boolean javafiles false private File srcDir private File destDir null private FileUtils fileUtils FileUtils newFileUtils private String encoding null public FixCRLF tabs ASIS if Os isFamily ctrlz REMOVE eol CR eolstr else if Os isFamily ctrlz ASIS eol CRLF eolstr else ctrlz REMOVE eol LF eolstr public void setSrcdir File srcDir this srcDir srcDir public void setDestdir File destDir this destDir destDir public void setJavafiles boolean javafiles this javafiles javafiles public void setEol CrLf attr String option attr getValue if option equals eol ASIS else if option equals eol CR eolstr else if option equals eol LF eolstr else eol CRLF eolstr public void setCr AddAsisRemove attr log Project MSG_WARN log Project MSG_WARN String option attr getValue CrLf new CrLf if option equals setValue else if option equals setValue else setValue setEol public void setTab AddAsisRemove attr String option attr getValue if option equals tabs SPACES else if option equals tabs ASIS else tabs TABS public void setTablength int tlength throws BuildException if tlength tlength throw new BuildException location tablength tlength StringBuffer sp new StringBuffer for int tablength sp append spaces sp toString public void setEof AddAsisRemove attr String option attr getValue if option equals ctrlz REMOVE else if option equals ctrlz ASIS else ctrlz ADD public void setEncoding String encoding this encoding encoding public void execute throws BuildException if srcDir null throw new BuildException if srcDir exists throw new BuildException if srcDir isDirectory throw new BuildException if destDir null if destDir exists throw new BuildException if destDir isDirectory throw new BuildException log eol ASIS eol CR eol LF tabs TABS tabs ASIS ctrlz ADD ctrlz ASIS tablength encoding null encoding Project MSG_VERBOSE DirectoryScanner ds super getDirectoryScanner srcDir String files ds getIncludedFiles for int files length processFile files private Reader getReader File throws IOException return encoding null new FileReader new InputStreamReader new FileInputStream encoding private void processFile String file throws BuildException File srcFile new File srcDir file File destD destDir null srcDir destDir File tmpFile null BufferedWriter outWriter OneLiner BufferLine line OneLiner lines new OneLiner srcFile try try tmpFile fileUtils createTempFile destD Writer writer encoding null new FileWriter tmpFile new OutputStreamWriter new FileOutputStream tmpFile encoding outWriter new BufferedWriter writer catch IOException throw new BuildException while lines hasMoreElements int endComment try line OneLiner BufferLine lines nextElement catch NoSuchElementException throw new BuildException String lineString line getLineString int linelen line length if tabs ASIS try outWriter write lineString catch IOException throw new BuildException int ptr while ptr line getNext linelen switch lines getState case NOTJAVA notInConstant line line length outWriter break case IN_MULTI_COMMENT endComment if endComment lines setState LOOKING else endComment linelen notInConstant line endComment outWriter break case IN_SINGLE_COMMENT notInConstant line line length outWriter lines setState LOOKING break case IN_CHAR_CONST case IN_STR_CONST int begin line getNext char terminator lines getState IN_STR_CONST endOfCharConst line terminator while line getNext line getLookahead if line getNextCharInc line setColumn line getColumn tablength line getColumn tablength else line incColumn try outWriter write line substring begin line getNext catch IOException throw new BuildException lines setState LOOKING break case LOOKING nextStateChange line notInConstant line line getLookahead outWriter break try outWriter write eolstr catch IOException throw new BuildException try if ctrlz ASIS outWriter write lines getEofStr else if ctrlz ADD outWriter write CTRLZ catch IOException throw new BuildException finally try outWriter close catch IOException throw new BuildException try lines close lines null catch IOException throw new BuildException srcFile File destFile new File destD file if destFile exists log Project MSG_DEBUG if fileUtils contentEquals destFile tmpFile log destFile Project MSG_DEBUG if destFile delete throw new BuildException destFile if tmpFile renameTo destFile throw new BuildException srcFile destFile tmpFile log destFile Project MSG_DEBUG if tmpFile delete throw new BuildException tmpFile log Project MSG_DEBUG if tmpFile renameTo destFile throw new BuildException srcFile destFile tmpFile tmpFile null catch IOException throw new BuildException finally try if lines null lines close catch IOException io log srcFile Project MSG_ERR if tmpFile null tmpFile delete private void nextStateChange OneLiner BufferLine bufline throws BuildException int eol bufline length int ptr bufline getNext while ptr eol switch bufline getChar ptr case bufline setState IN_CHAR_CONST bufline setLookahead ptr return case bufline setState IN_STR_CONST bufline setLookahead ptr return case if ptr eol if bufline getChar ptr bufline setState IN_MULTI_COMMENT bufline setLookahead ptr return else if bufline getChar ptr bufline setState IN_SINGLE_COMMENT bufline setLookahead ptr return break bufline setLookahead ptr private void endOfCharConst OneLiner BufferLine bufline char terminator throws BuildException int ptr bufline getNext int eol bufline length char while ptr eol if bufline getChar ptr ptr else if terminator bufline setLookahead ptr return throw new BuildException private void notInConstant OneLiner BufferLine bufline int end BufferedWriter outWriter int nextTab int nextStop int tabspaces String line bufline substring bufline getNext end linebuf setLength while nextTab line indexOf int place col nextTab place tabspaces tablength col tablength linebuf append spaces substring tabspaces col tabspaces place nextTab linebuf append line substring place line length String linestring new String linebuf toString if tabs REMOVE try outWriter write linestring catch IOException throw new BuildException int tabCol linebuf2 setLength place col bufline getColumn int placediff col nextStop col tablength col tablength if nextStop col linebuf2 append linestring substring place nextStop placediff place nextStop placediff nextStop tablength for nextStop placediff linestring length nextStop tablength for tabCol nextStop tabCol placediff place linestring charAt tabCol placediff if nextStop tabCol linebuf2 append linestring substring place tabCol placediff linebuf2 append else linebuf2 append linestring substring place nextStop placediff place nextStop placediff linebuf2 append linestring substring place linestring length try outWriter write linebuf2 toString catch IOException throw new BuildException bufline setColumn bufline getColumn linestring length bufline setNext end class OneLiner implements Enumeration private int state javafiles LOOKING NOTJAVA private StringBuffer eolStr new StringBuffer LINEBUFLEN private StringBuffer eofStr new StringBuffer private BufferedReader reader private StringBuffer line new StringBuffer private boolean reachedEof false public OneLiner File srcFile throws BuildException try reader new BufferedReader getReader srcFile INBUFLEN nextLine catch IOException throw new BuildException protected void nextLine throws BuildException int ch int eolcount eolStr setLength line setLength try ch reader read while ch ch ch line append char ch ch reader read if ch line length reachedEof true return switch char ch case eolcount eolStr append reader mark switch ch reader read case if char ch reader read eolcount eolStr append else reader reset break case eolcount eolStr append break case break default reader reset break break case eolcount eolStr append break if eolcount int line length while line charAt CTRLZ if line length eofStr append line toString substring if line setLength reachedEof true else line setLength catch IOException throw new BuildException public String getEofStr return eofStr toString public int getState return state public void setState int state this state state public boolean hasMoreElements return reachedEof public Object nextElement throws NoSuchElementException if hasMoreElements throw new NoSuchElementException BufferLine tmpLine new BufferLine line toString eolStr toString nextLine return tmpLine public void close throws IOException if reader null reader close class BufferLine private int next private int column private int lookahead UNDEF private String line private String eolStr public BufferLine String line String eolStr throws BuildException next column this line line this eolStr eolStr public int getNext return next public void setNext int next this next next public int getLookahead return lookahead public void setLookahead int lookahead this lookahead lookahead public char getChar int return line charAt public char getNextChar return getChar next public char getNextCharInc return getChar next public int getColumn return column public void setColumn int col column col public int incColumn return column public int length return line length public int getEolLength return eolStr length public String getLineString return line public String getEol return eolStr public String substring int begin return line substring begin public String substring int begin int end return line substring begin end public void setState int state OneLiner this setState state public int getState return OneLiner this getState public static class AddAsisRemove extends EnumeratedAttribute public String getValues return new String public static class CrLf extends EnumeratedAttribute public String getValues return new String', 'bug': '1'}
{'sequence': 'public interface SelectorScanner void setSelectors FileSelector selectors public String getDeselectedDirectories public String getDeselectedFiles', 'bug': '0'}
{'sequence': 'public class KeepAliveOutputStream extends FilterOutputStream public KeepAliveOutputStream OutputStream out super out public void close throws IOException', 'bug': '0'}
{'sequence': 'public class PathTokenizer private StringTokenizer tokenizer private String lookahead null private boolean onNetWare Os isFamily private boolean dosStyleFilesystem public PathTokenizer String path if onNetWare tokenizer new StringTokenizer path true else tokenizer new StringTokenizer path false dosStyleFilesystem File pathSeparatorChar public boolean hasMoreTokens if lookahead null return true return tokenizer hasMoreTokens public String nextToken throws NoSuchElementException String token null if lookahead null token lookahead lookahead null else token tokenizer nextToken trim if onNetWare if token length Character isLetter token charAt dosStyleFilesystem tokenizer hasMoreTokens String nextToken tokenizer nextToken trim if nextToken startsWith nextToken startsWith token nextToken else lookahead nextToken else if token equals File pathSeparator token equals token tokenizer nextToken trim if tokenizer hasMoreTokens String nextToken tokenizer nextToken trim if nextToken equals File pathSeparator if nextToken equals if token startsWith token startsWith String oneMore tokenizer nextToken trim if oneMore equals File pathSeparator token oneMore else token lookahead oneMore else lookahead nextToken return token', 'bug': '0'}
{'sequence': 'public abstract class Definer extends Task private String name private String value private Path classpath private File file private String resource private boolean reverseLoader false private String loaderId null private String classpathId null private static final String REUSE_LOADER_REF public void setReverseLoader boolean reverseLoader this reverseLoader reverseLoader log Project MSG_WARN public void setClasspath Path classpath if this classpath null this classpath classpath else this classpath append classpath public Path createClasspath if this classpath null this classpath new Path project return this classpath createPath public void setClasspathRef Reference classpathId getRefId createClasspath setRefid public void setLoaderRef Reference loaderId getRefId public void execute throws BuildException AntClassLoader al createLoader if file null resource null if name null value null String msg getTaskName throw new BuildException msg addDefinition al name value else InputStream is null try if name null value null String msg throw new BuildException msg location if file null resource null String msg throw new BuildException msg location Properties props new Properties if file null log file Project MSG_VERBOSE is new FileInputStream file if is null log file Project MSG_WARN if resource null log resource Project MSG_VERBOSE is al getResourceAsStream resource if is null log resource Project MSG_WARN if is null props load is Enumeration keys props keys while keys hasMoreElements String String keys nextElement String props getProperty addDefinition al catch IOException ex throw new BuildException ex location finally if is null try is close catch IOException private void addDefinition ClassLoader al String name String value throws BuildException try Class al loadClass value AntClassLoader initializeClass addDefinition name catch ClassNotFoundException cnfe String msg getTaskName value throw new BuildException msg cnfe location catch NoClassDefFoundError ncdfe String msg getTaskName value throw new BuildException msg ncdfe location private AntClassLoader createLoader if project getProperty REUSE_LOADER_REF null if loaderId null classpathId null loaderId classpathId if loaderId null Object reusedLoader project getReference loaderId if reusedLoader null if reusedLoader instanceof AntClassLoader return AntClassLoader reusedLoader AntClassLoader al null if classpath null al new AntClassLoader project classpath reverseLoader else al new AntClassLoader project Path systemClasspath reverseLoader al addSystemPackageRoot if loaderId null if project getReference loaderId null project addReference loaderId al return al public void setFile File file this file file public void setResource String res this resource res public void setName String name this name name public String getClassname return value public void setClassname String value protected abstract void addDefinition String name Class', 'bug': '0'}
{'sequence': 'public interface InputHandler void handleInput InputRequest request throws org apache tools ant BuildException', 'bug': '0'}
{'sequence': 'public class BUnzip2 extends Unpack private static final String DEFAULT_EXTENSION protected String getDefaultExtension return DEFAULT_EXTENSION protected void extract if source lastModified dest lastModified log source getAbsolutePath dest getAbsolutePath FileOutputStream out null CBZip2InputStream zIn null FileInputStream fis null BufferedInputStream bis null try out new FileOutputStream dest fis new FileInputStream source bis new BufferedInputStream fis int bis read if throw new BuildException location bis read if throw new BuildException location zIn new CBZip2InputStream bis byte buffer new byte int count do out write buffer count count zIn read buffer buffer length while count catch IOException ioe String msg ioe getMessage throw new BuildException msg ioe location finally if bis null try bis close catch IOException ioex if fis null try fis close catch IOException ioex if out null try out close catch IOException ioex if zIn null try zIn close catch IOException ioex', 'bug': '0'}
{'sequence': 'public class ProjectHelper public static final String HELPER_PROPERTY public static final String SERVICE_ID public static void configureProject Project project File buildFile throws BuildException ProjectHelper helper ProjectHelper getProjectHelper helper parse project buildFile public ProjectHelper public void parse Project project Object source throws BuildException throw new BuildException this getClass getName public static ProjectHelper getProjectHelper throws BuildException ProjectHelper helper null String helperClass System getProperty HELPER_PROPERTY try if helperClass null helper newHelper helperClass catch SecurityException System out println helperClass HELPER_PROPERTY if helper null try ClassLoader classLoader getContextClassLoader InputStream is null if classLoader null is classLoader getResourceAsStream SERVICE_ID if is null is ClassLoader getSystemResourceAsStream SERVICE_ID if is null InputStreamReader isr try isr new InputStreamReader is catch java io UnsupportedEncodingException isr new InputStreamReader is BufferedReader rd new BufferedReader isr String helperClassName rd readLine rd close if helperClassName null equals helperClassName helper newHelper helperClassName catch Exception ex System out println SERVICE_ID if helper null return helper else try return new ProjectHelperImpl catch Throwable String message getClass getName getMessage throw new BuildException message private static ProjectHelper newHelper String helperClass throws BuildException ClassLoader classLoader getContextClassLoader try Class clazz null if classLoader null try clazz classLoader loadClass helperClass catch ClassNotFoundException ex if clazz null clazz Class forName helperClass return ProjectHelper clazz newInstance catch Exception throw new BuildException public static ClassLoader getContextClassLoader if LoaderUtils isContextLoaderAvailable return null return LoaderUtils getContextClassLoader public static void configure Object target AttributeList attrs Project project throws BuildException if target instanceof TaskAdapter target TaskAdapter target getProxy IntrospectionHelper ih IntrospectionHelper getHelper target getClass project addBuildListener ih for int attrs getLength String value replaceProperties project attrs getValue project getProperties try ih setAttribute project target attrs getName toLowerCase Locale US value catch BuildException be if attrs getName equals throw be public static void addText Project project Object target char buf int start int count throws BuildException addText project target new String buf start count public static void addText Project project Object target String text throws BuildException if text null return if target instanceof TaskAdapter target TaskAdapter target getProxy IntrospectionHelper getHelper target getClass addText project target text public static void storeChild Project project Object parent Object child String tag IntrospectionHelper ih IntrospectionHelper getHelper parent getClass ih storeElement project parent child tag public static String replaceProperties Project project String value throws BuildException return project replaceProperties value public static String replaceProperties Project project String value Hashtable keys throws BuildException if value null return null Vector fragments new Vector Vector propertyRefs new Vector parsePropertyString value fragments propertyRefs StringBuffer sb new StringBuffer Enumeration fragments elements Enumeration propertyRefs elements while hasMoreElements String fragment String nextElement if fragment null String propertyName String nextElement if keys containsKey propertyName project log propertyName Project MSG_VERBOSE fragment keys containsKey propertyName String keys get propertyName propertyName sb append fragment return sb toString public static void parsePropertyString String value Vector fragments Vector propertyRefs throws BuildException int prev int pos while pos value indexOf prev if pos fragments addElement value substring prev pos if pos value length fragments addElement prev pos else if value charAt pos if value charAt pos fragments addElement prev pos else fragments addElement value substring pos pos prev pos else int endName value indexOf pos if endName throw new BuildException value String propertyName value substring pos endName fragments addElement null propertyRefs addElement propertyName prev endName if prev value length fragments addElement value substring prev', 'bug': '0'}
{'sequence': 'public class CommandlineJava implements Cloneable private Commandline vmCommand new Commandline private Commandline javaCommand new Commandline private SysProperties sysProperties new SysProperties private Path classpath null private String vmVersion private String maxMemory null private boolean executeJar false public static class SysProperties extends Environment implements Cloneable Properties sys null public String getVariables throws BuildException String props super getVariables if props null return null for int props length props props return props public int size return variables size public void setSystem throws BuildException try sys System getProperties Properties new Properties for Enumeration sys keys hasMoreElements Object nextElement put sys get for Enumeration variables elements hasMoreElements Environment Variable Environment Variable nextElement put getKey getValue System setProperties catch SecurityException throw new BuildException public void restoreSystem throws BuildException if sys null throw new BuildException try System setProperties sys sys null catch SecurityException throw new BuildException public Object clone try SysProperties SysProperties super clone variables Vector variables clone return catch CloneNotSupportedException return null public CommandlineJava setVm JavaEnvUtils getJreExecutable setVmversion JavaEnvUtils getJavaVersion public Commandline Argument createArgument return javaCommand createArgument public Commandline Argument createVmArgument return vmCommand createArgument public void addSysproperty Environment Variable sysp sysProperties addVariable sysp public void setVm String vm vmCommand setExecutable vm public void setVmversion String value vmVersion value public void setJar String jarpathname javaCommand setExecutable jarpathname executeJar true public String getJar if executeJar return javaCommand getExecutable return null public void setClassname String classname javaCommand setExecutable classname executeJar false public String getClassname if executeJar return javaCommand getExecutable return null public Path createClasspath Project if classpath null classpath new Path return classpath public String getVmversion return vmVersion public String getCommandline String result new String size int pos String vmArgs getActualVMCommand getCommandline result pos vmArgs System arraycopy vmArgs result pos vmArgs length pos vmArgs length if sysProperties size System arraycopy sysProperties getVariables result pos sysProperties size pos sysProperties size Path fullClasspath classpath null classpath concatSystemClasspath null if fullClasspath null fullClasspath toString trim length result pos result pos fullClasspath toString if executeJar result pos System arraycopy javaCommand getCommandline result pos javaCommand size return result public void setMaxmemory String max this maxMemory max public String toString return Commandline toString getCommandline public String describeCommand return Commandline describeCommand getCommandline public String describeJavaCommand return Commandline describeCommand getJavaCommand private Commandline getActualVMCommand Commandline actualVMCommand Commandline vmCommand clone if maxMemory null if vmVersion startsWith actualVMCommand createArgument setValue maxMemory else actualVMCommand createArgument setValue maxMemory return actualVMCommand public int size int size getActualVMCommand size javaCommand size sysProperties size Path fullClasspath classpath null classpath concatSystemClasspath null if fullClasspath null fullClasspath toString trim length size if executeJar size return size public Commandline getJavaCommand return javaCommand public Commandline getVmCommand return getActualVMCommand public Path getClasspath return classpath public void setSystemProperties throws BuildException sysProperties setSystem public void restoreSystemProperties throws BuildException sysProperties restoreSystem public SysProperties getSystemProperties return sysProperties public Object clone CommandlineJava new CommandlineJava vmCommand Commandline vmCommand clone javaCommand Commandline javaCommand clone sysProperties SysProperties sysProperties clone maxMemory maxMemory if classpath null classpath Path classpath clone vmVersion vmVersion executeJar executeJar return public void clearJavaArgs javaCommand clearArgs', 'bug': '0'}
{'sequence': 'public final class TailFilter extends BaseParamFilterReader implements ChainableReader private static final String LINES_KEY private long linesRead private long lines private char buffer new char private int returnedCharPos private boolean completedReadAhead false private int bufferPos public TailFilter super public TailFilter final Reader in super in public final int read throws IOException if getInitialized initialize setInitialized true if completedReadAhead int ch while ch in read if buffer length bufferPos if returnedCharPos final char tmpBuffer new char buffer length System arraycopy buffer returnedCharPos tmpBuffer buffer length returnedCharPos buffer tmpBuffer bufferPos bufferPos returnedCharPos returnedCharPos else final char tmpBuffer new char buffer length System arraycopy buffer tmpBuffer bufferPos buffer tmpBuffer if ch ch linesRead if linesRead lines int for returnedCharPos buffer buffer returnedCharPos linesRead if ch break buffer bufferPos char ch bufferPos completedReadAhead true returnedCharPos if returnedCharPos bufferPos return else return buffer returnedCharPos public final void setLines final long lines this lines lines private final long getLines return lines public final Reader chain final Reader rdr TailFilter newFilter new TailFilter rdr newFilter setLines getLines newFilter setInitialized true return newFilter private final void initialize Parameter params getParameters if params null for int params length if LINES_KEY equals params getName setLines new Long params getValue longValue break', 'bug': '0'}
{'sequence': 'public interface XSLTLoggerAware void setLogger XSLTLogger', 'bug': '0'}
{'sequence': 'public class MailLogger extends DefaultLogger private StringBuffer buffer new StringBuffer public void buildFinished BuildEvent event super buildFinished event Project project event getProject Hashtable properties project getProperties Properties fileProperties new Properties String filename String properties get if filename null InputStream is null try is new FileInputStream filename fileProperties load is catch IOException ioe finally if is null try is close catch IOException for Enumeration fileProperties keys hasMoreElements String key String nextElement String value fileProperties getProperty key properties put key project replaceProperties value boolean success event getException null String prefix success try boolean notify Project toBoolean getValue properties prefix if notify return String mailhost getValue properties String from getValue properties null String toList getValue properties prefix null String subject getValue properties prefix success sendMail mailhost from toList subject buffer toString catch Exception System out println printStackTrace System err protected void log String message buffer append message append StringUtils LINE_SEP private String getValue Hashtable properties String name String defaultValue throws Exception String propertyName name String value String properties get propertyName if value null value defaultValue if value null throw new Exception propertyName return value private void sendMail String mailhost String from String toList String subject String message throws IOException MailMessage mailMessage new MailMessage mailhost mailMessage from from StringTokenizer new StringTokenizer toList false while hasMoreTokens mailMessage to nextToken mailMessage setSubject subject PrintStream ps mailMessage getPrintStream ps println message mailMessage sendAndClose', 'bug': '0'}
{'sequence': 'public class Concat extends Task private File destinationFile null private boolean append false private String encoding null private StringBuffer textBuffer public Concat public void setDestfile File destinationFile this destinationFile destinationFile public void setAppend boolean append this append append public void setEncoding String encoding this encoding encoding public void addFileset FileSet set fileSets addElement set public void addFilelist FileList list fileSets addElement list public void addText String text if textBuffer null textBuffer new StringBuffer text length textBuffer append text public void execute throws BuildException sanitizeText if fileSets size textBuffer null throw new BuildException if fileSets size textBuffer null throw new BuildException boolean savedAppend append try for Enumeration fileSets elements hasMoreElements File fileSetBase null String srcFiles null Object next nextElement if next instanceof FileSet FileSet fileSet FileSet next DirectoryScanner scanner fileSet getDirectoryScanner project fileSetBase fileSet getDir project srcFiles scanner getIncludedFiles else if next instanceof FileList FileList fileList FileList next fileSetBase fileList getDir project srcFiles fileList getFiles project if srcFiles null catFiles fileSetBase srcFiles finally append savedAppend catText public void reset append false destinationFile null encoding null fileSets new Vector private void catFiles File base String files final int len files length String input new String len for int len File current new File base files if current exists log current Project MSG_ERR continue input current getAbsolutePath if encoding null OutputStream os null InputStream is null try if destinationFile null os new LogOutputStream this Project MSG_WARN else os new FileOutputStream destinationFile getAbsolutePath append append true for int len if destinationFile null destinationFile getAbsolutePath equals input log destinationFile getName Project MSG_WARN is new FileInputStream input byte buffer new byte while true int bytesRead is read buffer break os write buffer bytesRead os flush is close is null catch IOException ioex throw new BuildException ioex getMessage ioex finally if is null try is close catch Exception ignore if os null try os close catch Exception ignore PrintWriter out null BufferedReader in null try if destinationFile null out new PrintWriter new OutputStreamWriter new LogOutputStream this Project MSG_WARN else out new PrintWriter new OutputStreamWriter new FileOutputStream destinationFile getAbsolutePath append encoding append true for int len in new BufferedReader new InputStreamReader new FileInputStream input encoding String line while line in readLine null out println line in close in null catch IOException ioe throw new BuildException ioe getMessage ioe finally if in null try in close catch Exception ignore if out null try out close catch Exception ignore private void catText if textBuffer null return String text textBuffer toString text ProjectHelper replaceProperties project text project getProperties FileWriter writer null if destinationFile null try writer new FileWriter destinationFile getAbsolutePath append catch IOException ioe throw new BuildException ioe BufferedReader reader null try reader new BufferedReader new StringReader text String line while line reader readLine null if destinationFile null log line Project MSG_WARN else writer write line writer write StringUtils LINE_SEP writer flush catch IOException ioe throw new BuildException ioe finally if reader null try reader close catch Exception ignore if writer null try writer close catch Exception ignore private void sanitizeText if textBuffer null if textBuffer toString trim length textBuffer null', 'bug': '0'}
{'sequence': 'public class BuildEvent extends EventObject private Project project private Target target private Task task private String message private int priority Project MSG_VERBOSE private Throwable exception public BuildEvent Project project super project this project project this target null this task null public BuildEvent Target target super target this project target getProject this target target this task null public BuildEvent Task task super task this project task getProject this target task getOwningTarget this task task public void setMessage String message int priority this message message this priority priority public void setException Throwable exception this exception exception public Project getProject return project public Target getTarget return target public Task getTask return task public String getMessage return message public int getPriority return priority public Throwable getException return exception', 'bug': '0'}
{'sequence': 'public class Delete extends MatchingTask protected File file null protected File dir null protected Vector filesets new Vector protected boolean usedMatchingTask false protected boolean includeEmpty false private int verbosity Project MSG_VERBOSE private boolean quiet false private boolean failonerror true public void setFile File file this file file public void setDir File dir this dir dir public void setVerbose boolean verbose if verbose this verbosity Project MSG_INFO else this verbosity Project MSG_VERBOSE public void setQuiet boolean quiet this quiet quiet if quiet this failonerror false public void setFailOnError boolean failonerror this failonerror failonerror public void setIncludeEmptyDirs boolean includeEmpty this includeEmpty includeEmpty public void addFileset FileSet set filesets addElement set public PatternSet NameEntry createInclude usedMatchingTask true return super createInclude public PatternSet NameEntry createIncludesFile usedMatchingTask true return super createIncludesFile public PatternSet NameEntry createExclude usedMatchingTask true return super createExclude public PatternSet NameEntry createExcludesFile usedMatchingTask true return super createExcludesFile public PatternSet createPatternSet usedMatchingTask true return super createPatternSet public void setIncludes String includes usedMatchingTask true super setIncludes includes public void setExcludes String excludes usedMatchingTask true super setExcludes excludes public void setDefaultexcludes boolean useDefaultExcludes usedMatchingTask true super setDefaultexcludes useDefaultExcludes public void setIncludesfile File includesfile usedMatchingTask true super setIncludesfile includesfile public void setExcludesfile File excludesfile usedMatchingTask true super setExcludesfile excludesfile public void execute throws BuildException if usedMatchingTask log if file null dir null filesets size throw new BuildException if quiet failonerror throw new BuildException location if file null if file exists if file isDirectory log file getAbsolutePath else log file getAbsolutePath if file delete String message file getAbsolutePath if failonerror throw new BuildException message else log message quiet Project MSG_VERBOSE Project MSG_WARN else log file getAbsolutePath Project MSG_VERBOSE if dir null dir exists dir isDirectory usedMatchingTask if verbosity Project MSG_VERBOSE log dir getAbsolutePath removeDir dir for int filesets size FileSet fs FileSet filesets elementAt try DirectoryScanner ds fs getDirectoryScanner project String files ds getIncludedFiles String dirs ds getIncludedDirectories removeFiles fs getDir project files dirs catch BuildException be if failonerror throw be else log be getMessage quiet Project MSG_VERBOSE Project MSG_WARN if usedMatchingTask dir null try DirectoryScanner ds super getDirectoryScanner dir String files ds getIncludedFiles String dirs ds getIncludedDirectories removeFiles dir files dirs catch BuildException be if failonerror throw be else log be getMessage quiet Project MSG_VERBOSE Project MSG_WARN protected void removeDir File String list list if list null list new String for int list length String list File new File if isDirectory removeDir else log getAbsolutePath verbosity if delete String message getAbsolutePath if failonerror throw new BuildException message else log message quiet Project MSG_VERBOSE Project MSG_WARN log getAbsolutePath verbosity if delete String message dir getAbsolutePath if failonerror throw new BuildException message else log message quiet Project MSG_VERBOSE Project MSG_WARN protected void removeFiles File String files String dirs if files length log files length getAbsolutePath for int files length File new File files log getAbsolutePath verbosity if delete String message getAbsolutePath if failonerror throw new BuildException message else log message quiet Project MSG_VERBOSE Project MSG_WARN if dirs length includeEmpty int dirCount for int dirs length File dir new File dirs String dirFiles dir list if dirFiles null dirFiles length log dir getAbsolutePath verbosity if dir delete String message dir getAbsolutePath if failonerror throw new BuildException message else log message quiet Project MSG_VERBOSE Project MSG_WARN else dirCount if dirCount log dirCount dirCount getAbsolutePath', 'bug': '0'}
{'sequence': 'public class Untar extends Expand private UntarCompressionMethod compression new UntarCompressionMethod public void setCompression UntarCompressionMethod method compression method protected void expandFile FileUtils fileUtils File srcF File dir TarInputStream tis null try log srcF dir Project MSG_INFO tis new TarInputStream compression decompress srcF new BufferedInputStream new FileInputStream srcF TarEntry te null while te tis getNextEntry null extractFile fileUtils srcF dir tis te getName te getModTime te isDirectory log Project MSG_VERBOSE catch IOException ioe throw new BuildException srcF getPath ioe location finally if tis null try tis close catch IOException public static final class UntarCompressionMethod extends EnumeratedAttribute private static final String NONE private static final String GZIP private static final String BZIP2 public UntarCompressionMethod super setValue NONE public String getValues return new String NONE GZIP BZIP2 private InputStream decompress final File file final InputStream istream throws IOException BuildException final String value getValue if GZIP equals value return new GZIPInputStream istream else if BZIP2 equals value final char magic new char for int magic length if istream read magic throw new BuildException file toString return new CBZip2InputStream istream return istream', 'bug': '0'}
{'sequence': 'public class ManifestTask extends Task private Manifest nestedManifest new Manifest private File manifestFile private Mode mode public static class Mode extends EnumeratedAttribute public String getValues return new String public ManifestTask mode new Mode mode setValue public void addConfiguredSection Manifest Section section throws ManifestException nestedManifest addConfiguredSection section public void addConfiguredAttribute Manifest Attribute attribute throws ManifestException nestedManifest addConfiguredAttribute attribute public void setFile File manifestFile public void setMode Mode mode public void execute throws BuildException if manifestFile null throw new BuildException Manifest toWrite Manifest getDefaultManifest Manifest current null BuildException error null if manifestFile exists FileReader null try new FileReader manifestFile current new Manifest catch ManifestException error new BuildException manifestFile location catch IOException error new BuildException manifestFile location finally if null try close catch IOException try if mode getValue equals manifestFile exists if current null toWrite merge current else if error null throw error toWrite merge nestedManifest catch ManifestException throw new BuildException location if toWrite equals current log Project MSG_VERBOSE return PrintWriter null try new PrintWriter new FileWriter manifestFile toWrite write catch IOException throw new BuildException manifestFile location finally if null close', 'bug': '0'}
{'sequence': 'public class AsiExtraField implements ZipExtraField UnixStat Cloneable private static final ZipShort HEADER_ID new ZipShort private int mode private int uid private int gid private String link private boolean dirFlag false private CRC32 crc new CRC32 public AsiExtraField public ZipShort getHeaderId return HEADER_ID public ZipShort getLocalFileDataLength getLinkedFile getBytes length public ZipShort getCentralDirectoryLength return getLocalFileDataLength public byte getLocalFileDataData byte data new byte getLocalFileDataLength getValue System arraycopy new ZipShort getMode getBytes data byte linkArray getLinkedFile getBytes System arraycopy new ZipLong linkArray length getBytes data System arraycopy new ZipShort getUserId getBytes data System arraycopy new ZipShort getGroupId getBytes data System arraycopy linkArray data linkArray length crc reset crc update data long checksum crc getValue byte result new byte data length System arraycopy new ZipLong checksum getBytes result System arraycopy data result data length return result public byte getCentralDirectoryData return getLocalFileDataData public void setUserId int uid this uid uid public int getUserId return uid public void setGroupId int gid this gid gid public int getGroupId return gid public void setLinkedFile String name link name mode getMode mode public String getLinkedFile return link public boolean isLink return getLinkedFile length public void setMode int mode this mode getMode mode public int getMode return mode public void setDirectory boolean dirFlag this dirFlag dirFlag mode getMode mode public boolean isDirectory return dirFlag isLink public void parseFromLocalFileData byte data int offset int length throws ZipException long givenChecksum new ZipLong data offset getValue byte tmp new byte length System arraycopy data offset tmp length crc reset crc update tmp long realChecksum crc getValue if givenChecksum realChecksum throw new ZipException Long toHexString givenChecksum Long toHexString realChecksum int newMode new ZipShort tmp getValue byte linkArray new byte int new ZipLong tmp getValue uid new ZipShort tmp getValue gid new ZipShort tmp getValue if linkArray length link else System arraycopy tmp linkArray linkArray length link new String linkArray setDirectory newMode DIR_FLAG setMode newMode protected int getMode int mode int type FILE_FLAG if isLink type LINK_FLAG else if isDirectory type DIR_FLAG return type mode PERM_MASK', 'bug': '0'}
{'sequence': 'public class Substitution extends DataType public static final String DATA_TYPE_NAME private String expression public Substitution this expression null public void setExpression String expression this expression expression public String getExpression Project if isReference return getRef getExpression return expression public Substitution getRef Project if checked Stack stk new Stack stk push this dieOnCircularReference stk Object ref getReferencedObject if instanceof Substitution String msg ref getRefId throw new BuildException msg else return Substitution', 'bug': '0'}
{'sequence': 'public final class LineContains extends BaseParamFilterReader implements ChainableReader private static final String CONTAINS_KEY private Vector contains new Vector private String line null public LineContains super public LineContains final Reader in super in public final int read throws IOException if getInitialized initialize setInitialized true int ch if line null ch line charAt if line length line null else line line substring else String goodLine null line readLine if line null ch else int containsSize contains size for int containsSize String containsStr String contains elementAt if line indexOf containsStr line null break return read return ch public final void addConfiguredContains final Contains contains this contains addElement contains getValue private void setContains final Vector contains this contains contains private final Vector getContains return contains public final Reader chain final Reader rdr LineContains newFilter new LineContains rdr newFilter setContains getContains newFilter setInitialized true return newFilter private final void initialize Parameter params getParameters if params null for int params length if CONTAINS_KEY equals params getType contains addElement params getValue public static class Contains private String value public final void setValue String contains value contains public final String getValue return value', 'bug': '0'}
{'sequence': 'public abstract class MatchingTask extends Task implements SelectorContainer protected boolean useDefaultExcludes true protected FileSet fileset new FileSet public void setProject Project project super setProject project fileset setProject project public PatternSet NameEntry createInclude return fileset createInclude public PatternSet NameEntry createIncludesFile return fileset createIncludesFile public PatternSet NameEntry createExclude return fileset createExclude public PatternSet NameEntry createExcludesFile return fileset createExcludesFile public PatternSet createPatternSet return fileset createPatternSet public void setIncludes String includes fileset setIncludes includes public void XsetItems String itemString log Project MSG_WARN if itemString null itemString equals itemString equals createInclude setName else StringTokenizer tok new StringTokenizer itemString while tok hasMoreTokens String pattern tok nextToken trim if pattern length public void setExcludes String excludes fileset setExcludes excludes public void XsetIgnore String ignoreString log Project MSG_WARN if ignoreString null ignoreString length StringTokenizer tok new StringTokenizer ignoreString false while tok hasMoreTokens public void setDefaultexcludes boolean useDefaultExcludes this useDefaultExcludes useDefaultExcludes protected DirectoryScanner getDirectoryScanner File baseDir fileset setDir baseDir fileset setDefaultexcludes useDefaultExcludes return fileset getDirectoryScanner project public void setIncludesfile File includesfile fileset setIncludesfile includesfile public void setExcludesfile File excludesfile fileset setExcludesfile excludesfile public void setCaseSensitive boolean isCaseSensitive fileset setCaseSensitive isCaseSensitive public void setFollowSymlinks boolean followSymlinks fileset setFollowSymlinks followSymlinks public boolean hasSelectors return fileset hasSelectors public int selectorCount return fileset selectorCount public FileSelector getSelectors Project return fileset getSelectors public Enumeration selectorElements return fileset selectorElements public void appendSelector FileSelector selector fileset appendSelector selector public void addSelector SelectSelector selector fileset addSelector selector public void addAnd AndSelector selector fileset addAnd selector public void addOr OrSelector selector fileset addOr selector public void addNot NotSelector selector fileset addNot selector public void addNone NoneSelector selector fileset addNone selector public void addMajority MajoritySelector selector fileset addMajority selector public void addDate DateSelector selector fileset addDate selector public void addSize SizeSelector selector fileset addSize selector public void addFilename FilenameSelector selector fileset addFilename selector public void addCustom ExtendSelector selector fileset addCustom selector public void addContains ContainsSelector selector fileset addContains selector public void addPresent PresentSelector selector fileset addPresent selector public void addDepth DepthSelector selector fileset addDepth selector public void addDepend DependSelector selector fileset addDepend selector', 'bug': '0'}
{'sequence': 'public class Copy extends Task protected Vector filesets new Vector protected boolean filtering false protected boolean preserveLastModified false protected boolean forceOverwrite false protected boolean flatten false protected int verbosity Project MSG_VERBOSE protected boolean includeEmpty true private boolean failonerror true protected Hashtable fileCopyMap new Hashtable protected Hashtable dirCopyMap new Hashtable protected Hashtable completeDirMap new Hashtable protected Mapper mapperElement null private Vector filterChains new Vector private Vector filterSets new Vector private FileUtils fileUtils private String encoding null public Copy fileUtils FileUtils newFileUtils protected FileUtils getFileUtils return fileUtils public void setFile File file this file file public void setTofile File destFile this destFile destFile public void setTodir File destDir this destDir destDir public FilterChain createFilterChain FilterChain filterChain new FilterChain filterChains addElement filterChain return filterChain public FilterSet createFilterSet FilterSet filterSet new FilterSet filterSets addElement filterSet return filterSet public void setPreserveLastModified String preserve setPreserveLastModified Project toBoolean preserve public void setPreserveLastModified boolean preserve preserveLastModified preserve public boolean getPreserveLastModified return preserveLastModified protected Vector getFilterSets return filterSets protected Vector getFilterChains return filterChains public void setFiltering boolean filtering this filtering filtering public void setOverwrite boolean overwrite this forceOverwrite overwrite public void setFlatten boolean flatten this flatten flatten public void setVerbose boolean verbose if verbose this verbosity Project MSG_INFO else this verbosity Project MSG_VERBOSE public void setIncludeEmptyDirs boolean includeEmpty this includeEmpty includeEmpty public void setFailOnError boolean failonerror this failonerror failonerror public void addFileset FileSet set filesets addElement set public Mapper createMapper throws BuildException if mapperElement null throw new BuildException location mapperElement new Mapper project return mapperElement public void setEncoding String encoding this encoding encoding public String getEncoding return encoding public void execute throws BuildException File savedDestFile destFile File savedDestDir destDir FileSet savedFileSet null if file null destFile null filesets size savedFileSet FileSet filesets elementAt validateAttributes try if file null if file exists if destFile null destFile new File destDir file getName if forceOverwrite file lastModified destFile lastModified fileCopyMap put file getAbsolutePath destFile getAbsolutePath else log file destFile Project MSG_VERBOSE else String message file getAbsolutePath if failonerror log message else throw new BuildException message for int filesets size FileSet fs FileSet filesets elementAt DirectoryScanner ds fs getDirectoryScanner project File fromDir fs getDir project String srcFiles ds getIncludedFiles String srcDirs ds getIncludedDirectories boolean isEverythingIncluded ds isEverythingIncluded if isEverythingIncluded flatten mapperElement null completeDirMap put fromDir destDir scan fromDir destDir srcFiles srcDirs doFileOperations finally file savedFile destFile savedDestFile destDir savedDestDir if savedFileSet null filesets insertElementAt savedFileSet fileCopyMap clear dirCopyMap clear completeDirMap clear protected void validateAttributes throws BuildException if file null filesets size throw new BuildException if destFile null destDir null throw new BuildException if destFile null destDir null throw new BuildException if file null file exists file isDirectory throw new BuildException if destFile null filesets size if filesets size throw new BuildException else FileSet fs FileSet filesets elementAt DirectoryScanner ds fs getDirectoryScanner project String srcFiles ds getIncludedFiles if srcFiles length throw new BuildException else if srcFiles length if file null file new File ds getBasedir srcFiles filesets removeElementAt else throw new BuildException else throw new BuildException if destFile null destDir fileUtils getParentFile destFile protected void scan File fromDir File toDir String files String dirs FileNameMapper mapper null if mapperElement null mapper mapperElement getImplementation else if flatten mapper new FlatFileNameMapper else mapper new IdentityMapper buildMap fromDir toDir files mapper fileCopyMap if includeEmpty buildMap fromDir toDir dirs mapper dirCopyMap protected void buildMap File fromDir File toDir String names FileNameMapper mapper Hashtable map String toCopy null if forceOverwrite Vector new Vector for int names length if mapper mapFileName names null addElement names toCopy new String size copyInto toCopy else SourceFileScanner ds new SourceFileScanner this toCopy ds restrict names fromDir toDir mapper for int toCopy length File src new File fromDir toCopy File dest new File toDir mapper mapFileName toCopy map put src getAbsolutePath dest getAbsolutePath protected void doFileOperations if fileCopyMap size log fileCopyMap size fileCopyMap size destDir getAbsolutePath Enumeration fileCopyMap keys while hasMoreElements String fromFile String nextElement String toFile String fileCopyMap get fromFile if fromFile equals toFile log fromFile verbosity continue try log fromFile toFile verbosity FilterSetCollection executionFilters new FilterSetCollection if filtering executionFilters addFilterSet project getGlobalFilterSet for Enumeration filterEnum filterSets elements filterEnum hasMoreElements executionFilters addFilterSet FilterSet filterEnum nextElement fileUtils copyFile fromFile toFile executionFilters filterChains forceOverwrite preserveLastModified encoding project catch IOException ioe String msg fromFile toFile ioe getMessage throw new BuildException msg ioe location if includeEmpty Enumeration dirCopyMap elements int count while hasMoreElements File new File String nextElement if exists if mkdirs log getAbsolutePath Project MSG_ERR else count if count log count count destDir getAbsolutePath', 'bug': '0'}
{'sequence': 'public class DTDLocation private String publicId null private String location null public void setPublicId String publicId this publicId publicId public void setLocation String location this location location public String getPublicId return publicId public String getLocation return location', 'bug': '0'}
{'sequence': 'public class Typedef extends Definer protected void addDefinition String name Class throws BuildException project addDataTypeDefinition name', 'bug': '0'}
{'sequence': 'public class FlexInteger private Integer value public FlexInteger String value this value Integer decode value public int intValue return value intValue public String toString return value toString', 'bug': '0'}
{'sequence': 'public class Sleep extends Task private boolean failOnError true private int seconds private int hours private int minutes private int milliseconds public Sleep public void setSeconds int seconds this seconds seconds public void setHours int hours this hours hours public void setMinutes int minutes this minutes minutes public void setMilliseconds int milliseconds this milliseconds milliseconds public void doSleep long millis try Thread sleep millis catch InterruptedException ie public void setFailOnError boolean failOnError this failOnError failOnError private long getSleepTime return long hours minutes seconds milliseconds public void validate throws BuildException if getSleepTime throw new BuildException public void execute throws BuildException try validate long sleepTime getSleepTime log sleepTime Project MSG_VERBOSE doSleep sleepTime catch Exception if failOnError throw new BuildException else String text toString log text Project MSG_ERR', 'bug': '0'}
{'sequence': 'class ChangeLogWriter private static final SimpleDateFormat c_outputDate new SimpleDateFormat private static final SimpleDateFormat c_outputTime new SimpleDateFormat public void printChangeLog final PrintWriter output final CVSEntry entries output println output println for int entries length final CVSEntry entry entries printEntry output entry output println output flush output close private void printEntry final PrintWriter output final CVSEntry entry output println output println c_outputDate format entry getDate output println c_outputTime format entry getDate output println entry getAuthor final Enumeration enumeration entry getFiles elements while enumeration hasMoreElements final RCSFile file RCSFile enumeration nextElement output println output println file getName output println file getRevision final String previousRevision file getPreviousRevision if previousRevision null output println previousRevision output println output println entry getComment output println', 'bug': '0'}
{'sequence': 'class RedirectingStreamHandler extends PumpStreamHandler RedirectingStreamHandler final ChangeLogParser parser super new RedirectingOutputStream parser new ByteArrayOutputStream String getErrors try final ByteArrayOutputStream error ByteArrayOutputStream getErr return error toString catch final Exception return null public void stop super stop try getErr close getOut close catch final IOException throw new BuildException', 'bug': '0'}
{'sequence': 'public class Reference private String refid public Reference super public Reference String id this setRefId id public void setRefId String id refid id public String getRefId return refid public Object getReferencedObject Project project throws BuildException if refid null throw new BuildException Object project getReference refid if null throw new BuildException refid return', 'bug': '0'}
{'sequence': 'public class Chmod extends ExecuteOn private FileSet defaultSet new FileSet private boolean defaultSetDefined false private boolean havePerm false public Chmod super setExecutable super setParallel true super setSkipEmptyFilesets true public void setProject Project project super setProject project defaultSet setProject project public void setFile File src FileSet fs new FileSet fs setDir new File src getParent fs createInclude setName src getName addFileset fs public void setDir File src defaultSet setDir src public void setPerm String perm createArg setValue perm havePerm true public PatternSet NameEntry createInclude defaultSetDefined true return defaultSet createInclude public PatternSet NameEntry createExclude defaultSetDefined true return defaultSet createExclude public PatternSet createPatternSet defaultSetDefined true return defaultSet createPatternSet public void setIncludes String includes defaultSetDefined true defaultSet setIncludes includes public void setExcludes String excludes defaultSetDefined true defaultSet setExcludes excludes public void setDefaultexcludes boolean useDefaultExcludes defaultSetDefined true defaultSet setDefaultexcludes useDefaultExcludes protected void checkConfiguration if havePerm throw new BuildException location if defaultSetDefined defaultSet getDir project null addFileset defaultSet super checkConfiguration public void execute throws BuildException if defaultSetDefined defaultSet getDir project null try super execute finally if defaultSetDefined defaultSet getDir project null filesets removeElement defaultSet else if isValidOs Execute execute prepareExec Commandline cloned Commandline cmdl clone cloned createArgument setValue defaultSet getDir project getPath try execute setCommandline cloned getCommandline runExecute execute catch IOException throw new BuildException location finally logFlush public void setExecutable String throw new BuildException taskType location public void setCommand Commandline cmdl throw new BuildException taskType location public void setSkipEmptyFilesets boolean skip throw new BuildException taskType location protected boolean isValidOs return Os isFamily super isValidOs', 'bug': '0'}
{'sequence': 'public final class StringUtils public static final String LINE_SEP System getProperty public static Vector lineSplit String data return split data public static Vector split String data int ch Vector elems new Vector int pos int while pos data indexOf ch String elem data substring pos elems addElement elem pos elems addElement data substring return elems public static String replace String data String from String to StringBuffer buf new StringBuffer data length int pos int while pos data indexOf from buf append data substring pos append to pos from length buf append data substring return buf toString public static String getStackTrace Throwable StringWriter sw new StringWriter PrintWriter pw new PrintWriter sw true printStackTrace pw pw flush pw close return sw toString', 'bug': '0'}
{'sequence': 'public class XmlProperty extends org apache tools ant Task private File src private String prefix private boolean keepRoot true private boolean validate false private boolean collapseAttributes false private org w3c dom Document document public XmlProperty super public void init super init public void execute throws BuildException BufferedInputStream configurationStream null try configurationStream new BufferedInputStream new FileInputStream src DocumentBuilderFactory factory DocumentBuilderFactory newInstance factory setValidating validate factory setNamespaceAware false DocumentBuilder builder factory newDocumentBuilder document builder parse configurationStream Element topElement document getDocumentElement NodeList topChildren topElement getChildNodes int numChildren topChildren getLength log prefix Project MSG_DEBUG if keepRoot addNodeRecursively topElement prefix else for int numChildren addNodeRecursively topChildren item prefix catch SAXException sxe Exception sxe if sxe getException null sxe getException throw new BuildException catch ParserConfigurationException pce throw new BuildException pce catch IOException ioe throw new BuildException ioe finally if configurationStream null try configurationStream close catch Exception void addNodeRecursively org w3c dom Node node String prefix if node hasAttributes org w3c dom NamedNodeMap nodeAttributes node getAttributes for int nodeAttributes getLength Node attributeNode nodeAttributes item String attributeName if collapseAttributes attributeName prefix prefix trim equals node getNodeName attributeNode getNodeName else attributeName prefix prefix trim equals node getNodeName attributeNode getNodeName String attributeValue attributeNode getNodeValue log attributeName attributeValue Project MSG_DEBUG project setNewProperty attributeName attributeValue if node getNodeType Node TEXT_NODE String nodeText node getNodeValue if nodeText trim length log prefix nodeText Project MSG_DEBUG project setNewProperty prefix nodeText if node hasChildNodes prefix prefix trim equals node getNodeName org w3c dom NodeList nodeChildren node getChildNodes int numChildren nodeChildren getLength for int numChildren addNodeRecursively nodeChildren item prefix public void setFile File src this src src public void setPrefix String prefix this prefix prefix trim public void setKeeproot boolean keepRoot this keepRoot keepRoot public void setValidate boolean validate this validate validate public void setCollapseAttributes boolean collapseAttributes this collapseAttributes collapseAttributes', 'bug': '1'}
{'sequence': 'public class TaskAdapter extends Task private Object proxy public static void checkTaskClass final Class taskClass final Project project try final Method executeM taskClass getMethod null if Void TYPE equals executeM getReturnType final String message executeM getReturnType taskClass project log message Project MSG_WARN catch NoSuchMethodException final String message taskClass project log message Project MSG_ERR throw new BuildException message public void execute throws BuildException Method setProjectM null try Class proxy getClass setProjectM getMethod new Class Project class if setProjectM null setProjectM invoke proxy new Object project catch NoSuchMethodException catch Exception ex log proxy getClass Project MSG_ERR throw new BuildException ex Method executeM null try Class proxy getClass executeM getMethod new Class if executeM null log proxy getClass Project MSG_ERR throw new BuildException proxy getClass executeM invoke proxy null return catch java lang reflect InvocationTargetException ie log proxy getClass Project MSG_ERR Throwable ie getTargetException if instanceof BuildException throw BuildException else throw new BuildException catch Exception ex log proxy getClass Project MSG_ERR throw new BuildException ex public void setProxy Object this proxy public Object getProxy return this proxy', 'bug': '1'}
{'sequence': 'public final class PrefixLines extends BaseParamFilterReader implements ChainableReader private static final String PREFIX_KEY private String prefix null private String queuedData null public PrefixLines super public PrefixLines final Reader in super in public final int read throws IOException if getInitialized initialize setInitialized true int ch if queuedData null queuedData length queuedData null if queuedData null ch queuedData charAt queuedData queuedData substring if queuedData length queuedData null else queuedData readLine if queuedData null ch else if prefix null queuedData prefix queuedData return read return ch public final void setPrefix final String prefix this prefix prefix private final String getPrefix return prefix public final Reader chain final Reader rdr PrefixLines newFilter new PrefixLines rdr newFilter setPrefix getPrefix newFilter setInitialized true return newFilter private final void initialize Parameter params getParameters if params null for int params length if PREFIX_KEY equals params getName prefix params getValue break', 'bug': '0'}
{'sequence': 'public class Javac13 extends DefaultCompilerAdapter private static final int MODERN_COMPILER_SUCCESS public boolean execute throws BuildException attributes log Project MSG_VERBOSE Commandline cmd setupModernJavacCommand try Class Class forName Object compiler newInstance Method compile getMethod new Class new String getClass int result Integer compile invoke compiler new Object cmd getArguments intValue return result MODERN_COMPILER_SUCCESS catch Exception ex if ex instanceof BuildException throw BuildException ex else throw new BuildException ex location', 'bug': '0'}
{'sequence': 'public final class HeadFilter extends BaseParamFilterReader implements ChainableReader private static final String LINES_KEY private long linesRead private long lines public HeadFilter super public HeadFilter final Reader in super in public final int read throws IOException if getInitialized initialize setInitialized true int ch if linesRead lines ch in read if ch linesRead return ch public final void setLines final long lines this lines lines private final long getLines return lines public final Reader chain final Reader rdr HeadFilter newFilter new HeadFilter rdr newFilter setLines getLines newFilter setInitialized true return newFilter private final void initialize Parameter params getParameters if params null for int params length if LINES_KEY equals params getName lines new Long params getValue longValue break', 'bug': '0'}
{'sequence': 'public abstract class DefaultCompilerAdapter implements CompilerAdapter protected Path src protected File destDir protected String encoding protected boolean debug false protected boolean optimize false protected boolean deprecation false protected boolean depend false protected boolean verbose false protected String target protected Path bootclasspath protected Path extdirs protected Path compileClasspath protected Path compileSourcepath protected Project project protected Location location protected boolean includeAntRuntime protected boolean includeJavaRuntime protected String memoryInitialSize protected String memoryMaximumSize protected File compileList protected static String lSep System getProperty protected Javac attributes private FileUtils fileUtils FileUtils newFileUtils public void setJavac Javac attributes this attributes attributes src attributes getSrcdir destDir attributes getDestdir encoding attributes getEncoding debug attributes getDebug optimize attributes getOptimize deprecation attributes getDeprecation depend attributes getDepend verbose attributes getVerbose target attributes getTarget bootclasspath attributes getBootclasspath extdirs attributes getExtdirs compileList attributes getFileList compileClasspath attributes getClasspath compileSourcepath attributes getSourcepath project attributes getProject location attributes getLocation includeAntRuntime attributes getIncludeantruntime includeJavaRuntime attributes getIncludejavaruntime memoryInitialSize attributes getMemoryInitialSize memoryMaximumSize attributes getMemoryMaximumSize public Javac getJavac return attributes protected Path getCompileClasspath Path classpath new Path project if destDir null classpath setLocation destDir if compileClasspath null if includeAntRuntime classpath addExisting Path systemClasspath else if includeAntRuntime classpath addExisting compileClasspath concatSystemClasspath else classpath addExisting compileClasspath concatSystemClasspath if includeJavaRuntime classpath addJavaRuntime return classpath protected Commandline setupJavacCommandlineSwitches Commandline cmd return setupJavacCommandlineSwitches cmd false protected Commandline setupJavacCommandlineSwitches Commandline cmd boolean useDebugLevel Path classpath getCompileClasspath Path sourcepath null if compileSourcepath null sourcepath compileSourcepath else sourcepath src String memoryParameterPrefix assumeJava11 if memoryInitialSize null if attributes isForkedJavac attributes log Project MSG_WARN else cmd createArgument setValue memoryParameterPrefix memoryInitialSize if memoryMaximumSize null if attributes isForkedJavac attributes log Project MSG_WARN else cmd createArgument setValue memoryParameterPrefix memoryMaximumSize if attributes getNowarn cmd createArgument setValue if deprecation true cmd createArgument setValue if destDir null cmd createArgument setValue cmd createArgument setFile destDir cmd createArgument setValue if assumeJava11 Path cp new Path project if bootclasspath null cp append bootclasspath if extdirs null cp addExtdirs extdirs cp append classpath cp append sourcepath cmd createArgument setPath cp else cmd createArgument setPath classpath if sourcepath size cmd createArgument setValue cmd createArgument setPath sourcepath if target null cmd createArgument setValue cmd createArgument setValue target if bootclasspath null bootclasspath size cmd createArgument setValue cmd createArgument setPath bootclasspath if extdirs null extdirs size cmd createArgument setValue cmd createArgument setPath extdirs if encoding null cmd createArgument setValue cmd createArgument setValue encoding if debug if useDebugLevel assumeJava11 String debugLevel attributes getDebugLevel if debugLevel null cmd createArgument setValue debugLevel else cmd createArgument setValue else cmd createArgument setValue else if assumeJava11 cmd createArgument setValue if optimize cmd createArgument setValue if depend if assumeJava11 cmd createArgument setValue else if assumeJava12 cmd createArgument setValue else attributes log Project MSG_WARN if verbose cmd createArgument setValue addCurrentCompilerArgs cmd return cmd protected Commandline setupModernJavacCommandlineSwitches Commandline cmd setupJavacCommandlineSwitches cmd true if attributes getSource null assumeJava13 cmd createArgument setValue cmd createArgument setValue attributes getSource return cmd protected Commandline setupModernJavacCommand Commandline cmd new Commandline setupModernJavacCommandlineSwitches cmd logAndAddFilesToCompile cmd return cmd protected Commandline setupJavacCommand return setupJavacCommand false protected Commandline setupJavacCommand boolean debugLevelCheck Commandline cmd new Commandline setupJavacCommandlineSwitches cmd debugLevelCheck logAndAddFilesToCompile cmd return cmd protected void logAndAddFilesToCompile Commandline cmd attributes log cmd describeArguments Project MSG_VERBOSE StringBuffer niceSourceList new StringBuffer if compileList length niceSourceList append niceSourceList append niceSourceList append lSep for int compileList length String arg compileList getAbsolutePath cmd createArgument setValue arg niceSourceList append arg lSep attributes log niceSourceList toString Project MSG_VERBOSE protected int executeExternalCompile String args int firstFileName String commandArray null File tmpFile null try if Commandline toString args length firstFileName PrintWriter out null try String userDirName System getProperty File userDir new File userDirName tmpFile fileUtils createTempFile userDir out new PrintWriter new FileWriter tmpFile for int firstFileName args length out println args out flush commandArray new String firstFileName System arraycopy args commandArray firstFileName commandArray firstFileName tmpFile catch IOException throw new BuildException location finally if out null try out close catch Throwable else commandArray args try Execute exe new Execute new LogStreamHandler attributes Project MSG_INFO Project MSG_WARN exe setAntRun project exe setWorkingDirectory project getBaseDir exe setCommandline commandArray exe execute return exe getExitValue catch IOException throw new BuildException args location finally if tmpFile null tmpFile delete protected void addExtdirsToClasspath Path classpath classpath addExtdirs extdirs protected void addCurrentCompilerArgs Commandline cmd cmd addArguments getJavac getCurrentCompilerArgs protected boolean assumeJava11 return equals attributes getCompilerVersion equals attributes getCompilerVersion JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 equals attributes getCompilerVersion JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 protected boolean assumeJava12 return equals attributes getCompilerVersion equals attributes getCompilerVersion JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_2 equals attributes getCompilerVersion JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_2 protected boolean assumeJava13 return equals attributes getCompilerVersion equals attributes getCompilerVersion JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_3 equals attributes getCompilerVersion JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_3 equals attributes getCompilerVersion JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_3', 'bug': '1'}
{'sequence': 'public class NoBannerLogger extends DefaultLogger protected String targetName public NoBannerLogger public void targetStarted BuildEvent event targetName event getTarget getName public void targetFinished BuildEvent event targetName null public void messageLogged BuildEvent event if event getPriority msgOutputLevel null event getMessage equals event getMessage trim return if null targetName out println StringUtils LINE_SEP targetName targetName null super messageLogged event', 'bug': '0'}
{'sequence': 'public class MailMessage public static final int DEFAULT_PORT private String host private int port DEFAULT_PORT private String from private Vector to private Vector cc private Hashtable headers private MailPrintStream out private SmtpResponseReader in private Socket socket public MailMessage throws IOException this DEFAULT_PORT public MailMessage String host throws IOException this host DEFAULT_PORT public MailMessage String host int port throws IOException this port port this host host to new Vector cc new Vector headers new Hashtable setHeader connect sendHelo public void setPort int port this port port public void from String from throws IOException sendFrom from this from from public void to String to throws IOException sendRcpt to this to addElement to public void cc String cc throws IOException sendRcpt cc this cc addElement cc public void bcc String bcc throws IOException sendRcpt bcc public void setSubject String subj headers put subj public void setHeader String name String value headers put name value public PrintStream getPrintStream throws IOException setFromHeader setToHeader setCcHeader sendData flushHeaders return out void setFromHeader setHeader from void setToHeader setHeader vectorToList to void setCcHeader setHeader vectorToList cc String vectorToList Vector StringBuffer buf new StringBuffer Enumeration elements while hasMoreElements buf append nextElement if hasMoreElements buf append return buf toString void flushHeaders throws IOException Enumeration headers keys while hasMoreElements String name String nextElement String value String headers get name out println name value out println out flush public void sendAndClose throws IOException try sendDot sendQuit finally disconnect static String sanitizeAddress String int paramDepth int start int end int len length for int len char charAt if paramDepth if start else if paramDepth if end else if paramDepth start else if paramDepth end if end end len return substring start end void connect throws IOException socket new Socket host port out new MailPrintStream new BufferedOutputStream socket getOutputStream in new SmtpResponseReader socket getInputStream getReady void getReady throws IOException String response in getResponse int ok if isResponseOK response ok throw new IOException response void sendHelo throws IOException String local InetAddress getLocalHost getHostName int ok send local ok void sendFrom String from throws IOException int ok send sanitizeAddress from ok void sendRcpt String rcpt throws IOException int ok send sanitizeAddress rcpt ok void sendData throws IOException int ok send ok void sendDot throws IOException int ok void sendQuit throws IOException int ok try send ok catch IOException throw new ErrorInQuitException void send String msg int ok throws IOException String response in getResponse if isResponseOK response ok throw new IOException msg response boolean isResponseOK String response int ok for int ok length if response startsWith ok return true return false void disconnect throws IOException if out null out close if in null try in close catch IOException if socket null try socket close catch IOException class MailPrintStream extends PrintStream int lastChar public MailPrintStream OutputStream out public void write int if lastChar rawWrite else if lastChar rawWrite else rawWrite lastChar public void write byte buf int off int len for int len write buf off void rawWrite int super write void rawPrint String int len length for int len rawWrite charAt', 'bug': '0'}
{'sequence': 'public abstract class BaseParamFilterReader extends BaseFilterReader implements Parameterizable private Parameter parameters public BaseParamFilterReader super public BaseParamFilterReader final Reader in super in public final void setParameters final Parameter parameters this parameters parameters setInitialized false protected final Parameter getParameters return parameters', 'bug': '0'}
{'sequence': 'public interface XSLTLogger void log String msg', 'bug': '0'}
{'sequence': 'public class DefaultLogger implements BuildLogger public static final int LEFT_COLUMN_SIZE protected PrintStream out protected PrintStream err protected int msgOutputLevel Project MSG_ERR private long startTime System currentTimeMillis protected static final String lSep StringUtils LINE_SEP protected boolean emacsMode false public DefaultLogger public void setMessageOutputLevel int level this msgOutputLevel level public void setOutputPrintStream PrintStream output this out new PrintStream output true public void setErrorPrintStream PrintStream err this err new PrintStream err true public void setEmacsMode boolean emacsMode this emacsMode emacsMode public void buildStarted BuildEvent event startTime System currentTimeMillis public void buildFinished BuildEvent event Throwable error event getException StringBuffer message new StringBuffer if error null message append StringUtils LINE_SEP message append else message append StringUtils LINE_SEP message append message append StringUtils LINE_SEP if Project MSG_VERBOSE msgOutputLevel error instanceof BuildException message append StringUtils getStackTrace error else if error instanceof BuildException message append error toString append lSep else message append error getMessage append lSep message append StringUtils LINE_SEP message append message append formatTime System currentTimeMillis startTime String msg message toString if error null printMessage msg out Project MSG_VERBOSE else printMessage msg err Project MSG_ERR log msg public void targetStarted BuildEvent event if Project MSG_INFO msgOutputLevel String msg StringUtils LINE_SEP event getTarget getName printMessage msg out event getPriority log msg public void targetFinished BuildEvent event public void taskStarted BuildEvent event public void taskFinished BuildEvent event public void messageLogged BuildEvent event int priority event getPriority if priority msgOutputLevel StringBuffer message new StringBuffer if event getTask null emacsMode String name event getTask getTaskName String label name int size LEFT_COLUMN_SIZE label length StringBuffer tmp new StringBuffer for int size tmp append tmp append label label tmp toString try BufferedReader new BufferedReader new StringReader event getMessage String line readLine boolean first true while line null if first message append StringUtils LINE_SEP first false message append label append line line readLine catch IOException message append label append event getMessage else message append event getMessage String msg message toString if priority Project MSG_ERR printMessage msg out priority else printMessage msg err priority log msg protected static String formatTime final long millis return DateUtils formatElapsedTime millis protected void printMessage final String message final PrintStream stream final int priority stream println message protected void log String message', 'bug': '0'}
{'sequence': 'public class TarInputStream extends FilterInputStream protected boolean debug protected boolean hasHitEOF protected int entrySize protected int entryOffset protected byte oneBuf protected byte readBuf protected TarBuffer buffer protected TarEntry currEntry private boolean v7Format public TarInputStream InputStream is this is TarBuffer DEFAULT_BLKSIZE TarBuffer DEFAULT_RCDSIZE public TarInputStream InputStream is int blockSize this is blockSize TarBuffer DEFAULT_RCDSIZE public TarInputStream InputStream is int blockSize int recordSize super is this buffer new TarBuffer is blockSize recordSize this readBuf null this oneBuf new byte this debug false this hasHitEOF false this v7Format false public void setDebug boolean debug this debug debug this buffer setDebug debug public void close throws IOException this buffer close public int getRecordSize return this buffer getRecordSize public int available throws IOException return this entrySize this entryOffset public long skip long numToSkip throws IOException byte skipBuf new byte long skip numToSkip while skip int realSkip int skip skipBuf length skipBuf length skip int numRead this read skipBuf realSkip if numRead break skip numRead return numToSkip skip public boolean markSupported return false public void mark int markLimit public void reset public TarEntry getNextEntry throws IOException if this hasHitEOF return null if this currEntry null int numToSkip this entrySize this entryOffset if this debug System err println this currEntry getName this entrySize this entryOffset numToSkip if numToSkip this skip numToSkip this readBuf null byte headerBuf this buffer readRecord if headerBuf null if this debug System err println this hasHitEOF true else if this buffer isEOFRecord headerBuf if this debug System err println this hasHitEOF true if this hasHitEOF this currEntry null else this currEntry new TarEntry headerBuf if headerBuf headerBuf headerBuf headerBuf headerBuf this v7Format true if this debug System err println this currEntry getName this currEntry getSize this entryOffset this entrySize int this currEntry getSize if this currEntry null this currEntry isGNULongNameEntry StringBuffer longName new StringBuffer byte buffer new byte int length while length read buffer longName append new String buffer length getNextEntry this currEntry setName longName toString return this currEntry public int read throws IOException int num this read this oneBuf if num return num else return int this oneBuf public int read byte buf throws IOException return this read buf buf length public int read byte buf int offset int numToRead throws IOException int totalRead if this entryOffset this entrySize return if numToRead this entryOffset this entrySize numToRead this entrySize this entryOffset if this readBuf null int sz numToRead this readBuf length this readBuf length numToRead System arraycopy this readBuf buf offset sz if sz this readBuf length this readBuf null else int newLen this readBuf length sz byte newBuf new byte newLen System arraycopy this readBuf sz newBuf newLen this readBuf newBuf totalRead sz numToRead sz offset sz while numToRead byte rec this buffer readRecord if rec null throw new IOException numToRead int sz numToRead int recLen rec length if recLen sz System arraycopy rec buf offset sz this readBuf new byte recLen sz System arraycopy rec sz this readBuf recLen sz else sz recLen System arraycopy rec buf offset recLen totalRead sz numToRead sz offset sz this entryOffset totalRead return totalRead public void copyEntryContents OutputStream out throws IOException byte buf new byte while true int numRead this read buf buf length if numRead break out write buf numRead', 'bug': '0'}
{'sequence': 'public interface Condition boolean eval throws BuildException', 'bug': '0'}
{'sequence': 'class RedirectingOutputStream extends LogOutputStream private final ChangeLogParser m_parser public RedirectingOutputStream final ChangeLogParser parser super null m_parser parser protected void processLine final String line m_parser stdout line', 'bug': '0'}
{'sequence': 'public class Contains implements Condition private String string subString private boolean caseSensitive true public void setString String a1 string a1 public void setSubstring String a2 subString a2 public void setCasesensitive boolean caseSensitive public boolean eval throws BuildException if string null subString null throw new BuildException return caseSensitive string indexOf subString string toLowerCase indexOf subString toLowerCase', 'bug': '0'}
{'sequence': 'public class ProjectHelperImpl extends ProjectHelper private org xml sax Parser parser private Project project private File buildFile private File buildFileParent private Locator locator public void parse Project project Object source throws BuildException if source instanceof File throw new BuildException File buildFile File source FileInputStream inputStream null InputSource inputSource null this project project this buildFile new File buildFile getAbsolutePath buildFileParent new File this buildFile getParent try try parser JAXPUtils getParser catch BuildException parser new XMLReaderAdapter JAXPUtils getXMLReader String uri buildFile getAbsolutePath replace for int index uri indexOf index index uri indexOf uri uri substring index uri substring index inputStream new FileInputStream buildFile inputSource new InputSource inputStream inputSource setSystemId uri project log buildFile uri Project MSG_VERBOSE HandlerBase hb new RootHandler this parser setDocumentHandler hb parser setEntityResolver hb parser setErrorHandler hb parser setDTDHandler hb parser parse inputSource catch SAXParseException exc Location location new Location exc getSystemId exc getLineNumber exc getColumnNumber Throwable exc getException if instanceof BuildException BuildException be BuildException if be getLocation Location UNKNOWN_LOCATION be setLocation location throw be throw new BuildException exc getMessage location catch SAXException exc Throwable exc getException if instanceof BuildException throw BuildException throw new BuildException exc getMessage catch FileNotFoundException exc throw new BuildException exc catch UnsupportedEncodingException exc throw new BuildException exc catch IOException exc throw new BuildException exc getMessage exc finally if inputStream null try inputStream close catch IOException ioe static class AbstractHandler extends HandlerBase protected DocumentHandler parentHandler ProjectHelperImpl helperImpl public AbstractHandler ProjectHelperImpl helperImpl DocumentHandler parentHandler this parentHandler parentHandler this helperImpl helperImpl helperImpl parser setDocumentHandler this public void startElement String tag AttributeList attrs throws SAXParseException throw new SAXParseException tag helperImpl locator public void characters char buf int start int count throws SAXParseException String new String buf start count trim if length throw new SAXParseException helperImpl locator protected void finished public void endElement String name throws SAXException finished helperImpl parser setDocumentHandler parentHandler static class RootHandler extends HandlerBase ProjectHelperImpl helperImpl public RootHandler ProjectHelperImpl helperImpl this helperImpl helperImpl public InputSource resolveEntity String publicId String systemId helperImpl project log systemId Project MSG_VERBOSE if systemId startsWith String path systemId substring int index path indexOf while index path path substring index path substring index index path indexOf String entitySystemId path index path indexOf while index path path substring index path substring index index path indexOf File file new File path if file isAbsolute file new File helperImpl buildFileParent path try InputSource inputSource new InputSource new FileInputStream file inputSource setSystemId entitySystemId return inputSource catch FileNotFoundException fne helperImpl project log file getAbsolutePath Project MSG_WARN return null public void startElement String tag AttributeList attrs throws SAXParseException if tag equals new ProjectHandler helperImpl this init tag attrs else throw new SAXParseException helperImpl locator public void setDocumentLocator Locator locator helperImpl locator locator static class ProjectHandler extends AbstractHandler public ProjectHandler ProjectHelperImpl helperImpl DocumentHandler parentHandler super helperImpl parentHandler public void init String tag AttributeList attrs throws SAXParseException String def null String name null String id null String baseDir null for int attrs getLength String key attrs getName String value attrs getValue if key equals def value else if key equals name value else if key equals id value else if key equals baseDir value else throw new SAXParseException attrs getName helperImpl locator if def null throw new SAXParseException helperImpl locator else helperImpl project setDefaultTarget def if name null helperImpl project setName name helperImpl project addReference name helperImpl project if id null helperImpl project addReference id helperImpl project if helperImpl project getProperty null helperImpl project setBasedir helperImpl project getProperty else if baseDir null helperImpl project setBasedir helperImpl buildFileParent getAbsolutePath else if new File baseDir isAbsolute helperImpl project setBasedir baseDir else helperImpl project setBaseDir helperImpl project resolveFile baseDir helperImpl buildFileParent public void startElement String name AttributeList attrs throws SAXParseException if name equals handleTaskdef name attrs else if name equals handleTypedef name attrs else if name equals handleProperty name attrs else if name equals handleTarget name attrs else if helperImpl project getDataTypeDefinitions get name null handleDataType name attrs else throw new SAXParseException name helperImpl locator private void handleTaskdef String name AttributeList attrs throws SAXParseException new TaskHandler helperImpl this null null null init name attrs private void handleTypedef String name AttributeList attrs throws SAXParseException new TaskHandler helperImpl this null null null init name attrs private void handleProperty String name AttributeList attrs throws SAXParseException new TaskHandler helperImpl this null null null init name attrs private void handleTarget String tag AttributeList attrs throws SAXParseException new TargetHandler helperImpl this init tag attrs private void handleDataType String name AttributeList attrs throws SAXParseException new DataTypeHandler helperImpl this init name attrs static class TargetHandler extends AbstractHandler private Target target public TargetHandler ProjectHelperImpl helperImpl DocumentHandler parentHandler super helperImpl parentHandler public void init String tag AttributeList attrs throws SAXParseException String name null String depends String ifCond null String unlessCond null String id null String description null for int attrs getLength String key attrs getName String value attrs getValue if key equals name value else if key equals depends value else if key equals ifCond value else if key equals unlessCond value else if key equals id value else if key equals description value else throw new SAXParseException key helperImpl locator if name null throw new SAXParseException helperImpl locator target new Target target setName name target setIf ifCond target setUnless unlessCond target setDescription description helperImpl project addTarget name target if id null id equals helperImpl project addReference id target if depends length target setDepends depends public void startElement String name AttributeList attrs throws SAXParseException if helperImpl project getDataTypeDefinitions get name null new DataTypeHandler helperImpl this target init name attrs else new TaskHandler helperImpl this target null target init name attrs static class TaskHandler extends AbstractHandler private Target target private TaskContainer container private Task task private RuntimeConfigurable parentWrapper private RuntimeConfigurable wrapper null public TaskHandler ProjectHelperImpl helperImpl DocumentHandler parentHandler TaskContainer container RuntimeConfigurable parentWrapper Target target super helperImpl parentHandler this container container this parentWrapper parentWrapper this target target public void init String tag AttributeList attrs throws SAXParseException try task helperImpl project createTask tag catch BuildException if task null task new UnknownElement tag task setProject helperImpl project task setTaskName tag task setLocation new Location helperImpl locator getSystemId helperImpl locator getLineNumber helperImpl locator getColumnNumber helperImpl configureId task attrs if target null task setOwningTarget target container addTask task task init wrapper task getRuntimeConfigurableWrapper wrapper setAttributes attrs if parentWrapper null parentWrapper addChild wrapper else task init configure task attrs helperImpl project protected void finished if task null target null task execute public void characters char buf int start int count throws SAXParseException if wrapper null try ProjectHelper addText helperImpl project task buf start count catch BuildException exc throw new SAXParseException exc getMessage helperImpl locator exc else wrapper addText buf start count public void startElement String name AttributeList attrs throws SAXParseException if task instanceof TaskContainer new TaskHandler helperImpl this TaskContainer task wrapper target init name attrs else new NestedElementHandler helperImpl this task wrapper target init name attrs static class NestedElementHandler extends AbstractHandler private Object parent private Object child private RuntimeConfigurable parentWrapper private RuntimeConfigurable childWrapper null private Target target public NestedElementHandler ProjectHelperImpl helperImpl DocumentHandler parentHandler Object parent RuntimeConfigurable parentWrapper Target target super helperImpl parentHandler if parent instanceof TaskAdapter this parent TaskAdapter parent getProxy else this parent parent this parentWrapper parentWrapper this target target public void init String propType AttributeList attrs throws SAXParseException Class parentClass parent getClass IntrospectionHelper ih IntrospectionHelper getHelper parentClass try String elementName propType toLowerCase Locale US if parent instanceof UnknownElement UnknownElement uc new UnknownElement elementName uc setProject helperImpl project UnknownElement parent addChild uc child uc else child ih createElement helperImpl project parent elementName helperImpl configureId child attrs if parentWrapper null childWrapper new RuntimeConfigurable child propType childWrapper setAttributes attrs parentWrapper addChild childWrapper else configure child attrs helperImpl project ih storeElement helperImpl project parent child elementName catch BuildException exc throw new SAXParseException exc getMessage helperImpl locator exc public void characters char buf int start int count throws SAXParseException if parentWrapper null try ProjectHelper addText helperImpl project child buf start count catch BuildException exc throw new SAXParseException exc getMessage helperImpl locator exc else childWrapper addText buf start count public void startElement String name AttributeList attrs throws SAXParseException if child instanceof TaskContainer new TaskHandler helperImpl this TaskContainer child childWrapper target init name attrs else new NestedElementHandler helperImpl this child childWrapper target init name attrs static class DataTypeHandler extends AbstractHandler private Target target private Object element private RuntimeConfigurable wrapper null public DataTypeHandler ProjectHelperImpl helperImpl DocumentHandler parentHandler this helperImpl parentHandler null public DataTypeHandler ProjectHelperImpl helperImpl DocumentHandler parentHandler Target target super helperImpl parentHandler this target target public void init String propType AttributeList attrs throws SAXParseException try element helperImpl project createDataType propType if element null throw new BuildException propType if target null wrapper new RuntimeConfigurable element propType wrapper setAttributes attrs target addDataType wrapper else configure element attrs helperImpl project helperImpl configureId element attrs catch BuildException exc throw new SAXParseException exc getMessage helperImpl locator exc public void characters char buf int start int count throws SAXParseException try ProjectHelper addText helperImpl project element buf start count catch BuildException exc throw new SAXParseException exc getMessage helperImpl locator exc public void startElement String name AttributeList attrs throws SAXParseException new NestedElementHandler helperImpl this element wrapper target init name attrs private void configureId Object target AttributeList attr String id attr getValue if id null project addReference id target', 'bug': '0'}
{'sequence': 'public class Ear extends Jar private File deploymentDescriptor private boolean descriptorAdded public Ear super archiveType emptyBehavior public void setEarfile File earFile setDestFile earFile public void setAppxml File descr deploymentDescriptor descr if deploymentDescriptor exists throw new BuildException deploymentDescriptor ZipFileSet fs new ZipFileSet fs setDir new File deploymentDescriptor getParent fs setIncludes deploymentDescriptor getName fs setFullpath super addFileset fs public void addArchives ZipFileSet fs fs setPrefix super addFileset fs protected void initZipOutputStream ZipOutputStream zOut throws IOException BuildException if deploymentDescriptor null isInUpdateMode throw new BuildException location super initZipOutputStream zOut protected void zipFile File file ZipOutputStream zOut String vPath throws IOException if vPath equalsIgnoreCase if deploymentDescriptor null deploymentDescriptor equals file descriptorAdded log archiveType archiveType Project MSG_WARN else super zipFile file zOut vPath descriptorAdded true else super zipFile file zOut vPath protected void cleanUp descriptorAdded false super cleanUp', 'bug': '1'}
{'sequence': 'public class Taskdef extends Definer protected void addDefinition String name Class throws BuildException project addTaskDefinition name', 'bug': '0'}
{'sequence': 'public final class TabsToSpaces extends BaseParamFilterReader implements ChainableReader private static final int DEFAULT_TAB_LENGTH private static final String TAB_LENGTH_KEY private int tabLength DEFAULT_TAB_LENGTH private int spacesRemaining public TabsToSpaces super public TabsToSpaces final Reader in super in public final int read throws IOException if getInitialized initialize setInitialized true int ch if spacesRemaining spacesRemaining ch else ch in read if ch spacesRemaining tabLength ch return ch public final void setTablength final int tabLength this tabLength tabLength private final int getTablength return tabLength public final Reader chain final Reader rdr TabsToSpaces newFilter new TabsToSpaces rdr newFilter setTablength getTablength newFilter setInitialized true return newFilter private final void initialize Parameter params getParameters if params null for int params length if params null if TAB_LENGTH_KEY equals params getName tabLength new Integer params getValue intValue break', 'bug': '0'}
{'sequence': 'public interface RegexpMatcher int MATCH_DEFAULT int MATCH_CASE_INSENSITIVE int MATCH_MULTILINE int MATCH_SINGLELINE void setPattern String pattern throws BuildException String getPattern throws BuildException boolean matches String argument throws BuildException Vector getGroups String argument throws BuildException boolean matches String input int options throws BuildException Vector getGroups String input int options throws BuildException', 'bug': '0'}
{'sequence': 'public abstract class BaseFilterReader extends FilterReader private boolean initialized false private Project project null public BaseFilterReader super new StringReader new String try close catch IOException ioe public BaseFilterReader final Reader in super in public final int read final char cbuf final int off final int len throws IOException for int len final int ch read if ch if return else return cbuf off char ch return len public final long skip final long throws IOException if throw new IllegalArgumentException for long if read return return protected final void setInitialized final boolean initialized this initialized initialized protected final boolean getInitialized return initialized public final void setProject final Project project this project project protected final Project getProject return project protected final String readLine throws IOException int ch in read if ch return null StringBuffer line new StringBuffer while ch line append char ch if ch break ch in read return line toString protected final String readFully throws IOException return FileUtils readFully in', 'bug': '0'}
{'sequence': 'public class ZipOutputStream extends DeflaterOutputStream private ZipEntry entry private String comment private int level Deflater DEFAULT_COMPRESSION private boolean hasCompressionLevelChanged false private int method DEFLATED private Vector entries new Vector private CRC32 crc new CRC32 private long written private long dataStart private ZipLong cdOffset new ZipLong private ZipLong cdLength new ZipLong private static final byte ZERO private static final byte LZERO private Hashtable offsets new Hashtable private String encoding null public static final int DEFLATED ZipEntry DEFLATED public static final int STORED ZipEntry STORED public ZipOutputStream OutputStream out super out new Deflater Deflater DEFAULT_COMPRESSION true public void setEncoding String encoding this encoding encoding public String getEncoding return encoding public void finish throws IOException closeEntry cdOffset new ZipLong written for int entries size writeCentralFileHeader ZipEntry entries elementAt cdLength new ZipLong written cdOffset getValue writeCentralDirectoryEnd offsets clear entries removeAllElements public void closeEntry throws IOException if entry null return long realCrc crc getValue crc reset if entry getMethod DEFLATED def finish while def finished deflate entry setSize def getTotalIn entry setComprSize def getTotalOut entry setCrc realCrc def reset written entry getCompressedSize else if entry getCrc realCrc throw new ZipException entry getName Long toHexString entry getCrc Long toHexString realCrc if entry getSize written dataStart throw new ZipException entry getName entry getSize written dataStart writeDataDescriptor entry entry null public void putNextEntry ZipEntry ze throws IOException closeEntry entry ze entries addElement entry entry setMethod method entry setTime System currentTimeMillis if entry getMethod STORED if entry getSize throw new ZipException if entry getCrc throw new ZipException entry setComprSize entry getSize else if hasCompressionLevelChanged def setLevel level hasCompressionLevelChanged false writeLocalFileHeader entry public void setComment String comment this comment comment public void setLevel int level hasCompressionLevelChanged this level level this level level public void setMethod int method this method method public void write byte int offset int length throws IOException if entry getMethod DEFLATED super write offset length else out write offset length written length crc update offset length protected static final ZipLong LFH_SIG new ZipLong protected static final ZipLong DD_SIG new ZipLong protected static final ZipLong CFH_SIG new ZipLong protected static final ZipLong EOCD_SIG new ZipLong protected void writeLocalFileHeader ZipEntry ze throws IOException offsets put ze new ZipLong written out write LFH_SIG getBytes written if ze getMethod DEFLATED out write new ZipShort getBytes out write new ZipShort getBytes else out write new ZipShort getBytes out write ZERO written out write new ZipShort ze getMethod getBytes written out write toDosTime new Date ze getTime getBytes written if ze getMethod DEFLATED out write LZERO out write LZERO out write LZERO else out write new ZipLong ze getCrc getBytes out write new ZipLong ze getSize getBytes out write new ZipLong ze getSize getBytes written byte name getBytes ze getName out write new ZipShort name length getBytes written byte extra ze getLocalFileDataExtra out write new ZipShort extra length getBytes written out write name written name length out write extra written extra length dataStart written protected void writeDataDescriptor ZipEntry ze throws IOException if ze getMethod DEFLATED return out write DD_SIG getBytes out write new ZipLong entry getCrc getBytes out write new ZipLong entry getCompressedSize getBytes out write new ZipLong entry getSize getBytes written protected void writeCentralFileHeader ZipEntry ze throws IOException out write CFH_SIG getBytes written out write new ZipShort getBytes written if ze getMethod DEFLATED out write new ZipShort getBytes out write new ZipShort getBytes else out write new ZipShort getBytes out write ZERO written out write new ZipShort ze getMethod getBytes written out write toDosTime new Date ze getTime getBytes written out write new ZipLong ze getCrc getBytes out write new ZipLong ze getCompressedSize getBytes out write new ZipLong ze getSize getBytes written byte name getBytes ze getName out write new ZipShort name length getBytes written byte extra ze getCentralDirectoryExtra out write new ZipShort extra length getBytes written String comm ze getComment if comm null comm byte comment getBytes comm out write new ZipShort comment length getBytes written out write ZERO written out write new ZipShort ze getInternalAttributes getBytes written out write new ZipLong ze getExternalAttributes getBytes written out write ZipLong offsets get ze getBytes written out write name written name length out write extra written extra length out write comment written comment length protected void writeCentralDirectoryEnd throws IOException out write EOCD_SIG getBytes out write ZERO out write ZERO byte num new ZipShort entries size getBytes out write num out write num out write cdLength getBytes out write cdOffset getBytes byte data getBytes comment out write new ZipShort data length getBytes out write data private static final ZipLong DOS_TIME_MIN new ZipLong protected static ZipLong toDosTime Date time int year time getYear int month time getMonth if year return DOS_TIME_MIN long value year month time getDate time getHours time getMinutes time getSeconds byte result new byte result byte value result byte value result byte value result byte value return new ZipLong result protected byte getBytes String name throws ZipException if encoding null return name getBytes else try return name getBytes encoding catch UnsupportedEncodingException uee throw new ZipException uee getMessage', 'bug': '0'}
{'sequence': 'public class UnrecognizedExtraField implements ZipExtraField private ZipShort headerId public void setHeaderId ZipShort headerId this headerId headerId public ZipShort getHeaderId return headerId private byte localData public void setLocalFileDataData byte data localData data public ZipShort getLocalFileDataLength return new ZipShort localData length public byte getLocalFileDataData return localData private byte centralData public void setCentralDirectoryData byte data centralData data public ZipShort getCentralDirectoryLength if centralData null return new ZipShort centralData length return getLocalFileDataLength public byte getCentralDirectoryData if centralData null return centralData return getLocalFileDataData public void parseFromLocalFileData byte data int offset int length byte tmp new byte length System arraycopy data offset tmp length setLocalFileDataData tmp', 'bug': '0'}
{'sequence': 'public class UnknownElement extends Task private String elementName private Object realThing private Vector children new Vector public UnknownElement String elementName this elementName elementName public String getTag return elementName public void maybeConfigure throws BuildException realThing makeObject this wrapper wrapper setProxy realThing if realThing instanceof Task Task realThing setRuntimeConfigurableWrapper wrapper handleChildren realThing wrapper wrapper maybeConfigure project protected void handleOutput String line if realThing instanceof Task Task realThing handleOutput line else super handleOutput line protected void handleErrorOutput String line if realThing instanceof Task Task realThing handleErrorOutput line else super handleErrorOutput line public void execute if realThing null throw new BuildException elementName location if realThing instanceof Task Task realThing execute public void addChild UnknownElement child children addElement child protected void handleChildren Object parent RuntimeConfigurable parentWrapper throws BuildException if parent instanceof TaskAdapter parent TaskAdapter parent getProxy Class parentClass parent getClass IntrospectionHelper ih IntrospectionHelper getHelper parentClass for int children size RuntimeConfigurable childWrapper parentWrapper getChild UnknownElement child UnknownElement children elementAt Object realChild null if parent instanceof TaskContainer realChild makeTask child childWrapper false TaskContainer parent addTask Task realChild else realChild ih createElement project parent child getTag childWrapper setProxy realChild if parent instanceof TaskContainer Task realChild setRuntimeConfigurableWrapper childWrapper child handleChildren realChild childWrapper if parent instanceof TaskContainer Task realChild maybeConfigure protected Object makeObject UnknownElement ue RuntimeConfigurable Object makeTask ue true if null project createDataType ue getTag if null throw getNotFoundException ue getTag return protected Task makeTask UnknownElement ue RuntimeConfigurable boolean onTopLevel Task task project createTask ue getTag if task null onTopLevel throw getNotFoundException ue getTag if task null task setLocation getLocation task setOwningTarget target task init return task protected BuildException getNotFoundException String what String elementName String lSep System getProperty String msg what elementName lSep lSep lSep lSep lSep lSep lSep elementName lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep return new BuildException msg location public String getTaskName return realThing null realThing instanceof Task super getTaskName Task realThing getTaskName public Task getTask if realThing instanceof Task return Task realThing return null', 'bug': '0'}
{'sequence': 'public class Message extends ProjectComponent private File messageSource null private StringBuffer buffer new StringBuffer private String mimeType private boolean specified false public Message public Message String text addText text public Message File file messageSource file public void addText String text buffer append text public void setSrc File src this messageSource src public void setMimeType String mimeType this mimeType mimeType specified true public String getMimeType return mimeType public void print PrintStream out throws IOException if messageSource null FileReader freader new FileReader messageSource try BufferedReader in new BufferedReader freader String line null while line in readLine null out println getProject replaceProperties line finally freader close else out println getProject replaceProperties buffer toString public boolean isMimeTypeSpecified return specified', 'bug': '1'}
{'sequence': 'public class CVSPass extends Task private String cvsRoot null private File passFile null private String password null private final char shifts public CVSPass passFile new File System getProperty System getProperty File separatorChar public final void execute throws BuildException if cvsRoot null throw new BuildException if password null throw new BuildException log cvsRoot Project MSG_DEBUG log password Project MSG_DEBUG log passFile Project MSG_DEBUG BufferedReader reader null PrintWriter writer null try StringBuffer buf new StringBuffer if passFile exists reader new BufferedReader new FileReader passFile String line null while line reader readLine null if line startsWith cvsRoot buf append line append StringUtils LINE_SEP String pwdfile buf toString cvsRoot mangle password log pwdfile Project MSG_DEBUG writer new PrintWriter new FileWriter passFile writer println pwdfile catch IOException throw new BuildException finally if reader null try reader close catch IOException if writer null writer close private final String mangle String password StringBuffer buf new StringBuffer for int password length buf append shifts password charAt return buf toString public void setCvsroot String cvsRoot this cvsRoot cvsRoot public void setPassfile File passFile this passFile passFile public void setPassword String password this password password', 'bug': '0'}
{'sequence': 'public abstract class ProjectComponent protected Project project null public ProjectComponent public void setProject Project project this project project public Project getProject return project public void log String msg log msg Project MSG_INFO public void log String msg int msgLevel if project null project log msg msgLevel', 'bug': '0'}
{'sequence': 'public class GZip extends Pack protected void pack GZIPOutputStream zOut null try zOut new GZIPOutputStream new FileOutputStream zipFile zipFile source zOut catch IOException ioe String msg ioe getMessage throw new BuildException msg ioe location finally if zOut null try zOut close catch IOException', 'bug': '0'}
{'sequence': 'public abstract class ConditionBase extends ProjectComponent private Vector conditions new Vector protected int countConditions return conditions size protected final Enumeration getConditions return conditions elements public void addAvailable Available conditions addElement public void addChecksum Checksum conditions addElement public void addUptodate UpToDate conditions addElement public void addNot Not conditions addElement public void addAnd And conditions addElement public void addOr Or conditions addElement public void addEquals Equals conditions addElement public void addOs Os conditions addElement public void addIsSet IsSet conditions addElement public void addHttp Http conditions addElement public void addSocket Socket conditions addElement public void addFilesMatch FilesMatch test conditions addElement test public void addContains Contains test conditions addElement test public void addIsTrue IsTrue test conditions addElement test public void addIsFalse IsFalse test conditions addElement test', 'bug': '0'}
{'sequence': 'public final class ReplaceTokens extends BaseParamFilterReader implements ChainableReader private static final char DEFAULT_BEGIN_TOKEN private static final char DEFAULT_END_TOKEN private String queuedData null private Hashtable hash new Hashtable private char beginToken DEFAULT_BEGIN_TOKEN private char endToken DEFAULT_END_TOKEN public ReplaceTokens super public ReplaceTokens final Reader in super in public final int read throws IOException if getInitialized initialize setInitialized true if queuedData null queuedData length final int ch queuedData charAt if queuedData length queuedData queuedData substring else queuedData null return ch int ch in read if ch beginToken final StringBuffer key new StringBuffer do ch in read if ch key append char ch else break while ch endToken if ch queuedData beginToken key toString return read else key setLength key length final String replaceWith String hash get key toString if replaceWith null queuedData replaceWith return read else queuedData beginToken key toString endToken return read return ch public final void setBeginToken final char beginToken this beginToken beginToken private final char getBeginToken return beginToken public final void setEndToken final char endToken this endToken endToken private final char getEndToken return endToken public final void addConfiguredToken final Token token hash put token getKey token getValue private void setTokens final Hashtable hash this hash hash private final Hashtable getTokens return hash public final Reader chain final Reader rdr ReplaceTokens newFilter new ReplaceTokens rdr newFilter setBeginToken getBeginToken newFilter setEndToken getEndToken newFilter setTokens getTokens newFilter setInitialized true return newFilter private final void initialize Parameter params getParameters if params null for int params length if params null final String type params getType if equals type final String name params getName if equals name beginToken params getValue charAt else if equals name endToken params getValue charAt else if equals type final String name params getName final String value params getValue hash put name value public static class Token private String key private String value public final void setKey String key this key key public final void setValue String value this value value public final String getKey return key public final String getValue return value', 'bug': '0'}
{'sequence': 'public class RegexpPatternMapper implements FileNameMapper protected RegexpMatcher reg null protected char to null protected StringBuffer result new StringBuffer public RegexpPatternMapper throws BuildException reg new RegexpMatcherFactory newRegexpMatcher public void setFrom String from throws BuildException try reg setPattern from catch NoClassDefFoundError throw new BuildException public void setTo String to this to to toCharArray public String mapFileName String sourceFileName if reg null to null reg matches sourceFileName return null return new String replaceReferences sourceFileName protected String replaceReferences String source Vector reg getGroups source result setLength for int to length if to if to length int value Character digit to if value result append String elementAt value else result append to else result append else result append to return result toString', 'bug': '0'}
{'sequence': 'public class EmailTask extends Task public static final String AUTO public static final String MIME public static final String UU public static final String PLAIN public static class Encoding extends EnumeratedAttribute public String getValues return new String AUTO MIME UU PLAIN private String encoding AUTO private String host private int port private String subject null private Message message null private boolean failOnError true private boolean includeFileNames false private String messageMimeType null private EmailAddress from null private Vector toList new Vector private Vector ccList new Vector private Vector bccList new Vector private Vector files new Vector private Vector filesets new Vector public void setEncoding Encoding encoding this encoding encoding getValue public void setMailport int port this port port public void setMailhost String host this host host public void setSubject String subject this subject subject public void setMessage String message if this message null throw new BuildException this message new Message message this message setProject getProject public void setMessageFile File file if this message null throw new BuildException this message new Message file this message setProject getProject public void setMessageMimeType String type this messageMimeType type public void addMessage Message message throws BuildException if this message null throw new BuildException this message message public void addFrom EmailAddress address if this from null throw new BuildException this from address public void setFrom String address if this from null throw new BuildException this from new EmailAddress address public void addTo EmailAddress address toList addElement address public void setToList String list StringTokenizer tokens new StringTokenizer list while tokens hasMoreTokens toList addElement new EmailAddress tokens nextToken public void addCc EmailAddress address ccList addElement address public void setCcList String list StringTokenizer tokens new StringTokenizer list while tokens hasMoreTokens ccList addElement new EmailAddress tokens nextToken public void addBcc EmailAddress address bccList addElement address public void setBccList String list StringTokenizer tokens new StringTokenizer list while tokens hasMoreTokens bccList addElement new EmailAddress tokens nextToken public void setFailOnError boolean failOnError this failOnError failOnError public void setFiles String filenames StringTokenizer new StringTokenizer filenames while hasMoreTokens files addElement project resolveFile nextToken public void addFileset FileSet fs filesets addElement fs public void setIncludefilenames boolean includeFileNames this includeFileNames includeFileNames public boolean getIncludeFileNames return includeFileNames public void execute Message savedMessage message Vector savedFiles Vector files clone try Mailer mailer null boolean autoFound false if encoding equals MIME encoding equals AUTO autoFound try mailer Mailer Class forName newInstance autoFound true log Project MSG_VERBOSE catch Throwable log Project MSG_WARN if encoding equals UU encoding equals AUTO autoFound try mailer Mailer Class forName newInstance autoFound true log Project MSG_VERBOSE catch Throwable log Project MSG_WARN if encoding equals PLAIN encoding equals AUTO autoFound mailer new PlainMailer autoFound true log Project MSG_VERBOSE if mailer null throw new BuildException encoding if message null message new Message message setProject getProject if from null from getAddress null throw new BuildException if toList isEmpty ccList isEmpty bccList isEmpty throw new BuildException if messageMimeType null if message isMimeTypeSpecified throw new BuildException else message setMimeType messageMimeType Enumeration filesets elements while hasMoreElements FileSet fs FileSet nextElement DirectoryScanner ds fs getDirectoryScanner project String includedFiles ds getIncludedFiles File baseDir ds getBasedir for int includedFiles length File file new File baseDir includedFiles files addElement file log subject Project MSG_INFO log from Project MSG_VERBOSE log toList Project MSG_VERBOSE log ccList Project MSG_VERBOSE log bccList Project MSG_VERBOSE mailer setHost host mailer setPort port mailer setMessage message mailer setFrom from mailer setToList toList mailer setCcList ccList mailer setBccList bccList mailer setFiles files mailer setSubject subject mailer setTask this mailer setIncludeFileNames includeFileNames mailer send int count files size log count count Project MSG_INFO catch BuildException log Project MSG_WARN if failOnError throw finally message savedMessage files savedFiles', 'bug': '1'}
{'sequence': 'class PlainMailer extends Mailer public void send try MailMessage mailMessage new MailMessage host port mailMessage from from toString Enumeration toList elements while hasMoreElements mailMessage to nextElement toString ccList elements while hasMoreElements mailMessage cc nextElement toString bccList elements while hasMoreElements mailMessage bcc nextElement toString if subject null mailMessage setSubject subject mailMessage setHeader getDate mailMessage setHeader message getMimeType PrintStream out mailMessage getPrintStream message print out files elements while hasMoreElements File file File nextElement attach file out mailMessage sendAndClose catch IOException ioe throw new BuildException ioe protected void attach File file PrintStream out throws IOException if file exists file canRead throw new BuildException file getName if includeFileNames out println String filename file getName int filenamelength filename length out println filename for int star star filenamelength star out print out println int length byte buf new byte FileInputStream finstr new FileInputStream file try BufferedInputStream in new BufferedInputStream finstr buf length while length in read buf out write buf length finally finstr close', 'bug': '0'}
{'sequence': 'public class BuildException extends RuntimeException private Throwable cause private Location location Location UNKNOWN_LOCATION public BuildException super public BuildException String message super message public BuildException String message Throwable cause super message this cause cause public BuildException String msg Throwable cause Location location this msg cause this location location public BuildException Throwable cause super cause toString this cause cause public BuildException String message Location location super message this location location public BuildException Throwable cause Location location this cause this location location public Throwable getException return cause public String toString return location toString getMessage public void setLocation Location location this location location public Location getLocation return location public void printStackTrace printStackTrace System err public void printStackTrace PrintStream ps synchronized ps super printStackTrace ps if cause null ps println cause printStackTrace ps public void printStackTrace PrintWriter pw synchronized pw super printStackTrace pw if cause null pw println cause printStackTrace pw', 'bug': '0'}
{'sequence': 'public class WLRmic extends DefaultRmicAdapter public boolean execute throws BuildException getRmic log Project MSG_VERBOSE Commandline cmd setupRmicCommand new String AntClassLoader loader null try Class null if getRmic getClasspath null Class forName else loader new AntClassLoader getRmic getProject getRmic getClasspath loader loadClass AntClassLoader initializeClass Method doRmic getMethod new Class String class doRmic invoke null new Object cmd getArguments return true catch ClassNotFoundException ex throw new BuildException getRmic getLocation catch Exception ex if ex instanceof BuildException throw BuildException ex else throw new BuildException ex getRmic getLocation finally if loader null loader cleanup public String getStubClassSuffix return public String getSkelClassSuffix return', 'bug': '0'}
{'sequence': 'public class CBZip2OutputStream extends OutputStream implements BZip2Constants protected static final int SETMASK protected static final int CLEARMASK SETMASK protected static final int GREATER_ICOST protected static final int LESSER_ICOST protected static final int SMALL_THRESH protected static final int DEPTH_THRESH protected static final int QSORT_STACK_SIZE private static void panic System out println private void makeMaps int nInUse for if inUse seqToUnseq nInUse char unseqToSeq char nInUse nInUse protected static void hbMakeCodeLengths char len int freq int alphaSize int maxLen int nNodes nHeap n1 n2 boolean tooLong int heap new int MAX_ALPHA_SIZE int weight new int MAX_ALPHA_SIZE int parent new int MAX_ALPHA_SIZE for alphaSize weight freq freq while true nNodes alphaSize nHeap heap weight parent for alphaSize parent nHeap heap nHeap int zz tmp zz nHeap tmp heap zz while weight tmp weight heap zz heap zz heap zz zz heap zz tmp if nHeap MAX_ALPHA_SIZE panic while nHeap n1 heap heap heap nHeap nHeap int zz yy tmp zz tmp heap zz while true yy zz if yy nHeap break if yy nHeap weight heap yy weight heap yy yy if weight tmp weight heap yy break heap zz heap yy zz yy heap zz tmp n2 heap heap heap nHeap nHeap int zz yy tmp zz tmp heap zz while true yy zz if yy nHeap break if yy nHeap weight heap yy weight heap yy yy if weight tmp weight heap yy break heap zz heap yy zz yy heap zz tmp nNodes parent n1 parent n2 nNodes weight nNodes weight n1 weight n2 weight n1 weight n2 weight n1 weight n2 parent nNodes nHeap heap nHeap nNodes int zz tmp zz nHeap tmp heap zz while weight tmp weight heap zz heap zz heap zz zz heap zz tmp if nNodes MAX_ALPHA_SIZE panic tooLong false for alphaSize while parent parent len char if maxLen tooLong true if tooLong break for alphaSize weight weight int last int origPtr int blockSize100k boolean blockRandomised int bytesIn int bytesOut int bsBuff int bsLive CRC mCrc new CRC private boolean inUse new boolean private int nInUse private char seqToUnseq new char private char unseqToSeq new char private char selector new char MAX_SELECTORS private char selectorMtf new char MAX_SELECTORS private char block private int quadrant private int zptr private short szptr private int ftab private int nMTF private int mtfFreq new int MAX_ALPHA_SIZE private int workFactor private int workDone private int workLimit private boolean firstAttempt private int nBlocksRandomised private int currentChar private int runLength public CBZip2OutputStream OutputStream inStream throws IOException this inStream public CBZip2OutputStream OutputStream inStream int inBlockSize throws IOException block null quadrant null zptr null ftab null bsSetStream inStream workFactor if inBlockSize inBlockSize if inBlockSize inBlockSize blockSize100k inBlockSize allocateCompressStructures initialize initBlock public void write int bv throws IOException int bv if currentChar if currentChar runLength if runLength writeRun currentChar runLength else writeRun runLength currentChar else currentChar runLength private void writeRun throws IOException if last allowableBlockSize inUse currentChar true for int runLength mCrc updateCRC char currentChar switch runLength case last block last char currentChar break case last block last char currentChar last block last char currentChar break case last block last char currentChar last block last char currentChar last block last char currentChar break default inUse runLength true last block last char currentChar last block last char currentChar last block last char currentChar last block last char currentChar last block last char runLength break else endBlock initBlock writeRun boolean closed false public void finalize throws Throwable close public void close throws IOException if closed return if runLength writeRun currentChar endBlock endCompression closed true super close bsStream close public void flush throws IOException super flush bsStream flush private int blockCRC combinedCRC private void initialize throws IOException bytesIn bytesOut nBlocksRandomised bsPutUChar bsPutUChar blockSize100k combinedCRC private int allowableBlockSize private void initBlock mCrc initialiseCRC last for int inUse false allowableBlockSize baseBlockSize blockSize100k private void endBlock throws IOException blockCRC mCrc getFinalCRC combinedCRC combinedCRC combinedCRC combinedCRC blockCRC doReversibleTransformation bsPutUChar bsPutUChar bsPutUChar bsPutUChar bsPutUChar bsPutUChar bsPutint blockCRC if blockRandomised bsW nBlocksRandomised else bsW moveToFrontCodeAndSend private void endCompression throws IOException bsPutUChar bsPutUChar bsPutUChar bsPutUChar bsPutUChar bsPutUChar bsPutint combinedCRC bsFinishedWithStream private void hbAssignCodes int code char length int minLen int maxLen int alphaSize int vec vec for minLen maxLen for alphaSize if length code vec vec vec private void bsSetStream OutputStream bsStream bsLive bsBuff bytesOut bytesIn private void bsFinishedWithStream throws IOException while bsLive int ch bsBuff try catch IOException throw bsBuff bsLive bytesOut private void bsW int int throws IOException while bsLive int ch bsBuff try catch IOException throw bsBuff bsLive bytesOut bsBuff bsLive bsLive private void bsPutUChar int throws IOException bsW private void bsPutint int throws IOException bsW bsW bsW bsW private void bsPutIntVS int numBits int throws IOException bsW numBits private void sendMTFValues throws IOException char len new char N_GROUPS MAX_ALPHA_SIZE int gs ge totc bt bc iter int nSelectors alphaSize minLen maxLen selCtr int nGroups nBytes alphaSize nInUse for N_GROUPS for alphaSize len char GREATER_ICOST if nMTF panic if nMTF nGroups else if nMTF nGroups else if nMTF nGroups else if nMTF nGroups else nGroups int nPart remF tFreq aFreq nPart nGroups remF nMTF gs while nPart tFreq remF nPart ge gs aFreq while aFreq tFreq ge alphaSize ge aFreq mtfFreq ge if ge gs nPart nGroups nPart nGroups nPart aFreq mtfFreq ge ge for alphaSize if gs ge len nPart char LESSER_ICOST else len nPart char GREATER_ICOST nPart gs ge remF aFreq int rfreq new int N_GROUPS MAX_ALPHA_SIZE int fave new int N_GROUPS short cost new short N_GROUPS for iter iter N_ITERS iter for nGroups fave for nGroups for alphaSize rfreq nSelectors totc gs while true if gs nMTF break ge gs G_SIZE if ge nMTF ge nMTF for nGroups cost if nGroups short cost0 cost1 cost2 cost3 cost4 cost5 cost0 cost1 cost2 cost3 cost4 cost5 for gs ge short icv szptr cost0 len icv cost1 len icv cost2 len icv cost3 len icv cost4 len icv cost5 len icv cost cost0 cost cost1 cost cost2 cost cost3 cost cost4 cost cost5 else for gs ge short icv szptr for nGroups cost len icv bc bt for nGroups if cost bc bc cost bt totc bc fave bt selector nSelectors char bt nSelectors for gs ge rfreq bt szptr gs ge for nGroups hbMakeCodeLengths len rfreq alphaSize rfreq null fave null cost null if nGroups panic if nSelectors nSelectors G_SIZE panic char pos new char N_GROUPS char ll_i tmp2 tmp for nGroups pos char for nSelectors ll_i selector tmp pos while ll_i tmp tmp2 tmp tmp pos pos tmp2 pos tmp selectorMtf char int code new int N_GROUPS MAX_ALPHA_SIZE for nGroups minLen maxLen for alphaSize if len maxLen maxLen len if len minLen minLen len if maxLen panic if minLen panic hbAssignCodes code len minLen maxLen alphaSize boolean inUse16 new boolean for inUse16 false for if inUse inUse16 true nBytes bytesOut for if inUse16 bsW else bsW for if inUse16 for if inUse bsW else bsW nBytes bytesOut bsW nGroups bsW nSelectors for nSelectors for selectorMtf bsW bsW nBytes bytesOut for nGroups int curr len bsW curr for alphaSize while curr len bsW while curr len bsW bsW nBytes bytesOut selCtr gs while true if gs nMTF break ge gs G_SIZE if ge nMTF ge nMTF for gs ge bsW len selector selCtr szptr code selector selCtr szptr gs ge selCtr if selCtr nSelectors panic private void moveToFrontCodeAndSend throws IOException bsPutIntVS origPtr generateMTFValues sendMTFValues private OutputStream bsStream private void simpleSort int lo int hi int int bigN hp int bigN hi lo if bigN return hp while incs hp bigN hp hp for hp hp incs hp lo while true if hi break zptr while fullGtU zptr zptr zptr if lo break zptr if hi break zptr while fullGtU zptr zptr zptr if lo break zptr if hi break zptr while fullGtU zptr zptr zptr if lo break zptr if workDone workLimit firstAttempt return private void vswap int p1 int p2 int int temp while temp zptr p1 zptr p1 zptr p2 zptr p2 temp p1 p2 private char med3 char char char char if if if return private class StackElem int ll int hh int dd private void qSort3 int loSt int hiSt int dSt int unLo unHi ltLo gtHi med int sp lo hi StackElem stack new StackElem QSORT_STACK_SIZE for int count count QSORT_STACK_SIZE count stack count new StackElem sp stack sp ll loSt stack sp hh hiSt stack sp dd dSt sp while sp if sp QSORT_STACK_SIZE panic sp lo stack sp ll hi stack sp hh stack sp dd if hi lo SMALL_THRESH DEPTH_THRESH simpleSort lo hi if workDone workLimit firstAttempt return continue med med3 block zptr lo block zptr hi block zptr lo hi unLo ltLo lo unHi gtHi hi while true while true if unLo unHi break int block zptr unLo med if int temp temp zptr unLo zptr unLo zptr ltLo zptr ltLo temp ltLo unLo continue if break unLo while true if unLo unHi break int block zptr unHi med if int temp temp zptr unHi zptr unHi zptr gtHi zptr gtHi temp gtHi unHi continue if break unHi if unLo unHi break int temp temp zptr unLo zptr unLo zptr unHi zptr unHi temp unLo unHi if gtHi ltLo stack sp ll lo stack sp hh hi stack sp dd sp continue ltLo lo unLo ltLo ltLo lo unLo ltLo vswap lo unLo hi gtHi gtHi unHi hi gtHi gtHi unHi vswap unLo hi lo unLo ltLo hi gtHi unHi stack sp ll lo stack sp hh stack sp dd sp stack sp ll stack sp hh stack sp dd sp stack sp ll stack sp hh hi stack sp dd sp private void mainSort int ss sb int runningOrder new int int copy new int boolean bigDone new boolean int c1 c2 int numQSorted for NUM_OVERSHOOT_BYTES block last block last for last NUM_OVERSHOOT_BYTES quadrant block char block last if last for last zptr firstAttempt false workDone workLimit simpleSort last else numQSorted for bigDone false for ftab c1 block for last c2 block ftab c1 c2 c1 c2 for ftab ftab c1 block for last c2 block c1 c2 c1 c2 ftab zptr ftab block last block ftab zptr ftab last for runningOrder int vv int do while do for vv runningOrder while ftab runningOrder ftab runningOrder ftab vv ftab vv runningOrder runningOrder if break runningOrder vv while for ss runningOrder for sb ss if ftab sb SETMASK SETMASK int lo ftab sb CLEARMASK int hi ftab sb CLEARMASK if hi lo qSort3 lo hi numQSorted hi lo if workDone workLimit firstAttempt return ftab sb SETMASK bigDone ss true if int bbStart ftab ss CLEARMASK int bbSize ftab ss CLEARMASK bbStart int shifts while bbSize shifts shifts for bbSize int a2update zptr bbStart int qVal shifts quadrant a2update qVal if a2update NUM_OVERSHOOT_BYTES quadrant a2update last qVal if bbSize shifts panic for copy ftab ss CLEARMASK for ftab ss CLEARMASK ftab ss CLEARMASK c1 block zptr if bigDone c1 zptr copy c1 zptr last zptr copy c1 for ftab ss SETMASK private void randomiseBlock int int rNToGo int rTPos for inUse false for last if rNToGo rNToGo char rNums rTPos rTPos if rTPos rTPos rNToGo block rNToGo block inUse block true private void doReversibleTransformation int workLimit workFactor last workDone blockRandomised false firstAttempt true mainSort if workDone workLimit firstAttempt randomiseBlock workLimit workDone blockRandomised true firstAttempt false mainSort origPtr for last if zptr origPtr break if origPtr panic private boolean fullGtU int i1 int i2 int char c1 c2 int s1 s2 c1 block i1 c2 block i2 if c1 c2 return c1 c2 i1 i2 c1 block i1 c2 block i2 if c1 c2 return c1 c2 i1 i2 c1 block i1 c2 block i2 if c1 c2 return c1 c2 i1 i2 c1 block i1 c2 block i2 if c1 c2 return c1 c2 i1 i2 c1 block i1 c2 block i2 if c1 c2 return c1 c2 i1 i2 c1 block i1 c2 block i2 if c1 c2 return c1 c2 i1 i2 last do c1 block i1 c2 block i2 if c1 c2 return c1 c2 s1 quadrant i1 s2 quadrant i2 if s1 s2 return s1 s2 i1 i2 c1 block i1 c2 block i2 if c1 c2 return c1 c2 s1 quadrant i1 s2 quadrant i2 if s1 s2 return s1 s2 i1 i2 c1 block i1 c2 block i2 if c1 c2 return c1 c2 s1 quadrant i1 s2 quadrant i2 if s1 s2 return s1 s2 i1 i2 c1 block i1 c2 block i2 if c1 c2 return c1 c2 s1 quadrant i1 s2 quadrant i2 if s1 s2 return s1 s2 i1 i2 if i1 last i1 last i1 if i2 last i2 last i2 workDone while return false private int incs private void allocateCompressStructures int baseBlockSize blockSize100k block new char NUM_OVERSHOOT_BYTES quadrant new int NUM_OVERSHOOT_BYTES zptr new int ftab new int if block null quadrant null zptr null ftab null szptr new short private void generateMTFValues char yy new char int char tmp char tmp2 int zPend int wr int EOB makeMaps EOB nInUse for EOB mtfFreq wr zPend for nInUse yy char for last char ll_i ll_i unseqToSeq block zptr tmp yy while ll_i tmp tmp2 tmp tmp yy yy tmp2 yy tmp if zPend else if zPend zPend while true switch zPend case szptr wr short RUNA wr mtfFreq RUNA break case szptr wr short RUNB wr mtfFreq RUNB break if zPend break zPend zPend zPend szptr wr short wr mtfFreq if zPend zPend while true switch zPend case szptr wr short RUNA wr mtfFreq RUNA break case szptr wr short RUNB wr mtfFreq RUNB break if zPend break zPend zPend szptr wr short EOB wr mtfFreq EOB nMTF wr', 'bug': '0'}
{'sequence': 'public final class DateUtils public static final String ISO8601_DATETIME_PATTERN public static final String ISO8601_DATE_PATTERN public static final String ISO8601_TIME_PATTERN private static final MessageFormat MINUTE_SECONDS new MessageFormat private static final double LIMITS private static final String MINUTES_PART private static final String SECONDS_PART private static final ChoiceFormat MINUTES_FORMAT new ChoiceFormat LIMITS MINUTES_PART private static final ChoiceFormat SECONDS_FORMAT new ChoiceFormat LIMITS SECONDS_PART static MINUTE_SECONDS setFormat MINUTES_FORMAT MINUTE_SECONDS setFormat SECONDS_FORMAT private DateUtils public static String format long date String pattern return format new Date date pattern public static String format Date date String pattern DateFormat df createDateFormat pattern return df format date public static String formatElapsedTime long millis long seconds millis long minutes seconds Object args new Long minutes new Long seconds return MINUTE_SECONDS format args private static DateFormat createDateFormat String pattern SimpleDateFormat sdf new SimpleDateFormat pattern TimeZone gmt TimeZone getTimeZone sdf setTimeZone gmt sdf setLenient true return sdf public static int getPhaseOfMoon Calendar cal int dayOfTheYear cal get Calendar DAY_OF_YEAR int yearInMetonicCycle cal get Calendar YEAR int epact yearInMetonicCycle if epact yearInMetonicCycle epact epact return dayOfTheYear epact', 'bug': '0'}
{'sequence': 'public class Not extends ConditionBase implements Condition public boolean eval throws BuildException if countConditions throw new BuildException if countConditions throw new BuildException return Condition getConditions nextElement eval', 'bug': '0'}
{'sequence': 'public interface SelectorContainer public boolean hasSelectors public int selectorCount public FileSelector getSelectors Project public Enumeration selectorElements public void appendSelector FileSelector selector public void addSelector SelectSelector selector public void addAnd AndSelector selector public void addOr OrSelector selector public void addNot NotSelector selector public void addNone NoneSelector selector public void addMajority MajoritySelector selector public void addDate DateSelector selector public void addSize SizeSelector selector public void addFilename FilenameSelector selector public void addCustom ExtendSelector selector public void addContains ContainsSelector selector public void addPresent PresentSelector selector public void addDepth DepthSelector selector public void addDepend DependSelector selector', 'bug': '0'}
{'sequence': 'public class Exit extends Task private String message private String ifCondition unlessCondition public void setMessage String value this message value public void setIf String ifCondition public void setUnless String unlessCondition public void execute throws BuildException if testIfCondition testUnlessCondition if message null message length throw new BuildException message else throw new BuildException public void addText String msg if message null message message project replaceProperties msg private boolean testIfCondition if ifCondition null equals ifCondition return true return project getProperty ifCondition null private boolean testUnlessCondition if unlessCondition null equals unlessCondition return true return project getProperty unlessCondition null', 'bug': '0'}
{'sequence': 'public class Copyfile extends Task private File srcFile private File destFile private boolean filtering false private boolean forceOverwrite false public void setSrc File src srcFile src public void setForceoverwrite boolean force forceOverwrite force public void setDest File dest destFile dest public void setFiltering String filter filtering Project toBoolean filter public void execute throws BuildException log if srcFile null throw new BuildException location if srcFile exists throw new BuildException srcFile toString location if destFile null throw new BuildException location if srcFile equals destFile log Project MSG_WARN if forceOverwrite srcFile lastModified destFile lastModified try project copyFile srcFile destFile filtering forceOverwrite catch IOException ioe String msg srcFile getAbsolutePath ioe getMessage throw new BuildException msg', 'bug': '0'}
{'sequence': 'public class RecorderEntry implements BuildLogger private String filename null private boolean record true private int loglevel Project MSG_INFO private PrintStream out null private long targetStartTime private boolean emacsMode false protected RecorderEntry String name filename name public String getFilename return filename public void setRecordState Boolean state if state null record state booleanValue public void buildStarted BuildEvent event log Project MSG_DEBUG public void buildFinished BuildEvent event log Project MSG_DEBUG Throwable error event getException if error null out println StringUtils LINE_SEP else out println StringUtils LINE_SEP StringUtils LINE_SEP error printStackTrace out out flush out close public void targetStarted BuildEvent event log event getTarget Project MSG_DEBUG log StringUtils LINE_SEP event getTarget getName Project MSG_INFO targetStartTime System currentTimeMillis public void targetFinished BuildEvent event log event getTarget Project MSG_DEBUG String time formatTime System currentTimeMillis targetStartTime log event getTarget time Project MSG_VERBOSE out flush public void taskStarted BuildEvent event log event getTask Project MSG_DEBUG public void taskFinished BuildEvent event log event getTask Project MSG_DEBUG out flush public void messageLogged BuildEvent event log Project MSG_DEBUG StringBuffer buf new StringBuffer if event getTask null String name event getTask getTaskName if emacsMode String label name int size DefaultLogger LEFT_COLUMN_SIZE label length for int size buf append buf append label buf append event getMessage log buf toString event getPriority private void log String mesg int level if record level loglevel out println mesg public void setMessageOutputLevel int level if level Project MSG_ERR level Project MSG_DEBUG loglevel level public void setOutputPrintStream PrintStream output out output public void setEmacsMode boolean emacsMode this emacsMode emacsMode public void setErrorPrintStream PrintStream err out err private static String formatTime long millis long seconds millis long minutes seconds if minutes return Long toString minutes minutes Long toString seconds seconds else return Long toString seconds seconds', 'bug': '0'}
{'sequence': 'public class Javac extends MatchingTask private static final String FAIL_MSG private Path src private File destDir private Path compileClasspath private Path compileSourcepath private String encoding private boolean debug false private boolean optimize false private boolean deprecation false private boolean depend false private boolean verbose false private String target private Path bootclasspath private Path extdirs private boolean includeAntRuntime true private boolean includeJavaRuntime false private boolean fork false private String forkedExecutable null private boolean nowarn false private String memoryInitialSize private String memoryMaximumSize private FacadeTaskHelper facade null protected boolean failOnError true protected boolean listFiles false protected File compileList new File private String source private String debugLevel public Javac if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 facade new FacadeTaskHelper else if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_2 facade new FacadeTaskHelper else if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_3 facade new FacadeTaskHelper else if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_4 facade new FacadeTaskHelper else facade new FacadeTaskHelper public String getDebugLevel return debugLevel public void setDebugLevel String this debugLevel public String getSource return source public void setSource String this source public Path createSrc if src null src new Path project return src createPath protected Path recreateSrc src null return createSrc public void setSrcdir Path srcDir if src null src srcDir else src append srcDir public Path getSrcdir return src public void setDestdir File destDir this destDir destDir public File getDestdir return destDir public void setSourcepath Path sourcepath if compileSourcepath null compileSourcepath sourcepath else compileSourcepath append sourcepath public Path getSourcepath return compileSourcepath public Path createSourcepath if compileSourcepath null compileSourcepath new Path project return compileSourcepath createPath public void setSourcepathRef Reference createSourcepath setRefid public void setClasspath Path classpath if compileClasspath null compileClasspath classpath else compileClasspath append classpath public Path getClasspath return compileClasspath public Path createClasspath if compileClasspath null compileClasspath new Path project return compileClasspath createPath public void setClasspathRef Reference createClasspath setRefid public void setBootclasspath Path bootclasspath if this bootclasspath null this bootclasspath bootclasspath else this bootclasspath append bootclasspath public Path getBootclasspath return bootclasspath public Path createBootclasspath if bootclasspath null bootclasspath new Path project return bootclasspath createPath public void setBootClasspathRef Reference createBootclasspath setRefid public void setExtdirs Path extdirs if this extdirs null this extdirs extdirs else this extdirs append extdirs public Path getExtdirs return extdirs public Path createExtdirs if extdirs null extdirs new Path project return extdirs createPath public void setListfiles boolean list listFiles list public boolean getListfiles return listFiles public void setFailonerror boolean fail failOnError fail public void setProceed boolean proceed failOnError proceed public boolean getFailonerror return failOnError public void setDeprecation boolean deprecation this deprecation deprecation public boolean getDeprecation return deprecation public void setMemoryInitialSize String memoryInitialSize this memoryInitialSize memoryInitialSize public String getMemoryInitialSize return memoryInitialSize public void setMemoryMaximumSize String memoryMaximumSize this memoryMaximumSize memoryMaximumSize public String getMemoryMaximumSize return memoryMaximumSize public void setEncoding String encoding this encoding encoding public String getEncoding return encoding public void setDebug boolean debug this debug debug public boolean getDebug return debug public void setOptimize boolean optimize this optimize optimize public boolean getOptimize return optimize public void setDepend boolean depend this depend depend public boolean getDepend return depend public void setVerbose boolean verbose this verbose verbose public boolean getVerbose return verbose public void setTarget String target this target target public String getTarget return target public void setIncludeantruntime boolean include includeAntRuntime include public boolean getIncludeantruntime return includeAntRuntime public void setIncludejavaruntime boolean include includeJavaRuntime include public boolean getIncludejavaruntime return includeJavaRuntime public void setFork boolean fork public void setExecutable String forkExec forkedExecutable forkExec public boolean isForkedJavac return fork equals getCompiler public String getJavacExecutable if forkedExecutable null isForkedJavac forkedExecutable getSystemJavac else if forkedExecutable null isForkedJavac forkedExecutable null return forkedExecutable public void setNowarn boolean flag this nowarn flag public boolean getNowarn return nowarn public ImplementationSpecificArgument createCompilerArg ImplementationSpecificArgument arg new ImplementationSpecificArgument facade addImplementationArgument arg return arg public String getCurrentCompilerArgs String chosen facade getExplicitChoice facade setImplementation getCompiler try return facade getArgs finally facade setImplementation chosen public void execute throws BuildException checkParameters resetFileLists String list src list for int list length File srcDir project resolveFile list if srcDir exists throw new BuildException srcDir getPath location DirectoryScanner ds this getDirectoryScanner srcDir String files ds getIncludedFiles scanDir srcDir destDir null destDir srcDir files compile protected void resetFileLists compileList new File protected void scanDir File srcDir File destDir String files GlobPatternMapper new GlobPatternMapper setFrom setTo SourceFileScanner sfs new SourceFileScanner this File newFiles sfs restrictAsFiles files srcDir destDir if newFiles length File newCompileList new File compileList length newFiles length System arraycopy compileList newCompileList compileList length System arraycopy newFiles newCompileList compileList length newFiles length compileList newCompileList public File getFileList return compileList protected boolean isJdkCompiler String compilerImpl return equals compilerImpl equals compilerImpl equals compilerImpl equals compilerImpl equals compilerImpl equals compilerImpl protected String getSystemJavac return JavaEnvUtils getJdkExecutable public void setCompiler String compiler facade setImplementation compiler public String getCompiler String compilerImpl getCompilerVersion if fork if isJdkCompiler compilerImpl log Project MSG_WARN compilerImpl else log Project MSG_WARN return compilerImpl public String getCompilerVersion facade setMagicValue getProject getProperty return facade getImplementation protected void checkParameters throws BuildException if src null throw new BuildException location if src size throw new BuildException location if destDir null destDir isDirectory throw new BuildException destDir location protected void compile String compilerImpl getCompiler if compileList length log compileList length compileList length destDir null destDir if listFiles for int compileList length String filename compileList getAbsolutePath log filename CompilerAdapter adapter CompilerAdapterFactory getCompiler compilerImpl this adapter setJavac this if adapter execute if failOnError throw new BuildException FAIL_MSG location else log FAIL_MSG Project MSG_ERR public class ImplementationSpecificArgument extends org apache tools ant util facade ImplementationSpecificArgument public void setCompiler String impl super setImplementation impl', 'bug': '0'}
{'sequence': 'public class Tar extends MatchingTask public static final String WARN public static final String FAIL public static final String TRUNCATE public static final String GNU public static final String OMIT File tarFile File baseDir private TarLongFileMode longFileMode new TarLongFileMode Vector filesets new Vector Vector fileSetFiles new Vector private boolean longWarningGiven false private TarCompressionMethod compression new TarCompressionMethod public TarFileSet createTarFileSet TarFileSet fileset new TarFileSet filesets addElement fileset return fileset public void setTarfile File tarFile this tarFile tarFile public void setDestFile File destFile this tarFile destFile public void setBasedir File baseDir this baseDir baseDir public void setLongfile String mode log this longFileMode new TarLongFileMode longFileMode setValue mode public void setLongfile TarLongFileMode mode this longFileMode mode public void setCompression TarCompressionMethod mode this compression mode public void execute throws BuildException if tarFile null throw new BuildException location if tarFile exists tarFile isDirectory throw new BuildException location if tarFile exists tarFile canWrite throw new BuildException location Vector savedFileSets Vector filesets clone try if baseDir null if baseDir exists throw new BuildException location TarFileSet mainFileSet new TarFileSet fileset mainFileSet setDir baseDir filesets addElement mainFileSet if filesets size throw new BuildException location boolean upToDate true for Enumeration filesets elements hasMoreElements TarFileSet fs TarFileSet nextElement String files fs getFiles project if archiveIsUpToDate files upToDate false for int files length if tarFile equals new File fs getDir project files throw new BuildException location if upToDate log tarFile getAbsolutePath Project MSG_INFO return log tarFile getAbsolutePath Project MSG_INFO TarOutputStream tOut null try tOut new TarOutputStream compression compress new BufferedOutputStream new FileOutputStream tarFile tOut setDebug true if longFileMode isTruncateMode tOut setLongFileMode TarOutputStream LONGFILE_TRUNCATE else if longFileMode isFailMode longFileMode isOmitMode tOut setLongFileMode TarOutputStream LONGFILE_ERROR else tOut setLongFileMode TarOutputStream LONGFILE_GNU longWarningGiven false for Enumeration filesets elements hasMoreElements TarFileSet fs TarFileSet nextElement String files fs getFiles project if files length fs getFullpath length throw new BuildException for int files length File new File fs getDir project files String name files replace File separatorChar tarFile tOut name fs catch IOException ioe String msg ioe getMessage throw new BuildException msg ioe location finally if tOut null try tOut close catch IOException finally filesets savedFileSets protected void tarFile File file TarOutputStream tOut String vPath TarFileSet tarFileSet throws IOException FileInputStream fIn null String fullpath tarFileSet getFullpath if fullpath length vPath fullpath else if vPath length return if file isDirectory vPath endsWith vPath String prefix tarFileSet getPrefix if prefix length prefix endsWith prefix prefix vPath prefix vPath if vPath startsWith tarFileSet getPreserveLeadingSlashes int vPath length if return vPath vPath substring try if vPath length TarConstants NAMELEN if longFileMode isOmitMode log vPath Project MSG_INFO return else if longFileMode isWarnMode log vPath TarConstants NAMELEN Project MSG_WARN if longWarningGiven log Project MSG_WARN longWarningGiven true else if longFileMode isFailMode throw new BuildException vPath TarConstants NAMELEN location TarEntry te new TarEntry vPath te setModTime file lastModified if file isDirectory te setSize file length te setMode tarFileSet getMode te setUserName tarFileSet getUserName te setGroupName tarFileSet getGroup tOut putNextEntry te if file isDirectory fIn new FileInputStream file byte buffer new byte int count do tOut write buffer count count fIn read buffer buffer length while count tOut closeEntry finally if fIn null fIn close protected boolean archiveIsUpToDate String files SourceFileScanner sfs new SourceFileScanner this MergingMapper mm new MergingMapper mm setTo tarFile getAbsolutePath return sfs restrict files baseDir null mm length public static class TarFileSet extends FileSet private String files null private int mode private String userName private String groupName private String prefix private String fullpath private boolean preserveLeadingSlashes false public TarFileSet FileSet fileset super fileset public TarFileSet super public String getFiles Project if files null DirectoryScanner ds getDirectoryScanner String directories ds getIncludedDirectories String filesPerSe ds getIncludedFiles files new String directories length filesPerSe length System arraycopy directories files directories length System arraycopy filesPerSe files directories length filesPerSe length return files public void setMode String octalString this mode Integer parseInt octalString public int getMode return mode public void setUserName String userName this userName userName public String getUserName return userName public void setGroup String groupName this groupName groupName public String getGroup return groupName public void setPrefix String prefix this prefix prefix public String getPrefix return prefix public void setFullpath String fullpath this fullpath fullpath public String getFullpath return fullpath public void setPreserveLeadingSlashes boolean this preserveLeadingSlashes public boolean getPreserveLeadingSlashes return preserveLeadingSlashes public static class TarLongFileMode extends EnumeratedAttribute public static final String WARN public static final String FAIL public static final String TRUNCATE public static final String GNU public static final String OMIT private final String validModes WARN FAIL TRUNCATE GNU OMIT public TarLongFileMode super setValue WARN public String getValues return validModes public boolean isTruncateMode return TRUNCATE equalsIgnoreCase getValue public boolean isWarnMode return WARN equalsIgnoreCase getValue public boolean isGnuMode return GNU equalsIgnoreCase getValue public boolean isFailMode return FAIL equalsIgnoreCase getValue public boolean isOmitMode return OMIT equalsIgnoreCase getValue public static final class TarCompressionMethod extends EnumeratedAttribute private static final String NONE private static final String GZIP private static final String BZIP2 public TarCompressionMethod super setValue NONE public String getValues return new String NONE GZIP BZIP2 private OutputStream compress final OutputStream ostream throws IOException final String value getValue if GZIP equals value return new GZIPOutputStream ostream else if BZIP2 equals value ostream write ostream write return new CBZip2OutputStream ostream return ostream', 'bug': '1'}
{'sequence': 'public interface XSLTLiaison void setStylesheet File stylesheet throws Exception void addParam String name String expression throws Exception void transform File infile File outfile throws Exception', 'bug': '0'}
{'sequence': 'public class EmailAddress private String name private String address public EmailAddress public EmailAddress String address this address address public void setName String name this name name public void setAddress String address this address address public String toString if name null return address else return name address public String getAddress return address public String getName return name', 'bug': '0'}
{'sequence': 'public interface TimeoutObserver void timeoutOccured Watchdog', 'bug': '0'}
{'sequence': 'public class SunRmic extends DefaultRmicAdapter public boolean execute throws BuildException getRmic log Project MSG_VERBOSE Commandline cmd setupRmicCommand LogOutputStream logstr new LogOutputStream getRmic Project MSG_WARN try Class Class forName Constructor cons getConstructor new Class OutputStream class String class Object rmic cons newInstance new Object logstr Method doRmic getMethod new Class String class Boolean ok Boolean doRmic invoke rmic new Object cmd getArguments return ok booleanValue catch ClassNotFoundException ex throw new BuildException getRmic getLocation catch Exception ex if ex instanceof BuildException throw BuildException ex else throw new BuildException ex getRmic getLocation finally try logstr close catch IOException throw new BuildException', 'bug': '0'}
{'sequence': 'public class ZipScanner extends DirectoryScanner protected File srcFile public void setSrc File srcFile this srcFile srcFile public String getIncludedFiles String result new String result srcFile getAbsolutePath return result public String getIncludedDirectories return new String public void init if includes null includes new String includes if excludes null excludes new String public boolean match String path String vpath path replace File separatorChar replace File separatorChar return isIncluded vpath isExcluded vpath', 'bug': '0'}
{'sequence': 'public class DepthSelector extends BaseExtendSelector public int min public int max public final static String MIN_KEY public final static String MAX_KEY public DepthSelector public String toString StringBuffer buf new StringBuffer buf append min buf append buf append max buf append return buf toString public void setMin int min this min min public void setMax int max this max max public void setParameters Parameter parameters super setParameters parameters if parameters null for int parameters length String paramname parameters getName if MIN_KEY equalsIgnoreCase paramname try setMin Integer parseInt parameters getValue catch NumberFormatException nfe1 setError parameters getValue else if MAX_KEY equalsIgnoreCase paramname try setMax Integer parseInt parameters getValue catch NumberFormatException nfe1 setError parameters getValue else setError paramname public void verifySettings if min max setError if max min max setError public boolean isSelected File basedir String filename File file validate int depth String abs_base basedir getAbsolutePath String abs_file file getAbsolutePath StringTokenizer tok_base new StringTokenizer abs_base File separator StringTokenizer tok_file new StringTokenizer abs_file File separator while tok_file hasMoreTokens String filetoken tok_file nextToken if tok_base hasMoreTokens String basetoken tok_base nextToken if basetoken equals filetoken throw new BuildException filename abs_base else depth if max depth max return false if tok_base hasMoreTokens throw new BuildException filename abs_base if min depth min return false return true', 'bug': '0'}
{'sequence': 'public class PatternSet extends DataType private Vector includeList new Vector private Vector excludeList new Vector private Vector includesFileList new Vector private Vector excludesFileList new Vector public class NameEntry private String name private String ifCond private String unlessCond public void setName String name this name name public void setIf String cond ifCond cond public void setUnless String cond unlessCond cond public String getName return name public String evalName Project return valid name null private boolean valid Project if ifCond null getProperty ifCond null return false else if unlessCond null getProperty unlessCond null return false return true public String toString StringBuffer buf new StringBuffer name if ifCond null unlessCond null buf append String connector if ifCond null buf append buf append ifCond connector if unlessCond null buf append connector buf append buf append unlessCond return buf toString public PatternSet super public void setRefid Reference throws BuildException if includeList isEmpty excludeList isEmpty throw tooManyAttributes super setRefid public void addConfiguredPatternset PatternSet if isReference throw noChildrenAllowed String nestedIncludes getIncludePatterns getProject String nestedExcludes getExcludePatterns getProject if nestedIncludes null for int nestedIncludes length createInclude setName nestedIncludes if nestedExcludes null for int nestedExcludes length createExclude setName nestedExcludes public NameEntry createInclude if isReference throw noChildrenAllowed return addPatternToList includeList public NameEntry createIncludesFile if isReference throw noChildrenAllowed return addPatternToList includesFileList public NameEntry createExclude if isReference throw noChildrenAllowed return addPatternToList excludeList public NameEntry createExcludesFile if isReference throw noChildrenAllowed return addPatternToList excludesFileList public void setIncludes String includes if isReference throw tooManyAttributes if includes null includes length StringTokenizer tok new StringTokenizer includes false while tok hasMoreTokens createInclude setName tok nextToken public void setExcludes String excludes if isReference throw tooManyAttributes if excludes null excludes length StringTokenizer tok new StringTokenizer excludes false while tok hasMoreTokens createExclude setName tok nextToken private NameEntry addPatternToList Vector list NameEntry result new NameEntry list addElement result return result public void setIncludesfile File includesFile throws BuildException if isReference throw tooManyAttributes createIncludesFile setName includesFile getAbsolutePath public void setExcludesfile File excludesFile throws BuildException if isReference throw tooManyAttributes createExcludesFile setName excludesFile getAbsolutePath private void readPatterns File patternfile Vector patternlist Project throws BuildException BufferedReader patternReader null try patternReader new BufferedReader new FileReader patternfile String line patternReader readLine while line null if line length line replaceProperties line addPatternToList patternlist setName line line patternReader readLine catch IOException ioe String msg patternfile throw new BuildException msg ioe finally if null patternReader try patternReader close catch IOException ioe public void append PatternSet other Project if isReference throw new BuildException String incl other getIncludePatterns if incl null for int incl length createInclude setName incl String excl other getExcludePatterns if excl null for int excl length createExclude setName excl public String getIncludePatterns Project if isReference return getRef getIncludePatterns else readFiles return makeArray includeList public String getExcludePatterns Project if isReference return getRef getExcludePatterns else readFiles return makeArray excludeList boolean hasPatterns Project if isReference return getRef hasPatterns else return includesFileList size excludesFileList size includeList size excludeList size private PatternSet getRef Project if checked Stack stk new Stack stk push this dieOnCircularReference stk Object ref getReferencedObject if instanceof PatternSet String msg ref getRefId throw new BuildException msg else return PatternSet private String makeArray Vector list Project if list size return null Vector tmpNames new Vector for Enumeration list elements hasMoreElements NameEntry ne NameEntry nextElement String pattern ne evalName if pattern null pattern length tmpNames addElement pattern String result new String tmpNames size tmpNames copyInto result return result private void readFiles Project if includesFileList size Enumeration includesFileList elements while hasMoreElements NameEntry ne NameEntry nextElement String fileName ne evalName if fileName null File inclFile resolveFile fileName if inclFile exists throw new BuildException inclFile getAbsolutePath readPatterns inclFile includeList includesFileList removeAllElements if excludesFileList size Enumeration excludesFileList elements while hasMoreElements NameEntry ne NameEntry nextElement String fileName ne evalName if fileName null File exclFile resolveFile fileName if exclFile exists throw new BuildException exclFile getAbsolutePath readPatterns exclFile excludeList excludesFileList removeAllElements public String toString return includeList excludeList', 'bug': '0'}
{'sequence': 'public class CompilerAdapterFactory private CompilerAdapterFactory public static CompilerAdapter getCompiler String compilerType Task task throws BuildException boolean isClassicCompilerSupported true if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_4 isClassicCompilerSupported false if compilerType equalsIgnoreCase return new Jikes if compilerType equalsIgnoreCase return new JavacExternal if compilerType equalsIgnoreCase compilerType equalsIgnoreCase compilerType equalsIgnoreCase if isClassicCompilerSupported return new Javac12 else task log Project MSG_WARN compilerType if compilerType equalsIgnoreCase compilerType equalsIgnoreCase compilerType equalsIgnoreCase if doesModernCompilerExist return new Javac13 else if isClassicCompilerSupported task log Project MSG_WARN return new Javac12 else throw new BuildException if compilerType equalsIgnoreCase compilerType equalsIgnoreCase return new Jvc if compilerType equalsIgnoreCase return new Kjc if compilerType equalsIgnoreCase return new Gcj if compilerType equalsIgnoreCase compilerType equalsIgnoreCase return new Sj return resolveClassName compilerType private static boolean doesModernCompilerExist try Class forName return true catch ClassNotFoundException cnfe return false private static CompilerAdapter resolveClassName String className throws BuildException try Class Class forName className Object newInstance return CompilerAdapter catch ClassNotFoundException cnfe throw new BuildException className cnfe catch ClassCastException cce throw new BuildException className cce catch Throwable throw new BuildException className', 'bug': '0'}
{'sequence': 'public class Java extends Task private CommandlineJava cmdl new CommandlineJava private Environment env new Environment private boolean fork false private boolean newEnvironment false private File dir null private File out private PrintStream outStream null private boolean failOnError false private boolean append false private Long timeout null public void execute throws BuildException File savedDir dir int err try if err executeJava if failOnError throw new BuildException err location else log err Project MSG_ERR finally dir savedDir public int executeJava throws BuildException String classname cmdl getClassname if classname null cmdl getJar null throw new BuildException if fork cmdl getJar null throw new BuildException if fork log cmdl describeCommand Project MSG_VERBOSE else if cmdl getVmCommand size log Project MSG_WARN if dir null log Project MSG_WARN if newEnvironment null env getVariables log Project MSG_WARN log cmdl describeJavaCommand Project MSG_VERBOSE try if fork return run cmdl getCommandline else try run cmdl return catch ExitException ex return ex getStatus catch BuildException if failOnError throw else log getMessage Project MSG_ERR return catch Throwable if failOnError throw new BuildException else log getMessage Project MSG_ERR return public void setClasspath Path createClasspath append public Path createClasspath return cmdl createClasspath project createPath public void setClasspathRef Reference createClasspath setRefid public void setJar File jarfile throws BuildException if cmdl getClassname null throw new BuildException cmdl setJar jarfile getAbsolutePath public void setClassname String throws BuildException if cmdl getJar null throw new BuildException cmdl setClassname public void setArgs String log Project MSG_WARN cmdl createArgument setLine public Commandline Argument createArg return cmdl createArgument public void setFork boolean this fork public void setJvmargs String log Project MSG_WARN cmdl createVmArgument setLine public Commandline Argument createJvmarg return cmdl createVmArgument public void setJvm String cmdl setVm public void addSysproperty Environment Variable sysp cmdl addSysproperty sysp public void setFailonerror boolean fail failOnError fail public void setDir File this dir public void setOutput File out this out out public void setMaxmemory String max cmdl setMaxmemory max public void setJVMVersion String value cmdl setVmversion value public void addEnv Environment Variable var env addVariable var public void setNewenvironment boolean newenv newEnvironment newenv public void setAppend boolean append this append append public void setTimeout Long value timeout value protected void handleOutput String line if outStream null outStream println line else super handleOutput line protected void handleErrorOutput String line if outStream null outStream println line else super handleErrorOutput line private void run CommandlineJava command throws BuildException ExecuteJava exe new ExecuteJava exe setJavaCommand command getJavaCommand exe setClasspath command getClasspath exe setSystemProperties command getSystemProperties exe setTimeout timeout if out null try outStream new PrintStream new FileOutputStream out getAbsolutePath append exe execute project catch IOException io throw new BuildException io location finally if outStream null outStream close else exe execute project private int run String command throws BuildException FileOutputStream fos null try Execute exe null if out null exe new Execute new LogStreamHandler this Project MSG_INFO Project MSG_WARN createWatchdog else fos new FileOutputStream out getAbsolutePath append exe new Execute new PumpStreamHandler fos createWatchdog exe setAntRun project if dir null dir project getBaseDir else if dir exists dir isDirectory throw new BuildException dir getAbsolutePath location exe setWorkingDirectory dir String environment env getVariables if environment null for int environment length log environment Project MSG_VERBOSE exe setNewenvironment newEnvironment exe setEnvironment environment exe setCommandline command try int rc exe execute if exe killedProcess log Project MSG_WARN return rc catch IOException throw new BuildException location catch IOException io throw new BuildException io location finally if fos null try fos close catch IOException io protected void run String classname Vector args throws BuildException CommandlineJava cmdj new CommandlineJava cmdj setClassname classname for int args size cmdj createArgument setValue String args elementAt run cmdj public void clearArgs cmdl clearJavaArgs protected ExecuteWatchdog createWatchdog throws BuildException if timeout null return null return new ExecuteWatchdog timeout longValue', 'bug': '1'}
{'sequence': 'public class SourceFileScanner protected Task task private FileUtils fileUtils public SourceFileScanner Task task this task task fileUtils FileUtils newFileUtils public String restrict String files File srcDir File destDir FileNameMapper mapper long now new java util Date getTime StringBuffer targetList new StringBuffer if Os isFamily now Vector new Vector for int files length String targets mapper mapFileName files if targets null targets length task log files Project MSG_VERBOSE continue File src fileUtils resolveFile srcDir files if src lastModified now task log files Project MSG_WARN boolean added false targetList setLength for int added targets length File dest fileUtils resolveFile destDir targets if dest exists task log files dest getAbsolutePath Project MSG_VERBOSE addElement files added true else if src lastModified dest lastModified task log files dest getAbsolutePath Project MSG_VERBOSE addElement files added true else if targetList length targetList append targetList append dest getAbsolutePath if added task log files targetList toString targets length Project MSG_VERBOSE String result new String size copyInto result return result public File restrictAsFiles String files File srcDir File destDir FileNameMapper mapper String res restrict files srcDir destDir mapper File result new File res length for int res length result new File srcDir res return result', 'bug': '0'}
{'sequence': 'public abstract class EnumeratedAttribute protected String value private int index public abstract String getValues protected EnumeratedAttribute public final void setValue String value throws BuildException int index indexOfValue value if index throw new BuildException value this index index this value value public final boolean containsValue String value return indexOfValue value public final int indexOfValue String value String values getValues if values null value null return for int values length if value equals values return return public final String getValue return value public final int getIndex return index public String toString return getValue', 'bug': '0'}
{'sequence': 'public class Dirname extends Task private File file private String property public void setFile File file this file file public void setProperty String property this property property public void execute throws BuildException if property null throw new BuildException location if file null throw new BuildException location else String value file getParent getProject setNewProperty property value', 'bug': '0'}
{'sequence': 'public class ExtraFieldUtils private static Hashtable implementations static implementations new Hashtable register AsiExtraField class public static void register Class try ZipExtraField ze ZipExtraField newInstance implementations put ze getHeaderId catch ClassCastException cc throw new RuntimeException catch InstantiationException ie throw new RuntimeException catch IllegalAccessException ie throw new RuntimeException public static ZipExtraField createExtraField ZipShort headerId throws InstantiationException IllegalAccessException Class Class implementations get headerId if null return ZipExtraField newInstance UnrecognizedExtraField new UnrecognizedExtraField setHeaderId headerId return public static ZipExtraField parse byte data throws ZipException Vector new Vector int start while start data length ZipShort headerId new ZipShort data start int length new ZipShort data start getValue if start length data length throw new ZipException start try ZipExtraField ze createExtraField headerId ze parseFromLocalFileData data start length addElement ze catch InstantiationException ie throw new ZipException ie getMessage catch IllegalAccessException iae throw new ZipException iae getMessage start length throw new ZipException start ZipExtraField result new ZipExtraField size copyInto result return result public static byte mergeLocalFileDataData ZipExtraField data int sum data length for int data length sum data getLocalFileDataLength getValue byte result new byte sum int start for int data length System arraycopy data getHeaderId getBytes result start System arraycopy data getLocalFileDataLength getBytes result start byte local data getLocalFileDataData System arraycopy local result start local length start local length return result public static byte mergeCentralDirectoryData ZipExtraField data int sum data length for int data length sum data getCentralDirectoryLength getValue byte result new byte sum int start for int data length System arraycopy data getHeaderId getBytes result start System arraycopy data getCentralDirectoryLength getBytes result start byte local data getCentralDirectoryData System arraycopy local result start local length start local length return result', 'bug': '0'}
{'sequence': 'public abstract class BaseSelectorContainer extends BaseSelector implements SelectorContainer private Vector selectorsList new Vector public BaseSelectorContainer public boolean hasSelectors return selectorsList isEmpty public int selectorCount return selectorsList size public FileSelector getSelectors Project FileSelector result new FileSelector selectorsList size selectorsList copyInto result return result public Enumeration selectorElements return selectorsList elements public String toString StringBuffer buf new StringBuffer Enumeration selectorElements if hasMoreElements while hasMoreElements buf append nextElement toString if hasMoreElements buf append return buf toString public void appendSelector FileSelector selector selectorsList addElement selector public void validate verifySettings String errmsg getError if errmsg null throw new BuildException errmsg Enumeration selectorElements while hasMoreElements Object nextElement if instanceof BaseSelector BaseSelector validate public abstract boolean isSelected File basedir String filename File file public void addSelector SelectSelector selector appendSelector selector public void addAnd AndSelector selector appendSelector selector public void addOr OrSelector selector appendSelector selector public void addNot NotSelector selector appendSelector selector public void addNone NoneSelector selector appendSelector selector public void addMajority MajoritySelector selector appendSelector selector public void addDate DateSelector selector appendSelector selector public void addSize SizeSelector selector appendSelector selector public void addFilename FilenameSelector selector appendSelector selector public void addCustom ExtendSelector selector appendSelector selector public void addContains ContainsSelector selector appendSelector selector public void addPresent PresentSelector selector appendSelector selector public void addDepth DepthSelector selector appendSelector selector public void addDepend DependSelector selector appendSelector selector', 'bug': '0'}
{'sequence': 'public class Touch extends Task private File file private long millis private String dateTime private Vector filesets new Vector private FileUtils fileUtils public Touch fileUtils FileUtils newFileUtils public void setFile File file this file file public void setMillis long millis this millis millis public void setDatetime String dateTime this dateTime dateTime public void addFileset FileSet set filesets addElement set public void execute throws BuildException long savedMillis millis if file null filesets size throw new BuildException if file null file exists file isDirectory throw new BuildException try if dateTime null DateFormat df DateFormat getDateTimeInstance DateFormat SHORT DateFormat SHORT Locale US try setMillis df parse dateTime getTime if millis throw new BuildException dateTime catch ParseException pe throw new BuildException pe getMessage pe location touch finally millis savedMillis protected void touch throws BuildException if file null if file exists log file Project MSG_INFO try fileUtils createNewFile file catch IOException ioe throw new BuildException file ioe location if millis JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 log Project MSG_WARN return boolean resetMillis false if millis resetMillis true millis System currentTimeMillis if file null touch file for int filesets size FileSet fs FileSet filesets elementAt DirectoryScanner ds fs getDirectoryScanner project File fromDir fs getDir project String srcFiles ds getIncludedFiles String srcDirs ds getIncludedDirectories for int srcFiles length touch new File fromDir srcFiles for int srcDirs length touch new File fromDir srcDirs if resetMillis millis protected void touch File file throws BuildException if file canWrite throw new BuildException file if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 return fileUtils setFileLastModified file millis', 'bug': '0'}
{'sequence': 'public class Deltree extends Task private File dir public void setDir File dir this dir dir public void execute throws BuildException log if dir null throw new BuildException location if dir exists if dir isDirectory if dir delete throw new BuildException dir getAbsolutePath location return log dir getAbsolutePath try removeDir dir catch IOException ioe String msg dir getAbsolutePath throw new BuildException msg location private void removeDir File dir throws IOException String list dir list for int list length String list File new File dir if isDirectory removeDir else if delete throw new BuildException getAbsolutePath if dir delete throw new BuildException dir getAbsolutePath', 'bug': '0'}
{'sequence': 'public class SizeSelector extends BaseExtendSelector private long size private long multiplier private long sizelimit private int cmp public final static String SIZE_KEY public final static String UNITS_KEY public final static String WHEN_KEY public SizeSelector public String toString StringBuffer buf new StringBuffer buf append sizelimit buf append if cmp buf append else if cmp buf append else buf append buf append return buf toString public void setValue long size this size size if multiplier size sizelimit size multiplier public void setUnits ByteUnits units int units getIndex multiplier if multiplier else if multiplier else if multiplier else if multiplier else if multiplier else if multiplier else if multiplier else if multiplier if multiplier size sizelimit size multiplier public void setWhen SizeComparisons cmp this cmp cmp getIndex public void setParameters Parameter parameters super setParameters parameters if parameters null for int parameters length String paramname parameters getName if SIZE_KEY equalsIgnoreCase paramname try setValue new Long parameters getValue longValue catch NumberFormatException nfe setError parameters getValue else if UNITS_KEY equalsIgnoreCase paramname ByteUnits units new ByteUnits units setValue parameters getValue setUnits units else if WHEN_KEY equalsIgnoreCase paramname SizeComparisons cmp new SizeComparisons cmp setValue parameters getValue setWhen cmp else setError paramname public void verifySettings if size setError else if multiplier setError else if sizelimit setError public boolean isSelected File basedir String filename File file validate if file isDirectory return true if cmp return file length sizelimit else if cmp return file length sizelimit else return file length sizelimit public static class ByteUnits extends EnumeratedAttribute public String getValues return new String public static class SizeComparisons extends EnumeratedAttribute public String getValues return new String', 'bug': '0'}
{'sequence': 'public class LoaderUtils private static Method getContextClassLoader private static Method setContextClassLoader static try getContextClassLoader Thread class getMethod new Class Class setContextArgs new Class ClassLoader class setContextClassLoader Thread class getMethod setContextArgs catch Exception public static void setContextClassLoader ClassLoader loader if setContextClassLoader null return try Thread currentThread Thread currentThread setContextClassLoader invoke currentThread new Object loader catch IllegalAccessException throw new BuildException catch InvocationTargetException throw new BuildException public static ClassLoader getContextClassLoader if getContextClassLoader null return null try Thread currentThread Thread currentThread return ClassLoader getContextClassLoader invoke currentThread new Object catch IllegalAccessException throw new BuildException catch InvocationTargetException throw new BuildException public static boolean isContextLoaderAvailable return getContextClassLoader null setContextClassLoader null', 'bug': '0'}
{'sequence': 'public class Exec extends Task private String os private String out private File dir private String command protected PrintWriter fos null private boolean failOnError false private static final int BUFFER_SIZE public Exec System err println System err println System err println public void execute throws BuildException run command protected int run String command throws BuildException String myos System getProperty log myos Project MSG_VERBOSE if os null os indexOf myos log os Project MSG_VERBOSE return if dir null dir project getBaseDir if myos toLowerCase indexOf if dir equals project resolveFile if myos toLowerCase indexOf command dir command else String ant project getProperty if ant null throw new BuildException location String antRun project resolveFile ant toString command antRun dir command else String ant project getProperty if ant null throw new BuildException location String antRun project resolveFile ant toString command antRun dir command try log command Project MSG_VERBOSE Process proc Runtime getRuntime exec command if out null fos new PrintWriter new FileWriter out log out Project MSG_VERBOSE StreamPumper inputPumper new StreamPumper proc getInputStream Project MSG_INFO this StreamPumper errorPumper new StreamPumper proc getErrorStream Project MSG_WARN this inputPumper start errorPumper start proc waitFor inputPumper join errorPumper join proc destroy logFlush err proc exitValue if err if failOnError throw new BuildException err location else log err Project MSG_ERR catch IOException ioe throw new BuildException command ioe location catch InterruptedException ex return err public void setDir String this dir project resolveFile public void setOs String os this os os public void setCommand String command this command command public void setOutput String out this out out public void setFailonerror boolean fail failOnError fail protected void outputLog String line int messageLevel if fos null log line messageLevel else fos println line protected void logFlush if fos null fos close class StreamPumper extends Thread private BufferedReader din private int messageLevel private boolean endOfStream false private int SLEEP_TIME private Exec parent public StreamPumper InputStream is int messageLevel Exec parent this din new BufferedReader new InputStreamReader is this messageLevel messageLevel this parent parent public void pumpStream throws IOException byte buf new byte BUFFER_SIZE if endOfStream String line din readLine if line null outputLog line messageLevel else endOfStream true public void run try try while endOfStream pumpStream sleep SLEEP_TIME catch InterruptedException ie din close catch IOException ioe', 'bug': '0'}
{'sequence': 'public abstract class Unpack extends Task protected File source protected File dest public void setSrc String src log setSrc project resolveFile src public void setDest String dest log setDest project resolveFile dest public void setSrc File src source src public void setDest File dest this dest dest private void validate throws BuildException if source null throw new BuildException location if source exists throw new BuildException location if source isDirectory throw new BuildException location if dest null dest new File source getParent if dest isDirectory String defaultExtension getDefaultExtension createDestFile defaultExtension private void createDestFile String defaultExtension String sourceName source getName int len sourceName length if defaultExtension null len defaultExtension length defaultExtension equalsIgnoreCase sourceName substring len defaultExtension length dest new File dest sourceName substring len defaultExtension length else dest new File dest sourceName public void execute throws BuildException try validate extract finally dest savedDest protected abstract String getDefaultExtension protected abstract void extract', 'bug': '0'}
{'sequence': 'public class DirSet extends AbstractFileSet public DirSet super protected DirSet DirSet dirset super dirset public Object clone if isReference return new DirSet DirSet getRef getProject else return new DirSet this', 'bug': '0'}
{'sequence': 'public final class AntFilterReader extends DataType implements Cloneable private String className private final Vector parameters new Vector private Path classpath public final void setClassName final String className this className className public final String getClassName return className public final void addParam final Parameter param parameters addElement param public final void setClasspath Path classpath if isReference throw tooManyAttributes if this classpath null this classpath classpath else this classpath append classpath public final Path createClasspath if isReference throw noChildrenAllowed if this classpath null this classpath new Path getProject return this classpath createPath public final Path getClasspath return classpath public void setClasspathRef Reference if isReference throw tooManyAttributes createClasspath setRefid public final Parameter getParams Parameter params new Parameter parameters size parameters copyInto params return params public void setRefid Reference throws BuildException if parameters isEmpty className null classpath null throw tooManyAttributes Object getReferencedObject getProject if instanceof AntFilterReader AntFilterReader afr AntFilterReader setClassName afr getClassName setClasspath afr getClasspath Parameter afr getParams if null for int length addParam else String msg getRefId throw new BuildException msg super setRefid', 'bug': '0'}
{'sequence': 'public class Tstamp extends Task private Vector customFormats new Vector private String prefix public void setPrefix String prefix this prefix prefix if this prefix endsWith this prefix public void execute throws BuildException try Date new Date Enumeration customFormats elements while hasMoreElements CustomFormat cts CustomFormat nextElement cts execute project location SimpleDateFormat dstamp new SimpleDateFormat project setNewProperty prefix dstamp format SimpleDateFormat tstamp new SimpleDateFormat project setNewProperty prefix tstamp format SimpleDateFormat today new SimpleDateFormat Locale US project setNewProperty prefix today format catch Exception throw new BuildException public CustomFormat createFormat CustomFormat cts new CustomFormat prefix customFormats addElement cts return cts public class CustomFormat private TimeZone timeZone private String propertyName private String pattern private String language private String country private String variant private int offset private int field Calendar DATE private String prefix public CustomFormat String prefix this prefix prefix public void setProperty String propertyName this propertyName prefix propertyName public void setPattern String pattern this pattern pattern public void setLocale String locale StringTokenizer st new StringTokenizer locale try language st nextToken if st hasMoreElements country st nextToken if st hasMoreElements variant st nextToken if st hasMoreElements throw new BuildException getLocation else country catch NoSuchElementException throw new BuildException getLocation public void setTimezone String id timeZone TimeZone getTimeZone id public void setOffset int offset this offset offset public void setUnit String unit log Unit new Unit setValue unit field getCalendarField public void setUnit Unit unit field unit getCalendarField public void execute Project project Date date Location location if propertyName null throw new BuildException location if pattern null throw new BuildException location SimpleDateFormat sdf if language null sdf new SimpleDateFormat pattern else if variant null sdf new SimpleDateFormat pattern new Locale language country else sdf new SimpleDateFormat pattern new Locale language country variant if offset Calendar calendar Calendar getInstance calendar setTime date calendar add field offset date calendar getTime if timeZone null sdf setTimeZone timeZone project setNewProperty propertyName sdf format date public static class Unit extends EnumeratedAttribute private static final String MILLISECOND private static final String SECOND private static final String MINUTE private static final String HOUR private static final String DAY private static final String WEEK private static final String MONTH private static final String YEAR private static final String units MILLISECOND SECOND MINUTE HOUR DAY WEEK MONTH YEAR private Hashtable calendarFields new Hashtable public Unit calendarFields put MILLISECOND new Integer Calendar MILLISECOND calendarFields put SECOND new Integer Calendar SECOND calendarFields put MINUTE new Integer Calendar MINUTE calendarFields put HOUR new Integer Calendar HOUR_OF_DAY calendarFields put DAY new Integer Calendar DATE calendarFields put WEEK new Integer Calendar WEEK_OF_YEAR calendarFields put MONTH new Integer Calendar MONTH calendarFields put YEAR new Integer Calendar YEAR public int getCalendarField String key getValue toLowerCase Integer Integer calendarFields get key return intValue public String getValues return units', 'bug': '0'}
{'sequence': 'public interface TarConstants int NAMELEN int MODELEN int UIDLEN int GIDLEN int CHKSUMLEN int SIZELEN int MAGICLEN int MODTIMELEN int UNAMELEN int GNAMELEN int DEVLEN byte LF_OLDNORM byte LF_NORMAL byte byte LF_LINK byte byte LF_SYMLINK byte byte LF_CHR byte byte LF_BLK byte byte LF_DIR byte byte LF_FIFO byte byte LF_CONTIG byte String TMAGIC String GNU_TMAGIC String GNU_LONGLINK byte LF_GNUTYPE_LONGNAME byte', 'bug': '0'}
{'sequence': 'public interface UnixStat int PERM_MASK int LINK_FLAG int FILE_FLAG int DIR_FLAG int DEFAULT_LINK_PERM int DEFAULT_DIR_PERM int DEFAULT_FILE_PERM', 'bug': '0'}
{'sequence': 'public final class ClassConstants extends BaseFilterReader implements ChainableReader private String queuedData null private static final String JAVA_CLASS_HELPER public ClassConstants super public ClassConstants final Reader in super in public final int read throws IOException int ch if queuedData null queuedData length queuedData null if queuedData null ch queuedData charAt queuedData queuedData substring if queuedData length queuedData null else final String clazz readFully if clazz null ch else final byte bytes clazz getBytes try final Class javaClassHelper Class forName JAVA_CLASS_HELPER if javaClassHelper null final Class params byte class final Method getConstants javaClassHelper getMethod params final Object args bytes final StringBuffer sb StringBuffer getConstants invoke null args if sb length queuedData sb toString return read catch ClassNotFoundException cnfe throw new IOException cnfe getMessage catch NoSuchMethodException nsme throw new IOException nsme getMessage catch IllegalAccessException iae throw new IOException iae getMessage catch IllegalArgumentException iarge throw new IOException iarge getMessage catch InvocationTargetException ite throw new IOException ite getMessage return ch public final Reader chain final Reader rdr ClassConstants newFilter new ClassConstants rdr return newFilter', 'bug': '0'}
{'sequence': 'public class ExecTask extends Task private String os private File out private File dir protected boolean failOnError false protected boolean newEnvironment false private Long timeout null private Environment env new Environment protected Commandline cmdl new Commandline private FileOutputStream fos null private ByteArrayOutputStream baos null private String outputprop private String resultProperty private boolean failIfExecFails true private boolean append false private boolean vmLauncher true public void setTimeout Long value timeout value public void setTimeout Integer value if value null timeout null else setTimeout new Long value intValue public void setExecutable String value cmdl setExecutable value public void setDir File this dir public void setOs String os this os os public void setCommand Commandline cmdl log Project MSG_WARN this cmdl cmdl public void setOutput File out this out out public void setOutputproperty String outputprop this outputprop outputprop public void setFailonerror boolean fail failOnError fail public void setNewenvironment boolean newenv newEnvironment newenv public void addEnv Environment Variable var env addVariable var public Commandline Argument createArg return cmdl createArgument public void setResultProperty String resultProperty this resultProperty resultProperty protected void maybeSetResultPropertyValue int result String res Integer toString result if resultProperty null project setNewProperty resultProperty res public void setFailIfExecutionFails boolean flag failIfExecFails flag public void setAppend boolean append this append append public void execute throws BuildException checkConfiguration if isValidOs try runExec prepareExec finally dir savedDir protected void checkConfiguration throws BuildException if cmdl getExecutable null throw new BuildException location if dir null dir exists throw new BuildException if dir null dir isDirectory throw new BuildException protected boolean isValidOs String myos System getProperty log myos Project MSG_VERBOSE if os null os indexOf myos log myos os Project MSG_VERBOSE return false return true public void setVMLauncher boolean vmLauncher this vmLauncher vmLauncher protected Execute prepareExec throws BuildException if dir null dir project getBaseDir Execute exe new Execute createHandler createWatchdog exe setAntRun getProject exe setWorkingDirectory dir exe setVMLauncher vmLauncher String environment env getVariables if environment null for int environment length log environment Project MSG_VERBOSE exe setNewenvironment newEnvironment exe setEnvironment environment return exe protected final void runExecute Execute exe throws IOException err exe execute if exe killedProcess log Project MSG_WARN maybeSetResultPropertyValue err if err if failOnError throw new BuildException taskType err location else log err Project MSG_ERR if baos null BufferedReader in new BufferedReader new StringReader Execute toString baos String line null StringBuffer val new StringBuffer while line in readLine null if val length val append StringUtils LINE_SEP val append line project setNewProperty outputprop val toString protected void runExec Execute exe throws BuildException log cmdl describeCommand Project MSG_VERBOSE exe setCommandline cmdl getCommandline try runExecute exe catch IOException if failIfExecFails throw new BuildException toString location else log toString Project MSG_ERR finally logFlush protected ExecuteStreamHandler createHandler throws BuildException if out null try fos new FileOutputStream out getAbsolutePath append log out Project MSG_VERBOSE return new PumpStreamHandler fos catch FileNotFoundException fne throw new BuildException out fne location catch IOException ioe throw new BuildException out ioe location else if outputprop null baos new ByteArrayOutputStream log Project MSG_VERBOSE return new PumpStreamHandler baos else return new LogStreamHandler this Project MSG_INFO Project MSG_WARN protected ExecuteWatchdog createWatchdog throws BuildException if timeout null return null return new ExecuteWatchdog timeout longValue protected void logFlush try if fos null fos close if baos null baos close catch IOException io', 'bug': '1'}
{'sequence': 'public class ManifestException extends Exception public ManifestException String msg super msg', 'bug': '0'}
{'sequence': 'public class Equals implements Condition private String arg1 arg2 private boolean trim false private boolean caseSensitive true public void setArg1 String a1 arg1 a1 public void setArg2 String a2 arg2 a2 public void setTrim boolean trim public void setCasesensitive boolean caseSensitive public boolean eval throws BuildException if arg1 null arg2 null throw new BuildException if trim arg1 arg1 trim arg2 arg2 trim return caseSensitive arg1 equals arg2 arg1 equalsIgnoreCase arg2', 'bug': '0'}
{'sequence': 'public class WaitFor extends ConditionBase private long maxWaitMultiplier private long checkEveryMillis private long checkEveryMultiplier private String timeoutProperty public void setMaxWait long time maxWaitMillis time public void setMaxWaitUnit Unit unit maxWaitMultiplier unit getMultiplier public void setCheckEvery long time checkEveryMillis time public void setCheckEveryUnit Unit unit checkEveryMultiplier unit getMultiplier public void setTimeoutProperty String timeoutProperty public void execute throws BuildException if countConditions throw new BuildException if countConditions throw new BuildException Condition Condition getConditions nextElement long savedMaxWaitMillis maxWaitMillis long savedCheckEveryMillis checkEveryMillis try maxWaitMillis maxWaitMultiplier checkEveryMillis checkEveryMultiplier long start System currentTimeMillis long end start maxWaitMillis while System currentTimeMillis end if eval return try Thread sleep checkEveryMillis catch InterruptedException if timeoutProperty null project setNewProperty timeoutProperty finally maxWaitMillis savedMaxWaitMillis checkEveryMillis savedCheckEveryMillis public static class Unit extends EnumeratedAttribute private static final String MILLISECOND private static final String SECOND private static final String MINUTE private static final String HOUR private static final String DAY private static final String WEEK private static final String units MILLISECOND SECOND MINUTE HOUR DAY WEEK private Hashtable timeTable new Hashtable public Unit timeTable put MILLISECOND new Long timeTable put SECOND new Long timeTable put MINUTE new Long timeTable put HOUR new Long timeTable put DAY new Long timeTable put WEEK new Long public long getMultiplier String key getValue toLowerCase Long Long timeTable get key return longValue public String getValues return units', 'bug': '0'}
{'sequence': 'public class XSLTProcess extends MatchingTask implements XSLTLogger private File destDir null private File baseDir null private String xslFile null private String targetExtension private Vector params new Vector private File inFile null private File outFile null private String processor private Path classpath null private XSLTLiaison liaison private boolean stylesheetLoaded false private boolean force false private FileUtils fileUtils private Vector outputProperties new Vector private XMLCatalog xmlCatalog new XMLCatalog private static final String TRAX_LIAISON_CLASS private static final String XSLP_LIAISON_CLASS private static final String XALAN_LIAISON_CLASS private boolean performDirectoryScan true public XSLTProcess fileUtils FileUtils newFileUtils public void setScanIncludedDirectories boolean performDirectoryScan public void execute throws BuildException File savedBaseDir baseDir DirectoryScanner scanner String list String dirs if xslFile null throw new BuildException location try if baseDir null baseDir project resolveFile liaison getLiaison if liaison instanceof XSLTLoggerAware XSLTLoggerAware liaison setLogger this log liaison getClass toString Project MSG_VERBOSE File stylesheet project resolveFile xslFile if stylesheet exists stylesheet fileUtils resolveFile baseDir xslFile if stylesheet exists log log if inFile null outFile null process inFile outFile stylesheet return if destDir null String msg throw new BuildException msg scanner getDirectoryScanner baseDir log destDir Project MSG_INFO list scanner getIncludedFiles for int list length process baseDir list destDir stylesheet if performDirectoryScan dirs scanner getIncludedDirectories for int dirs length list new File baseDir dirs list for int list length process baseDir list destDir stylesheet finally liaison null stylesheetLoaded false baseDir savedBaseDir public void setForce boolean force this force force public void setBasedir File dir baseDir dir public void setDestdir File dir destDir dir public void setExtension String name targetExtension name public void setStyle String xslFile this xslFile xslFile public void setClasspath Path classpath createClasspath append classpath public Path createClasspath if classpath null classpath new Path project return classpath createPath public void setClasspathRef Reference createClasspath setRefid public void setProcessor String processor this processor processor public void addConfiguredXMLCatalog XMLCatalog xmlCatalog this xmlCatalog addConfiguredXMLCatalog xmlCatalog private void resolveProcessor String proc throws Exception if proc equals final Class clazz loadClass TRAX_LIAISON_CLASS liaison XSLTLiaison clazz newInstance else if proc equals log final Class clazz loadClass XSLP_LIAISON_CLASS liaison XSLTLiaison clazz newInstance else if proc equals final Class clazz loadClass XALAN_LIAISON_CLASS liaison XSLTLiaison clazz newInstance else liaison XSLTLiaison loadClass proc newInstance private Class loadClass String classname throws Exception if classpath null return Class forName classname else AntClassLoader al new AntClassLoader project classpath Class al loadClass classname AntClassLoader initializeClass return public void setOut File outFile this outFile outFile public void setIn File inFile this inFile inFile private void process File baseDir String xmlFile File destDir File stylesheet throws BuildException String fileExt targetExtension File outFile null File inFile null try long styleSheetLastModified stylesheet lastModified inFile new File baseDir xmlFile if inFile isDirectory log inFile Project MSG_VERBOSE return int dotPos xmlFile lastIndexOf if dotPos outFile new File destDir xmlFile substring xmlFile lastIndexOf fileExt else outFile new File destDir xmlFile fileExt if force inFile lastModified outFile lastModified styleSheetLastModified outFile lastModified ensureDirectoryFor outFile log inFile outFile configureLiaison stylesheet liaison transform inFile outFile catch Exception ex log inFile Project MSG_INFO if outFile null outFile delete throw new BuildException ex private void process File inFile File outFile File stylesheet throws BuildException try long styleSheetLastModified stylesheet lastModified log inFile inFile lastModified Project MSG_DEBUG log outFile outFile lastModified Project MSG_DEBUG log xslFile styleSheetLastModified Project MSG_DEBUG if force inFile lastModified outFile lastModified styleSheetLastModified outFile lastModified ensureDirectoryFor outFile log inFile outFile Project MSG_INFO configureLiaison stylesheet liaison transform inFile outFile catch Exception ex log inFile Project MSG_INFO if outFile null outFile delete throw new BuildException ex private void ensureDirectoryFor File targetFile throws BuildException File directory fileUtils getParentFile targetFile if directory exists if directory mkdirs throw new BuildException directory getAbsolutePath protected XSLTLiaison getLiaison if liaison null if processor null try resolveProcessor processor catch Exception throw new BuildException else try resolveProcessor catch Throwable e1 try resolveProcessor catch Throwable e2 try resolveProcessor catch Throwable e3 e3 printStackTrace e2 printStackTrace throw new BuildException e1 return liaison public Param createParam Param new Param params addElement return public class Param private String name null private String expression null public void setName String name this name name public void setExpression String expression this expression expression public String getName throws BuildException if name null throw new BuildException return name public String getExpression throws BuildException if expression null throw new BuildException return expression public OutputProperty createOutputProperty OutputProperty new OutputProperty outputProperties addElement return public static class OutputProperty private String name private String value public String getName return name public void setName String name this name name public String getValue return value public void setValue String value this value value public void init throws BuildException super init xmlCatalog setProject project protected void configureLiaison File stylesheet throws BuildException if stylesheetLoaded return stylesheetLoaded true try log stylesheet Project MSG_INFO liaison setStylesheet stylesheet for Enumeration params elements hasMoreElements Param Param nextElement liaison addParam getName getExpression if liaison instanceof TraXLiaison configureTraXLiaison TraXLiaison liaison catch Exception ex log stylesheet Project MSG_INFO throw new BuildException ex protected void configureTraXLiaison TraXLiaison liaison if xmlCatalog null liaison setEntityResolver xmlCatalog liaison setURIResolver xmlCatalog for Enumeration props outputProperties elements props hasMoreElements OutputProperty prop OutputProperty props nextElement liaison setOutputProperty prop getName prop getValue', 'bug': '1'}
{'sequence': 'public class Manifest public static final String ATTRIBUTE_MANIFEST_VERSION public static final String ATTRIBUTE_SIGNATURE_VERSION public static final String ATTRIBUTE_NAME public static final String ATTRIBUTE_FROM public static final String ATTRIBUTE_CLASSPATH public static final String DEFAULT_MANIFEST_VERSION public static final int MAX_LINE_LENGTH public static final int MAX_SECTION_LENGTH MAX_LINE_LENGTH public static final String EOL public static class Attribute private String name null private Vector values new Vector private int currentIndex public Attribute public Attribute String line throws ManifestException parse line public Attribute String name String value this name name setValue value public int hashCode int hashCode if name null hashCode name hashCode hashCode values hashCode return hashCode public boolean equals Object rhs if rhs null rhs getClass getClass return false if rhs this return true Attribute rhsAttribute Attribute rhs String lhsKey getKey String rhsKey rhsAttribute getKey if lhsKey null rhsKey null lhsKey null rhsKey null lhsKey equals rhsKey return false return CollectionUtils equals values rhsAttribute values public void parse String line throws ManifestException int index line indexOf if index throw new ManifestException line name line substring index setValue line substring index public void setName String name this name name public String getName return name public String getKey if name null return null return name toLowerCase public void setValue String value if currentIndex values size values addElement value currentIndex values size else values setElementAt value currentIndex public String getValue if values size return null String fullValue for Enumeration getValues hasMoreElements String value String nextElement fullValue value return fullValue trim public void addValue String value currentIndex setValue value public Enumeration getValues return values elements public void addContinuation String line String currentValue String values elementAt currentIndex setValue currentValue line substring public void write PrintWriter writer throws IOException for Enumeration getValues hasMoreElements writeValue writer String nextElement private void writeValue PrintWriter writer String value throws IOException String line name value while line getBytes length MAX_LINE_LENGTH int breakIndex MAX_SECTION_LENGTH String section line substring breakIndex while section getBytes length MAX_SECTION_LENGTH breakIndex breakIndex section line substring breakIndex if breakIndex throw new IOException name value writer print section EOL line line substring breakIndex writer print line EOL public static class Section private Vector warnings new Vector private String name null private Hashtable attributes new Hashtable private Vector attributeIndex new Vector public void setName String name this name name public String getName return name public String read BufferedReader reader throws ManifestException IOException Attribute attribute null while true String line reader readLine if line null line length return null if line charAt if attribute null if name null name line substring else throw new ManifestException line else attribute addContinuation line else attribute new Attribute line String nameReadAhead addAttributeAndCheck attribute if nameReadAhead null return nameReadAhead public void merge Section section throws ManifestException if name null section getName null name null name equalsIgnoreCase section getName throw new ManifestException Enumeration section getAttributeKeys while hasMoreElements String attributeName String nextElement Attribute attribute section getAttribute attributeName if attributeName equals ATTRIBUTE_CLASSPATH attributes containsKey attributeName Attribute ourClassPath getAttribute attributeName Enumeration cpe attribute getValues while cpe hasMoreElements String value String cpe nextElement ourClassPath addValue value else storeAttribute attribute Enumeration warnEnum section warnings elements while warnEnum hasMoreElements warnings addElement warnEnum nextElement public void write PrintWriter writer throws IOException if name null Attribute nameAttr new Attribute ATTRIBUTE_NAME name nameAttr write writer Enumeration getAttributeKeys while hasMoreElements String key String nextElement Attribute attribute getAttribute key attribute write writer writer print EOL public Attribute getAttribute String attributeName return Attribute attributes get attributeName toLowerCase public Enumeration getAttributeKeys return attributeIndex elements public String getAttributeValue String attributeName Attribute attribute getAttribute attributeName toLowerCase if attribute null return null return attribute getValue public void removeAttribute String attributeName String key attributeName toLowerCase attributes remove key attributeIndex removeElement key public void addConfiguredAttribute Attribute attribute throws ManifestException String check addAttributeAndCheck attribute if check null throw new BuildException public String addAttributeAndCheck Attribute attribute throws ManifestException if attribute getName null attribute getValue null throw new BuildException if attribute getKey equalsIgnoreCase ATTRIBUTE_NAME warnings addElement ATTRIBUTE_NAME attribute getName attribute getValue return attribute getValue if attribute getKey startsWith ATTRIBUTE_FROM toLowerCase warnings addElement ATTRIBUTE_FROM attribute getName attribute getValue else String attributeKey attribute getKey if attributeKey equals ATTRIBUTE_CLASSPATH Attribute classpathAttribute Attribute attributes get attributeKey if classpathAttribute null storeAttribute attribute else Enumeration attribute getValues while hasMoreElements String value String nextElement classpathAttribute addValue value else if attributes containsKey attributeKey throw new ManifestException attribute getName else storeAttribute attribute return null private void storeAttribute Attribute attribute if attribute null return String attributeKey attribute getKey attributes put attributeKey attribute if attributeIndex contains attributeKey attributeIndex addElement attributeKey public Enumeration getWarnings return warnings elements public int hashCode int hashCode if name null hashCode name hashCode hashCode attributes hashCode return hashCode public boolean equals Object rhs if rhs null rhs getClass getClass return false if rhs this return true Section rhsSection Section rhs return CollectionUtils equals attributes rhsSection attributes private String manifestVersion DEFAULT_MANIFEST_VERSION private Section mainSection new Section private Hashtable sections new Hashtable private Vector sectionIndex new Vector public static Manifest getDefaultManifest throws BuildException try String defManifest InputStream in Manifest class getResourceAsStream defManifest if in null throw new BuildException defManifest try return new Manifest new InputStreamReader in catch UnsupportedEncodingException return new Manifest new InputStreamReader in catch ManifestException throw new BuildException catch IOException throw new BuildException public Manifest manifestVersion null public Manifest Reader throws ManifestException IOException BufferedReader reader new BufferedReader String nextSectionName mainSection read reader String readManifestVersion mainSection getAttributeValue ATTRIBUTE_MANIFEST_VERSION if readManifestVersion null manifestVersion readManifestVersion mainSection removeAttribute ATTRIBUTE_MANIFEST_VERSION String line null while line reader readLine null if line length continue Section section new Section if nextSectionName null Attribute sectionName new Attribute line if sectionName getName equalsIgnoreCase ATTRIBUTE_NAME throw new ManifestException ATTRIBUTE_NAME sectionName getName nextSectionName sectionName getValue else Attribute firstAttribute new Attribute line section addAttributeAndCheck firstAttribute section setName nextSectionName nextSectionName section read reader addConfiguredSection section public void addConfiguredSection Section section throws ManifestException String sectionName section getName if sectionName null throw new BuildException sections put sectionName section if sectionIndex contains sectionName sectionIndex addElement sectionName public void addConfiguredAttribute Attribute attribute throws ManifestException if attribute getKey null attribute getValue null throw new BuildException if attribute getKey equalsIgnoreCase ATTRIBUTE_MANIFEST_VERSION manifestVersion attribute getValue else mainSection addConfiguredAttribute attribute public void merge Manifest other throws ManifestException merge other false public void merge Manifest other boolean overwriteMain throws ManifestException if other null if overwriteMain mainSection other mainSection else mainSection merge other mainSection if other manifestVersion null manifestVersion other manifestVersion Enumeration other getSectionNames while hasMoreElements String sectionName String nextElement Section ourSection Section sections get sectionName Section otherSection Section other sections get sectionName if ourSection null if otherSection null addConfiguredSection otherSection else ourSection merge otherSection public void write PrintWriter writer throws IOException writer print ATTRIBUTE_MANIFEST_VERSION manifestVersion EOL String signatureVersion mainSection getAttributeValue ATTRIBUTE_SIGNATURE_VERSION if signatureVersion null writer print ATTRIBUTE_SIGNATURE_VERSION signatureVersion EOL mainSection removeAttribute ATTRIBUTE_SIGNATURE_VERSION mainSection write writer if signatureVersion null try Attribute svAttr new Attribute ATTRIBUTE_SIGNATURE_VERSION signatureVersion mainSection addConfiguredAttribute svAttr catch ManifestException Enumeration sectionIndex elements while hasMoreElements String sectionName String nextElement Section section getSection sectionName section write writer public String toString StringWriter sw new StringWriter try write new PrintWriter sw catch IOException return null return sw toString public Enumeration getWarnings Vector warnings new Vector Enumeration warnEnum mainSection getWarnings while warnEnum hasMoreElements warnings addElement warnEnum nextElement Enumeration sections elements while hasMoreElements Section section Section nextElement Enumeration e2 section getWarnings while e2 hasMoreElements warnings addElement e2 nextElement return warnings elements public int hashCode int hashCode if manifestVersion null hashCode manifestVersion hashCode hashCode mainSection hashCode hashCode sections hashCode return hashCode public boolean equals Object rhs if rhs null rhs getClass getClass return false if rhs this return true Manifest rhsManifest Manifest rhs if manifestVersion null if rhsManifest manifestVersion null return false else if manifestVersion equals rhsManifest manifestVersion return false if mainSection equals rhsManifest mainSection return false return CollectionUtils equals sections rhsManifest sections public String getManifestVersion return manifestVersion public Section getMainSection return mainSection public Section getSection String name return Section sections get name public Enumeration getSectionNames return sectionIndex elements', 'bug': '0'}
{'sequence': 'public class DependSelector extends BaseSelector private File targetdir null private Mapper mapperElement null private FileNameMapper map null private int granularity public DependSelector if Os isFamily granularity public String toString StringBuffer buf new StringBuffer if targetdir null buf append else buf append targetdir getName buf append buf append granularity if map null buf append buf append map toString else if mapperElement null buf append buf append mapperElement toString buf append return buf toString public void setTargetdir File targetdir this targetdir targetdir public void setGranularity int granularity this granularity granularity public Mapper createMapper throws BuildException if mapperElement null throw new BuildException mapperElement new Mapper project return mapperElement public void verifySettings if targetdir null setError if mapperElement null map new IdentityMapper else map mapperElement getImplementation if map null setError public boolean isSelected File basedir String filename File file validate String destfiles map mapFileName filename if destfiles null return false if destfiles length destfiles null throw new BuildException targetdir getName filename String destname destfiles File destfile new File targetdir destname return SelectorUtils isOutOfDate file destfile granularity', 'bug': '0'}
{'sequence': 'public class JAXPUtils private static SAXParserFactory parserFactory null public synchronized static SAXParserFactory getParserFactory throws BuildException if parserFactory null parserFactory newParserFactory return parserFactory public static SAXParserFactory newParserFactory throws BuildException try return SAXParserFactory newInstance catch FactoryConfigurationError throw new BuildException getMessage public static Parser getParser throws BuildException try return newSAXParser getParser catch SAXException throw convertToBuildException public static XMLReader getXMLReader throws BuildException try return newSAXParser getXMLReader catch SAXException throw convertToBuildException private static SAXParser newSAXParser throws BuildException try return getParserFactory newSAXParser catch ParserConfigurationException throw new BuildException getMessage catch SAXException throw convertToBuildException private static BuildException convertToBuildException SAXException Exception nested getException if nested null return new BuildException nested else return new BuildException', 'bug': '0'}
{'sequence': 'public class TarEntry implements TarConstants private TarEntry this magic new StringBuffer TMAGIC this name new StringBuffer this linkName new StringBuffer String user System getProperty if user length user user substring this userId this groupId this userName new StringBuffer user this groupName new StringBuffer this file null public TarEntry String name this boolean isDir name endsWith this checkSum this devMajor this devMinor this name new StringBuffer name this mode isDir this linkFlag isDir LF_DIR LF_NORMAL this userId this groupId this size this checkSum this modTime new Date getTime this linkName new StringBuffer this userName new StringBuffer this groupName new StringBuffer this devMajor this devMinor public TarEntry String name byte linkFlag this name this linkFlag linkFlag public TarEntry File file this this file file String name file getPath String osname System getProperty if osname null String win32Prefix String prefix osname substring win32Prefix length if prefix equalsIgnoreCase win32Prefix if name length char ch1 name charAt char ch2 name charAt if ch2 ch1 ch1 ch1 ch1 name name substring else if osname toLowerCase indexOf int colon name indexOf if colon name name substring colon name name replace File separatorChar while name startsWith name name substring this linkName new StringBuffer this name new StringBuffer name if file isDirectory this mode this linkFlag LF_DIR if this name charAt this name length this name append else this mode this linkFlag LF_NORMAL this size file length this modTime file lastModified this checkSum this devMajor this devMinor public TarEntry byte headerBuf this this parseTarHeader headerBuf public boolean equals TarEntry it return this getName equals it getName public boolean isDescendent TarEntry desc return desc getName startsWith this getName public String getName return this name toString public void setName String name this name new StringBuffer name public void setMode int mode this mode mode public int getUserId return this userId public void setUserId int userId this userId userId public int getGroupId return this groupId public void setGroupId int groupId this groupId groupId public String getUserName return this userName toString public void setUserName String userName this userName new StringBuffer userName public String getGroupName return this groupName toString public void setGroupName String groupName this groupName new StringBuffer groupName public void setIds int userId int groupId this setUserId userId this setGroupId groupId public void setNames String userName String groupName this setUserName userName this setGroupName groupName public void setModTime long time this modTime time public void setModTime Date time this modTime time getTime public Date getModTime return new Date this modTime public File getFile return this file public int getMode return this mode public long getSize return this size public void setSize long size this size size public boolean isGNULongNameEntry return linkFlag LF_GNUTYPE_LONGNAME name toString equals GNU_LONGLINK public boolean isDirectory if this file null return this file isDirectory if this linkFlag LF_DIR return true if this getName endsWith return true return false public TarEntry getDirectoryEntries if this file null this file isDirectory return new TarEntry String list this file list TarEntry result new TarEntry list length for int list length result new TarEntry new File this file list return result public void writeEntryHeader byte outbuf int offset offset TarUtils getNameBytes this name outbuf offset NAMELEN offset TarUtils getOctalBytes this mode outbuf offset MODELEN offset TarUtils getOctalBytes this userId outbuf offset UIDLEN offset TarUtils getOctalBytes this groupId outbuf offset GIDLEN offset TarUtils getLongOctalBytes this size outbuf offset SIZELEN offset TarUtils getLongOctalBytes this modTime outbuf offset MODTIMELEN int csOffset offset for int CHKSUMLEN outbuf offset byte outbuf offset this linkFlag offset TarUtils getNameBytes this linkName outbuf offset NAMELEN offset TarUtils getNameBytes this magic outbuf offset MAGICLEN offset TarUtils getNameBytes this userName outbuf offset UNAMELEN offset TarUtils getNameBytes this groupName outbuf offset GNAMELEN offset TarUtils getOctalBytes this devMajor outbuf offset DEVLEN offset TarUtils getOctalBytes this devMinor outbuf offset DEVLEN while offset outbuf length outbuf offset long checkSum TarUtils computeCheckSum outbuf TarUtils getCheckSumOctalBytes checkSum outbuf csOffset CHKSUMLEN public void parseTarHeader byte header int offset this name TarUtils parseName header offset NAMELEN offset NAMELEN this mode int TarUtils parseOctal header offset MODELEN offset MODELEN this userId int TarUtils parseOctal header offset UIDLEN offset UIDLEN this groupId int TarUtils parseOctal header offset GIDLEN offset GIDLEN this size TarUtils parseOctal header offset SIZELEN offset SIZELEN this modTime TarUtils parseOctal header offset MODTIMELEN offset MODTIMELEN this checkSum int TarUtils parseOctal header offset CHKSUMLEN offset CHKSUMLEN this linkFlag header offset this linkName TarUtils parseName header offset NAMELEN offset NAMELEN this magic TarUtils parseName header offset MAGICLEN offset MAGICLEN this userName TarUtils parseName header offset UNAMELEN offset UNAMELEN this groupName TarUtils parseName header offset GNAMELEN offset GNAMELEN this devMajor int TarUtils parseOctal header offset DEVLEN offset DEVLEN this devMinor int TarUtils parseOctal header offset DEVLEN', 'bug': '0'}
{'sequence': 'public class ZipFileSet extends FileSet private File srcFile null private String prefix private String fullpath private boolean hasDir false public ZipFileSet super protected ZipFileSet FileSet fileset super fileset public void setDir File dir throws BuildException if srcFile null throw new BuildException else super setDir dir hasDir true public void setSrc File srcFile if hasDir throw new BuildException this srcFile srcFile public File getSrc return srcFile public void setPrefix String prefix this prefix prefix public String getPrefix return prefix public void setFullpath String fullpath this fullpath fullpath public String getFullpath return fullpath public DirectoryScanner getDirectoryScanner Project if isReference return getRef getDirectoryScanner if srcFile null ZipScanner zs new ZipScanner zs setSrc srcFile super setDir getBaseDir setupDirectoryScanner zs zs init return zs else return super getDirectoryScanner protected AbstractFileSet getRef Project if checked Stack stk new Stack stk push this dieOnCircularReference stk Object ref getReferencedObject if instanceof FileSet String msg ref getRefId throw new BuildException msg else return AbstractFileSet', 'bug': '1'}
{'sequence': 'public final class Diagnostics private Diagnostics public static boolean isOptionalAvailable try Class forName catch ClassNotFoundException return false return true public static void validateVersion throws BuildException try Class optional Class forName String coreVersion getImplementationVersion Main class String optionalVersion getImplementationVersion optional if coreVersion null coreVersion equals optionalVersion throw new BuildException coreVersion optionalVersion catch ClassNotFoundException public static File listLibraries String home System getProperty File libDir new File home FilenameFilter filter new FilenameFilter public boolean accept File dir String name return name endsWith String filenames libDir list filter File files new File filenames length for int filenames length files new File libDir filenames return files public static void main String args doReport System out private static String getImplementationVersion Class clazz try Method method Class class getMethod new Class Object pkg method invoke clazz null if pkg null method pkg getClass getMethod new Class Object version method invoke pkg null return String version catch Exception return return null public static void doReport PrintStream out out println out println Main getAntVersion out println out println out println out println out println getImplementationVersion Main class Class optional null try optional Class forName out println getImplementationVersion optional catch ClassNotFoundException out println out println out println out println out println doReportLibraries out out println out println out println out println doReportTasksAvailability out out println out println out println out println doReportWhich out out println out println out println out println doReportSystemProperties out out println private static void doReportSystemProperties PrintStream out for Enumeration keys System getProperties keys keys hasMoreElements String key String keys nextElement out println key System getProperty key private static void doReportLibraries PrintStream out File libs listLibraries for int libs length out println libs getName libs length private static void doReportWhich PrintStream out Throwable error null try Class which Class forName Method method which getMethod new Class String class method invoke null new Object new String catch ClassNotFoundException out println catch InvocationTargetException error getTargetException null getTargetException catch Exception error if error null out println error printStackTrace private static void doReportTasksAvailability PrintStream out InputStream is Main class getResourceAsStream if is null out println else Properties props new Properties try props load is for Enumeration keys props keys keys hasMoreElements String key String keys nextElement String classname props getProperty key try Class forName classname props remove key catch ClassNotFoundException out println key if props size out println catch IOException out println getMessage', 'bug': '0'}
{'sequence': 'public class Ant extends Task private File dir null private String antFile null private String target null private String output null private boolean inheritAll true private boolean inheritRefs false private Vector properties new Vector private Vector references new Vector private Project newProject private PrintStream out null public void setInheritAll boolean value inheritAll value public void setInheritRefs boolean value inheritRefs value public void init newProject new Project newProject setJavaVersionProperty newProject addTaskDefinition Class project getTaskDefinitions get private void reinit init final int count properties size for int count Property Property properties elementAt Property newP Property newProject createTask newP setName getName if getValue null newP setValue getValue if getFile null newP setFile getFile if getResource null newP setResource getResource if getPrefix null newP setPrefix getPrefix if getRefid null newP setRefid getRefid if getEnvironment null newP setEnvironment getEnvironment if getClasspath null newP setClasspath getClasspath properties setElementAt newP private void initializeProject newProject setInputHandler getProject getInputHandler Vector listeners project getBuildListeners final int count listeners size for int count newProject addBuildListener BuildListener listeners elementAt if output null File outfile null if dir null outfile FileUtils newFileUtils resolveFile dir output else outfile getProject resolveFile output try out new PrintStream new FileOutputStream outfile DefaultLogger logger new DefaultLogger logger setMessageOutputLevel Project MSG_INFO logger setOutputPrintStream out logger setErrorPrintStream out newProject addBuildListener logger catch IOException ex log output Hashtable taskdefs project getTaskDefinitions Enumeration et taskdefs keys while et hasMoreElements String taskName String et nextElement if taskName equals continue Class taskClass Class taskdefs get taskName newProject addTaskDefinition taskName taskClass Hashtable typedefs project getDataTypeDefinitions Enumeration typedefs keys while hasMoreElements String typeName String nextElement Class typeClass Class typedefs get typeName newProject addDataTypeDefinition typeName typeClass getProject copyUserProperties newProject if inheritAll newProject setSystemProperties else Hashtable props getProject getProperties props keys while hasMoreElements String arg nextElement toString if equals arg equals arg continue String value props get arg toString if newProject getProperty arg null newProject setNewProperty arg value protected void handleOutput String line if newProject null newProject demuxOutput line false else super handleOutput line protected void handleErrorOutput String line if newProject null newProject demuxOutput line true else super handleErrorOutput line public void execute throws BuildException File savedDir dir String savedAntFile antFile String savedTarget target try if newProject null reinit if dir null inheritAll dir project getBaseDir initializeProject if dir null newProject setBaseDir dir newProject setInheritedProperty dir getAbsolutePath else dir project getBaseDir overrideProperties if antFile null antFile File file FileUtils newFileUtils resolveFile dir antFile antFile file getAbsolutePath log target null target antFile toString Project MSG_VERBOSE newProject setUserProperty antFile ProjectHelper configureProject newProject new File antFile if target null target newProject getDefaultTarget addReferences if newProject getBaseDir equals project getBaseDir newProject getProperty equals project getProperty getOwningTarget null target equals this getOwningTarget getName throw new BuildException newProject executeTarget target finally newProject null if output null out null try out close catch final Exception dir savedDir antFile savedAntFile target savedTarget private void overrideProperties throws BuildException Enumeration properties elements while hasMoreElements Property Property nextElement setProject newProject execute getProject copyInheritedProperties newProject private void addReferences throws BuildException Hashtable thisReferences Hashtable project getReferences clone Hashtable newReferences newProject getReferences Enumeration if references size for references elements hasMoreElements Reference ref Reference nextElement String refid ref getRefId if refid null throw new BuildException if thisReferences containsKey refid log refid Project MSG_WARN continue thisReferences remove refid String toRefid ref getToRefid if toRefid null toRefid refid copyReference refid toRefid if inheritRefs for thisReferences keys hasMoreElements String key String nextElement if newReferences containsKey key continue copyReference key key private void copyReference String oldKey String newKey Object orig project getReference oldKey Class orig getClass Object copy orig try Method cloneM getMethod new Class if cloneM null copy cloneM invoke orig new Object catch Exception if copy instanceof ProjectComponent ProjectComponent copy setProject newProject else try Method setProjectM getMethod new Class Project class if setProjectM null setProjectM invoke copy new Object newProject catch NoSuchMethodException catch Exception e2 String msg oldKey throw new BuildException msg e2 location newProject addReference newKey copy public void setDir File this dir public void setAntfile String this antFile public void setTarget String this target public void setOutput String this output public Property createProperty if newProject null reinit Property new Property true getProject setProject newProject setTaskName properties addElement return public void addReference Reference references addElement public static class Reference extends org apache tools ant types Reference public Reference super private String targetid null public void setToRefid String targetid this targetid targetid public String getToRefid return targetid', 'bug': '1'}
{'sequence': 'public class JikesOutputParser implements ExecuteStreamHandler protected Task task protected int errors protected int warnings protected boolean error false protected boolean emacsMode protected BufferedReader br public void setProcessInputStream OutputStream os public void setProcessErrorStream InputStream is public void setProcessOutputStream InputStream is throws IOException br new BufferedReader new InputStreamReader is public void start throws IOException parseOutput br public void stop protected JikesOutputParser Task task boolean emacsMode super System err println System err println System err println this task task this emacsMode emacsMode protected void parseOutput BufferedReader reader throws IOException if emacsMode parseEmacsOutput reader else parseStandardOutput reader private void parseStandardOutput BufferedReader reader throws IOException String line String lower while line reader readLine null lower line toLowerCase if line trim equals continue if lower indexOf setError true else if lower indexOf setError false else if emacsMode setError true log line private void parseEmacsOutput BufferedReader reader throws IOException parseStandardOutput reader private void setError boolean err error err if error errorFlag true private void log String line if emacsMode task log error Project MSG_ERR Project MSG_WARN task log line error Project MSG_ERR Project MSG_WARN protected boolean getErrorFlag return errorFlag', 'bug': '0'}
{'sequence': 'public class Sj extends DefaultCompilerAdapter public boolean execute throws BuildException attributes log Project MSG_VERBOSE Commandline cmd setupJavacCommand cmd setExecutable int firstFileName cmd size compileList length return executeExternalCompile cmd getCommandline firstFileName', 'bug': '0'}
{'sequence': 'public class Filter extends Task private String token private String value private File filtersFile public void setToken String token this token token public void setValue String value this value value public void setFiltersfile File filtersFile this filtersFile filtersFile public void execute throws BuildException boolean isFiltersFromFile filtersFile null token null value null boolean isSingleFilter filtersFile null token null value null if isFiltersFromFile isSingleFilter throw new BuildException location if isSingleFilter project getGlobalFilterSet addFilter token value if isFiltersFromFile readFilters protected void readFilters throws BuildException log filtersFile Project MSG_VERBOSE project getGlobalFilterSet readFiltersFromFile filtersFile', 'bug': '0'}
{'sequence': 'public class IsTrue extends ProjectComponent implements Condition private Boolean value null public void setValue boolean value this value new Boolean value public boolean eval throws BuildException if value null throw new BuildException return value booleanValue', 'bug': '0'}
{'sequence': 'public class Recorder extends Task private String filename null private Boolean append null private Boolean start null private int loglevel private boolean emacsMode false private static Hashtable recorderEntries new Hashtable public void setName String fname filename fname public void setAction ActionChoices action if action getValue equalsIgnoreCase start Boolean TRUE else start Boolean FALSE public void setAppend boolean append this append new Boolean append public void setEmacsMode boolean emacsMode this emacsMode emacsMode public void setLoglevel VerbosityLevelChoices level String lev level getValue if lev equalsIgnoreCase loglevel Project MSG_ERR else if lev equalsIgnoreCase loglevel Project MSG_WARN else if lev equalsIgnoreCase loglevel Project MSG_INFO else if lev equalsIgnoreCase loglevel Project MSG_VERBOSE else if lev equalsIgnoreCase loglevel Project MSG_DEBUG public void execute throws BuildException if filename null throw new BuildException getProject log filename Project MSG_DEBUG RecorderEntry recorder getRecorder filename getProject recorder setMessageOutputLevel loglevel recorder setRecordState start recorder setEmacsMode emacsMode public static class ActionChoices extends EnumeratedAttribute private static final String values public String getValues return values public static class VerbosityLevelChoices extends EnumeratedAttribute private static final String values public String getValues return values protected RecorderEntry getRecorder String name Project proj throws BuildException Object recorderEntries get name RecorderEntry entry if null try entry new RecorderEntry name PrintStream out null if append null out new PrintStream new FileOutputStream name else out new PrintStream new FileOutputStream name append booleanValue entry setErrorPrintStream out entry setOutputPrintStream out catch IOException ioe throw new BuildException ioe proj addBuildListener entry recorderEntries put name entry else entry RecorderEntry return entry', 'bug': '0'}
{'sequence': 'class CRC public static int crc32Table public CRC initialiseCRC void initialiseCRC globalCrc int getFinalCRC return globalCrc int getGlobalCRC return globalCrc void setGlobalCRC int newCrc globalCrc newCrc void updateCRC int inCh int temp globalCrc inCh if temp temp temp globalCrc globalCrc CRC crc32Table temp int globalCrc', 'bug': '0'}
{'sequence': 'public class SQLExec extends JDBCTask public static class DelimiterType extends EnumeratedAttribute public static final String NORMAL public static final String ROW public String getValues return new String NORMAL ROW private int goodSql private int totalSql private Connection conn null private Vector filesets new Vector private Statement statement null private File srcFile null private String sqlCommand private Vector transactions new Vector private String delimiter private String delimiterType DelimiterType NORMAL private boolean print false private boolean showheaders true private File output null private String onError private String encoding null private boolean append false public void setSrc File srcFile this srcFile srcFile public void addText String sql this sqlCommand sql public void addFileset FileSet set filesets addElement set public Transaction createTransaction Transaction new Transaction transactions addElement return public void setEncoding String encoding this encoding encoding public void setDelimiter String delimiter this delimiter delimiter public void setDelimiterType DelimiterType delimiterType this delimiterType delimiterType getValue public void setPrint boolean print this print print public void setShowheaders boolean showheaders this showheaders showheaders public void setOutput File output this output output public void setAppend boolean append this append append public void setOnerror OnError action this onError action getValue public void execute throws BuildException Vector savedTransaction Vector transactions clone String savedSqlCommand sqlCommand sqlCommand sqlCommand trim try if srcFile null sqlCommand length filesets isEmpty if transactions size throw new BuildException location if srcFile null srcFile exists throw new BuildException location for int filesets size FileSet fs FileSet filesets elementAt DirectoryScanner ds fs getDirectoryScanner project File srcDir fs getDir project String srcFiles ds getIncludedFiles for int srcFiles length Transaction createTransaction setSrc new File srcDir srcFiles Transaction createTransaction setSrc srcFile addText sqlCommand conn getConnection if isValidRdbms conn return try statement conn createStatement PrintStream out System out try if output null log output Project MSG_VERBOSE out new PrintStream new BufferedOutputStream new FileOutputStream output getAbsolutePath append for Enumeration transactions elements hasMoreElements Transaction nextElement runTransaction out if isAutocommit log Project MSG_VERBOSE conn commit finally if out null out System out out close catch IOException if isAutocommit conn null onError equals try conn rollback catch SQLException ex throw new BuildException location catch SQLException if isAutocommit conn null onError equals try conn rollback catch SQLException ex throw new BuildException location finally try if statement null statement close if conn null conn close catch SQLException log goodSql totalSql finally transactions savedTransaction sqlCommand savedSqlCommand protected void runStatements Reader reader PrintStream out throws SQLException IOException String sql String line BufferedReader in new BufferedReader reader while line in readLine null line line trim line project replaceProperties line continue if line startsWith continue StringTokenizer st new StringTokenizer line if st hasMoreTokens String token st nextToken if equalsIgnoreCase token continue sql line sql sql trim if line indexOf sql if delimiterType equals DelimiterType NORMAL sql endsWith delimiter delimiterType equals DelimiterType ROW line equals delimiter log sql Project MSG_VERBOSE execSQL sql substring sql length delimiter length out sql if sql equals execSQL sql out protected void execSQL String sql PrintStream out throws SQLException if equals sql trim return try totalSql if statement execute sql log statement getUpdateCount Project MSG_VERBOSE else if print printResults out SQLWarning warning conn getWarnings while warning null log warning Project MSG_VERBOSE warning warning getNextWarning conn clearWarnings goodSql catch SQLException log sql Project MSG_ERR if onError equals throw log toString Project MSG_ERR protected void printResults PrintStream out throws java sql SQLException ResultSet rs null do rs statement getResultSet if rs null log Project MSG_VERBOSE ResultSetMetaData md rs getMetaData int columnCount md getColumnCount StringBuffer line new StringBuffer if showheaders for int col col columnCount col line append md getColumnName col line append line append md getColumnName columnCount out println line line setLength while rs next boolean first true for int col col columnCount col String columnValue rs getString col if columnValue null columnValue columnValue trim if first first false else line append line append columnValue out println line line setLength while statement getMoreResults out println public static class OnError extends EnumeratedAttribute public String getValues return new String public class Transaction private File tSrcFile null private String tSqlCommand public void setSrc File src this tSrcFile src public void addText String sql this tSqlCommand sql private void runTransaction PrintStream out throws IOException SQLException if tSqlCommand length log Project MSG_INFO runStatements new StringReader tSqlCommand out if tSrcFile null log tSrcFile getAbsolutePath Project MSG_INFO Reader reader encoding null new FileReader tSrcFile new InputStreamReader new FileInputStream tSrcFile encoding try runStatements reader out finally reader close', 'bug': '1'}
{'sequence': 'public class ExecuteWatchdog implements TimeoutObserver private Process process private boolean watch false private Exception caught null private boolean killedProcess false private Watchdog watchdog public ExecuteWatchdog long timeout watchdog new Watchdog timeout watchdog addTimeoutObserver this public synchronized void start Process process if process null throw new NullPointerException if this process null throw new IllegalStateException this caught null this killedProcess false this watch true this process process watchdog start public synchronized void stop watchdog stop watch false process null public void timeoutOccured Watchdog try try process exitValue catch IllegalThreadStateException itse if watch killedProcess true process destroy catch Exception caught finally cleanUp protected void cleanUp watch false process null public void checkException throws BuildException if caught null throw new BuildException caught getMessage caught public boolean isWatching return watch public boolean killedProcess return killedProcess', 'bug': '0'}
{'sequence': 'public class IsSet extends ProjectComponent implements Condition private String property public void setProperty String property public boolean eval throws BuildException if property null throw new BuildException return getProject getProperty property null', 'bug': '0'}
{'sequence': 'public class Commandline implements Cloneable private Vector arguments new Vector private String executable null protected static final String DISCLAIMER StringUtils LINE_SEP StringUtils LINE_SEP StringUtils LINE_SEP public Commandline String to_process super String tmp translateCommandline to_process if tmp null tmp length setExecutable tmp for int tmp length createArgument setValue tmp public Commandline super public static class Argument private String parts public void setValue String value parts new String value public void setLine String line if line null return parts translateCommandline line public void setPath Path value parts new String value toString public void setFile File value parts new String value getAbsolutePath public String getParts return parts public class Marker private int position private int realPos Marker int position this position position public int getPosition if realPos realPos executable null for int position Argument arg Argument arguments elementAt realPos arg getParts length return realPos public Argument createArgument return this createArgument false public Argument createArgument boolean insertAtStart Argument argument new Argument if insertAtStart arguments insertElementAt argument else arguments addElement argument return argument public void setExecutable String executable if executable null executable length return this executable executable replace File separatorChar replace File separatorChar public String getExecutable return executable public void addArguments String line for int line length createArgument setValue line public String getCommandline final String args getArguments if executable null return args final String result new String args length result executable System arraycopy args result args length return result public String getArguments Vector result new Vector arguments size for int arguments size Argument arg Argument arguments elementAt String arg getParts if null for int length result addElement String res new String result size result copyInto res return res public String toString return toString getCommandline public static String quoteArgument String argument if argument indexOf if argument indexOf throw new BuildException else return argument else if argument indexOf argument indexOf return argument else return argument public static String toString String line if line null line length return final StringBuffer result new StringBuffer for int line length if result append result append quoteArgument line return result toString public static String translateCommandline String to_process if to_process null to_process length return new String final int normal final int inQuote final int inDoubleQuote int state normal StringTokenizer tok new StringTokenizer to_process true Vector new Vector StringBuffer current new StringBuffer while tok hasMoreTokens String nextTok tok nextToken switch state case inQuote if equals nextTok state normal else current append nextTok break case inDoubleQuote if equals nextTok state normal else current append nextTok break default if equals nextTok state inQuote else if equals nextTok state inDoubleQuote else if equals nextTok if current length addElement current toString current setLength else current append nextTok break if current length addElement current toString if state inQuote state inDoubleQuote throw new BuildException to_process String args new String size copyInto args return args public int size return getCommandline length public Object clone Commandline new Commandline setExecutable executable addArguments getArguments return public void clear executable null arguments removeAllElements public void clearArgs arguments removeAllElements public Marker createMarker return new Marker arguments size public String describeCommand return describeCommand this public String describeArguments return describeArguments this public static String describeCommand Commandline line return describeCommand line getCommandline public static String describeArguments Commandline line return describeArguments line getArguments public static String describeCommand String args if args null args length return StringBuffer buf new StringBuffer buf append args buf append if args length buf append buf append describeArguments args else buf append DISCLAIMER return buf toString public static String describeArguments String args return describeArguments args protected static String describeArguments String args int offset if args null args length offset return StringBuffer buf new StringBuffer if args length offset buf append buf append append StringUtils LINE_SEP for int offset args length buf append append args append append StringUtils LINE_SEP buf append DISCLAIMER return buf toString', 'bug': '0'}
{'sequence': 'public class NotSelector extends NoneSelector public NotSelector public String toString StringBuffer buf new StringBuffer if hasSelectors buf append buf append super toString buf append return buf toString public void verifySettings if selectorCount setError', 'bug': '0'}
{'sequence': 'public final class LineContainsRegExp extends BaseParamFilterReader implements ChainableReader private static final String REGEXP_KEY private Vector regexps new Vector private String line null public LineContainsRegExp super public LineContainsRegExp final Reader in super in public final int read throws IOException if getInitialized initialize setInitialized true int ch if line null ch line charAt if line length line null else line line substring else line readLine if line null ch else final int regexpsSize regexps size for int regexpsSize RegularExpression regexp RegularExpression regexps elementAt Regexp re regexp getRegexp getProject boolean matches re matches line if matches line null break return read return ch public final void addConfiguredRegexp final RegularExpression regExp this regexps addElement regExp private void setRegexps final Vector regexps this regexps regexps private final Vector getRegexps return regexps public final Reader chain final Reader rdr LineContainsRegExp newFilter new LineContainsRegExp rdr newFilter setRegexps getRegexps newFilter setInitialized true return newFilter private final void initialize Parameter params getParameters if params null for int params length if REGEXP_KEY equals params getType String pattern params getValue RegularExpression regexp new RegularExpression regexp setPattern pattern regexps addElement regexp', 'bug': '0'}
{'sequence': 'public class LogStreamHandler extends PumpStreamHandler public LogStreamHandler Task task int outlevel int errlevel super new LogOutputStream task outlevel new LogOutputStream task errlevel public void stop super stop try getErr close getOut close catch IOException throw new BuildException', 'bug': '0'}
{'sequence': 'public class TarUtils public static long parseOctal byte header int offset int length long result boolean stillPadding true int end offset length for int offset end if header break if header byte header if stillPadding continue if header byte break stillPadding false result result header return result public static StringBuffer parseName byte header int offset int length StringBuffer result new StringBuffer length int end offset length for int offset end if header break result append char header return result public static int getNameBytes StringBuffer name byte buf int offset int length int for length name length buf offset byte name charAt for length buf offset return offset length public static int getOctalBytes long value byte buf int offset int length byte result new byte length int idx length buf offset idx idx buf offset idx byte idx if value buf offset idx byte idx else for long val value idx val idx buf offset idx byte byte byte val val val for idx idx buf offset idx byte return offset length public static int getLongOctalBytes long value byte buf int offset int length byte temp new byte length getOctalBytes value temp length System arraycopy temp buf offset length return offset length public static int getCheckSumOctalBytes long value byte buf int offset int length getOctalBytes value buf offset length buf offset length byte buf offset length return offset length public static long computeCheckSum byte buf long sum for int buf length sum buf return sum', 'bug': '0'}
{'sequence': 'public class Main public static final String DEFAULT_BUILD_FILENAME private int msgOutputLevel Project MSG_INFO private static PrintStream out System out private static PrintStream err System err private Vector targets new Vector private Properties definedProps new Properties private Vector listeners new Vector private Vector propertyFiles new Vector private String loggerClassname null private String inputHandlerClassname null private boolean emacsMode false private boolean readyToRun false private boolean projectHelp false private static boolean isLogFileUsed false private static void printMessage Throwable String message getMessage if message null System err println message public static void start String args Properties additionalUserProperties ClassLoader coreLoader Main null try Diagnostics validateVersion new Main args catch Throwable exc printMessage exc System exit if additionalUserProperties null for Enumeration additionalUserProperties keys hasMoreElements String key String nextElement String property additionalUserProperties getProperty key definedProps put key property try runBuild coreLoader System exit catch BuildException be if err System err printMessage be System exit catch Throwable exc exc printStackTrace printMessage exc System exit finally if isLogFileUsed if out null try out close catch final Exception if err null try err close catch final Exception public static void main String args start args null null protected Main String args throws BuildException String searchForThis null PrintStream logTo null for int args length String arg args if arg equals printUsage return else if arg equals printVersion return else if arg equals Diagnostics doReport System out return else if arg equals arg equals msgOutputLevel Project MSG_WARN else if arg equals arg equals printVersion msgOutputLevel Project MSG_VERBOSE else if arg equals printVersion msgOutputLevel Project MSG_DEBUG else if arg equals arg equals try File logFile new File args logTo new PrintStream new FileOutputStream logFile isLogFileUsed true catch IOException ioe String msg System out println msg return catch ArrayIndexOutOfBoundsException aioobe String msg System out println msg return else if arg equals arg equals arg equals try buildFile new File args catch ArrayIndexOutOfBoundsException aioobe String msg System out println msg return else if arg equals try listeners addElement args catch ArrayIndexOutOfBoundsException aioobe String msg System out println msg return else if arg startsWith String name arg substring arg length String value null int posEq name indexOf if posEq value name substring posEq name name substring posEq else if args length value args definedProps put name value else if arg equals if loggerClassname null System out println return try loggerClassname args catch ArrayIndexOutOfBoundsException aioobe System out println return else if arg equals if inputHandlerClassname null System out println return try inputHandlerClassname args catch ArrayIndexOutOfBoundsException aioobe System out println return else if arg equals emacsMode true else if arg equals projectHelp true else if arg equals if args length searchForThis args else searchForThis DEFAULT_BUILD_FILENAME else if arg startsWith try propertyFiles addElement args catch ArrayIndexOutOfBoundsException aioobe String msg System out println msg return else if arg startsWith String msg arg System out println msg printUsage return else targets addElement arg if buildFile null if searchForThis null buildFile findBuildFile System getProperty searchForThis else buildFile new File DEFAULT_BUILD_FILENAME if buildFile exists System out println buildFile throw new BuildException if buildFile isDirectory System out println buildFile throw new BuildException for int propertyFileIndex propertyFileIndex propertyFiles size propertyFileIndex String filename String propertyFiles elementAt propertyFileIndex Properties props new Properties FileInputStream fis null try fis new FileInputStream filename props load fis catch IOException System out println filename getMessage finally if fis null try fis close catch IOException Enumeration propertyNames props propertyNames while propertyNames hasMoreElements String name String propertyNames nextElement if definedProps getProperty name null definedProps put name props getProperty name if msgOutputLevel Project MSG_INFO System out println buildFile if logTo null out err logTo System setOut out System setErr out readyToRun true private File getParentFile File file String filename file getAbsolutePath file new File filename filename file getParent if filename null msgOutputLevel Project MSG_VERBOSE System out println filename return filename null null new File filename private File findBuildFile String start String suffix throws BuildException if msgOutputLevel Project MSG_INFO System out println suffix File parent new File new File start getAbsolutePath File file new File parent suffix while file exists parent getParentFile parent if parent null throw new BuildException file new File parent suffix return file private void runBuild ClassLoader coreLoader throws BuildException if readyToRun return final Project project new Project project setCoreLoader coreLoader Throwable error null try addBuildListeners project addInputHandler project PrintStream err System err PrintStream out System out SecurityManager oldsm null if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_0 JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 oldsm System getSecurityManager try System setOut new PrintStream new DemuxOutputStream project false System setErr new PrintStream new DemuxOutputStream project true if projectHelp project fireBuildStarted project init project setUserProperty getAntVersion Enumeration definedProps keys while hasMoreElements String arg String nextElement String value String definedProps get arg project setUserProperty arg value project setUserProperty buildFile getAbsolutePath ProjectHelper configureProject project buildFile if projectHelp printDescription project printTargets project msgOutputLevel Project MSG_INFO return if targets size targets addElement project getDefaultTarget project executeTargets targets finally if oldsm null System setSecurityManager oldsm System setOut out System setErr err catch RuntimeException exc error exc throw exc catch Error err error err throw err finally if projectHelp project fireBuildFinished error protected void addBuildListeners Project project project addBuildListener createLogger for int listeners size String className String listeners elementAt try BuildListener listener BuildListener Class forName className newInstance project addBuildListener listener catch Throwable exc throw new BuildException className exc private void addInputHandler Project project InputHandler handler null if inputHandlerClassname null handler new DefaultInputHandler else try handler InputHandler Class forName inputHandlerClassname newInstance catch ClassCastException String msg inputHandlerClassname throw new BuildException msg catch Exception String msg inputHandlerClassname getClass getName throw new BuildException msg project setInputHandler handler private BuildLogger createLogger BuildLogger logger null if loggerClassname null try logger BuildLogger Class forName loggerClassname newInstance catch ClassCastException System err println loggerClassname throw new RuntimeException catch Exception System err println loggerClassname getClass getName throw new RuntimeException else logger new DefaultLogger logger setMessageOutputLevel msgOutputLevel logger setOutputPrintStream out logger setErrorPrintStream err logger setEmacsMode emacsMode return logger private static void printUsage String lSep System getProperty StringBuffer msg new StringBuffer msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep System out println msg toString private static void printVersion throws BuildException System out println getAntVersion private static String antVersion null public static synchronized String getAntVersion throws BuildException if antVersion null try Properties props new Properties InputStream in Main class getResourceAsStream props load in in close StringBuffer msg new StringBuffer msg append msg append props getProperty msg append msg append props getProperty antVersion msg toString catch IOException ioe throw new BuildException ioe getMessage catch NullPointerException npe throw new BuildException return antVersion private static void printDescription Project project if project getDescription null project log project getDescription private static void printTargets Project project boolean printSubTargets int maxLength Enumeration ptargets project getTargets elements String targetName String targetDescription Target currentTarget Vector topNames new Vector Vector topDescriptions new Vector Vector subNames new Vector while ptargets hasMoreElements currentTarget Target ptargets nextElement targetName currentTarget getName targetDescription currentTarget getDescription if targetDescription null int pos findTargetPosition subNames targetName subNames insertElementAt targetName pos else int pos findTargetPosition topNames targetName topNames insertElementAt targetName pos topDescriptions insertElementAt targetDescription pos if targetName length maxLength maxLength targetName length printTargets project topNames topDescriptions maxLength if topNames size printSubTargets true if printSubTargets printTargets project subNames null String defaultTarget project getDefaultTarget if defaultTarget null equals defaultTarget project log defaultTarget private static int findTargetPosition Vector names String name int res names size for int names size res names size if name compareTo String names elementAt res return res private static void printTargets Project project Vector names Vector descriptions String heading int maxlen String lSep System getProperty String spaces while spaces length maxlen spaces spaces StringBuffer msg new StringBuffer msg append heading lSep lSep for int names size msg append msg append names elementAt if descriptions null msg append spaces substring maxlen String names elementAt length msg append descriptions elementAt msg append lSep project log msg toString', 'bug': '1'}
{'sequence': 'public interface Regexp extends RegexpMatcher int REPLACE_FIRST int REPLACE_ALL String substitute String input String argument int options throws BuildException', 'bug': '0'}
{'sequence': 'public class Mkdir extends Task private File dir public void execute throws BuildException if dir null throw new BuildException location if dir isFile throw new BuildException dir getAbsolutePath if dir exists boolean result dir mkdirs if result String msg dir getAbsolutePath throw new BuildException msg location log dir getAbsolutePath public void setDir File dir this dir dir', 'bug': '0'}
{'sequence': 'public class SelectSelector extends AndSelector public SelectSelector public String toString StringBuffer buf new StringBuffer if hasSelectors buf append buf append super toString buf append return buf toString private SelectSelector getRef Object getCheckedRef this getClass return SelectSelector public boolean hasSelectors if isReference return getRef hasSelectors return super hasSelectors public int selectorCount if isReference return getRef selectorCount return super selectorCount public FileSelector getSelectors Project if isReference return getRef getSelectors return super getSelectors public Enumeration selectorElements if isReference return getRef selectorElements return super selectorElements public void appendSelector FileSelector selector if isReference throw noChildrenAllowed super appendSelector selector public void verifySettings if selectorCount setError', 'bug': '0'}
{'sequence': 'public interface FileNameMapper void setFrom String from void setTo String to String mapFileName String sourceFileName', 'bug': '0'}
{'sequence': 'public class Patch extends Task private File originalFile private File directory private boolean havePatchfile false private Commandline cmd new Commandline public void setOriginalfile File file originalFile file public void setPatchfile File file if file exists throw new BuildException file location cmd createArgument setValue cmd createArgument setFile file havePatchfile true public void setBackups boolean backups if backups cmd createArgument setValue public void setIgnorewhitespace boolean ignore if ignore cmd createArgument setValue public void setStrip int num throws BuildException if num throw new BuildException location cmd createArgument setValue num public void setQuiet boolean if cmd createArgument setValue public void setReverse boolean if cmd createArgument setValue public void setDir File directory throws BuildException this directory directory public void execute throws BuildException if havePatchfile throw new BuildException location Commandline toExecute Commandline cmd clone toExecute setExecutable if originalFile null toExecute createArgument setFile originalFile Execute exe new Execute new LogStreamHandler this Project MSG_INFO Project MSG_WARN null exe setCommandline toExecute getCommandline if directory null if directory exists directory isDirectory exe setWorkingDirectory directory else if directory isDirectory throw new BuildException directory location else throw new BuildException directory location else exe setWorkingDirectory getProject getBaseDir log toExecute describeCommand Project MSG_VERBOSE try exe execute catch IOException throw new BuildException location', 'bug': '0'}
{'sequence': 'public class Basename extends Task private File file private String property private String suffix public void setFile File file this file file public void setProperty String property this property property public void setSuffix String suffix this suffix suffix public void execute throws BuildException String value if property null throw new BuildException location if file null throw new BuildException location else value file getName if suffix null value endsWith suffix int pos value indexOf value value substring pos getProject setNewProperty property value', 'bug': '0'}
{'sequence': 'public class StreamPumper implements Runnable private static final int SLEEP private static final int SIZE private InputStream is private OutputStream os private boolean finished public StreamPumper InputStream is OutputStream os this is is this os os public void run synchronized this finished false final byte buf new byte SIZE int length try while length is read buf os write buf length try Thread sleep SLEEP catch InterruptedException catch IOException finally synchronized this finished true notify public synchronized boolean isFinished return finished public synchronized void waitFor throws InterruptedException while isFinished wait', 'bug': '0'}
{'sequence': 'public class RegularExpression extends DataType public static final String DATA_TYPE_NAME private static final RegexpFactory factory new RegexpFactory private Regexp regexp public RegularExpression this regexp factory newRegexp public void setPattern String pattern this regexp setPattern pattern public String getPattern Project if isReference return getRef getPattern return regexp getPattern public Regexp getRegexp Project if isReference return getRef getRegexp return this regexp public RegularExpression getRef Project if checked Stack stk new Stack stk push this dieOnCircularReference stk Object ref getReferencedObject if instanceof RegularExpression String msg ref getRefId DATA_TYPE_NAME throw new BuildException msg else return RegularExpression', 'bug': '0'}
{'sequence': 'public class Cvs extends AbstractCvsTask public Cvs', 'bug': '0'}
{'sequence': 'public interface ZipExtraField ZipShort getHeaderId ZipShort getLocalFileDataLength ZipShort getCentralDirectoryLength byte getLocalFileDataData byte getCentralDirectoryData void parseFromLocalFileData byte data int offset int length throws ZipException', 'bug': '0'}
{'sequence': 'public class ImplementationSpecificArgument extends Commandline Argument private String impl public ImplementationSpecificArgument super public void setImplementation String impl this impl impl public final String getParts String chosenImpl if impl null impl equals chosenImpl return super getParts else return new String', 'bug': '0'}
{'sequence': 'public class NoneSelector extends BaseSelectorContainer public NoneSelector public String toString StringBuffer buf new StringBuffer if hasSelectors buf append buf append super toString buf append return buf toString public boolean isSelected File basedir String filename File file validate Enumeration selectorElements boolean result while hasMoreElements result FileSelector nextElement isSelected basedir filename file if result return false return true', 'bug': '0'}
{'sequence': 'public class Rename extends Task private File src private File dest private boolean replace true public void setSrc File src this src src public void setDest File dest this dest dest public void setReplace String replace this replace Project toBoolean replace public void execute throws BuildException log if dest null throw new BuildException location if src null throw new BuildException location if replace dest exists if dest delete throw new BuildException dest if src renameTo dest throw new BuildException src dest', 'bug': '0'}
{'sequence': 'public class KeySubst extends Task private File source null private File dest null private String sep private Hashtable replacements new Hashtable public void execute throws BuildException log log if source null dest null log return BufferedReader br null BufferedWriter bw null try br new BufferedReader new FileReader source dest delete bw new BufferedWriter new FileWriter dest String line null String newline null line br readLine while line null if line length bw newLine else newline KeySubst replace line replacements bw write newline bw newLine line br readLine bw flush catch IOException ioe ioe printStackTrace finally if bw null try bw close catch IOException if bw null try br close catch IOException public void setSrc File this source public void setDest File dest this dest dest public void setSep String sep this sep sep public void setKeys String keys if keys null keys length StringTokenizer tok new StringTokenizer keys this sep false while tok hasMoreTokens String token tok nextToken trim StringTokenizer itok new StringTokenizer token false String name itok nextToken String value itok nextToken replacements put name value public static void main String args try Hashtable hash new Hashtable hash put hash put System out println KeySubst replace hash catch Exception printStackTrace public static String replace String origString Hashtable keys throws BuildException StringBuffer finalString new StringBuffer int index int String key null while index origString indexOf key origString substring index origString indexOf index finalString append origString substring index if keys containsKey key finalString append keys get key else finalString append finalString append key finalString append index key length finalString append origString substring return finalString toString', 'bug': '0'}
{'sequence': 'public class FilesMatch implements Condition private File file1 file2 private FileUtils fu FileUtils newFileUtils public void setFile1 File file1 this file1 file1 public void setFile2 File file2 this file2 file2 public boolean eval throws BuildException if file1 null file2 null throw new BuildException boolean matches false try matches fu contentEquals file1 file2 catch IOException ioe throw new BuildException ioe getMessage ioe return matches', 'bug': '0'}
{'sequence': 'public final class ExpandProperties extends BaseFilterReader implements ChainableReader private String queuedData null public ExpandProperties super public ExpandProperties final Reader in super in public final int read throws IOException int ch if queuedData null queuedData length queuedData null if queuedData null ch queuedData charAt queuedData queuedData substring if queuedData length queuedData null else queuedData readFully if queuedData null ch else Project project getProject queuedData project replaceProperties queuedData return read return ch public final Reader chain final Reader rdr ExpandProperties newFilter new ExpandProperties rdr newFilter setProject getProject return newFilter', 'bug': '0'}
{'sequence': 'public class DirectoryScanner implements FileScanner SelectorScanner protected static final String DEFAULTEXCLUDES protected File basedir protected String includes protected String excludes protected FileSelector selectors null protected Vector filesIncluded protected Vector filesNotIncluded protected Vector filesExcluded protected Vector dirsIncluded protected Vector dirsNotIncluded protected Vector dirsExcluded protected Vector filesDeselected protected Vector dirsDeselected protected boolean haveSlowResults false protected boolean isCaseSensitive true private boolean followSymlinks true private static final FileUtils fileUtils FileUtils newFileUtils protected boolean everythingIncluded true public DirectoryScanner protected static boolean matchPatternStart String pattern String str return SelectorUtils matchPatternStart pattern str protected static boolean matchPatternStart String pattern String str boolean isCaseSensitive return SelectorUtils matchPatternStart pattern str isCaseSensitive protected static boolean matchPath String pattern String str return SelectorUtils matchPath pattern str protected static boolean matchPath String pattern String str boolean isCaseSensitive return SelectorUtils matchPath pattern str isCaseSensitive public static boolean match String pattern String str return SelectorUtils match pattern str protected static boolean match String pattern String str boolean isCaseSensitive return SelectorUtils match pattern str isCaseSensitive private static Vector tokenizePath String path return SelectorUtils tokenizePath path public void setBasedir String basedir setBasedir new File basedir replace File separatorChar replace File separatorChar public void setBasedir File basedir this basedir basedir public File getBasedir return basedir public void setCaseSensitive boolean isCaseSensitive this isCaseSensitive isCaseSensitive public void setFollowSymlinks boolean followSymlinks this followSymlinks followSymlinks public void setIncludes String includes if includes null this includes null else this includes new String includes length for int includes length String pattern pattern includes replace File separatorChar replace File separatorChar if pattern endsWith File separator pattern this includes pattern public void setExcludes String excludes if excludes null this excludes null else this excludes new String excludes length for int excludes length String pattern pattern excludes replace File separatorChar replace File separatorChar if pattern endsWith File separator pattern this excludes pattern public void setSelectors FileSelector selectors this selectors selectors public boolean isEverythingIncluded return everythingIncluded public void scan throws IllegalStateException if basedir null throw new IllegalStateException if basedir exists throw new IllegalStateException basedir if basedir isDirectory throw new IllegalStateException basedir if includes null includes new String includes if excludes null excludes new String filesIncluded new Vector filesNotIncluded new Vector filesExcluded new Vector filesDeselected new Vector dirsIncluded new Vector dirsNotIncluded new Vector dirsExcluded new Vector dirsDeselected new Vector if isIncluded if isExcluded if isSelected basedir dirsIncluded addElement else dirsDeselected addElement else dirsExcluded addElement else dirsNotIncluded addElement scandir basedir true protected void slowScan if haveSlowResults return String excl new String dirsExcluded size dirsExcluded copyInto excl String notIncl new String dirsNotIncluded size dirsNotIncluded copyInto notIncl for int excl length if couldHoldIncluded excl scandir new File basedir excl excl File separator false for int notIncl length if couldHoldIncluded notIncl scandir new File basedir notIncl notIncl File separator false haveSlowResults true protected void scandir File dir String vpath boolean fast String newfiles dir list if newfiles null throw new BuildException dir getAbsolutePath if followSymlinks Vector noLinks new Vector for int newfiles length try if fileUtils isSymbolicLink dir newfiles String name vpath newfiles File file new File dir newfiles if file isDirectory dirsExcluded addElement name else filesExcluded addElement name else noLinks addElement newfiles catch IOException ioe String msg System err println msg noLinks addElement newfiles newfiles new String noLinks size noLinks copyInto newfiles for int newfiles length String name vpath newfiles File file new File dir newfiles if file isDirectory if isIncluded name if isExcluded name if isSelected name file dirsIncluded addElement name if fast scandir file name File separator fast else everythingIncluded false dirsDeselected addElement name if fast couldHoldIncluded name scandir file name File separator fast else everythingIncluded false dirsExcluded addElement name if fast couldHoldIncluded name scandir file name File separator fast else everythingIncluded false dirsNotIncluded addElement name if fast couldHoldIncluded name scandir file name File separator fast if fast scandir file name File separator fast else if file isFile if isIncluded name if isExcluded name if isSelected name file filesIncluded addElement name else everythingIncluded false filesDeselected addElement name else everythingIncluded false filesExcluded addElement name else everythingIncluded false filesNotIncluded addElement name protected boolean isIncluded String name for int includes length if matchPath includes name isCaseSensitive return true return false protected boolean couldHoldIncluded String name for int includes length if matchPatternStart includes name isCaseSensitive return true return false protected boolean isExcluded String name for int excludes length if matchPath excludes name isCaseSensitive return true return false protected boolean isSelected String name File file if selectors null for int selectors length if selectors isSelected basedir name file false return false return true public String getIncludedFiles int count filesIncluded size String files new String count for int count files String filesIncluded elementAt return files public String getNotIncludedFiles slowScan int count filesNotIncluded size String files new String count for int count files String filesNotIncluded elementAt return files public String getExcludedFiles slowScan int count filesExcluded size String files new String count for int count files String filesExcluded elementAt return files public String getDeselectedFiles slowScan int count filesDeselected size String files new String count for int count files String filesDeselected elementAt return files public String getIncludedDirectories int count dirsIncluded size String directories new String count for int count directories String dirsIncluded elementAt return directories public String getNotIncludedDirectories slowScan int count dirsNotIncluded size String directories new String count for int count directories String dirsNotIncluded elementAt return directories public String getExcludedDirectories slowScan int count dirsExcluded size String directories new String count for int count directories String dirsExcluded elementAt return directories public String getDeselectedDirectories slowScan int count dirsDeselected size String directories new String count for int count directories String dirsDeselected elementAt return directories public void addDefaultExcludes int excludesLength excludes null excludes length String newExcludes newExcludes new String excludesLength DEFAULTEXCLUDES length if excludesLength System arraycopy excludes newExcludes excludesLength for int DEFAULTEXCLUDES length newExcludes excludesLength DEFAULTEXCLUDES replace File separatorChar replace File separatorChar excludes newExcludes', 'bug': '0'}
{'sequence': 'class ProcessDestroyer extends Thread private Vector processes new Vector public ProcessDestroyer try Class paramTypes Thread class Method addShutdownHook Runtime class getMethod paramTypes Object args this addShutdownHook invoke Runtime getRuntime args catch Exception public boolean add Process process processes addElement process return processes contains process public boolean remove Process process return processes removeElement process public void run synchronized processes Enumeration processes elements while hasMoreElements Process nextElement destroy', 'bug': '1'}
{'sequence': 'public class PresentSelector extends BaseSelector private File targetdir null private Mapper mapperElement null private FileNameMapper map null private boolean destmustexist true public PresentSelector public String toString StringBuffer buf new StringBuffer if targetdir null buf append else buf append targetdir getName buf append if destmustexist buf append else buf append if map null buf append map toString else if mapperElement null buf append mapperElement toString buf append return buf toString public void setTargetdir File targetdir this targetdir targetdir public Mapper createMapper throws BuildException if mapperElement null throw new BuildException mapperElement new Mapper project return mapperElement public void setPresent FilePresence fp if fp getIndex destmustexist false public void verifySettings if targetdir null setError if mapperElement null map new IdentityMapper else map mapperElement getImplementation if map null setError public boolean isSelected File basedir String filename File file validate String destfiles map mapFileName filename if destfiles null return false if destfiles length destfiles null throw new BuildException targetdir filename String destname destfiles File destfile new File targetdir destname return destfile exists destmustexist public static class FilePresence extends EnumeratedAttribute public String getValues return new String', 'bug': '0'}
{'sequence': 'public class FilterSetCollection private Vector filterSets new Vector public FilterSetCollection public FilterSetCollection FilterSet filterSet addFilterSet filterSet public void addFilterSet FilterSet filterSet filterSets addElement filterSet public String replaceTokens String line String replacedLine line for Enumeration filterSets elements hasMoreElements FilterSet filterSet FilterSet nextElement replacedLine filterSet replaceTokens replacedLine return replacedLine public boolean hasFilters for Enumeration filterSets elements hasMoreElements FilterSet filterSet FilterSet nextElement if filterSet hasFilters return true return false', 'bug': '0'}
{'sequence': 'public class GenerateKey extends Task public static class DnameParam private String name private String value public void setName String name this name name public String getName return name public void setValue String value this value value public String getValue return value public static class DistinguishedName private Vector params new Vector public Object createParam DnameParam param new DnameParam params addElement param return param public Enumeration getParams return params elements public String toString final int size params size final StringBuffer sb new StringBuffer boolean firstPass true for int size if firstPass sb append firstPass false final DnameParam param DnameParam params elementAt sb append encode param getName sb append sb append encode param getValue return sb toString public String encode final String string int end string indexOf if end return string final StringBuffer sb new StringBuffer int start while end sb append string substring start end sb append start end end string indexOf start sb append string substring start return sb toString protected String alias protected String keystore protected String storepass protected String storetype protected String keypass protected String sigalg protected String keyalg protected String dname protected DistinguishedName expandedDname protected int keysize protected int validity protected boolean verbose public DistinguishedName createDname throws BuildException if null expandedDname throw new BuildException if null dname throw new BuildException expandedDname new DistinguishedName return expandedDname public void setDname final String dname if null expandedDname throw new BuildException this dname dname public void setAlias final String alias this alias alias public void setKeystore final String keystore this keystore keystore public void setStorepass final String storepass this storepass storepass public void setStoretype final String storetype this storetype storetype public void setKeypass final String keypass this keypass keypass public void setSigalg final String sigalg this sigalg sigalg public void setKeyalg final String keyalg this keyalg keyalg public void setKeysize final String keysize throws BuildException try this keysize Integer parseInt keysize catch final NumberFormatException nfe throw new BuildException public void setValidity final String validity throws BuildException try this validity Integer parseInt validity catch final NumberFormatException nfe throw new BuildException public void setVerbose final boolean verbose this verbose verbose public void execute throws BuildException if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 throw new BuildException if null alias throw new BuildException if null storepass throw new BuildException if null dname null expandedDname throw new BuildException final StringBuffer sb new StringBuffer sb append if verbose sb append sb append sb append alias sb append if null dname sb append sb append dname sb append if null expandedDname sb append sb append expandedDname sb append if null keystore sb append sb append keystore sb append if null storepass sb append sb append storepass sb append if null storetype sb append sb append storetype sb append sb append if null keypass sb append keypass else sb append storepass sb append if null sigalg sb append sb append sigalg sb append if null keyalg sb append sb append keyalg sb append if keysize sb append sb append keysize sb append if validity sb append sb append validity sb append log alias final ExecTask cmd ExecTask project createTask cmd setExecutable Commandline Argument arg cmd createArg arg setLine sb toString cmd setFailonerror true cmd setTaskName getTaskName cmd execute', 'bug': '0'}
{'sequence': 'public class PropertyFileInputHandler implements InputHandler private Properties props null public static final String FILE_NAME_KEY public PropertyFileInputHandler public void handleInput InputRequest request throws BuildException readProps Object props get request getPrompt if null throw new BuildException request getPrompt request setInput toString if request isInputValid throw new BuildException request getPrompt private synchronized void readProps throws BuildException if props null String propsFile System getProperty FILE_NAME_KEY if propsFile null throw new BuildException FILE_NAME_KEY props new Properties try props load new FileInputStream propsFile catch IOException throw new BuildException propsFile', 'bug': '0'}
{'sequence': 'public class OrSelector extends BaseSelectorContainer public OrSelector public String toString StringBuffer buf new StringBuffer if hasSelectors buf append buf append super toString buf append return buf toString public boolean isSelected File basedir String filename File file validate Enumeration selectorElements boolean result while hasMoreElements result FileSelector nextElement isSelected basedir filename file if result return true return false', 'bug': '0'}
{'sequence': 'public final class ChainReaderHelper public Reader primaryReader public int bufferSize public Vector filterChains new Vector private Project project null public final void setPrimaryReader Reader rdr primaryReader rdr public final void setProject final Project project this project project public final Project getProject return project public final void setBufferSize int size bufferSize size public final void setFilterChains Vector fchain filterChains fchain public final Reader getAssembledReader throws BuildException if primaryReader null throw new BuildException Reader instream primaryReader final int filterReadersCount filterChains size final Vector finalFilters new Vector for int filterReadersCount final FilterChain filterchain FilterChain filterChains elementAt final Vector filterReaders filterchain getFilterReaders final int readerCount filterReaders size for int readerCount finalFilters addElement filterReaders elementAt final int filtersCount finalFilters size if filtersCount for int filtersCount Object finalFilters elementAt if instanceof AntFilterReader final AntFilterReader filter AntFilterReader finalFilters elementAt final String className filter getClassName final Path classpath filter getClasspath final Project project filter getProject if className null try Class clazz null if classpath null clazz Class forName className else AntClassLoader al new AntClassLoader project classpath clazz al loadClass className AntClassLoader initializeClass clazz if clazz null if FilterReader class isAssignableFrom clazz throw new BuildException className final Constructor constructors clazz getConstructors int for constructors length Class types constructors getParameterTypes if types length types isAssignableFrom Reader class break final Reader rdr instream instream Reader constructors newInstance rdr if Parameterizable class isAssignableFrom clazz final Parameter params filter getParams Parameterizable instream setParameters params catch final ClassNotFoundException cnfe throw new BuildException cnfe catch final InstantiationException ie throw new BuildException ie catch final IllegalAccessException iae throw new BuildException iae catch final InvocationTargetException ite throw new BuildException ite else if instanceof ChainableReader instanceof Reader if project null instanceof BaseFilterReader BaseFilterReader setProject project instream ChainableReader chain instream return instream public final String readFully Reader rdr throws IOException return FileUtils readFully rdr bufferSize', 'bug': '0'}
{'sequence': 'public class PumpStreamHandler implements ExecuteStreamHandler private Thread inputThread private Thread errorThread private OutputStream out err public PumpStreamHandler OutputStream out OutputStream err this out out this err err public PumpStreamHandler OutputStream outAndErr this outAndErr outAndErr public PumpStreamHandler this System out System err public void setProcessOutputStream InputStream is createProcessOutputPump is out public void setProcessErrorStream InputStream is createProcessErrorPump is err public void setProcessInputStream OutputStream os public void start inputThread start errorThread start public void stop try inputThread join catch InterruptedException try errorThread join catch InterruptedException try err flush catch IOException try out flush catch IOException protected OutputStream getErr return err protected OutputStream getOut return out protected void createProcessOutputPump InputStream is OutputStream os inputThread createPump is os protected void createProcessErrorPump InputStream is OutputStream os errorThread createPump is os protected Thread createPump InputStream is OutputStream os final Thread result new Thread new StreamPumper is os result setDaemon true return result', 'bug': '1'}
{'sequence': 'public class Checksum extends MatchingTask implements Condition private File file null private String algorithm private String provider null private String fileext private String property private boolean forceOverwrite private String verifyProperty private Vector filesets new Vector private Hashtable includeFileMap new Hashtable private MessageDigest messageDigest private boolean isCondition private int readBufferSize public void setFile File file this file file public void setAlgorithm String algorithm this algorithm algorithm public void setProvider String provider this provider provider public void setFileext String fileext this fileext fileext public void setProperty String property this property property public void setVerifyproperty String verifyProperty this verifyProperty verifyProperty public void setForceOverwrite boolean forceOverwrite this forceOverwrite forceOverwrite public void setReadBufferSize int size this readBufferSize size public void addFileset FileSet set filesets addElement set public void execute throws BuildException isCondition false boolean value validateAndExecute if verifyProperty null project setNewProperty verifyProperty new Boolean value toString public boolean eval throws BuildException isCondition true return validateAndExecute private boolean validateAndExecute throws BuildException String savedFileExt fileext if file null filesets size throw new BuildException if file null file exists file isDirectory throw new BuildException if property null fileext null throw new BuildException if property null if forceOverwrite throw new BuildException if file null if filesets size throw new BuildException else if filesets size throw new BuildException if verifyProperty null isCondition true if verifyProperty null forceOverwrite throw new BuildException if isCondition forceOverwrite throw new BuildException messageDigest null if provider null try messageDigest MessageDigest getInstance algorithm provider catch NoSuchAlgorithmException noalgo throw new BuildException noalgo location catch NoSuchProviderException noprovider throw new BuildException noprovider location else try messageDigest MessageDigest getInstance algorithm catch NoSuchAlgorithmException noalgo throw new BuildException noalgo location if messageDigest null throw new BuildException location if fileext null fileext algorithm else if fileext trim length throw new BuildException try addToIncludeFileMap file int sizeofFileSet filesets size for int sizeofFileSet FileSet fs FileSet filesets elementAt DirectoryScanner ds fs getDirectoryScanner project String srcFiles ds getIncludedFiles for int srcFiles length File src new File fs getDir project srcFiles addToIncludeFileMap src return generateChecksums finally fileext savedFileExt includeFileMap clear private void addToIncludeFileMap File file throws BuildException if file null if file exists if property null File dest new File file getParent file getName fileext if forceOverwrite isCondition file lastModified dest lastModified includeFileMap put file dest else log file dest Project MSG_VERBOSE else includeFileMap put file property else String message file getAbsolutePath log message throw new BuildException message location private boolean generateChecksums throws BuildException boolean checksumMatches true FileInputStream fis null FileOutputStream fos null byte buf new byte readBufferSize try for Enumeration includeFileMap keys hasMoreElements messageDigest reset File src File nextElement if isCondition log algorithm src fis new FileInputStream src DigestInputStream dis new DigestInputStream fis messageDigest while dis read buf readBufferSize dis close fis close fis null byte fileDigest messageDigest digest StringBuffer checksumSb new StringBuffer for int fileDigest length String hexStr Integer toHexString fileDigest if hexStr length checksumSb append checksumSb append hexStr String checksum checksumSb toString Object destination includeFileMap get src if destination instanceof java lang String String prop String destination if isCondition checksumMatches checksum equals property else project setNewProperty prop checksum else if destination instanceof java io File if isCondition File existingFile File destination if existingFile exists fis new FileInputStream existingFile InputStreamReader isr new InputStreamReader fis BufferedReader br new BufferedReader isr String suppliedChecksum br readLine fis close fis null br close isr close checksumMatches checksum equals suppliedChecksum else checksumMatches false else File dest File destination fos new FileOutputStream dest fos write checksum getBytes fos close fos null catch Exception throw new BuildException location finally if fis null try fis close catch IOException if fos null try fos close catch IOException return checksumMatches', 'bug': '0'}
{'sequence': 'public final class FilterChain extends DataType implements Cloneable private Vector filterReaders new Vector public final void addFilterReader final AntFilterReader filterReader filterReaders addElement filterReader public final Vector getFilterReaders return filterReaders public final void addClassConstants final ClassConstants classConstants filterReaders addElement classConstants public final void addExpandProperties final ExpandProperties expandProperties filterReaders addElement expandProperties public final void addHeadFilter final HeadFilter headFilter filterReaders addElement headFilter public final void addLineContains final LineContains lineContains filterReaders addElement lineContains public final void addLineContainsRegExp final LineContainsRegExp lineContainsRegExp filterReaders addElement lineContainsRegExp public final void addPrefixLines final PrefixLines prefixLines filterReaders addElement prefixLines public final void addReplaceTokens final ReplaceTokens replaceTokens filterReaders addElement replaceTokens public final void addStripJavaComments final StripJavaComments stripJavaComments filterReaders addElement stripJavaComments public final void addStripLineBreaks final StripLineBreaks stripLineBreaks filterReaders addElement stripLineBreaks public final void addStripLineComments final StripLineComments stripLineComments filterReaders addElement stripLineComments public final void addTabsToSpaces final TabsToSpaces tabsToSpaces filterReaders addElement tabsToSpaces public final void addTailFilter final TailFilter tailFilter filterReaders addElement tailFilter public void setRefid Reference throws BuildException if filterReaders isEmpty throw tooManyAttributes Object getReferencedObject getProject if instanceof FilterChain FilterChain fc FilterChain filterReaders fc getFilterReaders else String msg getRefId throw new BuildException msg super setRefid', 'bug': '0'}
{'sequence': 'public class IdentityMapper implements FileNameMapper public void setFrom String from public void setTo String to public String mapFileName String sourceFileName return new String sourceFileName', 'bug': '0'}
{'sequence': 'public class DateSelector extends BaseExtendSelector private long millis private String dateTime null private boolean includeDirs false private int granularity private int cmp public final static String MILLIS_KEY public final static String DATETIME_KEY public final static String CHECKDIRS_KEY public final static String GRANULARITY_KEY public final static String WHEN_KEY public DateSelector if Os isFamily granularity public String toString StringBuffer buf new StringBuffer buf append dateTime buf append if cmp buf append else if cmp buf append else buf append buf append buf append granularity buf append return buf toString public void setMillis long millis this millis millis public long getMillis return millis public void setDatetime String dateTime this dateTime dateTime if dateTime null DateFormat df DateFormat getDateTimeInstance DateFormat SHORT DateFormat SHORT Locale US try setMillis df parse dateTime getTime if millis setError dateTime catch ParseException pe setError dateTime public void setCheckdirs boolean includeDirs this includeDirs includeDirs public void setGranularity int granularity this granularity granularity public void setWhen TimeComparisons cmp this cmp cmp getIndex public void setParameters Parameter parameters super setParameters parameters if parameters null for int parameters length String paramname parameters getName if MILLIS_KEY equalsIgnoreCase paramname try setMillis new Long parameters getValue longValue catch NumberFormatException nfe setError parameters getValue else if DATETIME_KEY equalsIgnoreCase paramname setDatetime parameters getValue else if CHECKDIRS_KEY equalsIgnoreCase paramname setCheckdirs Project toBoolean parameters getValue else if GRANULARITY_KEY equalsIgnoreCase paramname try setGranularity new Integer parameters getValue intValue catch NumberFormatException nfe setError parameters getValue else if WHEN_KEY equalsIgnoreCase paramname TimeComparisons cmp new TimeComparisons cmp setValue parameters getValue setWhen cmp else setError paramname public void verifySettings if dateTime null millis setError else if millis setError dateTime public boolean isSelected File basedir String filename File file validate if file isDirectory includeDirs false return true if cmp return file lastModified granularity millis else if cmp return file lastModified granularity millis else return Math abs file lastModified millis granularity public static class TimeComparisons extends EnumeratedAttribute public String getValues return new String', 'bug': '0'}
{'sequence': 'public class ExecuteJava implements Runnable TimeoutObserver private Commandline javaCommand null private Path classpath null private CommandlineJava SysProperties sysProperties null private Method main null private Long timeout null private Throwable caught null private boolean timedOut false private Thread thread null public void setJavaCommand Commandline javaCommand this javaCommand javaCommand public void setClasspath Path classpath public void setSystemProperties CommandlineJava SysProperties sysProperties public void setOutput PrintStream out public void setTimeout Long timeout this timeout timeout public void execute Project project throws BuildException final String classname javaCommand getExecutable AntClassLoader loader null try if sysProperties null sysProperties setSystem final Class param Class forName Class target null if classpath null target Class forName classname else loader new AntClassLoader project getCoreLoader project classpath false loader setIsolated true loader setThreadContextLoader target loader forceLoadClass classname AntClassLoader initializeClass target main target getMethod param if main null throw new BuildException classname if timeout null run else thread new Thread this Task currentThreadTask project getThreadTask Thread currentThread project registerThreadTask thread currentThreadTask thread setDaemon true Watchdog new Watchdog timeout longValue addTimeoutObserver this synchronized this thread start start try wait catch InterruptedException if timedOut project log Project MSG_WARN else thread null stop if caught null throw caught catch ClassNotFoundException throw new BuildException classname catch SecurityException throw catch Throwable throw new BuildException finally if loader null loader resetThreadContextLoader loader cleanup if sysProperties null sysProperties restoreSystem public void run final Object argument javaCommand getArguments try main invoke null argument catch InvocationTargetException Throwable getTargetException if instanceof InterruptedException caught catch Throwable caught finally synchronized this notifyAll public synchronized void timeoutOccured Watchdog if thread null timedOut true thread interrupt notifyAll public boolean killedProcess return timedOut', 'bug': '1'}
{'sequence': 'public class StringInputStream extends InputStream private StringReader in public StringInputStream String source in new StringReader source public int read throws IOException return in read public void close throws IOException in close public synchronized void mark final int limit try in mark limit catch IOException ioe throw new RuntimeException ioe getMessage public synchronized void reset throws IOException in reset public boolean markSupported return in markSupported', 'bug': '0'}
{'sequence': 'public abstract class Task extends ProjectComponent protected Target target null protected String description null protected Location location Location UNKNOWN_LOCATION protected String taskName null protected String taskType null protected RuntimeConfigurable wrapper private boolean invalid false public Task public void setOwningTarget Target target this target target public Target getOwningTarget return target public void setTaskName String name this taskName name public String getTaskName return taskName void setTaskType String type this taskType type public void setDescription String desc description desc public String getDescription return description public void init throws BuildException public void execute throws BuildException public Location getLocation return location public void setLocation Location location this location location public RuntimeConfigurable getRuntimeConfigurableWrapper if wrapper null wrapper new RuntimeConfigurable this getTaskName return wrapper public void setRuntimeConfigurableWrapper RuntimeConfigurable wrapper this wrapper wrapper public void maybeConfigure throws BuildException if invalid if wrapper null wrapper maybeConfigure project else getReplacement protected void handleOutput String line log line Project MSG_INFO protected void handleErrorOutput String line log line Project MSG_ERR public void log String msg log msg Project MSG_INFO public void log String msg int msgLevel project log this msg msgLevel public final void perform if invalid try project fireTaskStarted this maybeConfigure execute project fireTaskFinished this null catch RuntimeException exc if exc instanceof BuildException BuildException be BuildException exc if be getLocation Location UNKNOWN_LOCATION be setLocation getLocation project fireTaskFinished this exc throw exc else UnknownElement ue getReplacement Task task ue getTask task perform final void markInvalid invalid true protected final boolean isInvalid return invalid private UnknownElement replacement private UnknownElement getReplacement if replacement null replacement new UnknownElement taskType replacement setProject project replacement setTaskType taskType replacement setTaskName taskName replacement setLocation location replacement setOwningTarget target replacement setRuntimeConfigurableWrapper wrapper wrapper setProxy replacement target replaceChild this replacement replacement maybeConfigure return replacement', 'bug': '0'}
{'sequence': 'public class Jikes extends DefaultCompilerAdapter public boolean execute throws BuildException attributes log Project MSG_VERBOSE Path classpath new Path project if bootclasspath null classpath append bootclasspath classpath addExtdirs extdirs if bootclasspath null bootclasspath size includeJavaRuntime true else classpath append getCompileClasspath if compileSourcepath null classpath append compileSourcepath else classpath append src String jikesPath System getProperty if jikesPath null classpath append new Path project jikesPath Commandline cmd new Commandline cmd setExecutable if deprecation true cmd createArgument setValue if destDir null cmd createArgument setValue cmd createArgument setFile destDir cmd createArgument setValue cmd createArgument setPath classpath if encoding null cmd createArgument setValue cmd createArgument setValue encoding if debug cmd createArgument setValue if optimize cmd createArgument setValue if verbose cmd createArgument setValue if depend cmd createArgument setValue String emacsProperty project getProperty if emacsProperty null Project toBoolean emacsProperty cmd createArgument setValue String warningsProperty project getProperty if warningsProperty null attributes log Project MSG_WARN attributes log Project MSG_WARN if Project toBoolean warningsProperty cmd createArgument setValue if attributes getNowarn cmd createArgument setValue String pedanticProperty project getProperty if pedanticProperty null Project toBoolean pedanticProperty cmd createArgument setValue String fullDependProperty project getProperty if fullDependProperty null Project toBoolean fullDependProperty cmd createArgument setValue if attributes getSource null cmd createArgument setValue cmd createArgument setValue attributes getSource addCurrentCompilerArgs cmd int firstFileName cmd size logAndAddFilesToCompile cmd return executeExternalCompile cmd getCommandline firstFileName', 'bug': '0'}
{'sequence': 'public class BuildNumber extends Task private static final String DEFAULT_PROPERTY_NAME private static final String DEFAULT_FILENAME DEFAULT_PROPERTY_NAME private File m_file public void setFile final File file m_file file public void execute throws BuildException validate final Properties properties loadProperties final int buildNumber getBuildNumber properties properties put DEFAULT_PROPERTY_NAME String valueOf buildNumber FileOutputStream output null try output new FileOutputStream m_file final String header properties save output header catch final IOException ioe final String message m_file throw new BuildException message ioe finally if null output try output close catch final IOException ioe m_file savedFile getProject setNewProperty DEFAULT_PROPERTY_NAME String valueOf buildNumber private int getBuildNumber final Properties properties throws BuildException final String buildNumber properties getProperty DEFAULT_PROPERTY_NAME trim try return Integer parseInt buildNumber catch final NumberFormatException nfe final String message m_file buildNumber throw new BuildException message nfe private Properties loadProperties throws BuildException FileInputStream input null try final Properties properties new Properties input new FileInputStream m_file properties load input return properties catch final IOException ioe throw new BuildException ioe finally if null input try input close catch final IOException ioe private void validate throws BuildException if null m_file m_file getProject resolveFile DEFAULT_FILENAME if m_file exists try FileUtils newFileUtils createNewFile m_file catch final IOException ioe final String message m_file throw new BuildException message ioe if m_file canRead final String message m_file throw new BuildException message if m_file canWrite final String message m_file throw new BuildException message', 'bug': '0'}
{'sequence': 'public class Kjc extends DefaultCompilerAdapter public boolean execute throws BuildException attributes log Project MSG_VERBOSE Commandline cmd setupKjcCommand try Class Class forName Method compile getMethod new Class String class Boolean ok Boolean compile invoke null new Object cmd getArguments return ok booleanValue catch ClassNotFoundException ex throw new BuildException location catch Exception ex if ex instanceof BuildException throw BuildException ex else throw new BuildException ex location protected Commandline setupKjcCommand Commandline cmd new Commandline Path classpath getCompileClasspath if deprecation true cmd createArgument setValue if destDir null cmd createArgument setValue cmd createArgument setFile destDir cmd createArgument setValue Path cp new Path project if bootclasspath null cp append bootclasspath if extdirs null cp addExtdirs extdirs cp append classpath if compileSourcepath null cp append compileSourcepath else cp append src cmd createArgument setPath cp if encoding null cmd createArgument setValue cmd createArgument setValue encoding if debug cmd createArgument setValue if optimize cmd createArgument setValue if verbose cmd createArgument setValue addCurrentCompilerArgs cmd logAndAddFilesToCompile cmd return cmd', 'bug': '0'}
{'sequence': 'public final class AnsiColorLogger extends DefaultLogger private static final int ATTR_NORMAL private static final int ATTR_BRIGHT private static final int ATTR_DIM private static final int ATTR_UNDERLINE private static final int ATTR_BLINK private static final int ATTR_REVERSE private static final int ATTR_HIDDEN private static final int FG_BLACK private static final int FG_RED private static final int FG_GREEN private static final int FG_YELLOW private static final int FG_BLUE private static final int FG_MAGENTA private static final int FG_CYAN private static final int FG_WHITE private static final int BG_BLACK private static final int BG_RED private static final int BG_GREEN private static final int BG_YELLOW private static final int BG_BLUE private static final int BG_MAGENTA private static final int BG_CYAN private static final int BG_WHITE private static final String PREFIX private static final String SUFFIX private static final char SEPARATOR private static final String END_COLOR PREFIX SUFFIX private String errColor PREFIX ATTR_DIM SEPARATOR FG_RED SUFFIX private String warnColor PREFIX ATTR_DIM SEPARATOR FG_MAGENTA SUFFIX private String infoColor PREFIX ATTR_DIM SEPARATOR FG_CYAN SUFFIX private String verboseColor PREFIX ATTR_DIM SEPARATOR FG_GREEN SUFFIX private String debugColor PREFIX ATTR_DIM SEPARATOR FG_BLUE SUFFIX private boolean colorsSet false private final void setColors String userColorFile System getProperty String systemColorFile InputStream in null try Properties prop new Properties if userColorFile null in new FileInputStream userColorFile else in getClass getResourceAsStream systemColorFile if in null prop load in String err prop getProperty String warn prop getProperty String info prop getProperty String verbose prop getProperty String debug prop getProperty if err null errColor PREFIX err SUFFIX if warn null warnColor PREFIX warn SUFFIX if info null infoColor PREFIX info SUFFIX if verbose null verboseColor PREFIX verbose SUFFIX if debug null debugColor PREFIX debug SUFFIX catch IOException ioe finally if in null try in close catch IOException protected final void printMessage final String message final PrintStream stream final int priority if message null stream null if colorsSet setColors colorsSet true final StringBuffer msg new StringBuffer message switch priority case Project MSG_ERR msg insert errColor msg append END_COLOR break case Project MSG_WARN msg insert warnColor msg append END_COLOR break case Project MSG_INFO msg insert infoColor msg append END_COLOR break case Project MSG_VERBOSE msg insert verboseColor msg append END_COLOR break case Project MSG_DEBUG msg insert debugColor msg append END_COLOR break final String strmessage msg toString stream println strmessage', 'bug': '0'}
{'sequence': 'public class PackageNameMapper extends GlobPatternMapper protected String extractVariablePart String name String var name substring prefixLength name length postfixLength return var replace File separatorChar', 'bug': '0'}
{'sequence': 'public class ContainsSelector extends BaseExtendSelector private String contains null private boolean casesensitive true public final static String CONTAINS_KEY public final static String CASE_KEY public ContainsSelector public String toString StringBuffer buf new StringBuffer buf append contains buf append if casesensitive buf append else buf append buf append return buf toString public void setText String contains this contains contains public void setCasesensitive boolean casesensitive this casesensitive casesensitive public void setParameters Parameter parameters super setParameters parameters if parameters null for int parameters length String paramname parameters getName if CONTAINS_KEY equalsIgnoreCase paramname setText parameters getValue else if CASE_KEY equalsIgnoreCase paramname setCasesensitive Project toBoolean parameters getValue else setError paramname public void verifySettings if contains null setError public boolean isSelected File basedir String filename File file validate if file isDirectory return true String userstr contains if casesensitive userstr contains toLowerCase BufferedReader in null try in new BufferedReader new InputStreamReader new FileInputStream file String teststr in readLine while teststr null if casesensitive teststr teststr toLowerCase if teststr indexOf userstr return true teststr in readLine return false catch IOException ioe throw new BuildException filename finally try in close catch Exception throw new BuildException filename', 'bug': '0'}
{'sequence': 'public abstract class DefaultRmicAdapter implements RmicAdapter private Rmic attributes private FileNameMapper mapper private static final Random rand new Random public DefaultRmicAdapter public void setRmic Rmic attributes this attributes attributes mapper new RmicFileNameMapper public Rmic getRmic return attributes protected String getStubClassSuffix return protected String getSkelClassSuffix return protected String getTieClassSuffix return public FileNameMapper getMapper return mapper public Path getClasspath return getCompileClasspath protected Path getCompileClasspath Path classpath new Path attributes getProject classpath setLocation attributes getBase if attributes getClasspath null if attributes getIncludeantruntime classpath addExisting Path systemClasspath else if attributes getIncludeantruntime classpath addExisting attributes getClasspath concatSystemClasspath else classpath addExisting attributes getClasspath concatSystemClasspath if attributes getIncludejavaruntime classpath addJavaRuntime return classpath protected Commandline setupRmicCommand return setupRmicCommand null protected Commandline setupRmicCommand String options Commandline cmd new Commandline if options null for int options length cmd createArgument setValue options Path classpath getCompileClasspath cmd createArgument setValue cmd createArgument setFile attributes getBase if attributes getExtdirs null if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 classpath addExtdirs attributes getExtdirs else cmd createArgument setValue cmd createArgument setPath attributes getExtdirs cmd createArgument setValue cmd createArgument setPath classpath String stubVersion attributes getStubVersion if null stubVersion if equals stubVersion cmd createArgument setValue else if equals stubVersion cmd createArgument setValue else cmd createArgument setValue if null attributes getSourceBase cmd createArgument setValue if attributes getIiop attributes log Project MSG_INFO cmd createArgument setValue if attributes getIiopopts null attributes log attributes getIiopopts Project MSG_INFO cmd createArgument setValue attributes getIiopopts if attributes getIdl cmd createArgument setValue attributes log Project MSG_INFO if attributes getIdlopts null cmd createArgument setValue attributes getIdlopts attributes log attributes getIdlopts Project MSG_INFO if attributes getDebug cmd createArgument setValue cmd addArguments attributes getCurrentCompilerArgs logAndAddFilesToCompile cmd return cmd protected void logAndAddFilesToCompile Commandline cmd Vector compileList attributes getCompileList attributes log cmd describeArguments Project MSG_VERBOSE StringBuffer niceSourceList new StringBuffer if compileList size niceSourceList append niceSourceList append for int compileList size String arg String compileList elementAt cmd createArgument setValue arg niceSourceList append arg attributes log niceSourceList toString Project MSG_VERBOSE private class RmicFileNameMapper implements FileNameMapper RmicFileNameMapper public void setFrom String public void setTo String public String mapFileName String name if name null name endsWith name endsWith getStubClassSuffix name endsWith getSkelClassSuffix name endsWith getTieClassSuffix return null String base name substring name length String classname base replace File separatorChar if attributes getVerify attributes isValidRmiRemote classname return null String target new String name rand nextLong if attributes getIiop attributes getIdl if equals attributes getStubVersion target new String base getStubClassSuffix else target new String base getStubClassSuffix base getSkelClassSuffix else if attributes getIdl int lastSlash base lastIndexOf File separatorChar String dirname int index if lastSlash index else index lastSlash dirname base substring index String filename base substring index try Class attributes getLoader loadClass classname if isInterface target new String dirname filename getStubClassSuffix else Class interf attributes getRemoteInterface String iName interf getName String iDir int iIndex int lastDot iName lastIndexOf if lastDot iIndex else iIndex lastDot iDir iName substring iIndex iDir iDir replace File separatorChar target new String dirname filename getTieClassSuffix iDir iName substring iIndex getStubClassSuffix catch ClassNotFoundException attributes log classname Project MSG_WARN catch NoClassDefFoundError attributes log classname Project MSG_WARN catch Throwable attributes log classname getMessage Project MSG_WARN return target', 'bug': '0'}
{'sequence': 'public final class Parameter private String name null private String type null private String value null public final void setName final String name this name name public final void setType final String type this type type public final void setValue final String value this value value public final String getName return name public final String getType return type public final String getValue return value', 'bug': '0'}
{'sequence': 'public class IntrospectionHelper implements BuildListener private Hashtable attributeTypes private Hashtable attributeSetters private Hashtable nestedTypes private Hashtable nestedCreators private Hashtable nestedStorers private Method addText null private Class bean private static Hashtable helpers new Hashtable private static final Hashtable PRIMITIVE_TYPE_MAP new Hashtable static Class primitives Boolean TYPE Byte TYPE Character TYPE Short TYPE Integer TYPE Long TYPE Float TYPE Double TYPE Class wrappers Boolean class Byte class Character class Short class Integer class Long class Float class Double class for int primitives length PRIMITIVE_TYPE_MAP put primitives wrappers private IntrospectionHelper final Class bean attributeTypes new Hashtable attributeSetters new Hashtable nestedTypes new Hashtable nestedCreators new Hashtable nestedStorers new Hashtable this bean bean Method methods bean getMethods for int methods length final Method methods final String name getName Class returnType getReturnType Class args getParameterTypes if org apache tools ant Task class isAssignableFrom bean args length isHiddenSetMethod name args continue if org apache tools ant TaskContainer class isAssignableFrom bean args length equals name org apache tools ant Task class equals args continue if equals name java lang Void TYPE equals returnType args length java lang String class equals args addText methods else if name startsWith java lang Void TYPE equals returnType args length args isArray String propName getPropertyName name if attributeSetters get propName null if java lang String class equals args continue AttributeSetter as createAttributeSetter args if as null attributeTypes put propName args attributeSetters put propName as else if name startsWith returnType isArray returnType isPrimitive args length String propName getPropertyName name nestedTypes put propName returnType nestedCreators put propName new NestedCreator public Object create Object parent throws InvocationTargetException IllegalAccessException return invoke parent new Object nestedStorers remove propName else if name startsWith java lang Void TYPE equals returnType args length java lang String class equals args args isArray args isPrimitive try final Constructor args getConstructor new Class String propName getPropertyName name nestedTypes put propName args nestedCreators put propName new NestedCreator public Object create Object parent throws InvocationTargetException IllegalAccessException InstantiationException Object newInstance new Object return nestedStorers put propName new NestedStorer public void store Object parent Object child throws InvocationTargetException IllegalAccessException InstantiationException invoke parent new Object child catch NoSuchMethodException nse else if name startsWith java lang Void TYPE equals returnType args length java lang String class equals args args isArray args isPrimitive try final Constructor args getConstructor new Class String propName getPropertyName name nestedTypes put propName args nestedCreators put propName new NestedCreator public Object create Object parent throws InvocationTargetException IllegalAccessException InstantiationException Object newInstance new Object invoke parent new Object return nestedStorers remove name catch NoSuchMethodException nse private boolean isHiddenSetMethod String name Class type if equals name org apache tools ant Location class equals type return true if equals name java lang String class equals type return true return false public static synchronized IntrospectionHelper getHelper Class IntrospectionHelper ih IntrospectionHelper helpers get if ih null ih new IntrospectionHelper helpers put ih return ih public void setAttribute Project Object element String attributeName String value throws BuildException AttributeSetter as AttributeSetter attributeSetters get attributeName if as null if element instanceof DynamicConfigurator DynamicConfigurator dc DynamicConfigurator element dc setDynamicAttribute attributeName value return else String msg getElementName element attributeName throw new BuildException msg try as set element value catch IllegalAccessException ie throw new BuildException ie catch InvocationTargetException ite Throwable ite getTargetException if instanceof BuildException throw BuildException throw new BuildException public void addText Project project Object element String text throws BuildException if addText null if text trim length return else String msg project getElementName element throw new BuildException msg try addText invoke element new String text catch IllegalAccessException ie throw new BuildException ie catch InvocationTargetException ite Throwable ite getTargetException if instanceof BuildException throw BuildException throw new BuildException public Object createElement Project project Object parent String elementName throws BuildException NestedCreator nc NestedCreator nestedCreators get elementName if nc null parent instanceof DynamicConfigurator DynamicConfigurator dc DynamicConfigurator parent Object nestedElement dc createDynamicElement elementName if nestedElement null if nestedElement instanceof ProjectComponent ProjectComponent nestedElement setProject project return nestedElement if nc null String msg project getElementName parent elementName throw new BuildException msg try Object nestedElement nc create parent if nestedElement instanceof ProjectComponent ProjectComponent nestedElement setProject project return nestedElement catch IllegalAccessException ie throw new BuildException ie catch InstantiationException ine throw new BuildException ine catch InvocationTargetException ite Throwable ite getTargetException if instanceof BuildException throw BuildException throw new BuildException public void storeElement Project project Object parent Object child String elementName throws BuildException if elementName null return NestedStorer ns NestedStorer nestedStorers get elementName if ns null return try ns store parent child catch IllegalAccessException ie throw new BuildException ie catch InstantiationException ine throw new BuildException ine catch InvocationTargetException ite Throwable ite getTargetException if instanceof BuildException throw BuildException throw new BuildException public Class getElementType String elementName throws BuildException Class nt Class nestedTypes get elementName if nt null String msg bean getName elementName throw new BuildException msg return nt public Class getAttributeType String attributeName throws BuildException Class at Class attributeTypes get attributeName if at null String msg bean getName attributeName throw new BuildException msg return at public boolean supportsCharacters return addText null public Enumeration getAttributes return attributeSetters keys public Enumeration getNestedElements return nestedTypes keys private AttributeSetter createAttributeSetter final Method Class arg final Class reflectedArg PRIMITIVE_TYPE_MAP containsKey arg Class PRIMITIVE_TYPE_MAP get arg arg if java lang String class equals reflectedArg return new AttributeSetter public void set Project Object parent String value throws InvocationTargetException IllegalAccessException invoke parent new String value else if java lang Character class equals reflectedArg return new AttributeSetter public void set Project Object parent String value throws InvocationTargetException IllegalAccessException invoke parent new Character new Character value charAt else if java lang Boolean class equals reflectedArg return new AttributeSetter public void set Project Object parent String value throws InvocationTargetException IllegalAccessException invoke parent new Boolean new Boolean Project toBoolean value else if java lang Class class equals reflectedArg return new AttributeSetter public void set Project Object parent String value throws InvocationTargetException IllegalAccessException BuildException try invoke parent new Class Class forName value catch ClassNotFoundException ce throw new BuildException ce else if java io File class equals reflectedArg return new AttributeSetter public void set Project Object parent String value throws InvocationTargetException IllegalAccessException invoke parent new File resolveFile value else if org apache tools ant types Path class equals reflectedArg return new AttributeSetter public void set Project Object parent String value throws InvocationTargetException IllegalAccessException invoke parent new Path new Path value else if org apache tools ant types EnumeratedAttribute class isAssignableFrom reflectedArg return new AttributeSetter public void set Project Object parent String value throws InvocationTargetException IllegalAccessException BuildException try org apache tools ant types EnumeratedAttribute ea org apache tools ant types EnumeratedAttribute reflectedArg newInstance ea setValue value invoke parent new EnumeratedAttribute ea catch InstantiationException ie throw new BuildException ie else try final Constructor reflectedArg getConstructor new Class java lang String class return new AttributeSetter public void set Project Object parent String value throws InvocationTargetException IllegalAccessException BuildException try Object attribute newInstance new String value if attribute instanceof ProjectComponent ProjectComponent attribute setProject invoke parent new Object attribute catch InstantiationException ie throw new BuildException ie catch NoSuchMethodException nme return null protected String getElementName Project project Object element return project getElementName element private String getPropertyName String methodName String prefix int start prefix length return methodName substring start toLowerCase Locale US private interface NestedCreator Object create Object parent throws InvocationTargetException IllegalAccessException InstantiationException private interface NestedStorer void store Object parent Object child throws InvocationTargetException IllegalAccessException InstantiationException private interface AttributeSetter void set Project Object parent String value throws InvocationTargetException IllegalAccessException BuildException public void buildFinished BuildEvent event attributeTypes clear attributeSetters clear nestedTypes clear nestedCreators clear addText null helpers clear public void buildStarted BuildEvent event public void targetStarted BuildEvent event public void targetFinished BuildEvent event public void taskStarted BuildEvent event public void taskFinished BuildEvent event public void messageLogged BuildEvent event', 'bug': '0'}
{'sequence': 'public class Javac12 extends DefaultCompilerAdapter public boolean execute throws BuildException attributes log Project MSG_VERBOSE Commandline cmd setupJavacCommand true OutputStream logstr new LogOutputStream attributes Project MSG_WARN try Class Class forName Constructor cons getConstructor new Class OutputStream class String class Object compiler cons newInstance new Object logstr Method compile getMethod new Class String class Boolean ok Boolean compile invoke compiler new Object cmd getArguments return ok booleanValue catch ClassNotFoundException ex throw new BuildException location catch Exception ex if ex instanceof BuildException throw BuildException ex else throw new BuildException ex location finally try logstr close catch IOException throw new BuildException', 'bug': '0'}
{'sequence': 'public class FileSet extends AbstractFileSet public FileSet super protected FileSet FileSet fileset super fileset public Object clone if isReference return new FileSet FileSet getRef getProject else return new FileSet this', 'bug': '0'}
{'sequence': 'public class MultipleChoiceInputRequest extends InputRequest private Vector choices new Vector public MultipleChoiceInputRequest String prompt Vector choices super prompt if choices null throw new IllegalArgumentException this choices choices public Vector getChoices return choices public boolean isInputValid return choices contains getInput', 'bug': '0'}
{'sequence': 'public class IsFalse extends ProjectComponent implements Condition private Boolean value null public void setValue boolean value this value new Boolean value public boolean eval throws BuildException if value null throw new BuildException return value booleanValue', 'bug': '0'}
{'sequence': 'public class MajoritySelector extends BaseSelectorContainer private boolean allowtie true public MajoritySelector public String toString StringBuffer buf new StringBuffer if hasSelectors buf append buf append super toString buf append return buf toString public void setAllowtie boolean tiebreaker allowtie tiebreaker public boolean isSelected File basedir String filename File file validate int yesvotes int novotes Enumeration selectorElements boolean result while hasMoreElements result FileSelector nextElement isSelected basedir filename file if result yesvotes yesvotes else novotes novotes if yesvotes novotes return true else if novotes yesvotes return false return allowtie', 'bug': '0'}
{'sequence': 'public class DemuxOutputStream extends OutputStream private static class BufferInfo private ByteArrayOutputStream buffer private boolean skip false private static final int MAX_SIZE private Hashtable buffers new Hashtable private Project project private boolean isErrorStream public DemuxOutputStream Project project boolean isErrorStream this project project this isErrorStream isErrorStream private BufferInfo getBufferInfo Thread current Thread currentThread BufferInfo bufferInfo BufferInfo buffers get current if bufferInfo null bufferInfo new BufferInfo bufferInfo buffer new ByteArrayOutputStream bufferInfo skip false buffers put current bufferInfo return bufferInfo private void resetBufferInfo Thread current Thread currentThread BufferInfo bufferInfo BufferInfo buffers get current try bufferInfo buffer close catch IOException bufferInfo buffer new ByteArrayOutputStream bufferInfo skip false private void removeBuffer Thread current Thread currentThread buffers remove current public void write int cc throws IOException final byte byte cc BufferInfo bufferInfo getBufferInfo if if bufferInfo skip processBuffer bufferInfo buffer else bufferInfo buffer write cc if bufferInfo buffer size MAX_SIZE processBuffer bufferInfo buffer bufferInfo skip protected void processBuffer ByteArrayOutputStream buffer String output buffer toString project demuxOutput output isErrorStream resetBufferInfo public void close throws IOException flush removeBuffer public void flush throws IOException BufferInfo bufferInfo getBufferInfo if bufferInfo buffer size processBuffer bufferInfo buffer', 'bug': '0'}
{'sequence': 'public class RegexpFactory extends RegexpMatcherFactory public RegexpFactory public Regexp newRegexp throws BuildException return Regexp newRegexp null public Regexp newRegexp Project throws BuildException String systemDefault null if null systemDefault System getProperty else systemDefault getProperty if systemDefault null return createRegexpInstance systemDefault try return createRegexpInstance catch BuildException be try return createRegexpInstance catch BuildException be try return createRegexpInstance catch BuildException be throw new BuildException protected Regexp createRegexpInstance String classname throws BuildException RegexpMatcher createInstance classname if instanceof Regexp return Regexp else throw new BuildException classname', 'bug': '0'}
{'sequence': 'public final class ZipShort implements Cloneable private int value public ZipShort int value this value value public ZipShort byte bytes this bytes public ZipShort byte bytes int offset value bytes offset value bytes offset public byte getBytes byte result new byte result byte value result byte value return result public int getValue return value public boolean equals Object if null instanceof ZipShort return false return value ZipShort getValue public int hashCode return value', 'bug': '0'}
{'sequence': 'public interface BuildListener extends EventListener void buildStarted BuildEvent event void buildFinished BuildEvent event void targetStarted BuildEvent event void targetFinished BuildEvent event void taskStarted BuildEvent event void taskFinished BuildEvent event void messageLogged BuildEvent event', 'bug': '0'}
{'sequence': 'public abstract class Pack extends Task protected File zipFile protected File source public void setZipfile File zipFile this zipFile zipFile public void setSrc File src source src private void validate throws BuildException if zipFile null throw new BuildException location if zipFile isDirectory throw new BuildException location if source null throw new BuildException location if source isDirectory throw new BuildException location public void execute throws BuildException validate if zipFile lastModified source lastModified log zipFile getAbsolutePath pack else log zipFile getAbsolutePath private void zipFile InputStream in OutputStream zOut throws IOException byte buffer new byte int count do zOut write buffer count count in read buffer buffer length while count protected void zipFile File file OutputStream zOut throws IOException FileInputStream fIn new FileInputStream file try zipFile fIn zOut finally fIn close protected abstract void pack', 'bug': '0'}
{'sequence': 'public class Mapper extends DataType implements Cloneable protected MapperType type null public Mapper Project setProject public void setType MapperType type if isReference throw tooManyAttributes this type type protected String classname null public void setClassname String classname if isReference throw tooManyAttributes this classname classname protected Path classpath null public void setClasspath Path classpath if isReference throw tooManyAttributes if this classpath null this classpath classpath else this classpath append classpath public Path createClasspath if isReference throw noChildrenAllowed if this classpath null this classpath new Path getProject return this classpath createPath public void setClasspathRef Reference if isReference throw tooManyAttributes createClasspath setRefid protected String from null public void setFrom String from if isReference throw tooManyAttributes this from from protected String to null public void setTo String to if isReference throw tooManyAttributes this to to public void setRefid Reference throws BuildException if type null from null to null throw tooManyAttributes super setRefid public FileNameMapper getImplementation throws BuildException if isReference return getRef getImplementation if type null classname null throw new BuildException if type null classname null throw new BuildException try if type null classname type getImplementation Class null if classpath null Class forName classname else AntClassLoader al new AntClassLoader getProject classpath al loadClass classname AntClassLoader initializeClass FileNameMapper FileNameMapper newInstance setFrom from setTo to return catch BuildException be throw be catch Throwable throw new BuildException finally if type null classname null protected Mapper getRef if checked Stack stk new Stack stk push this dieOnCircularReference stk getProject Object ref getReferencedObject getProject if instanceof Mapper String msg ref getRefId throw new BuildException msg else return Mapper public static class MapperType extends EnumeratedAttribute private Properties implementations public MapperType implementations new Properties implementations put implementations put implementations put implementations put implementations put public String getValues return new String public String getImplementation return implementations getProperty getValue', 'bug': '0'}
{'sequence': 'public abstract class BaseExtendSelector extends BaseSelector implements ExtendFileSelector protected Parameter parameters null public BaseExtendSelector public void setParameters Parameter parameters this parameters parameters protected Parameter getParameters return parameters public abstract boolean isSelected File basedir String filename File file throws BuildException', 'bug': '0'}
{'sequence': 'public class CvsUser private String m_userID private String m_displayName public void setDisplayname final String displayName m_displayName displayName public void setUserid final String userID m_userID userID String getUserID return m_userID String getDisplayname return m_displayName void validate throws BuildException if null m_userID final String message throw new BuildException message if null m_displayName final String message m_userID throw new BuildException message', 'bug': '0'}
{'sequence': 'public class BZip2 extends Pack protected void pack CBZip2OutputStream zOut null try BufferedOutputStream bos new BufferedOutputStream new FileOutputStream zipFile bos write bos write zOut new CBZip2OutputStream bos zipFile source zOut catch IOException ioe String msg ioe getMessage throw new BuildException msg ioe location finally if zOut null try zOut close catch IOException', 'bug': '0'}
{'sequence': 'public class CollectionUtils public static boolean equals Vector v1 Vector v2 if v1 v2 return true if v1 null v2 null return false if v1 size v2 size return false Enumeration e1 v1 elements Enumeration e2 v2 elements while e1 hasMoreElements if e1 nextElement equals e2 nextElement return false return true public static boolean equals Dictionary d1 Dictionary d2 if d1 d2 return true if d1 null d2 null return false if d1 size d2 size return false Enumeration e1 d1 keys while e1 hasMoreElements Object key e1 nextElement Object value1 d1 get key Object value2 d2 get key if value2 null value1 equals value2 return false return true', 'bug': '0'}
{'sequence': 'public class RegexpUtil public static final boolean hasFlag int options int flag return options flag public static final int removeFlag int options int flag return options flag', 'bug': '0'}
{'sequence': 'public class CBZip2InputStream extends InputStream implements BZip2Constants private static void cadvise System out println private static void badBGLengths cadvise private static void bitStreamEOF cadvise private static void compressedStreamEOF cadvise private void makeMaps int nInUse for if inUse seqToUnseq nInUse char unseqToSeq char nInUse nInUse private int last private int origPtr private int blockSize100k private boolean blockRandomised private int bytesIn private int bytesOut private int bsBuff private int bsLive private CRC mCrc new CRC private boolean inUse new boolean private int nInUse private char seqToUnseq new char private char unseqToSeq new char private char selector new char MAX_SELECTORS private char selectorMtf new char MAX_SELECTORS private int tt private char ll8 private int unzftab new int private int limit new int N_GROUPS MAX_ALPHA_SIZE private int base new int N_GROUPS MAX_ALPHA_SIZE private int perm new int N_GROUPS MAX_ALPHA_SIZE private int minLens new int N_GROUPS private InputStream bsStream private boolean streamEnd false private int currentChar private static final int START_BLOCK_STATE private static final int RAND_PART_A_STATE private static final int RAND_PART_B_STATE private static final int RAND_PART_C_STATE private static final int NO_RAND_PART_A_STATE private static final int NO_RAND_PART_B_STATE private static final int NO_RAND_PART_C_STATE private int currentState START_BLOCK_STATE private int storedBlockCRC storedCombinedCRC private int computedBlockCRC computedCombinedCRC int i2 count chPrev ch2 int tPos int rNToGo int rTPos int j2 char public CBZip2InputStream InputStream zStream ll8 null tt null bsSetStream zStream initialize initBlock setupBlock public int read if streamEnd return else int retChar currentChar switch currentState case START_BLOCK_STATE break case RAND_PART_A_STATE break case RAND_PART_B_STATE setupRandPartB break case RAND_PART_C_STATE setupRandPartC break case NO_RAND_PART_A_STATE break case NO_RAND_PART_B_STATE setupNoRandPartB break case NO_RAND_PART_C_STATE setupNoRandPartC break default break return retChar private void initialize char magic3 magic4 magic3 bsGetUChar magic4 bsGetUChar if magic3 magic4 magic4 bsFinishedWithStream streamEnd true return setDecompressStructureSizes magic4 computedCombinedCRC private void initBlock char magic1 magic2 magic3 magic4 char magic5 magic6 magic1 bsGetUChar magic2 bsGetUChar magic3 bsGetUChar magic4 bsGetUChar magic5 bsGetUChar magic6 bsGetUChar if magic1 magic2 magic3 magic4 magic5 magic6 complete return if magic1 magic2 magic3 magic4 magic5 magic6 badBlockHeader streamEnd true return storedBlockCRC bsGetInt32 if bsR blockRandomised true else blockRandomised false getAndMoveToFrontDecode mCrc initialiseCRC currentState START_BLOCK_STATE private void endBlock computedBlockCRC mCrc getFinalCRC if storedBlockCRC computedBlockCRC crcError computedCombinedCRC computedCombinedCRC computedCombinedCRC computedCombinedCRC computedBlockCRC private void complete storedCombinedCRC bsGetInt32 if storedCombinedCRC computedCombinedCRC crcError bsFinishedWithStream streamEnd true private static void blockOverrun cadvise private static void badBlockHeader cadvise private static void crcError cadvise private void bsFinishedWithStream try if this bsStream null if this bsStream System in this bsStream close this bsStream null catch IOException ioe private void bsSetStream InputStream bsStream bsLive bsBuff bytesOut bytesIn private int bsR int int while bsLive int zzi char thech try thech char bsStream read catch IOException compressedStreamEOF if thech compressedStreamEOF zzi thech bsBuff bsBuff zzi bsLive bsBuff bsLive bsLive return private char bsGetUChar return char bsR private int bsGetint int bsR bsR bsR bsR return private int bsGetIntVS int numBits return int bsR numBits private int bsGetInt32 return int bsGetint private void hbCreateDecodeTables int limit int base int perm char length int minLen int maxLen int alphaSize int pp vec pp for minLen maxLen for alphaSize if length perm pp pp for MAX_CODE_LEN base for alphaSize base length for MAX_CODE_LEN base base for MAX_CODE_LEN limit vec for minLen maxLen vec base base limit vec vec for minLen maxLen base limit base private void recvDecodingTables char len new char N_GROUPS MAX_ALPHA_SIZE int nGroups nSelectors alphaSize int minLen maxLen boolean inUse16 new boolean for if bsR inUse16 true else inUse16 false for inUse false for if inUse16 for if bsR inUse true makeMaps alphaSize nInUse nGroups bsR nSelectors bsR for nSelectors while bsR selectorMtf char char pos new char N_GROUPS char tmp for nGroups pos for nSelectors selectorMtf tmp pos while pos pos pos tmp selector tmp for nGroups int curr bsR for alphaSize while bsR if bsR curr else curr len char curr for nGroups minLen maxLen for alphaSize if len maxLen maxLen len if len minLen minLen len hbCreateDecodeTables limit base perm len minLen maxLen alphaSize minLens minLen private void getAndMoveToFrontDecode char yy new char int nextSym limitLast int EOB groupNo groupPos limitLast baseBlockSize blockSize100k origPtr bsGetIntVS recvDecodingTables EOB nInUse groupNo groupPos for unzftab for yy char last int zt zn zvec zj if groupPos groupNo groupPos G_SIZE groupPos zt selector groupNo zn minLens zt zvec bsR zn while zvec limit zt zn zn while bsLive int zzi char thech try thech char bsStream read catch IOException compressedStreamEOF if thech compressedStreamEOF zzi thech bsBuff bsBuff zzi bsLive zj bsBuff bsLive bsLive zvec zvec zj nextSym perm zt zvec base zt zn while true if nextSym EOB break if nextSym RUNA nextSym RUNB char ch int int do if nextSym RUNA else if nextSym RUNB int zt zn zvec zj if groupPos groupNo groupPos G_SIZE groupPos zt selector groupNo zn minLens zt zvec bsR zn while zvec limit zt zn zn while bsLive int zzi char thech try thech char bsStream read catch IOException compressedStreamEOF if thech compressedStreamEOF zzi thech bsBuff bsBuff zzi bsLive zj bsBuff bsLive bsLive zvec zvec zj nextSym perm zt zvec base zt zn while nextSym RUNA nextSym RUNB ch seqToUnseq yy unzftab ch while last ll8 last ch if last limitLast blockOverrun continue else char tmp last if last limitLast blockOverrun tmp yy nextSym unzftab seqToUnseq tmp ll8 last seqToUnseq tmp nextSym for yy yy yy yy yy yy yy yy for yy yy yy tmp int zt zn zvec zj if groupPos groupNo groupPos G_SIZE groupPos zt selector groupNo zn minLens zt zvec bsR zn while zvec limit zt zn zn while bsLive int zzi char thech try thech char bsStream read catch IOException compressedStreamEOF zzi thech bsBuff bsBuff zzi bsLive zj bsBuff bsLive bsLive zvec zvec zj nextSym perm zt zvec base zt zn continue private void setupBlock int cftab new int char ch cftab for cftab unzftab for cftab cftab for last ch char ll8 tt cftab ch cftab ch cftab null tPos tt origPtr count i2 if blockRandomised rNToGo rTPos setupRandPartA else setupNoRandPartA private void setupRandPartA if i2 last chPrev ch2 ch2 ll8 tPos tPos tt tPos if rNToGo rNToGo rNums rTPos rTPos if rTPos rTPos rNToGo ch2 int rNToGo i2 currentChar ch2 currentState RAND_PART_B_STATE mCrc updateCRC ch2 else endBlock initBlock setupBlock private void setupNoRandPartA if i2 last chPrev ch2 ch2 ll8 tPos tPos tt tPos i2 currentChar ch2 currentState NO_RAND_PART_B_STATE mCrc updateCRC ch2 else endBlock initBlock setupBlock private void setupRandPartB if ch2 chPrev currentState RAND_PART_A_STATE count setupRandPartA else count if count ll8 tPos tPos tt tPos if rNToGo rNToGo rNums rTPos rTPos if rTPos rTPos rNToGo rNToGo j2 currentState RAND_PART_C_STATE setupRandPartC else currentState RAND_PART_A_STATE setupRandPartA private void setupRandPartC if j2 int currentChar ch2 mCrc updateCRC ch2 j2 else currentState RAND_PART_A_STATE i2 count setupRandPartA private void setupNoRandPartB if ch2 chPrev currentState NO_RAND_PART_A_STATE count setupNoRandPartA else count if count ll8 tPos tPos tt tPos currentState NO_RAND_PART_C_STATE j2 setupNoRandPartC else currentState NO_RAND_PART_A_STATE setupNoRandPartA private void setupNoRandPartC if j2 int currentChar ch2 mCrc updateCRC ch2 j2 else currentState NO_RAND_PART_A_STATE i2 count setupNoRandPartA private void setDecompressStructureSizes int newSize100k if newSize100k newSize100k blockSize100k blockSize100k blockSize100k newSize100k if newSize100k return int baseBlockSize newSize100k ll8 new char tt new int', 'bug': '0'}
{'sequence': 'public class FileUtils private static Random rand new Random System currentTimeMillis private static Object lockReflection new Object private static java lang reflect Method setLastModified null private boolean onNetWare Os isFamily public static FileUtils newFileUtils return new FileUtils protected FileUtils public URL getFileURL File file throws MalformedURLException String uri file getAbsolutePath replace for int uri indexOf uri indexOf uri uri substring uri substring if file isDirectory uri return new URL uri public void copyFile String sourceFile String destFile throws IOException copyFile new File sourceFile new File destFile null false false public void copyFile String sourceFile String destFile FilterSetCollection filters throws IOException copyFile new File sourceFile new File destFile filters false false public void copyFile String sourceFile String destFile FilterSetCollection filters boolean overwrite throws IOException copyFile new File sourceFile new File destFile filters overwrite false public void copyFile String sourceFile String destFile FilterSetCollection filters boolean overwrite boolean preserveLastModified throws IOException copyFile new File sourceFile new File destFile filters overwrite preserveLastModified public void copyFile String sourceFile String destFile FilterSetCollection filters boolean overwrite boolean preserveLastModified String encoding throws IOException copyFile new File sourceFile new File destFile filters overwrite preserveLastModified encoding public void copyFile String sourceFile String destFile FilterSetCollection filters Vector filterChains boolean overwrite boolean preserveLastModified String encoding Project project throws IOException copyFile new File sourceFile new File destFile filters filterChains overwrite preserveLastModified encoding project public void copyFile File sourceFile File destFile throws IOException copyFile sourceFile destFile null false false public void copyFile File sourceFile File destFile FilterSetCollection filters throws IOException copyFile sourceFile destFile filters false false public void copyFile File sourceFile File destFile FilterSetCollection filters boolean overwrite throws IOException copyFile sourceFile destFile filters overwrite false public void copyFile File sourceFile File destFile FilterSetCollection filters boolean overwrite boolean preserveLastModified throws IOException copyFile sourceFile destFile filters overwrite preserveLastModified null public void copyFile File sourceFile File destFile FilterSetCollection filters boolean overwrite boolean preserveLastModified String encoding throws IOException copyFile sourceFile destFile filters null overwrite preserveLastModified encoding null public void copyFile File sourceFile File destFile FilterSetCollection filters Vector filterChains boolean overwrite boolean preserveLastModified String encoding Project project throws IOException if overwrite destFile exists destFile lastModified sourceFile lastModified if destFile exists destFile isFile destFile delete File parent getParentFile destFile if parent exists parent mkdirs final boolean filterSetsAvailable filters null filters hasFilters final boolean filterChainsAvailable filterChains null filterChains size if filterSetsAvailable filterChainsAvailable BufferedReader in null BufferedWriter out null try if encoding null in new BufferedReader new FileReader sourceFile out new BufferedWriter new FileWriter destFile else in new BufferedReader new InputStreamReader new FileInputStream sourceFile encoding out new BufferedWriter new OutputStreamWriter new FileOutputStream destFile encoding if filterChainsAvailable ChainReaderHelper crh new ChainReaderHelper crh setBufferSize crh setPrimaryReader in crh setFilterChains filterChains crh setProject project Reader rdr crh getAssembledReader in new BufferedReader rdr int length String newline null String line in readLine while line null if line length out newLine else if filterSetsAvailable newline filters replaceTokens line else newline line out write newline out newLine line in readLine finally if out null out close if in null in close else FileInputStream in null FileOutputStream out null try in new FileInputStream sourceFile out new FileOutputStream destFile byte buffer new byte int count do out write buffer count count in read buffer buffer length while count finally if out null out close if in null in close if preserveLastModified setFileLastModified destFile sourceFile lastModified protected final Method getSetLastModified if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 return null if setLastModified null synchronized lockReflection if setLastModified null try setLastModified java io File class getMethod new Class Long TYPE catch NoSuchMethodException nse throw new BuildException nse return setLastModified public void setFileLastModified File file long time throws BuildException if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 return Long times new Long if time times new Long System currentTimeMillis else times new Long time try getSetLastModified invoke file times catch java lang reflect InvocationTargetException ite Throwable nested ite getTargetException throw new BuildException file nested catch Throwable other throw new BuildException file other public File resolveFile File file String filename filename filename replace File separatorChar replace File separatorChar if onNetWare if filename startsWith File separator filename length Character isLetter filename charAt filename charAt return normalize filename else int colon filename indexOf if filename startsWith File separator colon return normalize filename if file null return new File filename File helpFile new File file getAbsolutePath StringTokenizer tok new StringTokenizer filename File separator while tok hasMoreTokens String part tok nextToken if part equals helpFile getParentFile helpFile if helpFile null String msg filename file getPath throw new BuildException msg else if part equals else helpFile new File helpFile part return new File helpFile getAbsolutePath public File normalize String path String orig path path path replace File separatorChar replace File separatorChar int colon path indexOf if onNetWare if path startsWith File separator path length Character isLetter path charAt colon String msg path throw new BuildException msg else if path startsWith File separator colon String msg path throw new BuildException msg boolean dosWithDrive false String root null if onNetWare path length Character isLetter path charAt path charAt onNetWare colon dosWithDrive true char ca path replace toCharArray StringBuffer sbRoot new StringBuffer for int colon sbRoot append Character toUpperCase ca sbRoot append if colon path length sbRoot append File separatorChar root sbRoot toString StringBuffer sbPath new StringBuffer for int colon ca length if ca ca ca sbPath append ca path sbPath toString replace File separatorChar else if path length root File separator path else if path charAt File separatorChar root File separator File separator path path substring else root File separator path path substring Stack new Stack push root StringTokenizer tok new StringTokenizer path File separator while tok hasMoreTokens String thisToken tok nextToken if equals thisToken continue else if equals thisToken if size throw new BuildException orig else pop push thisToken StringBuffer sb new StringBuffer for int size if sb append File separatorChar sb append elementAt path sb toString if dosWithDrive path path replace return new File path public File createTempFile String prefix String suffix File parentDir File result null String parent null if parentDir null parent parentDir getPath DecimalFormat fmt new DecimalFormat synchronized rand do result new File parent prefix fmt format rand nextInt suffix while result exists return result public boolean contentEquals File f1 File f2 throws IOException if f1 exists f2 exists return false if f1 exists return true if f1 isDirectory f2 isDirectory return false if f1 equals f2 return true if f1 length f2 length return false InputStream in1 null InputStream in2 null try in1 new BufferedInputStream new FileInputStream f1 in2 new BufferedInputStream new FileInputStream f2 int expectedByte in1 read while expectedByte if expectedByte in2 read return false expectedByte in1 read if in2 read return false return true finally if in1 null try in1 close catch IOException if in2 null try in2 close catch IOException public File getParentFile File if null String getParent if null return new File return null public static final String readFully Reader rdr throws IOException return readFully rdr public static final String readFully Reader rdr int bufferSize throws IOException if bufferSize throw new IllegalArgumentException final char buffer new char bufferSize int bufferLength String text null StringBuffer textBuffer null while bufferLength bufferLength rdr read buffer if bufferLength if textBuffer null textBuffer new StringBuffer new String buffer bufferLength else textBuffer append new String buffer bufferLength if textBuffer null text textBuffer toString return text public boolean createNewFile File throws IOException if null if exists return false FileOutputStream fos null try fos new FileOutputStream fos write new byte finally if fos null fos close return true return false public boolean isSymbolicLink File parent String name throws IOException File resolvedParent new File parent getCanonicalPath File toTest new File resolvedParent name return toTest getAbsolutePath equals toTest getCanonicalPath public String removeLeadingPath File leading File path String normalize leading getAbsolutePath getAbsolutePath File separator String normalize path getAbsolutePath getAbsolutePath if startsWith return substring length else return', 'bug': '1'}
{'sequence': 'public class Rmic extends MatchingTask private static final String FAIL_MSG private File baseDir private String classname private File sourceBase private String stubVersion private Path compileClasspath private Path extdirs private boolean verify false private boolean filtering false private boolean iiop false private String iiopopts private boolean idl false private String idlopts private boolean debug false private boolean includeAntRuntime true private boolean includeJavaRuntime false private Vector compileList new Vector private ClassLoader loader null private FileUtils fileUtils FileUtils newFileUtils private FacadeTaskHelper facade public Rmic try Class forName facade new FacadeTaskHelper catch ClassNotFoundException cnfe facade new FacadeTaskHelper public void setBase File base this baseDir base public File getBase return this baseDir public void setClassname String classname this classname classname public String getClassname return classname public void setSourceBase File sourceBase this sourceBase sourceBase public File getSourceBase return sourceBase public void setStubVersion String stubVersion this stubVersion stubVersion public String getStubVersion return stubVersion public void setFiltering boolean filter filtering filter public boolean getFiltering return filtering public void setDebug boolean debug this debug debug public boolean getDebug return debug public void setClasspath Path classpath if compileClasspath null compileClasspath classpath else compileClasspath append classpath public Path createClasspath if compileClasspath null compileClasspath new Path project return compileClasspath createPath public void setClasspathRef Reference createClasspath setRefid public Path getClasspath return compileClasspath public void setVerify boolean verify this verify verify public boolean getVerify return verify public void setIiop boolean iiop this iiop iiop public boolean getIiop return iiop public void setIiopopts String iiopopts this iiopopts iiopopts public String getIiopopts return iiopopts public void setIdl boolean idl this idl idl public boolean getIdl return idl public void setIdlopts String idlopts this idlopts idlopts public String getIdlopts return idlopts public Vector getFileList return compileList public void setIncludeantruntime boolean include includeAntRuntime include public boolean getIncludeantruntime return includeAntRuntime public void setIncludejavaruntime boolean include includeJavaRuntime include public boolean getIncludejavaruntime return includeJavaRuntime public void setExtdirs Path extdirs if this extdirs null this extdirs extdirs else this extdirs append extdirs public Path createExtdirs if extdirs null extdirs new Path project return extdirs createPath public Path getExtdirs return extdirs public Vector getCompileList return compileList public void setCompiler String compiler facade setImplementation compiler public String getCompiler facade setMagicValue getProject getProperty return facade getImplementation public ImplementationSpecificArgument createCompilerArg ImplementationSpecificArgument arg new ImplementationSpecificArgument facade addImplementationArgument arg return arg public String getCurrentCompilerArgs getCompiler return facade getArgs public void execute throws BuildException if baseDir null throw new BuildException location if baseDir exists throw new BuildException location if verify log Project MSG_VERBOSE RmicAdapter adapter RmicAdapterFactory getRmic getCompiler this adapter setRmic this Path classpath adapter getClasspath loader new AntClassLoader project classpath try if classname null DirectoryScanner ds this getDirectoryScanner baseDir String files ds getIncludedFiles scanDir baseDir files adapter getMapper else scanDir baseDir new String classname replace File separatorChar adapter getMapper int fileCount compileList size if fileCount log fileCount fileCount baseDir Project MSG_INFO if adapter execute throw new BuildException FAIL_MSG location if null sourceBase baseDir equals sourceBase fileCount if idl log Project MSG_WARN log Project MSG_WARN else for int fileCount moveGeneratedFile baseDir sourceBase String compileList elementAt adapter finally compileList removeAllElements private void moveGeneratedFile File baseDir File sourceBaseFile String classname RmicAdapter adapter throws BuildException String classFileName classname replace File separatorChar String generatedFiles adapter getMapper mapFileName classFileName for int generatedFiles length if generatedFiles endsWith continue String sourceFileName generatedFiles substring classFileName length File oldFile new File baseDir sourceFileName if oldFile exists continue File newFile new File sourceBaseFile sourceFileName try if filtering fileUtils copyFile oldFile newFile new FilterSetCollection getProject getGlobalFilterSet else fileUtils copyFile oldFile newFile oldFile delete catch IOException ioe String msg oldFile newFile ioe getMessage throw new BuildException msg ioe location protected void scanDir File baseDir String files FileNameMapper mapper String newFiles files if idl log Project MSG_VERBOSE else if iiop iiopopts null iiopopts indexOf log Project MSG_VERBOSE else SourceFileScanner sfs new SourceFileScanner this newFiles sfs restrict files baseDir baseDir mapper for int newFiles length String classname newFiles replace File separatorChar classname classname substring classname lastIndexOf compileList addElement classname public boolean isValidRmiRemote String classname try Class testClass loader loadClass classname if testClass isInterface iiop idl return false return isValidRmiRemote testClass catch ClassNotFoundException log classname Project MSG_WARN catch NoClassDefFoundError log classname Project MSG_WARN catch Throwable log classname getMessage Project MSG_WARN return false public Class getRemoteInterface Class testClass if Remote class isAssignableFrom testClass Class interfaces testClass getInterfaces if interfaces null for int interfaces length if Remote class isAssignableFrom interfaces return interfaces return null private boolean isValidRmiRemote Class testClass return getRemoteInterface testClass null public ClassLoader getLoader return loader public class ImplementationSpecificArgument extends org apache tools ant util facade ImplementationSpecificArgument public void setCompiler String impl super setImplementation impl', 'bug': '0'}
{'sequence': 'public class TaskOutputStream extends OutputStream private Task task private StringBuffer line private int msgOutputLevel TaskOutputStream Task task int msgOutputLevel System err println System err println System err println this task task this msgOutputLevel msgOutputLevel line new StringBuffer public void write int throws IOException char cc char if cc cc if line length processLine else line append cc private void processLine String line toString task log msgOutputLevel line new StringBuffer', 'bug': '0'}
{'sequence': 'public abstract class AbstractCvsTask extends Task public static final int DEFAULT_COMPRESSION_LEVEL private Commandline cmd new Commandline private Vector vecCommandlines new Vector private String cvsRoot private String cvsRsh private String cvsPackage private static final String default_command private String command null private boolean quiet false private int compression private boolean noexec false private int port private File passFile null private File dest private boolean append false private File output private File error private boolean failOnError false private ExecuteStreamHandler executeStreamHandler private OutputStream outputStream private OutputStream errorStream public AbstractCvsTask super public void setExecuteStreamHandler ExecuteStreamHandler handler this executeStreamHandler handler protected ExecuteStreamHandler getExecuteStreamHandler if this executeStreamHandler null setExecuteStreamHandler new PumpStreamHandler getOutputStream getErrorStream return this executeStreamHandler protected void setOutputStream OutputStream outputStream this outputStream outputStream protected OutputStream getOutputStream if this outputStream null if output null try setOutputStream new PrintStream new BufferedOutputStream new FileOutputStream output getPath append catch IOException throw new BuildException location else setOutputStream new LogOutputStream this Project MSG_INFO return this outputStream protected void setErrorStream OutputStream errorStream this errorStream errorStream protected OutputStream getErrorStream if this errorStream null if error null try setErrorStream new PrintStream new BufferedOutputStream new FileOutputStream error getPath append catch IOException throw new BuildException location else setErrorStream new LogOutputStream this Project MSG_WARN return this errorStream protected void runCommand Commandline toExecute throws BuildException Environment env new Environment if port Environment Variable var new Environment Variable var setKey var setValue String valueOf port env addVariable var if passFile null File defaultPassFile new File System getProperty System getProperty File separatorChar if defaultPassFile exists this setPassfile defaultPassFile if passFile null Environment Variable var new Environment Variable var setKey var setValue String valueOf passFile env addVariable var log String valueOf passFile Project MSG_INFO if cvsRsh null Environment Variable var new Environment Variable var setKey var setValue String valueOf cvsRsh env addVariable var Execute exe new Execute getExecuteStreamHandler null exe setAntRun project if dest null dest project getBaseDir if dest exists dest mkdirs exe setWorkingDirectory dest exe setCommandline toExecute getCommandline exe setEnvironment env getVariables try String actualCommandLine executeToString exe log actualCommandLine Project MSG_VERBOSE int retCode exe execute log retCode Project MSG_DEBUG if failOnError retCode throw new BuildException retCode StringUtils LINE_SEP actualCommandLine location catch IOException if failOnError throw new BuildException location else log getMessage Project MSG_WARN catch BuildException if failOnError throw else Throwable getException if null log getMessage Project MSG_WARN catch Exception if failOnError throw new BuildException location else log getMessage Project MSG_WARN finally if outputStream null try outputStream close catch IOException if errorStream null try errorStream close catch IOException public void execute throws BuildException String savedCommand getCommand if this getCommand null vecCommandlines size this setCommand AbstractCvsTask default_command String this getCommand Commandline cloned null if null cloned Commandline cmd clone cloned createArgument true setLine this addConfiguredCommandline cloned true try for int vecCommandlines size this runCommand Commandline vecCommandlines elementAt finally if cloned null removeCommandline cloned setCommand savedCommand private String executeToString Execute execute StringBuffer stringBuffer new StringBuffer Commandline describeCommand execute getCommandline String newLine StringUtils LINE_SEP String variableArray execute getEnvironment if variableArray null stringBuffer append newLine stringBuffer append newLine stringBuffer append stringBuffer append newLine for int variableArray length stringBuffer append newLine stringBuffer append stringBuffer append variableArray return stringBuffer toString public void setCvsRoot String root if root null if root trim equals root null this cvsRoot root public String getCvsRoot return this cvsRoot public void setCvsRsh String rsh if rsh null if rsh trim equals rsh null this cvsRsh rsh public String getCvsRsh return this cvsRsh public void setPort int port this port port public int getPort return this port public void setPassfile File passFile this passFile passFile public File getPassFile return this passFile public void setDest File dest this dest dest public File getDest return this dest public void setPackage String this cvsPackage public String getPackage return this cvsPackage public void setTag String if null trim length addCommandArgument addCommandArgument public void addCommandArgument String arg this addCommandArgument cmd arg public void addCommandArgument Commandline String arg createArgument setValue arg public void setDate String if null trim length addCommandArgument addCommandArgument public void setCommand String this command public String getCommand return this command public void setQuiet boolean quiet public void setNoexec boolean ne noexec ne public void setOutput File output this output output public void setError File error this error error public void setAppend boolean value this append value public void setFailOnError boolean failOnError this failOnError failOnError protected void configureCommandline Commandline if null return setExecutable if cvsPackage null createArgument setLine cvsPackage if this compression this compression createArgument true setValue this compression if quiet createArgument true setValue if noexec createArgument true setValue if cvsRoot null createArgument true setLine cvsRoot protected void removeCommandline Commandline vecCommandlines removeElement public void addConfiguredCommandline Commandline this addConfiguredCommandline false public void addConfiguredCommandline Commandline boolean insertAtStart if null return this configureCommandline if insertAtStart vecCommandlines insertElementAt else vecCommandlines addElement public void setCompressionLevel int level this compression level public void setCompression boolean usecomp setCompressionLevel usecomp AbstractCvsTask DEFAULT_COMPRESSION_LEVEL', 'bug': '1'}
{'sequence': 'public class ErrorInQuitException extends IOException public ErrorInQuitException IOException super getMessage', 'bug': '0'}
{'sequence': 'public class RmicAdapterFactory private RmicAdapterFactory public static RmicAdapter getRmic String rmicType Task task throws BuildException if rmicType equalsIgnoreCase return new SunRmic else if rmicType equalsIgnoreCase return new KaffeRmic else if rmicType equalsIgnoreCase return new WLRmic return resolveClassName rmicType private static RmicAdapter resolveClassName String className throws BuildException try Class Class forName className Object newInstance return RmicAdapter catch ClassNotFoundException cnfe throw new BuildException className cnfe catch ClassCastException cce throw new BuildException className cce catch Throwable throw new BuildException className', 'bug': '0'}
{'sequence': 'class RCSFile private String m_name private String m_revision private String m_previousRevision RCSFile final String name final String rev this name rev null RCSFile final String name final String revision final String previousRevision m_name name m_revision revision if revision equals previousRevision m_previousRevision previousRevision String getName return m_name String getRevision return m_revision String getPreviousRevision return m_previousRevision', 'bug': '0'}
{'sequence': 'public class XmlLogger implements BuildLogger private int msgOutputLevel Project MSG_DEBUG private PrintStream outStream private static final DocumentBuilder builder getDocumentBuilder private static DocumentBuilder getDocumentBuilder try return DocumentBuilderFactory newInstance newDocumentBuilder catch Exception exc throw new ExceptionInInitializerError exc private static final String BUILD_TAG private static final String TARGET_TAG private static final String TASK_TAG private static final String MESSAGE_TAG private static final String NAME_ATTR private static final String TIME_ATTR private static final String PRIORITY_ATTR private static final String LOCATION_ATTR private static final String ERROR_ATTR private static final String STACKTRACE_TAG private Document doc builder newDocument private Hashtable tasks new Hashtable private Hashtable targets new Hashtable private Hashtable threadStacks new Hashtable private TimedElement buildElement null private static class TimedElement private long startTime private Element element public XmlLogger public void buildStarted BuildEvent event buildElement new TimedElement buildElement startTime System currentTimeMillis buildElement element doc createElement BUILD_TAG public void buildFinished BuildEvent event long totalTime System currentTimeMillis buildElement startTime buildElement element setAttribute TIME_ATTR DefaultLogger formatTime totalTime if event getException null buildElement element setAttribute ERROR_ATTR event getException toString Throwable event getException Text errText doc createCDATASection StringUtils getStackTrace Element stacktrace doc createElement STACKTRACE_TAG stacktrace appendChild errText buildElement element appendChild stacktrace String outFilename event getProject getProperty if outFilename null outFilename String xslUri event getProject getProperty if xslUri null xslUri Writer out null try OutputStream stream outStream if stream null stream new FileOutputStream outFilename out new OutputStreamWriter stream out write if xslUri length out write xslUri new DOMElementWriter write buildElement element out out flush catch IOException exc throw new BuildException exc finally if out null try out close catch IOException buildElement null private Stack getStack Stack threadStack Stack threadStacks get Thread currentThread if threadStack null threadStack new Stack threadStacks put Thread currentThread threadStack return threadStack public void targetStarted BuildEvent event Target target event getTarget TimedElement targetElement new TimedElement targetElement startTime System currentTimeMillis targetElement element doc createElement TARGET_TAG targetElement element setAttribute NAME_ATTR target getName targets put target targetElement getStack push targetElement public void targetFinished BuildEvent event Target target event getTarget TimedElement targetElement TimedElement targets get target if targetElement null long totalTime System currentTimeMillis targetElement startTime targetElement element setAttribute TIME_ATTR DefaultLogger formatTime totalTime TimedElement parentElement null Stack threadStack getStack if threadStack empty TimedElement poppedStack TimedElement threadStack pop if poppedStack targetElement throw new RuntimeException poppedStack element targetElement element if threadStack empty parentElement TimedElement threadStack peek if parentElement null buildElement element appendChild targetElement element else parentElement element appendChild targetElement element public void taskStarted BuildEvent event Task task event getTask TimedElement taskElement new TimedElement taskElement startTime System currentTimeMillis taskElement element doc createElement TASK_TAG String name event getTask getTaskName taskElement element setAttribute NAME_ATTR name taskElement element setAttribute LOCATION_ATTR event getTask getLocation toString tasks put task taskElement getStack push taskElement public void taskFinished BuildEvent event Task task event getTask TimedElement taskElement TimedElement tasks get task if taskElement null long totalTime System currentTimeMillis taskElement startTime taskElement element setAttribute TIME_ATTR DefaultLogger formatTime totalTime Target target task getOwningTarget TimedElement targetElement null if target null targetElement TimedElement targets get target if targetElement null buildElement element appendChild taskElement element else targetElement element appendChild taskElement element Stack threadStack getStack if threadStack empty TimedElement poppedStack TimedElement threadStack pop if poppedStack taskElement throw new RuntimeException poppedStack element taskElement element public void messageLogged BuildEvent event int priority event getPriority if priority msgOutputLevel return Element messageElement doc createElement MESSAGE_TAG String name switch event getPriority case Project MSG_ERR name break case Project MSG_WARN name break case Project MSG_INFO name break default name break messageElement setAttribute PRIORITY_ATTR name Text messageText doc createCDATASection event getMessage messageElement appendChild messageText TimedElement parentElement null Task task event getTask Target target event getTarget if task null parentElement TimedElement tasks get task if parentElement null target null parentElement TimedElement targets get target if parentElement null Stack threadStack Stack threadStacks get Thread currentThread if threadStack null if threadStack empty parentElement TimedElement threadStack peek if parentElement null parentElement element appendChild messageElement else buildElement element appendChild messageElement public void setMessageOutputLevel int level msgOutputLevel level public void setOutputPrintStream PrintStream output this outStream new PrintStream output true public void setEmacsMode boolean emacsMode public void setErrorPrintStream PrintStream err', 'bug': '1'}
{'sequence': 'public class Description extends DataType public void addText String text String currentDescription project getDescription if currentDescription null project setDescription text else project setDescription currentDescription text', 'bug': '0'}
{'sequence': 'public class Location private String fileName private int lineNumber private int columnNumber public static final Location UNKNOWN_LOCATION new Location private Location this null public Location String fileName this fileName public Location String fileName int lineNumber int columnNumber this fileName fileName this lineNumber lineNumber this columnNumber columnNumber public String toString StringBuffer buf new StringBuffer if fileName null buf append fileName if lineNumber buf append buf append lineNumber buf append return buf toString', 'bug': '0'}
{'sequence': 'public class JavacExternal extends DefaultCompilerAdapter public boolean execute throws BuildException attributes log Project MSG_VERBOSE Commandline cmd new Commandline cmd setExecutable getJavac getJavacExecutable setupModernJavacCommandlineSwitches cmd int firstFileName assumeJava11 cmd size logAndAddFilesToCompile cmd return executeExternalCompile cmd getCommandline firstFileName', 'bug': '0'}
{'sequence': 'public class FlatFileNameMapper implements FileNameMapper public void setFrom String from public void setTo String to public String mapFileName String sourceFileName return new String new java io File sourceFileName getName', 'bug': '0'}
{'sequence': 'public class Transform extends ExecuteOn', 'bug': '0'}
{'sequence': 'public class GlobPatternMapper implements FileNameMapper protected String fromPrefix null protected String fromPostfix null protected int prefixLength protected int postfixLength protected String toPrefix null protected String toPostfix null public void setFrom String from int index from lastIndexOf if index fromPrefix from fromPostfix else fromPrefix from substring index fromPostfix from substring index prefixLength fromPrefix length postfixLength fromPostfix length public void setTo String to int index to lastIndexOf if index toPrefix to toPostfix else toPrefix to substring index toPostfix to substring index public String mapFileName String sourceFileName if fromPrefix null sourceFileName startsWith fromPrefix sourceFileName endsWith fromPostfix return null return new String toPrefix extractVariablePart sourceFileName toPostfix protected String extractVariablePart String name return name substring prefixLength name length postfixLength', 'bug': '0'}
{'sequence': 'public class MergingMapper implements FileNameMapper protected String mergedFile null public void setFrom String from public void setTo String to mergedFile new String to public String mapFileName String sourceFileName return mergedFile', 'bug': '0'}
{'sequence': 'public class Execute public static final int INVALID Integer MAX_VALUE private String cmdl null private String env null private int exitValue INVALID private ExecuteStreamHandler streamHandler private ExecuteWatchdog watchdog private File workingDirectory null private Project project null private boolean newEnvironment false private boolean useVMLauncher true private static String antWorkingDirectory System getProperty private static CommandLauncher vmLauncher null private static CommandLauncher shellLauncher null private static Vector procEnvironment null private static ProcessDestroyer processDestroyer new ProcessDestroyer static try vmLauncher new Java13CommandLauncher catch NoSuchMethodException exc if Os isFamily shellLauncher new MacCommandLauncher new CommandLauncher else if Os isFamily shellLauncher new WinNTCommandLauncher new CommandLauncher else if Os isFamily CommandLauncher baseLauncher if System getProperty startsWith baseLauncher new Java11CommandLauncher else baseLauncher new CommandLauncher if Os isFamily shellLauncher new WinNTCommandLauncher baseLauncher else shellLauncher new ScriptCommandLauncher baseLauncher else if Os isFamily CommandLauncher baseLauncher if System getProperty startsWith baseLauncher new Java11CommandLauncher else baseLauncher new CommandLauncher shellLauncher new PerlScriptCommandLauncher baseLauncher else shellLauncher new ScriptCommandLauncher new CommandLauncher public static synchronized Vector getProcEnvironment if procEnvironment null return procEnvironment procEnvironment new Vector try ByteArrayOutputStream out new ByteArrayOutputStream Execute exe new Execute new PumpStreamHandler out exe setCommandline getProcEnvCommand exe setNewenvironment true int retval exe execute if retval BufferedReader in new BufferedReader new StringReader toString out String var null String line lineSep System getProperty while line in readLine null if line indexOf if var null var lineSep line else var lineSep line else if var null procEnvironment addElement var var line if var null procEnvironment addElement var catch java io IOException exc exc printStackTrace return procEnvironment private static String getProcEnvCommand if Os isFamily String cmd return cmd else if Os isFamily if Os isFamily String cmd return cmd else String cmd return cmd else if Os isFamily String cmd return cmd else if Os isFamily String cmd return cmd else if Os isFamily String cmd return cmd else String cmd null return cmd public static String toString ByteArrayOutputStream bos if Os isFamily try bos toString catch java io UnsupportedEncodingException return bos toString public Execute this new PumpStreamHandler null public Execute ExecuteStreamHandler streamHandler this streamHandler null public Execute ExecuteStreamHandler streamHandler ExecuteWatchdog watchdog this streamHandler streamHandler this watchdog watchdog public String getCommandline return cmdl public void setCommandline String commandline cmdl commandline public void setNewenvironment boolean newenv newEnvironment newenv public String getEnvironment if env null newEnvironment return env return patchEnvironment public void setEnvironment String env this env env public void setWorkingDirectory File wd if wd null wd getAbsolutePath equals antWorkingDirectory workingDirectory null else workingDirectory wd public void setAntRun Project project throws BuildException this project project public void setVMLauncher boolean useVMLauncher this useVMLauncher useVMLauncher public static Process launch Project project String command String env File dir boolean useVM throws IOException CommandLauncher launcher vmLauncher null vmLauncher shellLauncher if useVM launcher shellLauncher return launcher exec project command env dir public int execute throws IOException final Process process launch project getCommandline getEnvironment workingDirectory useVMLauncher try streamHandler setProcessInputStream process getOutputStream streamHandler setProcessOutputStream process getInputStream streamHandler setProcessErrorStream process getErrorStream catch IOException process destroy throw streamHandler start processDestroyer add process if watchdog null watchdog start process waitFor process processDestroyer remove process if watchdog null watchdog stop streamHandler stop if watchdog null watchdog checkException return getExitValue protected void waitFor Process process try process waitFor setExitValue process exitValue catch InterruptedException protected void setExitValue int value exitValue value public int getExitValue return exitValue public boolean killedProcess return watchdog null watchdog killedProcess private String patchEnvironment Vector osEnv Vector getProcEnvironment clone for int env length int pos env indexOf String key env substring pos int size osEnv size for int size if String osEnv elementAt startsWith key osEnv removeElementAt break osEnv addElement env String result new String osEnv size osEnv copyInto result return result public static void runCommand Task task String cmdline throws BuildException try task log Commandline describeCommand cmdline Project MSG_VERBOSE Execute exe new Execute new LogStreamHandler task Project MSG_INFO Project MSG_ERR exe setAntRun task getProject exe setCommandline cmdline int retval exe execute if retval throw new BuildException cmdline retval task getLocation catch java io IOException exc throw new BuildException cmdline exc task getLocation private static class CommandLauncher public Process exec Project project String cmd String env throws IOException if project null project log Commandline describeCommand cmd Project MSG_DEBUG return Runtime getRuntime exec cmd env public Process exec Project project String cmd String env File workingDir throws IOException if workingDir null return exec project cmd env throw new IOException private static class Java11CommandLauncher extends CommandLauncher public Process exec Project project String cmd String env throws IOException String newcmd new String cmd length for int cmd length newcmd Commandline quoteArgument cmd if project null project log Commandline describeCommand newcmd Project MSG_DEBUG return Runtime getRuntime exec newcmd env private static class Java13CommandLauncher extends CommandLauncher public Java13CommandLauncher throws NoSuchMethodException Runtime class getMethod new Class String class String class File class public Process exec Project project String cmd String env File workingDir throws IOException try if project null project log Commandline describeCommand cmd Project MSG_DEBUG Object arguments cmd env workingDir return Process invoke Runtime getRuntime arguments catch InvocationTargetException exc Throwable realexc exc getTargetException if realexc instanceof ThreadDeath throw ThreadDeath realexc else if realexc instanceof IOException throw IOException realexc else throw new BuildException realexc catch Exception exc throw new BuildException exc private Method private static class CommandLauncherProxy extends CommandLauncher CommandLauncherProxy CommandLauncher launcher launcher public Process exec Project project String cmd String env throws IOException return exec project cmd env private CommandLauncher private static class WinNTCommandLauncher extends CommandLauncherProxy WinNTCommandLauncher CommandLauncher launcher super launcher public Process exec Project project String cmd String env File workingDir throws IOException File commandDir workingDir if workingDir null if project null commandDir project getBaseDir else return exec project cmd env final int preCmdLength String newcmd new String cmd length preCmdLength newcmd newcmd newcmd newcmd newcmd commandDir getAbsolutePath newcmd System arraycopy cmd newcmd preCmdLength cmd length return exec project newcmd env private static class MacCommandLauncher extends CommandLauncherProxy MacCommandLauncher CommandLauncher launcher super launcher public Process exec Project project String cmd String env File workingDir throws IOException if workingDir null return exec project cmd env System getProperties put workingDir getAbsolutePath try return exec project cmd env finally System getProperties put antWorkingDirectory private static class ScriptCommandLauncher extends CommandLauncherProxy ScriptCommandLauncher String script CommandLauncher launcher super launcher script public Process exec Project project String cmd String env File workingDir throws IOException if project null if workingDir null return exec project cmd env throw new IOException String antHome project getProperty if antHome null throw new IOException String antRun project resolveFile antHome File separator toString File commandDir workingDir if workingDir null project null commandDir project getBaseDir String newcmd new String cmd length newcmd antRun newcmd commandDir getAbsolutePath System arraycopy cmd newcmd cmd length return exec project newcmd env private String private static class PerlScriptCommandLauncher extends CommandLauncherProxy PerlScriptCommandLauncher String script CommandLauncher launcher super launcher script public Process exec Project project String cmd String env File workingDir throws IOException if project null if workingDir null return exec project cmd env throw new IOException String antHome project getProperty if antHome null throw new IOException String antRun project resolveFile antHome File separator toString File commandDir workingDir if workingDir null project null commandDir project getBaseDir String newcmd new String cmd length newcmd newcmd antRun newcmd commandDir getAbsolutePath System arraycopy cmd newcmd cmd length return exec project newcmd env private String', 'bug': '1'}
{'sequence': 'abstract class Mailer protected String host null protected int port protected Message message protected EmailAddress from protected Vector toList null protected Vector ccList null protected Vector bccList null protected Vector files null protected String subject null protected Task task protected boolean includeFileNames false private static DateFormat df new SimpleDateFormat Locale US public void setHost String host this host host public void setPort int port this port port public void setMessage Message this message public void setFrom EmailAddress from this from from public void setToList Vector list this toList list public void setCcList Vector list this ccList list public void setBccList Vector list this bccList list public void setFiles Vector files this files files public void setSubject String subject this subject subject public void setTask Task task this task task public void setIncludeFileNames boolean this includeFileNames public abstract void send throws BuildException protected final String getDate Calendar cal Calendar getInstance TimeZone tz cal getTimeZone int offset tz getOffset cal get Calendar ERA cal get Calendar YEAR cal get Calendar MONTH cal get Calendar DAY_OF_MONTH cal get Calendar DAY_OF_WEEK cal get Calendar MILLISECOND StringBuffer tzMarker new StringBuffer offset offset Math abs offset int hours offset int minutes offset hours if hours tzMarker append tzMarker append hours if minutes tzMarker append tzMarker append minutes return df format cal getTime tzMarker toString', 'bug': '0'}
{'sequence': 'public class JavaEnvUtils private static final boolean isDos Os isFamily private static final boolean isNetware Os isName private static final boolean isAix Os isName private static final String javaHome System getProperty private static final FileUtils fileUtils FileUtils newFileUtils private static String javaVersion private static int javaVersionNumber public static final String JAVA_1_0 public static final String JAVA_1_1 public static final String JAVA_1_2 public static final String JAVA_1_3 public static final String JAVA_1_4 private static Vector jrePackages static try javaVersion JAVA_1_0 javaVersionNumber Class forName javaVersion JAVA_1_1 javaVersionNumber Class forName javaVersion JAVA_1_2 javaVersionNumber Class forName javaVersion JAVA_1_3 javaVersionNumber Class forName javaVersion JAVA_1_4 javaVersionNumber catch ClassNotFoundException cnfe public static String getJavaVersion return javaVersion public static boolean isJavaVersion String version return javaVersion version public static String getJreExecutable String command if isNetware return command File jExecutable null if isAix jExecutable findInDir javaHome command if jExecutable null jExecutable findInDir javaHome command if jExecutable null return jExecutable getAbsolutePath else return addExtension command public static String getJdkExecutable String command if isNetware return command File jExecutable null if isAix jExecutable findInDir javaHome command if jExecutable null jExecutable findInDir javaHome command if jExecutable null return jExecutable getAbsolutePath else return getJreExecutable command private static String addExtension String command return command isDos private static File findInDir String dirName String commandName File dir fileUtils normalize dirName File executable null if dir exists executable new File dir addExtension commandName if executable exists executable null return executable private static void buildJrePackages jrePackages new Vector switch javaVersionNumber case jrePackages addElement jrePackages addElement jrePackages addElement jrePackages addElement jrePackages addElement jrePackages addElement jrePackages addElement case jrePackages addElement jrePackages addElement jrePackages addElement jrePackages addElement jrePackages addElement jrePackages addElement jrePackages addElement jrePackages addElement jrePackages addElement case jrePackages addElement jrePackages addElement case default jrePackages addElement jrePackages addElement jrePackages addElement break public static Vector getJrePackageTestCases Vector tests new Vector tests addElement switch javaVersionNumber case tests addElement tests addElement tests addElement tests addElement tests addElement tests addElement tests addElement tests addElement case tests addElement tests addElement tests addElement tests addElement tests addElement tests addElement tests addElement tests addElement case tests addElement tests addElement tests addElement case default tests addElement tests addElement tests addElement break return tests public static Vector getJrePackages if jrePackages null buildJrePackages return jrePackages', 'bug': '0'}
{'sequence': 'public final class StripJavaComments extends BaseFilterReader implements ChainableReader private int readAheadCh private boolean inString false public StripJavaComments super public StripJavaComments final Reader in super in public final int read throws IOException int ch if readAheadCh ch readAheadCh readAheadCh else ch in read if ch inString inString else if inString if ch ch in read if ch while ch ch ch in read else if ch while ch ch in read if ch ch in read while ch ch ch in read if ch ch read break else readAheadCh ch ch return ch public final Reader chain final Reader rdr StripJavaComments newFilter new StripJavaComments rdr return newFilter', 'bug': '0'}
{'sequence': 'public class SmtpResponseReader protected BufferedReader reader null private StringBuffer result new StringBuffer public SmtpResponseReader InputStream in reader new BufferedReader new InputStreamReader in public String getResponse throws IOException result setLength String line reader readLine if line null line length result append line substring result append while line null append line if hasMoreLines line break line reader readLine return result toString trim public void close throws IOException reader close protected boolean hasMoreLines String line return line length line charAt private void append String line if line length result append line substring result append', 'bug': '0'}
{'sequence': 'public final class LoadFile extends Task private File srcFile null private boolean failOnError true private String encoding null private String property null private final Vector filterChains new Vector public final void setEncoding final String encoding this encoding encoding public final void setProperty final String property this property property public final void setSrcFile final File srcFile this srcFile srcFile public final void setFailonerror final boolean fail failOnError fail public final void execute throws BuildException if srcFile null throw new BuildException if property null throw new BuildException FileInputStream fis null BufferedInputStream bis null Reader instream null log srcFile property Project MSG_VERBOSE try final long len srcFile length log len Project MSG_DEBUG final int size int len fis new FileInputStream srcFile bis new BufferedInputStream fis if encoding null instream new InputStreamReader bis else instream new InputStreamReader bis encoding String text if size ChainReaderHelper crh new ChainReaderHelper crh setBufferSize size crh setPrimaryReader instream crh setFilterChains filterChains crh setProject project instream crh getAssembledReader text crh readFully instream if text null if text length project setNewProperty property text log text length Project MSG_VERBOSE log property text Project MSG_DEBUG catch final IOException ioe final String message ioe toString if failOnError throw new BuildException message ioe location else log message Project MSG_ERR catch final BuildException be if failOnError throw be else log be getMessage Project MSG_ERR finally try if fis null fis close catch IOException ioex public final void addFilterChain FilterChain filter filterChains addElement filter', 'bug': '0'}
{'sequence': 'public class ExitException extends SecurityException private int status public ExitException int status super status this status status public int getStatus return status', 'bug': '1'}
{'sequence': 'public class Move extends Copy public Move super forceOverwrite true protected void doFileOperations if completeDirMap size Enumeration completeDirMap keys while hasMoreElements File fromDir File nextElement File toDir File completeDirMap get fromDir try log fromDir toDir verbosity renameFile fromDir toDir filtering forceOverwrite catch IOException ioe String msg fromDir toDir ioe getMessage throw new BuildException msg ioe location log fileCopyMap size destDir getAbsolutePath Enumeration fileCopyMap keys while hasMoreElements String fromFile String nextElement String toFile String fileCopyMap get fromFile if fromFile equals toFile log fromFile verbosity continue boolean moved false File new File fromFile File new File toFile try log fromFile toFile verbosity moved renameFile filtering forceOverwrite catch IOException ioe String msg fromFile toFile ioe getMessage throw new BuildException msg ioe location if moved try log fromFile toFile verbosity FilterSetCollection executionFilters new FilterSetCollection if filtering executionFilters addFilterSet project getGlobalFilterSet for Enumeration filterEnum getFilterSets elements filterEnum hasMoreElements executionFilters addFilterSet FilterSet filterEnum nextElement getFileUtils copyFile executionFilters getFilterChains forceOverwrite getPreserveLastModified getEncoding project new File fromFile if delete throw new BuildException getAbsolutePath catch IOException ioe String msg fromFile toFile ioe getMessage throw new BuildException msg ioe location if includeEmpty Enumeration dirCopyMap elements int count while hasMoreElements File new File String nextElement if exists if mkdirs log getAbsolutePath Project MSG_ERR else count if count log count destDir getAbsolutePath if filesets size Enumeration filesets elements while hasMoreElements FileSet fs FileSet nextElement File dir fs getDir project if okToDelete dir deleteDir dir protected boolean okToDelete File String list list if list null return false for int list length String list File new File if isDirectory if okToDelete return false else return true protected void deleteDir File String list list if list null return for int list length String list File new File if isDirectory deleteDir else throw new BuildException getAbsolutePath log getAbsolutePath verbosity if delete throw new BuildException getAbsolutePath protected boolean renameFile File sourceFile File destFile boolean filtering boolean overwrite throws IOException BuildException boolean renamed true if getFilterSets null getFilterSets size getFilterChains null getFilterChains size renamed false else if filtering String parentPath destFile getParent if parentPath null File parent new File parentPath if parent exists parent mkdirs if destFile exists destFile isFile if destFile delete throw new BuildException destFile renamed sourceFile renameTo destFile else renamed false return renamed', 'bug': '0'}
{'sequence': 'class CvsTagEntry String m_filename String m_prevRevision String m_revision public CvsTagEntry String filename this filename null null public CvsTagEntry String filename String revision this filename revision null public CvsTagEntry String filename String revision String prevRevision m_filename filename m_revision revision m_prevRevision prevRevision public String getFile return m_filename public String getRevision return m_revision public String getPreviousRevision return m_prevRevision public String toString StringBuffer buffer new StringBuffer buffer append m_filename if m_revision null m_prevRevision null buffer append else if m_revision null m_prevRevision null buffer append append m_revision else if m_revision null m_prevRevision null buffer append append m_prevRevision append append m_revision return buffer toString', 'bug': '0'}
{'sequence': 'public final class JavaClassHelper private static final String LS System getProperty public static final StringBuffer getConstants byte bytes throws IOException final StringBuffer sb new StringBuffer final ByteArrayInputStream bis new ByteArrayInputStream bytes final ClassParser parser new ClassParser bis final JavaClass javaClass parser parse final Field fields javaClass getFields for int fields length final Field field fields if field null final ConstantValue cv field getConstantValue if cv null String cvs cv toString if cvs startsWith cvs endsWith cvs cvs substring cvs length sb append field getName sb append sb append cvs sb append LS return sb', 'bug': '0'}
{'sequence': 'public class TempFile extends Task private String property private File destDir null private String prefix private String suffix public void setProperty String property this property property public void setDestDir File destDir this destDir destDir public void setPrefix String prefix this prefix prefix public void setSuffix String suffix this suffix suffix public void execute throws BuildException if property null property length throw new BuildException if destDir null destDir project resolveFile FileUtils utils FileUtils newFileUtils File tfile utils createTempFile prefix suffix destDir project setNewProperty property tfile toString', 'bug': '0'}
{'sequence': 'public abstract class BaseSelector extends DataType implements FileSelector private String errmsg null public BaseSelector public void setError String msg if errmsg null errmsg msg public String getError return errmsg public void verifySettings public void validate if getError null verifySettings if getError null throw new BuildException errmsg public abstract boolean isSelected File basedir String filename File file', 'bug': '0'}
{'sequence': 'public class AndSelector extends BaseSelectorContainer public AndSelector public String toString StringBuffer buf new StringBuffer if hasSelectors buf append buf append super toString buf append return buf toString public boolean isSelected File basedir String filename File file validate Enumeration selectorElements boolean result while hasMoreElements result FileSelector nextElement isSelected basedir filename file if result return false return true', 'bug': '0'}
{'sequence': 'public class CvsTagDiff extends Task static final String FILE_IS_NEW static final String FILE_HAS_CHANGED static final String FILE_WAS_REMOVED private Cvs m_cvs private String m_startTag private String m_endTag private String m_startDate private String m_endDate private File m_destfile private FileUtils m_fileUtils FileUtils newFileUtils public void init throws BuildException m_cvs Cvs getProject createTask public void setCompressionLevel int level m_cvs setCompressionLevel level public void setCompression boolean usecomp m_cvs setCompression usecomp public void setCvsRoot String cvsRoot m_cvs setCvsRoot cvsRoot public void setCvsRsh String rsh m_cvs setCvsRsh rsh public void setPackage String public void setQuiet boolean quiet m_cvs setQuiet quiet public void setPort int port m_cvs setPort port public void setPassfile File m_cvs setPassfile public void setFailOnError boolean m_cvs setFailOnError public void setStartTag String m_startTag public void setStartDate String m_startDate public void setEndTag String m_endTag public void setEndDate String m_endDate public void setDestFile File m_destfile public void execute throws BuildException validate String rdiff m_startTag null m_startTag m_startDate m_endTag null m_endTag m_endDate log rdiff Project MSG_VERBOSE m_cvs setCommand rdiff File tmpFile null try tmpFile m_fileUtils createTempFile null m_cvs setOutput tmpFile m_cvs execute CvsTagEntry entries parseRDiff tmpFile writeTagDiff entries finally if tmpFile null tmpFile delete private CvsTagEntry parseRDiff File tmpFile throws BuildException BufferedReader reader null try reader new BufferedReader new FileReader tmpFile Vector entries new Vector String line reader readLine int index CvsTagEntry entry null while null line line line substring headerLength if index line indexOf FILE_IS_NEW String filename line substring index String rev line substring index FILE_IS_NEW length entries addElement entry new CvsTagEntry filename rev log entry toString Project MSG_VERBOSE else if index line indexOf FILE_HAS_CHANGED String filename line substring index int revSeparator line indexOf index String prevRevision line substring index FILE_HAS_CHANGED length revSeparator String revision line substring revSeparator entries addElement entry new CvsTagEntry filename revision prevRevision log entry toString Project MSG_VERBOSE else if index line indexOf FILE_WAS_REMOVED String filename line substring index entries addElement entry new CvsTagEntry filename log entry toString Project MSG_VERBOSE line reader readLine CvsTagEntry array new CvsTagEntry entries size entries copyInto array return array catch IOException throw new BuildException finally if reader null try reader close catch IOException private void writeTagDiff CvsTagEntry entries throws BuildException FileOutputStream output null try output new FileOutputStream m_destfile PrintWriter writer new PrintWriter new OutputStreamWriter output writer println writer print if m_startTag null writer print m_startTag else writer print m_startDate if m_endTag null writer print m_endTag else writer print m_endDate writer println for int entries length writeTagEntry writer entries writer println writer flush writer close catch UnsupportedEncodingException uee log uee toString Project MSG_ERR catch IOException ioe throw new BuildException ioe toString ioe finally if null output try output close catch IOException ioe private void writeTagEntry PrintWriter writer CvsTagEntry entry writer println writer println writer println entry getFile if entry getRevision null writer println entry getRevision if entry getPreviousRevision null writer println entry getPreviousRevision writer println writer println private void validate throws BuildException throw new BuildException if null m_destfile throw new BuildException if null m_startTag null m_startDate throw new BuildException if null m_startTag null m_startDate throw new BuildException if null m_endTag null m_endDate throw new BuildException if null m_endTag null m_endDate throw new BuildException', 'bug': '1'}
{'sequence': 'class CVSEntry private Date m_date private String m_author private final String m_comment private final Vector m_files new Vector public CVSEntry Date date String author String comment m_date date m_author author m_comment comment public void addFile String file String revision m_files addElement new RCSFile file revision public void addFile String file String revision String previousRevision m_files addElement new RCSFile file revision previousRevision Date getDate return m_date void setAuthor final String author m_author author String getAuthor return m_author String getComment return m_comment Vector getFiles return m_files public String toString return getAuthor getDate getFiles getComment', 'bug': '0'}
{'sequence': 'public abstract class JDBCTask extends Task private static Hashtable loaderMap new Hashtable private boolean caching true private Path classpath private AntClassLoader loader private boolean autocommit false private String driver null private String url null private String userId null private String password null private String rdbms null private String version null public void setClasspath Path classpath this classpath classpath public void setCaching boolean enable caching enable public Path createClasspath if this classpath null this classpath new Path project return this classpath createPath public void setClasspathRef Reference createClasspath setRefid public void setDriver String driver this driver driver public void setUrl String url this url url public void setPassword String password this password password public void setAutocommit boolean autocommit this autocommit autocommit public void setRdbms String rdbms this rdbms rdbms public void setVersion String version this version version protected boolean isValidRdbms Connection conn if rdbms null version null return true try DatabaseMetaData dmd conn getMetaData if rdbms null String theVendor dmd getDatabaseProductName toLowerCase log theVendor Project MSG_VERBOSE if theVendor null theVendor indexOf rdbms log rdbms Project MSG_VERBOSE return false if version null String theVersion dmd getDatabaseProductVersion toLowerCase log theVersion Project MSG_VERBOSE if theVersion null theVersion startsWith version theVersion indexOf version log version Project MSG_VERBOSE return false catch SQLException log Project MSG_ERR return false return true protected static Hashtable getLoaderMap return loaderMap protected AntClassLoader getLoader return loader protected Connection getConnection throws BuildException if userId null throw new BuildException location if password null throw new BuildException location if url null throw new BuildException location try log getUrl Project MSG_VERBOSE Properties info new Properties info put getUserId info put getPassword Connection conn getDriver connect getUrl info if conn null throw new SQLException url conn setAutoCommit autocommit return conn catch SQLException throw new BuildException location private Driver getDriver throws BuildException if driver null throw new BuildException location Driver driverInstance null try Class dc if classpath null synchronized loaderMap if caching loader AntClassLoader loaderMap get driver if loader null log driver classpath Project MSG_VERBOSE loader new AntClassLoader project classpath if caching loaderMap put driver loader else log driver Project MSG_VERBOSE dc loader loadClass driver else log driver Project MSG_VERBOSE dc Class forName driver driverInstance Driver dc newInstance catch ClassNotFoundException throw new BuildException driver location catch IllegalAccessException throw new BuildException driver location catch InstantiationException throw new BuildException driver location return driverInstance public void isCaching boolean value caching value public Path getClasspath return classpath public boolean isAutocommit return autocommit public String getUrl return url public String getUserId return userId public void setUserid String userId this userId userId public String getPassword return password public String getRdbms return rdbms public String getVersion return version', 'bug': '0'}
{'sequence': 'public class ConditionTask extends ConditionBase private String property null private String value public void setProperty String property public void setValue String value public void execute throws BuildException if countConditions throw new BuildException if countConditions throw new BuildException if property null throw new BuildException Condition Condition getConditions nextElement if eval log property value Project MSG_DEBUG getProject setNewProperty property value else log property Project MSG_DEBUG', 'bug': '0'}
{'sequence': 'public class TarBuffer public static final int DEFAULT_RCDSIZE public static final int DEFAULT_BLKSIZE DEFAULT_RCDSIZE private InputStream inStream private OutputStream outStream private byte blockBuffer private int currBlkIdx private int currRecIdx private int blockSize private int recordSize private int recsPerBlock private boolean debug public TarBuffer InputStream inStream this inStream TarBuffer DEFAULT_BLKSIZE public TarBuffer InputStream inStream int blockSize this inStream blockSize TarBuffer DEFAULT_RCDSIZE public TarBuffer InputStream inStream int blockSize int recordSize this inStream inStream this outStream null this initialize blockSize recordSize public TarBuffer OutputStream outStream this outStream TarBuffer DEFAULT_BLKSIZE public TarBuffer OutputStream outStream int blockSize this outStream blockSize TarBuffer DEFAULT_RCDSIZE public TarBuffer OutputStream outStream int blockSize int recordSize this inStream null this outStream outStream this initialize blockSize recordSize private void initialize int blockSize int recordSize this debug false this blockSize blockSize this recordSize recordSize this recsPerBlock this blockSize this recordSize this blockBuffer new byte this blockSize if this inStream null this currBlkIdx this currRecIdx this recsPerBlock else this currBlkIdx this currRecIdx public int getBlockSize return this blockSize public int getRecordSize return this recordSize public void setDebug boolean debug this debug debug public boolean isEOFRecord byte record for int sz this getRecordSize sz if record return false return true public void skipRecord throws IOException if this debug System err println this currRecIdx this currBlkIdx if this inStream null throw new IOException if this currRecIdx this recsPerBlock if this readBlock this currRecIdx public byte readRecord throws IOException if this debug System err println this currRecIdx this currBlkIdx if this inStream null throw new IOException if this currRecIdx this recsPerBlock if this readBlock return null byte result new byte this recordSize System arraycopy this blockBuffer this currRecIdx this recordSize result this recordSize this currRecIdx return result private boolean readBlock throws IOException if this debug System err println this currBlkIdx if this inStream null throw new IOException this currRecIdx int offset int bytesNeeded this blockSize while bytesNeeded long numBytes this inStream read this blockBuffer offset bytesNeeded if numBytes break offset numBytes bytesNeeded numBytes if numBytes this blockSize if this debug System err println numBytes this blockSize this currBlkIdx return true public int getCurrentBlockNum return this currBlkIdx public int getCurrentRecordNum return this currRecIdx public void writeRecord byte record throws IOException if this debug System err println this currRecIdx this currBlkIdx if this outStream null throw new IOException if record length this recordSize throw new IOException record length this recordSize if this currRecIdx this recsPerBlock this writeBlock System arraycopy record this blockBuffer this currRecIdx this recordSize this recordSize this currRecIdx public void writeRecord byte buf int offset throws IOException if this debug System err println this currRecIdx this currBlkIdx if this outStream null throw new IOException if offset this recordSize buf length throw new IOException buf length offset this recordSize if this currRecIdx this recsPerBlock this writeBlock System arraycopy buf offset this blockBuffer this currRecIdx this recordSize this recordSize this currRecIdx private void writeBlock throws IOException if this debug System err println this currBlkIdx if this outStream null throw new IOException this outStream write this blockBuffer this blockSize this outStream flush this currRecIdx this currBlkIdx private void flushBlock throws IOException if this debug System err println if this outStream null throw new IOException if this currRecIdx this writeBlock public void close throws IOException if this debug System err println if this outStream null this flushBlock if this outStream System out this outStream System err this outStream close this outStream null else if this inStream null if this inStream System in this inStream close this inStream null', 'bug': '0'}
{'sequence': 'public interface BZip2Constants int baseBlockSize int MAX_ALPHA_SIZE int MAX_CODE_LEN int RUNA int RUNB int N_GROUPS int G_SIZE int N_ITERS int MAX_SELECTORS G_SIZE int NUM_OVERSHOOT_BYTES int rNums', 'bug': '0'}
{'sequence': 'public abstract class DataType extends ProjectComponent protected String description null protected Reference ref null protected boolean checked true public void setDescription String desc description desc public String getDescription return description public boolean isReference return ref null public void setRefid Reference ref this ref ref checked false protected void dieOnCircularReference Stack stk Project throws BuildException if checked isReference return Object ref getReferencedObject if instanceof DataType if stk contains throw circularReference else stk push DataType dieOnCircularReference stk stk pop checked true protected Object getCheckedRef Class requiredClass String dataTypeName if checked Stack stk new Stack stk push this dieOnCircularReference stk getProject Object ref getReferencedObject getProject if requiredClass isAssignableFrom getClass String msg ref getRefId dataTypeName throw new BuildException msg else return protected BuildException tooManyAttributes return new BuildException protected BuildException noChildrenAllowed return new BuildException protected BuildException circularReference return new BuildException', 'bug': '0'}
{'sequence': 'public class Expand extends Task private boolean overwrite true private Vector patternsets new Vector private Vector filesets new Vector public void execute throws BuildException if equals taskType log if source null filesets size throw new BuildException if dest null throw new BuildException if dest exists dest isDirectory throw new BuildException location FileUtils fileUtils FileUtils newFileUtils if source null if source isDirectory throw new BuildException location else expandFile fileUtils source dest if filesets size for int filesets size FileSet fs FileSet filesets elementAt DirectoryScanner ds fs getDirectoryScanner project File fromDir fs getDir project String files ds getIncludedFiles for int files length File file new File fromDir files expandFile fileUtils file dest protected void expandFile FileUtils fileUtils File srcF File dir log srcF dir Project MSG_INFO ZipInputStream zis null try zis new ZipInputStream new FileInputStream srcF ZipEntry ze null while ze zis getNextEntry null extractFile fileUtils srcF dir zis ze getName new Date ze getTime ze isDirectory log Project MSG_VERBOSE catch IOException ioe throw new BuildException srcF getPath ioe finally if zis null try zis close catch IOException protected void extractFile FileUtils fileUtils File srcF File dir InputStream compressedInputStream String entryName Date entryDate boolean isDirectory throws IOException if patternsets null patternsets size String name entryName boolean included false for int patternsets size PatternSet PatternSet patternsets elementAt String incls getIncludePatterns project if incls null for int incls length boolean isIncl DirectoryScanner match incls name if isIncl included true break String excls getExcludePatterns project if excls null for int excls length boolean isExcl DirectoryScanner match excls name if isExcl included false break if included return File fileUtils resolveFile dir entryName try if overwrite exists lastModified entryDate getTime log Project MSG_DEBUG return log entryName Project MSG_VERBOSE File dirF fileUtils getParentFile dirF mkdirs if isDirectory mkdirs else byte buffer new byte int length FileOutputStream fos null try fos new FileOutputStream while length compressedInputStream read buffer fos write buffer length fos close fos null finally if fos null try fos close catch IOException fileUtils setFileLastModified entryDate getTime catch FileNotFoundException ex log getPath Project MSG_WARN public void setDest File this dest public void setSrc File this source public void setOverwrite boolean overwrite public void addPatternset PatternSet set patternsets addElement set public void addFileset FileSet set filesets addElement set', 'bug': '1'}
{'sequence': 'public interface CompilerAdapter void setJavac Javac attributes boolean execute throws BuildException', 'bug': '0'}
{'sequence': 'public interface DynamicConfigurator public void setDynamicAttribute String name String value throws BuildException public Object createDynamicElement String name throws BuildException', 'bug': '0'}
{'sequence': 'public final class SelectorUtils private static SelectorUtils instance new SelectorUtils private SelectorUtils public static SelectorUtils getInstance return instance public static boolean matchPatternStart String pattern String str return matchPatternStart pattern str true public static boolean matchPatternStart String pattern String str boolean isCaseSensitive if str startsWith File separator pattern startsWith File separator return false Vector patDirs tokenizePath pattern Vector strDirs tokenizePath str int patIdxStart int patIdxEnd patDirs size int strIdxStart int strIdxEnd strDirs size while patIdxStart patIdxEnd strIdxStart strIdxEnd String patDir String patDirs elementAt patIdxStart if patDir equals break if match patDir String strDirs elementAt strIdxStart isCaseSensitive return false patIdxStart strIdxStart if strIdxStart strIdxEnd return true else if patIdxStart patIdxEnd return false else return true public static boolean matchPath String pattern String str return matchPath pattern str true public static boolean matchPath String pattern String str boolean isCaseSensitive if str startsWith File separator pattern startsWith File separator return false Vector patDirs tokenizePath pattern Vector strDirs tokenizePath str int patIdxStart int patIdxEnd patDirs size int strIdxStart int strIdxEnd strDirs size while patIdxStart patIdxEnd strIdxStart strIdxEnd String patDir String patDirs elementAt patIdxStart if patDir equals break if match patDir String strDirs elementAt strIdxStart isCaseSensitive return false patIdxStart strIdxStart if strIdxStart strIdxEnd for int patIdxStart patIdxEnd if patDirs elementAt equals return false return true else if patIdxStart patIdxEnd return false while patIdxStart patIdxEnd strIdxStart strIdxEnd String patDir String patDirs elementAt patIdxEnd if patDir equals break if match patDir String strDirs elementAt strIdxEnd isCaseSensitive return false patIdxEnd strIdxEnd if strIdxStart strIdxEnd for int patIdxStart patIdxEnd if patDirs elementAt equals return false return true while patIdxStart patIdxEnd strIdxStart strIdxEnd int patIdxTmp for int patIdxStart patIdxEnd if patDirs elementAt equals patIdxTmp break if patIdxTmp patIdxStart patIdxStart continue int patLength patIdxTmp patIdxStart int strLength strIdxEnd strIdxStart int foundIdx strLoop for int strLength patLength for int patLength String subPat String patDirs elementAt patIdxStart String subStr String strDirs elementAt strIdxStart if match subPat subStr isCaseSensitive continue strLoop foundIdx strIdxStart break if foundIdx return false patIdxStart patIdxTmp strIdxStart foundIdx patLength for int patIdxStart patIdxEnd if patDirs elementAt equals return false return true public static boolean match String pattern String str return match pattern str true public static boolean match String pattern String str boolean isCaseSensitive char patArr pattern toCharArray char strArr str toCharArray int patIdxStart int patIdxEnd patArr length int strIdxStart int strIdxEnd strArr length char ch boolean containsStar false for int patArr length if patArr containsStar true break if containsStar if patIdxEnd strIdxEnd for int patIdxEnd ch patArr if ch if isCaseSensitive ch strArr if isCaseSensitive Character toUpperCase ch Character toUpperCase strArr if patIdxEnd while ch patArr patIdxStart strIdxStart strIdxEnd if ch if isCaseSensitive ch strArr strIdxStart if isCaseSensitive Character toUpperCase ch Character toUpperCase strArr strIdxStart patIdxStart strIdxStart if strIdxStart strIdxEnd for int patIdxStart patIdxEnd if patArr return false return true while ch patArr patIdxEnd strIdxStart strIdxEnd if ch if isCaseSensitive ch strArr strIdxEnd if isCaseSensitive Character toUpperCase ch Character toUpperCase strArr strIdxEnd patIdxEnd strIdxEnd if strIdxStart strIdxEnd for int patIdxStart patIdxEnd if patArr return false return true while patIdxStart patIdxEnd strIdxStart strIdxEnd int patIdxTmp for int patIdxStart patIdxEnd if patArr patIdxTmp break if patIdxTmp patIdxStart patIdxStart continue int patLength patIdxTmp patIdxStart int strLength strIdxEnd strIdxStart int foundIdx strLoop for int strLength patLength for int patLength ch patArr patIdxStart if ch if isCaseSensitive ch strArr strIdxStart continue strLoop if isCaseSensitive Character toUpperCase ch Character toUpperCase strArr strIdxStart continue strLoop foundIdx strIdxStart break if foundIdx return false patIdxStart patIdxTmp strIdxStart foundIdx patLength for int patIdxStart patIdxEnd if patArr return false return true public static Vector tokenizePath String path Vector ret new Vector StringTokenizer st new StringTokenizer path File separator while st hasMoreTokens ret addElement st nextToken return ret public static boolean isOutOfDate File src File target int granularity if src exists return false if target exists return true if src lastModified granularity target lastModified return true return false', 'bug': '0'}
{'sequence': 'public class Jikes protected JikesOutputParser jop protected String command protected Project project protected Jikes JikesOutputParser jop String command Project project super System err println System err println System err println this jop jop this command command this project project protected void compile String args String commandArray null File tmpFile null try String myos System getProperty if myos toLowerCase indexOf args length PrintWriter out null try tmpFile new File new Random System currentTimeMillis nextLong out new PrintWriter new FileWriter tmpFile for int args length out println args out flush commandArray new String command tmpFile getAbsolutePath catch IOException throw new BuildException finally if out null try out close catch Throwable else commandArray new String args length commandArray command System arraycopy args commandArray args length try Execute exe new Execute jop exe setAntRun project exe setWorkingDirectory project getBaseDir exe setCommandline commandArray exe execute catch IOException throw new BuildException finally if tmpFile null tmpFile delete', 'bug': '0'}
{'sequence': 'public class ZipEntry extends java util zip ZipEntry private int internalAttributes private long externalAttributes private Vector extraFields new Vector public ZipEntry String name super name public ZipEntry java util zip ZipEntry entry throws ZipException super entry getName setComment entry getComment setMethod entry getMethod setTime entry getTime long size entry getSize if size setSize size long cSize entry getCompressedSize if cSize setComprSize cSize long crc entry getCrc if crc setCrc crc byte extra entry getExtra if extra null setExtraFields ExtraFieldUtils parse extra else setExtra public ZipEntry ZipEntry entry throws ZipException this java util zip ZipEntry entry setInternalAttributes entry getInternalAttributes setExternalAttributes entry getExternalAttributes setExtraFields entry getExtraFields public Object clone ZipEntry null try new ZipEntry java util zip ZipEntry super clone catch Exception ex ex printStackTrace setInternalAttributes getInternalAttributes setExternalAttributes getExternalAttributes setExtraFields getExtraFields return public int getInternalAttributes return internalAttributes public void setInternalAttributes int value internalAttributes value public long getExternalAttributes return externalAttributes public void setExternalAttributes long value externalAttributes value public void setExtraFields ZipExtraField fields extraFields removeAllElements for int fields length extraFields addElement fields setExtra public ZipExtraField getExtraFields ZipExtraField result new ZipExtraField extraFields size extraFields copyInto result return result public void addExtraField ZipExtraField ze ZipShort type ze getHeaderId boolean done false for int done extraFields size if ZipExtraField extraFields elementAt getHeaderId equals type extraFields setElementAt ze done true if done extraFields addElement ze setExtra public void removeExtraField ZipShort type boolean done false for int done extraFields size if ZipExtraField extraFields elementAt getHeaderId equals type extraFields removeElementAt done true if done throw new java util NoSuchElementException setExtra public void setExtra byte extra throws RuntimeException try setExtraFields ExtraFieldUtils parse extra catch Exception throw new RuntimeException getMessage protected void setExtra super setExtra ExtraFieldUtils mergeLocalFileDataData getExtraFields public byte getLocalFileDataExtra byte extra getExtra return extra null extra new byte public byte getCentralDirectoryExtra return ExtraFieldUtils mergeCentralDirectoryData getExtraFields private Long compressedSize null public void setComprSize long size if haveSetCompressedSize performSetCompressedSize this size else compressedSize new Long size public long getCompressedSize if compressedSize null return compressedSize longValue return super getCompressedSize private static Method setCompressedSizeMethod null private static Object lockReflection new Object private static boolean triedToGetMethod false private static boolean haveSetCompressedSize checkSCS return setCompressedSizeMethod null private static void performSetCompressedSize ZipEntry ze long size Long new Long size try setCompressedSizeMethod invoke ze catch InvocationTargetException ite Throwable nested ite getTargetException throw new RuntimeException ze nested getMessage catch Throwable other throw new RuntimeException ze other getMessage private static void checkSCS if triedToGetMethod synchronized lockReflection triedToGetMethod true try setCompressedSizeMethod java util zip ZipEntry class getMethod new Class Long TYPE catch NoSuchMethodException nse', 'bug': '0'}
{'sequence': 'public class FileList extends DataType private Vector filenames new Vector private File dir public FileList super protected FileList FileList filelist this dir filelist dir this filenames filelist filenames setProject filelist getProject public void setRefid Reference throws BuildException if dir null filenames size throw tooManyAttributes super setRefid public void setDir File dir throws BuildException if isReference throw tooManyAttributes this dir dir public File getDir Project if isReference return getRef getDir return dir public void setFiles String filenames if isReference throw tooManyAttributes if filenames null filenames length StringTokenizer tok new StringTokenizer filenames false while tok hasMoreTokens this filenames addElement tok nextToken public String getFiles Project if isReference return getRef getFiles if dir null throw new BuildException if filenames size throw new BuildException String result new String filenames size filenames copyInto result return result protected FileList getRef Project if checked Stack stk new Stack stk push this dieOnCircularReference stk Object ref getReferencedObject if instanceof FileList String msg ref getRefId throw new BuildException msg else return FileList', 'bug': '0'}
{'sequence': 'public class Property extends Task protected String name protected String value protected File file protected String resource protected Path classpath protected String env protected Reference ref protected String prefix private Project fallback public Property this false protected Property boolean userProperty this userProperty null protected Property boolean userProperty Project fallback this userProperty userProperty this fallback fallback public void setName String name this name name public String getName return name public void setLocation File location setValue location getAbsolutePath public void setValue String value this value value public String getValue return value public void setFile File file this file file public File getFile return file public void setPrefix String prefix this prefix prefix if prefix endsWith this prefix public String getPrefix return prefix public void setRefid Reference ref this ref ref public Reference getRefid return ref public void setResource String resource this resource resource public String getResource return resource public void setEnvironment String env this env env public String getEnvironment return env public void setClasspath Path classpath if this classpath null this classpath classpath else this classpath append classpath public Path createClasspath if this classpath null this classpath new Path project return this classpath createPath public Path getClasspath return classpath public void setUserProperty boolean userProperty log Project MSG_WARN public String toString return value null value public void execute throws BuildException if name null if value null ref null throw new BuildException location else if file null resource null env null throw new BuildException location if file null resource null prefix null throw new BuildException location if name null value null addProperty name value if file null loadFile file if resource null loadResource resource if env null loadEnvironment env if name null ref null try addProperty name ref getReferencedObject getProject toString catch BuildException be if fallback null addProperty name ref getReferencedObject fallback toString else throw be protected void loadFile File file throws BuildException Properties props new Properties log file getAbsolutePath Project MSG_VERBOSE try if file exists FileInputStream fis new FileInputStream file try props load fis finally if fis null fis close addProperties props else log file getAbsolutePath Project MSG_VERBOSE catch IOException ex throw new BuildException ex location protected void loadResource String name Properties props new Properties log name Project MSG_VERBOSE InputStream is null try ClassLoader cL null if classpath null cL new AntClassLoader project classpath else cL this getClass getClassLoader if cL null is ClassLoader getSystemResourceAsStream name else is cL getResourceAsStream name if is null props load is addProperties props else log name Project MSG_WARN catch IOException ex throw new BuildException ex location finally if is null try is close catch IOException protected void loadEnvironment String prefix Properties props new Properties if prefix endsWith prefix log prefix Project MSG_VERBOSE Vector osEnv Execute getProcEnvironment for Enumeration osEnv elements hasMoreElements String entry String nextElement int pos entry indexOf if pos log entry Project MSG_WARN else props put prefix entry substring pos entry substring pos addProperties props protected void addProperties Properties props resolveAllProperties props Enumeration props keys while hasMoreElements String name String nextElement String value props getProperty name String project replaceProperties value if prefix null name prefix name addProperty name protected void addProperty String String if userProperty if project getUserProperty null project setInheritedProperty else log Project MSG_VERBOSE else project setNewProperty private void resolveAllProperties Properties props throws BuildException for Enumeration props keys hasMoreElements String name String nextElement String value props getProperty name boolean resolved false while resolved Vector fragments new Vector Vector propertyRefs new Vector ProjectHelper parsePropertyString value fragments propertyRefs resolved true if propertyRefs size StringBuffer sb new StringBuffer Enumeration fragments elements Enumeration propertyRefs elements while hasMoreElements String fragment String nextElement if fragment null String propertyName String nextElement if propertyName equals name throw new BuildException name fragment getProject getProperty propertyName if fragment null if props containsKey propertyName fragment props getProperty propertyName resolved false else fragment propertyName sb append fragment value sb toString props put name value', 'bug': '0'}
{'sequence': 'public interface FileScanner void addDefaultExcludes File getBasedir String getExcludedDirectories String getExcludedFiles String getIncludedDirectories String getIncludedFiles String getNotIncludedDirectories String getNotIncludedFiles void scan throws IllegalStateException void setBasedir String basedir void setBasedir File basedir void setExcludes String excludes void setIncludes String includes void setCaseSensitive boolean isCaseSensitive', 'bug': '0'}
{'sequence': 'public class DOMElementWriter private static String lSep System getProperty private StringBuffer sb new StringBuffer protected String knownEntities public void write Element root OutputStream out throws IOException Writer wri new OutputStreamWriter out wri write write root wri wri flush public void write Element element Writer out int indent String indentWith throws IOException for int indent out write indentWith out write out write element getTagName NamedNodeMap attrs element getAttributes for int attrs getLength Attr attr Attr attrs item out write out write attr getName out write out write encode attr getValue out write out write boolean hasChildren false NodeList children element getChildNodes for int children getLength Node child children item switch child getNodeType case Node ELEMENT_NODE if hasChildren out write lSep hasChildren true write Element child out indent indentWith break case Node TEXT_NODE out write encode child getNodeValue break case Node CDATA_SECTION_NODE out write out write encodedata Text child getData out write break case Node ENTITY_REFERENCE_NODE out write out write child getNodeName out write break case Node PROCESSING_INSTRUCTION_NODE out write out write child getNodeName String data child getNodeValue if data null data length out write out write data out write break if hasChildren for int indent out write indentWith out write out write element getTagName out write out write lSep out flush public String encode String value sb setLength for int value length char value charAt switch case sb append break case sb append break case sb append break case sb append break case int nextSemi value indexOf if nextSemi isReference value substring nextSemi sb append else sb append break default if isLegalCharacter sb append break return sb toString public String encodedata final String value sb setLength for int value length char value charAt if isLegalCharacter sb append return sb toString public boolean isReference String ent if ent charAt ent endsWith return false if ent charAt if ent charAt try Integer parseInt ent substring ent length return true catch NumberFormatException nfe return false else try Integer parseInt ent substring ent length return true catch NumberFormatException nfe return false String name ent substring ent length for int knownEntities length if name equals knownEntities return true return false public boolean isLegalCharacter char if return true else if return false else if return true else if return false else if return true return false', 'bug': '0'}
{'sequence': 'public class RegexpMatcherFactory public RegexpMatcherFactory public RegexpMatcher newRegexpMatcher throws BuildException return newRegexpMatcher null public RegexpMatcher newRegexpMatcher Project throws BuildException String systemDefault null if null systemDefault System getProperty else systemDefault getProperty if systemDefault null return createInstance systemDefault try return createInstance catch BuildException be try return createInstance catch BuildException be try return createInstance catch BuildException be throw new BuildException protected RegexpMatcher createInstance String className throws BuildException try Class implClass Class forName className return RegexpMatcher implClass newInstance catch Throwable throw new BuildException', 'bug': '0'}
{'sequence': 'public class Input extends Task private String validargs null private String message private String addproperty null public void setValidargs String validargs this validargs validargs public void setAddproperty String addproperty this addproperty addproperty public void setMessage String message this message message public void addText String msg message getProject replaceProperties msg public Input public void execute throws BuildException InputRequest request null if validargs null Vector accept StringUtils split validargs request new MultipleChoiceInputRequest message accept else request new InputRequest message getProject getInputHandler handleInput request if addproperty null project setNewProperty addproperty request getInput', 'bug': '1'}
{'sequence': 'public class Os implements Condition private static final String osName System getProperty toLowerCase Locale US private static final String osArch System getProperty toLowerCase Locale US private static final String osVersion System getProperty toLowerCase Locale US private static final String pathSep System getProperty private String family private String name private String version private String arch public Os public Os String family setFamily family public void setFamily String family toLowerCase Locale US public void setName String name this name name toLowerCase Locale US public void setArch String arch this arch arch toLowerCase Locale US public void setVersion String version this version version toLowerCase Locale US public boolean eval throws BuildException return isOs family name arch version public static boolean isFamily String family return isOs family null null null public static boolean isName String name return isOs null name null null public static boolean isArch String arch return isOs null null arch null public static boolean isVersion String version return isOs null null null version public static boolean isOs String family String name String arch String version boolean retValue false if family null name null arch null version null boolean isFamily true boolean isName true boolean isArch true boolean isVersion true if family null if family equals isFamily osName indexOf else if family equals isFamily osName indexOf else if family equals isFamily osName indexOf else if family equals isFamily pathSep equals isFamily else if family equals isFamily osName indexOf else if family equals isFamily pathSep equals isFamily osName endsWith else if family equals isFamily isFamily osName indexOf osName indexOf osName indexOf else if family equals isFamily osName indexOf osName indexOf else throw new BuildException family if name null isName name equals osName if arch null isArch arch equals osArch if version null isVersion version equals osVersion retValue isFamily isName isArch isVersion return retValue', 'bug': '0'}
{'sequence': 'public class KaffeRmic extends DefaultRmicAdapter public boolean execute throws BuildException getRmic log Project MSG_VERBOSE Commandline cmd setupRmicCommand try Class Class forName Constructor cons getConstructor new Class String class Object rmic cons newInstance new Object cmd getArguments Method doRmic getMethod null Boolean ok Boolean doRmic invoke rmic null return ok booleanValue catch ClassNotFoundException ex throw new BuildException getRmic getLocation catch Exception ex if ex instanceof BuildException throw BuildException ex else throw new BuildException ex getRmic getLocation', 'bug': '0'}
{'sequence': 'public class InputRequest private String prompt private String input public InputRequest String prompt if prompt null throw new IllegalArgumentException this prompt prompt public String getPrompt return prompt public void setInput String input this input input public boolean isInputValid return true public String getInput return input', 'bug': '0'}
{'sequence': 'public class SendEmail extends EmailTask public void setMailport Integer value setMailport value intValue', 'bug': '0'}
{'sequence': 'public class PathConvert extends Task private Path path null private Reference refid null private String targetOS null private boolean targetWindows false private boolean onWindows false private boolean setonempty true private Vector prefixMap new Vector private String pathSep null private String dirSep null public PathConvert onWindows Os isFamily public class MapEntry public void setFrom String from this from from public void setTo String to this to to public String apply String elem if from null to null throw new BuildException String cmpElem onWindows elem toLowerCase elem String cmpFrom onWindows from toLowerCase from if cmpElem startsWith cmpFrom int len from length if len elem length elem to else elem to elem substring len return elem private String from null private String to null public static class TargetOs extends EnumeratedAttribute public String getValues return new String public Path createPath if isReference throw noChildrenAllowed if path null path new Path getProject return path createPath public MapEntry createMap MapEntry entry new MapEntry prefixMap addElement entry return entry public void setTargetos String target TargetOs to new TargetOs to setValue target setTargetos to public void setTargetos TargetOs target targetOS target getValue targetWindows targetOS equals public void setSetonempty boolean setonempty this setonempty setonempty public void setProperty String property public void setRefid Reference if path null throw noChildrenAllowed refid public void setPathSep String sep pathSep sep public void setDirSep String sep dirSep sep public boolean isReference return refid null public void execute throws BuildException Path savedPath path try if isReference path new Path getProject createPath Object obj refid getReferencedObject getProject if obj instanceof Path path setRefid refid else if obj instanceof FileSet FileSet fs FileSet obj path addFileset fs else if obj instanceof DirSet DirSet ds DirSet obj path addDirset ds else if obj instanceof FileList FileList fl FileList obj path addFilelist fl else throw new BuildException String fromDirSep onWindows StringBuffer rslt new StringBuffer String elems path list for int elems length String elem elems if rslt append pathSep StringTokenizer stDirectory new StringTokenizer elem fromDirSep true String token null while stDirectory hasMoreTokens token stDirectory nextToken if fromDirSep equals token rslt append dirSep else rslt append token String value rslt toString if setonempty log property value Project MSG_VERBOSE getProject setNewProperty property value else if rslt length log property value Project MSG_VERBOSE getProject setNewProperty property value finally path savedPath dirSep savedDirSep pathSep savedPathSep private String mapElement String elem int size prefixMap size if size for int size MapEntry entry MapEntry prefixMap elementAt String newElem entry apply elem if newElem elem elem newElem return elem private void validateSetup throws BuildException if path null throw new BuildException if property null throw new BuildException if targetOS null pathSep null dirSep null throw new BuildException String dsep File separator String psep File pathSeparator if targetOS null psep targetWindows dsep targetWindows psep pathSep dsep dirSep pathSep psep dirSep dsep private BuildException noChildrenAllowed return new BuildException', 'bug': '0'}
{'sequence': 'public class CallTarget extends Task private Ant callee private String subTarget private boolean inheritAll true private boolean inheritRefs false public void setInheritAll boolean inherit inheritAll inherit public void setInheritRefs boolean inheritRefs this inheritRefs inheritRefs public void init callee Ant getProject createTask callee setOwningTarget getOwningTarget callee setTaskName getTaskName callee setLocation getLocation callee init public void execute throws BuildException if callee null init if subTarget null throw new BuildException location callee setAntfile getProject getProperty callee setTarget subTarget callee setInheritAll inheritAll callee setInheritRefs inheritRefs callee execute public Property createParam if callee null init return callee createProperty public void addReference Ant Reference if callee null init callee addReference public void setTarget String target subTarget target protected void handleOutput String line if callee null callee handleOutput line else super handleOutput line protected void handleErrorOutput String line if callee null callee handleErrorOutput line else super handleErrorOutput line', 'bug': '0'}
{'sequence': 'public class LogOutputStream extends OutputStream private ByteArrayOutputStream buffer new ByteArrayOutputStream private boolean skip false private Task task private int level Project MSG_INFO public LogOutputStream Task task int level this task task this level level public void write int cc throws IOException final byte byte cc if if skip processBuffer else buffer write cc skip protected void processBuffer processLine buffer toString buffer reset protected void processLine String line processLine line level protected void processLine String line int level task log line level public void close throws IOException if buffer size processBuffer super close public int getMessageLevel return level', 'bug': '0'}
{'sequence': 'public class Jvc extends DefaultCompilerAdapter public boolean execute throws BuildException attributes log Project MSG_VERBOSE Path classpath new Path project if bootclasspath null classpath append bootclasspath classpath addExtdirs extdirs if bootclasspath null bootclasspath size includeJavaRuntime true else classpath append getCompileClasspath if compileSourcepath null classpath append compileSourcepath else classpath append src Commandline cmd new Commandline cmd setExecutable if destDir null cmd createArgument setValue cmd createArgument setFile destDir cmd createArgument setValue cmd createArgument setPath classpath cmd createArgument setValue cmd createArgument setValue cmd createArgument setValue if debug cmd createArgument setValue if optimize cmd createArgument setValue if verbose cmd createArgument setValue addCurrentCompilerArgs cmd int firstFileName cmd size logAndAddFilesToCompile cmd return executeExternalCompile cmd getCommandline firstFileName', 'bug': '0'}
{'sequence': 'public interface ExtendFileSelector extends FileSelector Parameterizable', 'bug': '0'}
{'sequence': 'public final class ZipLong implements Cloneable private long value public ZipLong long value this value value public ZipLong byte bytes this bytes public ZipLong byte bytes int offset value bytes offset value bytes offset value bytes offset value bytes offset public byte getBytes byte result new byte result byte value result byte value result byte value result byte value return result public long getValue return value public boolean equals Object if null instanceof ZipLong return false return value ZipLong getValue public int hashCode return int value', 'bug': '0'}
{'sequence': 'public interface RmicAdapter void setRmic Rmic attributes boolean execute throws BuildException FileNameMapper getMapper Path getClasspath', 'bug': '0'}
{'sequence': 'public interface ChainableReader public Reader chain Reader rdr', 'bug': '0'}
{'sequence': 'public class Socket extends ProjectComponent implements Condition private String server null private int port public void setServer String server this server server public void setPort int port this port port public boolean eval throws BuildException if server null throw new BuildException if port throw new BuildException log server port Project MSG_VERBOSE try java net Socket socket new java net Socket server port catch IOException return false return true', 'bug': '0'}
