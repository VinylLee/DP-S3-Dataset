{'sequence': 'public class PropertyFileInputHandler implements InputHandler private Properties props null public static final String FILE_NAME_KEY public PropertyFileInputHandler public void handleInput InputRequest request throws BuildException readProps Object props get request getPrompt if null throw new BuildException request getPrompt request setInput toString if request isInputValid throw new BuildException request getPrompt private synchronized void readProps throws BuildException if props null String propsFile System getProperty FILE_NAME_KEY if propsFile null throw new BuildException FILE_NAME_KEY props new Properties try props load new FileInputStream propsFile catch IOException throw new BuildException propsFile', 'bug': '0'}
{'sequence': 'public class OrSelector extends BaseSelectorContainer public OrSelector public String toString StringBuffer buf new StringBuffer if hasSelectors buf append buf append super toString buf append return buf toString public boolean isSelected File basedir String filename File file validate Enumeration selectorElements boolean result while hasMoreElements result FileSelector nextElement isSelected basedir filename file if result return true return false', 'bug': '0'}
{'sequence': 'public final class ChainReaderHelper private static final int DEFAULT_BUFFER_SIZE public Reader primaryReader public int bufferSize DEFAULT_BUFFER_SIZE public Vector filterChains new Vector private Project project null public final void setPrimaryReader Reader rdr primaryReader rdr public final void setProject final Project project this project project public final Project getProject return project public final void setBufferSize int size bufferSize size public final void setFilterChains Vector fchain filterChains fchain public final Reader getAssembledReader throws BuildException if primaryReader null throw new BuildException Reader instream primaryReader final int filterReadersCount filterChains size final Vector finalFilters new Vector for int filterReadersCount final FilterChain filterchain FilterChain filterChains elementAt final Vector filterReaders filterchain getFilterReaders final int readerCount filterReaders size for int readerCount finalFilters addElement filterReaders elementAt final int filtersCount finalFilters size if filtersCount for int filtersCount Object finalFilters elementAt if instanceof AntFilterReader final AntFilterReader filter AntFilterReader finalFilters elementAt final String className filter getClassName final Path classpath filter getClasspath final Project project filter getProject if className null try Class clazz null if classpath null clazz Class forName className else AntClassLoader al project createClassLoader classpath clazz Class forName className true al if clazz null if FilterReader class isAssignableFrom clazz throw new BuildException className final Constructor constructors clazz getConstructors int boolean consPresent false for constructors length Class types constructors getParameterTypes if types length types isAssignableFrom Reader class consPresent true break if consPresent throw new BuildException className final Reader rdr instream instream Reader constructors newInstance rdr setProjectOnObject instream if Parameterizable class isAssignableFrom clazz final Parameter params filter getParams Parameterizable instream setParameters params catch final ClassNotFoundException cnfe throw new BuildException cnfe catch final InstantiationException ie throw new BuildException ie catch final IllegalAccessException iae throw new BuildException iae catch final InvocationTargetException ite throw new BuildException ite else if instanceof ChainableReader setProjectOnObject instream ChainableReader chain instream setProjectOnObject instream return instream private void setProjectOnObject Object obj if project null return if obj instanceof BaseFilterReader BaseFilterReader obj setProject project return project setProjectReference obj public final String readFully Reader rdr throws IOException return FileUtils readFully rdr bufferSize', 'bug': '0'}
{'sequence': 'public class Ant extends Task private File dir null private String antFile null private String target null private String output null private boolean inheritAll true private boolean inheritRefs false private Vector properties new Vector private Vector references new Vector private Project newProject private PrintStream out null private Vector propertySets new Vector public void setInheritAll boolean value inheritAll value public void setInheritRefs boolean value inheritRefs value public void init newProject new Project newProject setDefaultInputStream getProject getDefaultInputStream newProject setJavaVersionProperty private void reinit init private void initializeProject newProject setInputHandler getProject getInputHandler Vector listeners getProject getBuildListeners final int count listeners size for int count newProject addBuildListener BuildListener listeners elementAt if output null File outfile null if dir null outfile FileUtils newFileUtils resolveFile dir output else outfile getProject resolveFile output try out new PrintStream new FileOutputStream outfile DefaultLogger logger new DefaultLogger logger setMessageOutputLevel Project MSG_INFO logger setOutputPrintStream out logger setErrorPrintStream out newProject addBuildListener logger catch IOException ex log output getProject initSubProject newProject getProject copyUserProperties newProject if inheritAll newProject setSystemProperties else addAlmostAll getProject getProperties Enumeration propertySets elements while hasMoreElements PropertySet ps PropertySet nextElement addAlmostAll ps getProperties public void handleOutput String output if newProject null newProject demuxOutput output false else super handleOutput output public int handleInput byte buffer int offset int length throws IOException if newProject null return newProject demuxInput buffer offset length else return super handleInput buffer offset length public void handleFlush String output if newProject null newProject demuxFlush output false else super handleFlush output public void handleErrorOutput String output if newProject null newProject demuxOutput output true else super handleErrorOutput output public void handleErrorFlush String output if newProject null newProject demuxFlush output true else super handleErrorFlush output public void execute throws BuildException File savedDir dir String savedAntFile antFile String savedTarget target try if newProject null reinit if dir null inheritAll dir getProject getBaseDir initializeProject if dir null newProject setBaseDir dir if savedDir null newProject setInheritedProperty dir getAbsolutePath else dir getProject getBaseDir overrideProperties if antFile null antFile File file FileUtils newFileUtils resolveFile dir antFile antFile file getAbsolutePath log target null target antFile Project MSG_VERBOSE newProject setUserProperty antFile if newProject getProperty equals getProject getProperty getOwningTarget null if getOwningTarget getName equals if getTaskName equals throw new BuildException else throw new BuildException getTaskName try ProjectHelper configureProject newProject new File antFile catch BuildException ex throw ProjectHelper addLocationToBuildException ex getLocation if target null target newProject getDefaultTarget if newProject getProperty equals getProject getProperty getOwningTarget null String owningTargetName getOwningTarget getName if owningTargetName equals target throw new BuildException getTaskName else Target other Target getProject getTargets get target if other null other dependsOn owningTargetName throw new BuildException getTaskName owningTargetName addReferences if target null equals target try log antFile Project MSG_VERBOSE newProject executeTarget target catch BuildException ex throw ProjectHelper addLocationToBuildException ex getLocation finally log antFile Project MSG_VERBOSE finally newProject null Enumeration properties elements while hasMoreElements Property Property nextElement setProject null if output null out null try out close catch final Exception ex dir savedDir antFile savedAntFile target savedTarget private void overrideProperties throws BuildException Set set new HashSet for int properties size Property Property properties get if getName null getName equals if set contains getName properties remove else set add getName Enumeration properties elements while hasMoreElements Property Property nextElement setProject newProject execute getProject copyInheritedProperties newProject private void addReferences throws BuildException Hashtable thisReferences Hashtable getProject getReferences clone Hashtable newReferences newProject getReferences Enumeration if references size for references elements hasMoreElements Reference ref Reference nextElement String refid ref getRefId if refid null throw new BuildException if thisReferences containsKey refid log refid Project MSG_WARN continue thisReferences remove refid String toRefid ref getToRefid if toRefid null toRefid refid copyReference refid toRefid if inheritRefs for thisReferences keys hasMoreElements String key String nextElement if newReferences containsKey key continue copyReference key key private void copyReference String oldKey String newKey Object orig getProject getReference oldKey if orig null log oldKey newKey Project MSG_WARN return Class orig getClass Object copy orig try Method cloneM getMethod new Class if cloneM null copy cloneM invoke orig new Object log oldKey Project MSG_DEBUG catch Exception if copy instanceof ProjectComponent ProjectComponent copy setProject newProject else try Method setProjectM getMethod new Class Project class if setProjectM null setProjectM invoke copy new Object newProject catch NoSuchMethodException catch Exception e2 String msg oldKey throw new BuildException msg e2 getLocation newProject addReference newKey copy private void addAlmostAll Hashtable props Enumeration props keys while hasMoreElements String key nextElement toString if equals key equals key continue String value props get key toString if newProject getProperty key null newProject setNewProperty key value public void setDir File this dir public void setAntfile String this antFile public void setTarget String if equals throw new BuildException this target public void setOutput String this output public Property createProperty if newProject null reinit Property new Property true getProject setProject newProject setTaskName properties addElement return public void addReference Reference references addElement public void addPropertyset PropertySet ps propertySets addElement ps public static class Reference extends org apache tools ant types Reference public Reference super private String targetid null public void setToRefid String targetid this targetid targetid public String getToRefid return targetid', 'bug': '1'}
{'sequence': 'public class JikesOutputParser implements ExecuteStreamHandler protected Task task protected int errors protected int warnings protected boolean error false protected boolean emacsMode protected BufferedReader br public void setProcessInputStream OutputStream os public void setProcessErrorStream InputStream is public void setProcessOutputStream InputStream is throws IOException br new BufferedReader new InputStreamReader is public void start throws IOException parseOutput br public void stop protected JikesOutputParser Task task boolean emacsMode super System err println System err println System err println this task task this emacsMode emacsMode protected void parseOutput BufferedReader reader throws IOException if emacsMode parseEmacsOutput reader else parseStandardOutput reader private void parseStandardOutput BufferedReader reader throws IOException String line String lower while line reader readLine null lower line toLowerCase if line trim equals continue if lower indexOf setError true else if lower indexOf setError false else if emacsMode setError true log line private void parseEmacsOutput BufferedReader reader throws IOException parseStandardOutput reader private void setError boolean err error err if error errorFlag true private void log String line if emacsMode task log error Project MSG_ERR Project MSG_WARN task log line error Project MSG_ERR Project MSG_WARN protected boolean getErrorFlag return errorFlag', 'bug': '0'}
{'sequence': 'public class SignJar extends Task protected File jar protected String alias private String keystore protected String storepass protected String storetype protected String keypass protected String sigfile protected File signedjar protected boolean verbose protected boolean internalsf protected boolean sectionsonly private String maxMemory protected Vector filesets new Vector protected boolean lazy public void setMaxmemory String max maxMemory max public void setJar final File jar this jar jar public void setAlias final String alias this alias alias public void setKeystore final String keystore this keystore keystore public void setStorepass final String storepass this storepass storepass public void setStoretype final String storetype this storetype storetype public void setKeypass final String keypass this keypass keypass public void setSigfile final String sigfile this sigfile sigfile public void setSignedjar final File signedjar this signedjar signedjar public void setVerbose final boolean verbose this verbose verbose public void setInternalsf final boolean internalsf this internalsf internalsf public void setSectionsonly final boolean sectionsonly this sectionsonly sectionsonly public void setLazy final boolean lazy this lazy lazy public void addFileset final FileSet set filesets addElement set public void execute throws BuildException if null jar filesets size throw new BuildException if null jar if filesets size log Project MSG_WARN doOneJar jar signedjar return else for int filesets size FileSet fs FileSet filesets elementAt DirectoryScanner ds fs getDirectoryScanner getProject String jarFiles ds getIncludedFiles for int jarFiles length doOneJar new File fs getDir getProject jarFiles null private void doOneJar File jarSource File jarTarget throws BuildException if null alias throw new BuildException if null storepass throw new BuildException if isUpToDate jarSource jarTarget return final ExecTask cmd ExecTask getProject createTask cmd setExecutable JavaEnvUtils getJdkExecutable if maxMemory null cmd createArg setValue maxMemory if null keystore File keystoreFile getProject resolveFile keystore if keystoreFile exists cmd createArg setValue cmd createArg setValue keystoreFile getPath else cmd createArg setValue cmd createArg setValue keystore if null storepass cmd createArg setValue cmd createArg setValue storepass if null storetype cmd createArg setValue cmd createArg setValue storetype if null keypass cmd createArg setValue cmd createArg setValue keypass if null sigfile cmd createArg setValue cmd createArg setValue sigfile if null jarTarget cmd createArg setValue cmd createArg setValue jarTarget toString if verbose cmd createArg setValue if internalsf cmd createArg setValue if sectionsonly cmd createArg setValue cmd createArg setValue jarSource toString cmd createArg setValue alias log jarSource getAbsolutePath cmd setFailonerror true cmd setTaskName getTaskName cmd execute protected boolean isUpToDate File jarFile File signedjarFile if null jarFile return false if null signedjarFile if jarFile exists return false if signedjarFile exists return false if jarFile equals signedjarFile return false if signedjarFile lastModified jarFile lastModified return true else if lazy return isSigned jarFile return false protected boolean isSigned File file final String SIG_START final String SIG_END if file exists return false ZipFile jarFile null try jarFile new ZipFile file if null alias Enumeration entries jarFile entries while entries hasMoreElements String name ZipEntry entries nextElement getName if name startsWith SIG_START name endsWith SIG_END return true return false else return jarFile getEntry SIG_START alias toUpperCase SIG_END null catch IOException return false finally if jarFile null try jarFile close catch IOException', 'bug': '0'}
{'sequence': 'public class And extends ConditionBase implements Condition public boolean eval throws BuildException Enumeration getConditions while hasMoreElements Condition Condition nextElement if eval return false return true', 'bug': '0'}
{'sequence': 'public class IsTrue extends ProjectComponent implements Condition private Boolean value null public void setValue boolean value this value value Boolean TRUE Boolean FALSE public boolean eval throws BuildException if value null throw new BuildException return value booleanValue', 'bug': '0'}
{'sequence': 'public class ExecuteOn extends ExecTask private Vector filelists new Vector private boolean relative false private boolean parallel false private boolean forwardSlash false protected String type protected Commandline Marker srcFilePos null private boolean skipEmpty false protected Commandline Marker targetFilePos null protected Mapper mapperElement null protected FileNameMapper mapper null protected File destDir null private int maxParallel private boolean addSourceFile true private boolean verbose false protected boolean srcIsFirst true public void addFileset FileSet set filesets addElement set public void addDirset DirSet set filesets addElement set public void addFilelist FileList list filelists addElement list public void setRelative boolean relative this relative relative public void setParallel boolean parallel this parallel parallel public void setType FileDirBoth type this type type getValue public void setSkipEmptyFilesets boolean skip skipEmpty skip public void setDest File destDir this destDir destDir public void setForwardslash boolean forwardSlash this forwardSlash forwardSlash public void setMaxParallel int max maxParallel max public void setAddsourcefile boolean addSourceFile public void setVerbose boolean verbose public Commandline Marker createSrcfile if srcFilePos null throw new BuildException getTaskType getLocation srcFilePos cmdl createMarker return srcFilePos public Commandline Marker createTargetfile if targetFilePos null throw new BuildException getTaskType getLocation targetFilePos cmdl createMarker srcIsFirst srcFilePos null return targetFilePos public Mapper createMapper throws BuildException if mapperElement null throw new BuildException getLocation mapperElement new Mapper getProject return mapperElement protected void checkConfiguration if equals getTaskName log super checkConfiguration if filesets size filelists size throw new BuildException getLocation if targetFilePos null mapperElement null destDir null if mapperElement null throw new BuildException getLocation if destDir null throw new BuildException getLocation mapper mapperElement getImplementation protected void runExec Execute exe throws BuildException int totalFiles int totalDirs boolean haveExecuted false try Vector fileNames new Vector Vector baseDirs new Vector for int filesets size String currentType type AbstractFileSet fs AbstractFileSet filesets elementAt if fs instanceof DirSet if equals type log type Project MSG_DEBUG currentType File base fs getDir getProject DirectoryScanner ds fs getDirectoryScanner getProject if equals currentType String getFiles base ds for int length totalFiles fileNames addElement baseDirs addElement base if equals currentType String getDirs base ds for int length totalDirs fileNames addElement baseDirs addElement base if fileNames size skipEmpty log base Project MSG_INFO continue if parallel String new String fileNames size fileNames copyInto for int length String command getCommandline base log Commandline describeCommand command Project MSG_VERBOSE exe setCommandline command if haveExecuted exe setStreamHandler createHandler runExecute exe haveExecuted true fileNames removeAllElements baseDirs removeAllElements for int filelists size FileList list FileList filelists elementAt File base list getDir getProject String names list getFiles getProject for int names length File new File base names if isFile equals type isDirectory equals type if isFile totalFiles else totalDirs fileNames addElement names baseDirs addElement base if fileNames size skipEmpty log base Project MSG_INFO continue if parallel String new String fileNames size fileNames copyInto for int length String command getCommandline base log Commandline describeCommand command Project MSG_VERBOSE exe setCommandline command if haveExecuted exe setStreamHandler createHandler runExecute exe haveExecuted true fileNames removeAllElements baseDirs removeAllElements if parallel fileNames size skipEmpty runParallel exe fileNames baseDirs haveExecuted true if haveExecuted log cmdl getExecutable totalFiles totalFiles totalDirs totalDirs verbose Project MSG_INFO Project MSG_VERBOSE catch IOException throw new BuildException getLocation finally logFlush protected String getCommandline String srcFiles File baseDirs final char fileSeparator File separatorChar Vector targets new Vector if targetFilePos null Hashtable addedFiles new Hashtable for int srcFiles length String subTargets mapper mapFileName srcFiles if subTargets null for int subTargets length String name null if relative name new File destDir subTargets getAbsolutePath else name subTargets if forwardSlash fileSeparator name name replace fileSeparator if addedFiles contains name targets addElement name addedFiles put name name String targetFiles new String targets size targets copyInto targetFiles if addSourceFile srcFiles new String String orig cmdl getCommandline String result new String orig length srcFiles length targetFiles length int srcIndex orig length if srcFilePos null srcIndex srcFilePos getPosition if targetFilePos null int targetIndex targetFilePos getPosition if srcIndex targetIndex srcIndex targetIndex srcIsFirst System arraycopy orig result srcIndex System arraycopy orig srcIndex result srcIndex srcFiles length targetIndex srcIndex System arraycopy targetFiles result targetIndex srcFiles length targetFiles length System arraycopy orig targetIndex result targetIndex srcFiles length targetFiles length orig length targetIndex else System arraycopy orig result targetIndex System arraycopy targetFiles result targetIndex targetFiles length System arraycopy orig targetIndex result targetIndex targetFiles length srcIndex targetIndex System arraycopy orig srcIndex result srcIndex srcFiles length targetFiles length orig length srcIndex srcIndex targetFiles length System arraycopy orig result srcIndex System arraycopy orig srcIndex result srcIndex srcFiles length orig length srcIndex for int srcFiles length if relative result srcIndex new File baseDirs srcFiles getAbsolutePath else result srcIndex srcFiles if forwardSlash fileSeparator result srcIndex result srcIndex replace fileSeparator return result protected String getCommandline String srcFile File baseDir return getCommandline new String srcFile new File baseDir protected String getFiles File baseDir DirectoryScanner ds if mapper null SourceFileScanner sfs new SourceFileScanner this return sfs restrict ds getIncludedFiles baseDir destDir mapper else return ds getIncludedFiles protected String getDirs File baseDir DirectoryScanner ds if mapper null SourceFileScanner sfs new SourceFileScanner this return sfs restrict ds getIncludedDirectories baseDir destDir mapper else return ds getIncludedDirectories protected void runParallel Execute exe Vector fileNames Vector baseDirs throws IOException BuildException String new String fileNames size fileNames copyInto File new File baseDirs size baseDirs copyInto if maxParallel String command getCommandline log Commandline describeCommand command Project MSG_VERBOSE exe setCommandline command runExecute exe else int stillToDo fileNames size int currentOffset while stillToDo int currentAmount Math min stillToDo maxParallel String cs new String currentAmount System arraycopy currentOffset cs currentAmount File cb new File currentAmount System arraycopy currentOffset cb currentAmount String command getCommandline cs cb log Commandline describeCommand command Project MSG_VERBOSE exe setCommandline command if currentOffset exe setStreamHandler createHandler runExecute exe stillToDo currentAmount currentOffset currentAmount public static class FileDirBoth extends EnumeratedAttribute public String getValues return new String', 'bug': '0'}
{'sequence': 'public class Assertions extends DataType private Boolean enableSystemAssertions private ArrayList assertionList new ArrayList public void addEnable EnabledAssertion assertion checkChildrenAllowed assertionList add assertion public void addDisable DisabledAssertion assertion checkChildrenAllowed assertionList add assertion public void setEnableSystemAssertions Boolean enableSystemAssertions checkAttributesAllowed this enableSystemAssertions enableSystemAssertions public void setRefid Reference ref if assertionList size enableSystemAssertions null throw tooManyAttributes super setRefid ref private Assertions getFinalReference if getRefid null return this else Object getRefid getReferencedObject getProject if instanceof Assertions throw new BuildException return Assertions public int size Assertions clause getFinalReference return clause getFinalSize private int getFinalSize return assertionList size enableSystemAssertions null public void applyAssertions List commandList getProject log Project MSG_DEBUG Assertions clause getFinalReference if Boolean TRUE equals clause enableSystemAssertions getProject log Project MSG_DEBUG commandList add else if Boolean FALSE equals clause enableSystemAssertions getProject log Project MSG_DEBUG commandList add Iterator it clause assertionList iterator while it hasNext BaseAssertion assertion BaseAssertion it next String arg assertion toCommand getProject log arg Project MSG_DEBUG commandList add arg public void applyAssertions CommandlineJava command Assertions clause getFinalReference if Boolean TRUE equals clause enableSystemAssertions addVmArgument command else if Boolean FALSE equals clause enableSystemAssertions addVmArgument command Iterator it clause assertionList iterator while it hasNext BaseAssertion assertion BaseAssertion it next String arg assertion toCommand addVmArgument command arg private static void addVmArgument CommandlineJava command String arg Commandline Argument argument argument command createVmArgument argument setValue arg protected Object clone throws CloneNotSupportedException Assertions that Assertions super clone that assertionList ArrayList assertionList clone return that public abstract static class BaseAssertion private String className public void setClass String className this className className protected String getClassName return className protected String getPackageName public abstract String getCommandPrefix public String toCommand if getPackageName null getClassName null StringBuffer command new StringBuffer getCommandPrefix if getPackageName null command append command append getPackageName if command toString endsWith command append else if getClassName null command append command append getClassName return command toString public static class EnabledAssertion extends BaseAssertion public String getCommandPrefix return public static class DisabledAssertion extends BaseAssertion public String getCommandPrefix return', 'bug': '1'}
{'sequence': 'class CRC public static int crc32Table public CRC initialiseCRC void initialiseCRC globalCrc int getFinalCRC return globalCrc int getGlobalCRC return globalCrc void setGlobalCRC int newCrc globalCrc newCrc void updateCRC int inCh int temp globalCrc inCh if temp temp temp globalCrc globalCrc CRC crc32Table temp int globalCrc', 'bug': '0'}
{'sequence': 'public class SQLExec extends JDBCTask public static class DelimiterType extends EnumeratedAttribute public static final String NORMAL public static final String ROW public String getValues return new String NORMAL ROW private int goodSql private int totalSql private Connection conn null private Vector filesets new Vector private Statement statement null private File srcFile null private String sqlCommand private Vector transactions new Vector private String delimiter private String delimiterType DelimiterType NORMAL private boolean print false private boolean showheaders true private File output null private String onError private String encoding null private boolean append false private boolean keepformat false private boolean escapeProcessing true public void setSrc File srcFile this srcFile srcFile public void addText String sql this sqlCommand sql public void addFileset FileSet set filesets addElement set public Transaction createTransaction Transaction new Transaction transactions addElement return public void setEncoding String encoding this encoding encoding public void setDelimiter String delimiter this delimiter delimiter public void setDelimiterType DelimiterType delimiterType this delimiterType delimiterType getValue public void setPrint boolean print this print print public void setShowheaders boolean showheaders this showheaders showheaders public void setOutput File output this output output public void setAppend boolean append this append append public void setOnerror OnError action this onError action getValue public void setKeepformat boolean keepformat this keepformat keepformat public void setEscapeProcessing boolean enable escapeProcessing enable public void execute throws BuildException Vector savedTransaction Vector transactions clone String savedSqlCommand sqlCommand sqlCommand sqlCommand trim try if srcFile null sqlCommand length filesets isEmpty if transactions size throw new BuildException getLocation if srcFile null srcFile exists throw new BuildException getLocation for int filesets size FileSet fs FileSet filesets elementAt DirectoryScanner ds fs getDirectoryScanner getProject File srcDir fs getDir getProject String srcFiles ds getIncludedFiles for int srcFiles length Transaction createTransaction setSrc new File srcDir srcFiles Transaction createTransaction setSrc srcFile addText sqlCommand conn getConnection if isValidRdbms conn return try statement conn createStatement statement setEscapeProcessing escapeProcessing PrintStream out System out try if output null log output Project MSG_VERBOSE out new PrintStream new BufferedOutputStream new FileOutputStream output getAbsolutePath append for Enumeration transactions elements hasMoreElements Transaction nextElement runTransaction out if isAutocommit log Project MSG_VERBOSE conn commit finally if out null out System out out close catch IOException if isAutocommit conn null onError equals try conn rollback catch SQLException ex throw new BuildException getLocation catch SQLException if isAutocommit conn null onError equals try conn rollback catch SQLException ex throw new BuildException getLocation finally try if statement null statement close if conn null conn close catch SQLException ex log goodSql totalSql finally transactions savedTransaction sqlCommand savedSqlCommand protected void runStatements Reader reader PrintStream out throws SQLException IOException StringBuffer sql new StringBuffer String line BufferedReader in new BufferedReader reader while line in readLine null if keepformat line line trim line getProject replaceProperties line if keepformat continue if line startsWith continue StringTokenizer st new StringTokenizer line if st hasMoreTokens String token st nextToken if equalsIgnoreCase token continue if keepformat sql append line else sql append line if keepformat if line indexOf sql append if delimiterType equals DelimiterType NORMAL sql toString endsWith delimiter delimiterType equals DelimiterType ROW line equals delimiter execSQL sql substring sql length delimiter length out sql replace sql length if sql equals execSQL sql toString out protected void execSQL String sql PrintStream out throws SQLException if equals sql trim return try totalSql log sql Project MSG_VERBOSE boolean ret int updateCount updateCountTotal ResultSet resultSet null ret statement execute sql updateCount statement getUpdateCount resultSet statement getResultSet do if ret if updateCount updateCountTotal updateCount else if print printResults out ret statement getMoreResults updateCount statement getUpdateCount resultSet statement getResultSet while ret log updateCountTotal Project MSG_VERBOSE if print StringBuffer line new StringBuffer line append updateCountTotal out println line SQLWarning warning conn getWarnings while warning null log warning Project MSG_VERBOSE warning warning getNextWarning conn clearWarnings goodSql catch SQLException log sql Project MSG_ERR if onError equals throw log toString Project MSG_ERR protected void printResults PrintStream out throws java sql SQLException ResultSet rs null rs statement getResultSet if rs null log Project MSG_VERBOSE ResultSetMetaData md rs getMetaData int columnCount md getColumnCount StringBuffer line new StringBuffer if showheaders for int col col columnCount col line append md getColumnName col line append line append md getColumnName columnCount out println line line new StringBuffer while rs next boolean first true for int col col columnCount col String columnValue rs getString col if columnValue null columnValue columnValue trim if first first false else line append line append columnValue out println line line new StringBuffer out println public static class OnError extends EnumeratedAttribute public String getValues return new String public class Transaction private File tSrcFile null private String tSqlCommand public void setSrc File src this tSrcFile src public void addText String sql this tSqlCommand sql private void runTransaction PrintStream out throws IOException SQLException if tSqlCommand length log Project MSG_INFO runStatements new StringReader tSqlCommand out if tSrcFile null log tSrcFile getAbsolutePath Project MSG_INFO Reader reader encoding null new FileReader tSrcFile new InputStreamReader new FileInputStream tSrcFile encoding try runStatements reader out finally reader close', 'bug': '1'}
{'sequence': 'public class ExecuteWatchdog implements TimeoutObserver private Process process private boolean watch false private Exception caught null private boolean killedProcess false private Watchdog watchdog public ExecuteWatchdog long timeout watchdog new Watchdog timeout watchdog addTimeoutObserver this public ExecuteWatchdog int timeout this long timeout public synchronized void start Process process if process null throw new NullPointerException if this process null throw new IllegalStateException this caught null this killedProcess false this watch true this process process watchdog start public synchronized void stop watchdog stop watch false process null public void timeoutOccured Watchdog try try process exitValue catch IllegalThreadStateException itse if watch killedProcess true process destroy catch Exception caught finally cleanUp protected void cleanUp watch false process null public void checkException throws BuildException if caught null throw new BuildException caught getMessage caught public boolean isWatching return watch public boolean killedProcess return killedProcess', 'bug': '0'}
{'sequence': 'public class IsSet extends ProjectComponent implements Condition private String property public void setProperty String property public boolean eval throws BuildException if property null throw new BuildException return getProject getProperty property null', 'bug': '0'}
{'sequence': 'public class Commandline implements Cloneable private Vector arguments new Vector private String executable null protected static final String DISCLAIMER StringUtils LINE_SEP StringUtils LINE_SEP StringUtils LINE_SEP public Commandline String toProcess super String tmp translateCommandline toProcess if tmp null tmp length setExecutable tmp for int tmp length createArgument setValue tmp public Commandline super public static class Argument extends ProjectComponent private String parts public void setValue String value parts new String value public void setLine String line if line null return parts translateCommandline line public void setPath Path value parts new String value toString public void setPathref Reference value Path new Path getProject setRefid value parts new String toString public void setFile File value parts new String value getAbsolutePath public String getParts return parts public class Marker private int position private int realPos Marker int position this position position public int getPosition if realPos realPos executable null for int position Argument arg Argument arguments elementAt realPos arg getParts length return realPos public Argument createArgument return this createArgument false public Argument createArgument boolean insertAtStart Argument argument new Argument if insertAtStart arguments insertElementAt argument else arguments addElement argument return argument public void setExecutable String executable if executable null executable length return this executable executable replace File separatorChar replace File separatorChar public String getExecutable return executable public void addArguments String line for int line length createArgument setValue line public String getCommandline List commands new LinkedList ListIterator list commands listIterator addCommandToList list final String result new String commands size return String commands toArray result public void addCommandToList ListIterator list if executable null list add executable addArgumentsToList list public String getArguments List result new ArrayList arguments size addArgumentsToList result listIterator String res new String result size return String result toArray res public void addArgumentsToList ListIterator list for int arguments size Argument arg Argument arguments elementAt String arg getParts if null for int length list add public String toString return toString getCommandline public static String quoteArgument String argument if argument indexOf if argument indexOf throw new BuildException else return argument else if argument indexOf argument indexOf return argument else return argument public static String toString String line if line null line length return final StringBuffer result new StringBuffer for int line length if result append result append quoteArgument line return result toString public static String translateCommandline String toProcess if toProcess null toProcess length return new String final int normal final int inQuote final int inDoubleQuote int state normal StringTokenizer tok new StringTokenizer toProcess true Vector new Vector StringBuffer current new StringBuffer boolean lastTokenHasBeenQuoted false while tok hasMoreTokens String nextTok tok nextToken switch state case inQuote if equals nextTok lastTokenHasBeenQuoted true state normal else current append nextTok break case inDoubleQuote if equals nextTok lastTokenHasBeenQuoted true state normal else current append nextTok break default if equals nextTok state inQuote else if equals nextTok state inDoubleQuote else if equals nextTok if lastTokenHasBeenQuoted current length addElement current toString current new StringBuffer else current append nextTok lastTokenHasBeenQuoted false break if lastTokenHasBeenQuoted current length addElement current toString if state inQuote state inDoubleQuote throw new BuildException toProcess String args new String size copyInto args return args public int size return getCommandline length public Object clone try Commandline Commandline super clone arguments Vector arguments clone return catch CloneNotSupportedException throw new BuildException public void clear executable null arguments removeAllElements public void clearArgs arguments removeAllElements public Marker createMarker return new Marker arguments size public String describeCommand return describeCommand this public String describeArguments return describeArguments this public static String describeCommand Commandline line return describeCommand line getCommandline public static String describeArguments Commandline line return describeArguments line getArguments public static String describeCommand String args if args null args length return StringBuffer buf new StringBuffer buf append args buf append if args length buf append buf append describeArguments args else buf append DISCLAIMER return buf toString public static String describeArguments String args return describeArguments args protected static String describeArguments String args int offset if args null args length offset return StringBuffer buf new StringBuffer if args length offset buf append buf append append StringUtils LINE_SEP for int offset args length buf append append args append append StringUtils LINE_SEP buf append DISCLAIMER return buf toString', 'bug': '1'}
{'sequence': 'public class NotSelector extends NoneSelector public NotSelector public String toString StringBuffer buf new StringBuffer if hasSelectors buf append buf append super toString buf append return buf toString public void verifySettings if selectorCount setError', 'bug': '0'}
{'sequence': 'public class XMLCatalog extends DataType implements Cloneable EntityResolver URIResolver private static FileUtils fileUtils FileUtils newFileUtils private Vector elements new Vector private Path classpath private Path catalogPath public static final String APACHE_RESOLVER public static final String CATALOG_RESOLVER public XMLCatalog setChecked false private Vector getElements return getRef elements private Path getClasspath return getRef classpath private void setElements Vector aVector if isReference throw noChildrenAllowed elements aVector public Path createClasspath if isReference throw noChildrenAllowed if this classpath null this classpath new Path getProject setChecked false return this classpath createPath public void setClasspath Path classpath if isReference throw tooManyAttributes if this classpath null this classpath classpath else this classpath append classpath setChecked false public void setClasspathRef Reference if isReference throw tooManyAttributes createClasspath setRefid setChecked false public Path createCatalogPath if isReference throw noChildrenAllowed if this catalogPath null this catalogPath new Path getProject setChecked false return this catalogPath createPath public void setCatalogPathRef Reference if isReference throw tooManyAttributes createCatalogPath setRefid setChecked false public Path getCatalogPath return getRef catalogPath public void addDTD ResourceLocation dtd throws BuildException if isReference throw noChildrenAllowed getElements addElement dtd setChecked false public void addEntity ResourceLocation entity throws BuildException addDTD entity public void addConfiguredXMLCatalog XMLCatalog catalog if isReference throw noChildrenAllowed Vector newElements catalog getElements Vector ourElements getElements Enumeration newElements elements while hasMoreElements ourElements addElement nextElement Path nestedClasspath catalog getClasspath createClasspath append nestedClasspath Path nestedCatalogPath catalog getCatalogPath createCatalogPath append nestedCatalogPath setChecked false public void setRefid Reference throws BuildException if elements isEmpty throw tooManyAttributes super setRefid public InputSource resolveEntity String publicId String systemId throws SAXException IOException if isReference return getRef resolveEntity publicId systemId if isChecked Stack stk new Stack stk push this dieOnCircularReference stk getProject log publicId systemId Project MSG_DEBUG InputSource inputSource getCatalogResolver resolveEntity publicId systemId if inputSource null log systemId Project MSG_DEBUG return inputSource public Source resolve String href String base throws TransformerException if isReference return getRef resolve href base if isChecked Stack stk new Stack stk push this dieOnCircularReference stk getProject SAXSource source null String uri removeFragment href log uri base Project MSG_DEBUG source SAXSource getCatalogResolver resolve uri base if source null log href Project MSG_DEBUG source new SAXSource URL baseURL null try if base null baseURL fileUtils getFileURL getProject getBaseDir else baseURL new URL base URL url uri length baseURL new URL baseURL uri source setInputSource new InputSource url toString catch MalformedURLException ex source setInputSource new InputSource uri setEntityResolver source return source private XMLCatalog getRef if isReference return this return XMLCatalog getCheckedRef XMLCatalog class private CatalogResolver catalogResolver null private CatalogResolver getCatalogResolver if catalogResolver null AntClassLoader loader null loader getProject createClassLoader Path systemClasspath try Class clazz Class forName APACHE_RESOLVER true loader ClassLoader apacheResolverLoader clazz getClassLoader Class baseResolverClass Class forName CATALOG_RESOLVER true apacheResolverLoader ClassLoader baseResolverLoader baseResolverClass getClassLoader clazz Class forName APACHE_RESOLVER true baseResolverLoader Object obj clazz newInstance catalogResolver new ExternalResolver clazz obj catch Throwable ex catalogResolver new InternalResolver if getCatalogPath null getCatalogPath list length log Project MSG_WARN log ex Project MSG_DEBUG return catalogResolver private void setEntityResolver SAXSource source throws TransformerException XMLReader reader source getXMLReader if reader null SAXParserFactory spFactory SAXParserFactory newInstance spFactory setNamespaceAware true try reader spFactory newSAXParser getXMLReader catch ParserConfigurationException ex throw new TransformerException ex catch SAXException ex throw new TransformerException ex reader setEntityResolver this source setXMLReader reader private ResourceLocation findMatchingEntry String publicId Enumeration getElements elements ResourceLocation element null while hasMoreElements Object nextElement if instanceof ResourceLocation element ResourceLocation if element getPublicId equals publicId return element return null private String removeFragment String uri String result uri int hashPos uri indexOf if hashPos result uri substring hashPos return result private InputSource filesystemLookup ResourceLocation matchingEntry String uri matchingEntry getLocation uri uri replace File separatorChar URL baseURL null if matchingEntry getBase null baseURL matchingEntry getBase else try baseURL fileUtils getFileURL getProject getBaseDir catch MalformedURLException ex throw new BuildException InputSource source null URL url null try url new URL baseURL uri catch MalformedURLException ex File testFile new File uri if testFile exists testFile canRead log uri Project MSG_DEBUG try url fileUtils getFileURL testFile catch MalformedURLException ex1 throw new BuildException testFile getAbsolutePath else log uri Project MSG_DEBUG if url null String fileName url getFile if fileName null log fileName Project MSG_DEBUG File resFile new File fileName if resFile exists resFile canRead try source new InputSource new FileInputStream resFile String sysid JAXPUtils getSystemId resFile source setSystemId sysid log sysid Project MSG_DEBUG catch IOException ex return source private InputSource classpathLookup ResourceLocation matchingEntry InputSource source null AntClassLoader loader null Path cp classpath if cp null cp classpath concatSystemClasspath else cp new Path getProject concatSystemClasspath loader getProject createClassLoader cp InputStream is loader getResourceAsStream matchingEntry getLocation if is null source new InputSource is URL entryURL loader getResource matchingEntry getLocation String sysid entryURL toExternalForm source setSystemId sysid log sysid Project MSG_DEBUG return source private InputSource urlLookup ResourceLocation matchingEntry String uri matchingEntry getLocation URL baseURL null if matchingEntry getBase null baseURL matchingEntry getBase else try baseURL fileUtils getFileURL getProject getBaseDir catch MalformedURLException ex throw new BuildException InputSource source null URL url null try url new URL baseURL uri catch MalformedURLException ex if url null try InputStream is url openStream if is null source new InputSource is String sysid url toExternalForm source setSystemId sysid log sysid Project MSG_DEBUG catch IOException ex return source private interface CatalogResolver extends URIResolver EntityResolver InputSource resolveEntity String publicId String systemId Source resolve String href String base throws TransformerException private class InternalResolver implements CatalogResolver public InternalResolver log Project MSG_VERBOSE public InputSource resolveEntity String publicId String systemId InputSource result null ResourceLocation matchingEntry findMatchingEntry publicId if matchingEntry null log matchingEntry getPublicId matchingEntry getLocation Project MSG_DEBUG result filesystemLookup matchingEntry if result null result classpathLookup matchingEntry if result null result urlLookup matchingEntry return result public Source resolve String href String base throws TransformerException SAXSource result null InputSource source null ResourceLocation matchingEntry findMatchingEntry href if matchingEntry null log matchingEntry getPublicId matchingEntry getLocation Project MSG_DEBUG ResourceLocation entryCopy matchingEntry if base null try URL baseURL new URL base entryCopy new ResourceLocation entryCopy setBase baseURL catch MalformedURLException ex entryCopy setPublicId matchingEntry getPublicId entryCopy setLocation matchingEntry getLocation source filesystemLookup entryCopy if source null source classpathLookup entryCopy if source null source urlLookup entryCopy if source null result new SAXSource source return result private class ExternalResolver implements CatalogResolver private Method setXMLCatalog null private Method parseCatalog null private Method resolveEntity null private Method resolve null private Object resolverImpl null private boolean externalCatalogsProcessed false public ExternalResolver Class resolverImplClass Object resolverImpl this resolverImpl resolverImpl try setXMLCatalog resolverImplClass getMethod new Class XMLCatalog class parseCatalog resolverImplClass getMethod new Class String class resolveEntity resolverImplClass getMethod new Class String class String class resolve resolverImplClass getMethod new Class String class String class catch NoSuchMethodException ex throw new BuildException ex log Project MSG_VERBOSE public InputSource resolveEntity String publicId String systemId InputSource result null processExternalCatalogs ResourceLocation matchingEntry findMatchingEntry publicId if matchingEntry null log matchingEntry getPublicId matchingEntry getLocation Project MSG_DEBUG result filesystemLookup matchingEntry if result null result classpathLookup matchingEntry if result null try result InputSource resolveEntity invoke resolverImpl new Object publicId systemId catch Exception ex throw new BuildException ex else try result InputSource resolveEntity invoke resolverImpl new Object publicId systemId catch Exception ex throw new BuildException ex return result public Source resolve String href String base throws TransformerException SAXSource result null InputSource source null processExternalCatalogs ResourceLocation matchingEntry findMatchingEntry href if matchingEntry null log matchingEntry getPublicId matchingEntry getLocation Project MSG_DEBUG ResourceLocation entryCopy matchingEntry if base null try URL baseURL new URL base entryCopy new ResourceLocation entryCopy setBase baseURL catch MalformedURLException ex entryCopy setPublicId matchingEntry getPublicId entryCopy setLocation matchingEntry getLocation source filesystemLookup entryCopy if source null source classpathLookup entryCopy if source null result new SAXSource source else try result SAXSource resolve invoke resolverImpl new Object href base catch Exception ex throw new BuildException ex else try result SAXSource resolve invoke resolverImpl new Object href base catch Exception ex throw new BuildException ex return result private void processExternalCatalogs if externalCatalogsProcessed try setXMLCatalog invoke resolverImpl new Object XMLCatalog this catch Exception ex throw new BuildException ex Path catPath getCatalogPath if catPath null log getCatalogPath Project MSG_DEBUG String catPathList getCatalogPath list for int catPathList length File catFile new File catPathList log catFile Project MSG_DEBUG try parseCatalog invoke resolverImpl new Object catFile getPath catch Exception ex throw new BuildException ex externalCatalogsProcessed true', 'bug': '0'}
{'sequence': 'public final class LineContainsRegExp extends BaseParamFilterReader implements ChainableReader private static final String REGEXP_KEY private Vector regexps new Vector private String line null public LineContainsRegExp super public LineContainsRegExp final Reader in super in public final int read throws IOException if getInitialized initialize setInitialized true int ch if line null ch line charAt if line length line null else line line substring else line readLine final int regexpsSize regexps size while line null for int regexpsSize RegularExpression regexp RegularExpression regexps elementAt Regexp re regexp getRegexp getProject boolean matches re matches line if matches line null break if line null line readLine else break if line null return read return ch public final void addConfiguredRegexp final RegularExpression regExp this regexps addElement regExp private void setRegexps final Vector regexps this regexps regexps private final Vector getRegexps return regexps public final Reader chain final Reader rdr LineContainsRegExp newFilter new LineContainsRegExp rdr newFilter setRegexps getRegexps newFilter setInitialized true return newFilter private final void initialize Parameter params getParameters if params null for int params length if REGEXP_KEY equals params getType String pattern params getValue RegularExpression regexp new RegularExpression regexp setPattern pattern regexps addElement regexp', 'bug': '0'}
{'sequence': 'public class ProjectHelper2 extends ProjectHelper private static AntHandler elementHandler new ElementHandler private static AntHandler targetHandler new TargetHandler private static AntHandler mainHandler new MainHandler private static AntHandler projectHandler new ProjectHandler private static FileUtils fu FileUtils newFileUtils public UnknownElement parseUnknownElement Project project URL source throws BuildException Target dummyTarget new Target dummyTarget setProject project AntXMLContext context new AntXMLContext project context addTarget dummyTarget context setImplicitTarget dummyTarget parse context getProject source new RootHandler context elementHandler Task tasks dummyTarget getTasks if tasks length throw new BuildException return UnknownElement tasks public void parse Project project Object source throws BuildException getImportStack addElement source AntXMLContext context null context AntXMLContext project getReference if context null context new AntXMLContext project project addReference context project addReference context getTargets if getImportStack size context setIgnoreProjectTag true Target currentTarget context getCurrentTarget try Target newCurrent new Target newCurrent setProject project newCurrent setName context setCurrentTarget newCurrent parse project source new RootHandler context mainHandler newCurrent execute finally context setCurrentTarget currentTarget else parse project source new RootHandler context mainHandler context getImplicitTarget execute public void parse Project project Object source RootHandler handler throws BuildException AntXMLContext context handler context File buildFile null URL url null String buildFileName null if source instanceof File buildFile File source buildFile new File buildFile getAbsolutePath context setBuildFile buildFile buildFileName buildFile toString else if source instanceof URL if handler getCurrentAntHandler elementHandler throw new BuildException source getClass getName url URL source buildFileName url toString else throw new BuildException source getClass getName InputStream inputStream null InputSource inputSource null try XMLReader parser JAXPUtils getNamespaceXMLReader String uri null if buildFile null uri fu toURI buildFile getAbsolutePath inputStream new FileInputStream buildFile else inputStream url openStream inputSource new InputSource inputStream if uri null inputSource setSystemId uri project log buildFileName uri Project MSG_VERBOSE DefaultHandler hb handler parser setContentHandler hb parser setEntityResolver hb parser setErrorHandler hb parser setDTDHandler hb parser parse inputSource catch SAXParseException exc Location location new Location exc getSystemId exc getLineNumber exc getColumnNumber Throwable exc getException if instanceof BuildException BuildException be BuildException if be getLocation Location UNKNOWN_LOCATION be setLocation location throw be throw new BuildException exc getMessage location catch SAXException exc Throwable exc getException if instanceof BuildException throw BuildException throw new BuildException exc getMessage catch FileNotFoundException exc throw new BuildException exc catch UnsupportedEncodingException exc throw new BuildException buildFileName exc catch IOException exc throw new BuildException buildFileName exc getMessage exc finally if inputStream null try inputStream close catch IOException ioe public static class AntHandler public void onStartElement String uri String tag String qname Attributes attrs AntXMLContext context throws SAXParseException public AntHandler onStartChild String uri String tag String qname Attributes attrs AntXMLContext context throws SAXParseException throw new SAXParseException qname context getLocator public void onEndChild String uri String tag String qname AntXMLContext context throws SAXParseException public void onEndElement String uri String tag AntXMLContext context public void characters char buf int start int count AntXMLContext context throws SAXParseException String new String buf start count trim if length throw new SAXParseException context getLocator protected void checkNamespace String uri public static class RootHandler extends DefaultHandler private Stack antHandlers new Stack private AntHandler currentHandler null private AntXMLContext context public RootHandler AntXMLContext context AntHandler rootHandler currentHandler rootHandler antHandlers push currentHandler this context context public AntHandler getCurrentAntHandler return currentHandler public InputSource resolveEntity String publicId String systemId context getProject log systemId Project MSG_VERBOSE if systemId startsWith String path fu fromURI systemId File file new File path if file isAbsolute file fu resolveFile context getBuildFileParent path try InputSource inputSource new InputSource new FileInputStream file inputSource setSystemId fu toURI file getAbsolutePath return inputSource catch FileNotFoundException fne context getProject log file getAbsolutePath Project MSG_WARN return null public void startElement String uri String tag String qname Attributes attrs throws SAXParseException AntHandler next currentHandler onStartChild uri tag qname attrs context antHandlers push currentHandler currentHandler next currentHandler onStartElement uri tag qname attrs context public void setDocumentLocator Locator locator context setLocator locator public void endElement String uri String name String qName throws SAXException currentHandler onEndElement uri name context AntHandler prev AntHandler antHandlers pop currentHandler prev if currentHandler null currentHandler onEndChild uri name qName context public void characters char buf int start int count throws SAXParseException currentHandler characters buf start count context public void startPrefixMapping String prefix String uri context startPrefixMapping prefix uri public void endPrefixMapping String prefix context endPrefixMapping prefix public static class MainHandler extends AntHandler public AntHandler onStartChild String uri String name String qname Attributes attrs AntXMLContext context throws SAXParseException if name equals uri equals uri equals ANT_CORE_URI return ProjectHelper2 projectHandler else throw new SAXParseException qname name context getLocator public static class ProjectHandler extends AntHandler public void onStartElement String uri String tag String qname Attributes attrs AntXMLContext context throws SAXParseException String id null String baseDir null boolean nameAttributeSet false Project project context getProject for int attrs getLength String attrUri attrs getURI if attrUri null attrUri equals attrUri equals uri String key attrs getLocalName String value attrs getValue if key equals if value null value equals if context isIgnoringProjectTag project setDefault value else if key equals if value null context setCurrentProjectName value nameAttributeSet true if context isIgnoringProjectTag project setName value project addReference value project else if key equals if value null if context isIgnoringProjectTag project addReference value project else if key equals if context isIgnoringProjectTag baseDir value else throw new SAXParseException attrs getQName context getLocator String antFileProp context getCurrentProjectName String dup project getProperty antFileProp if dup null nameAttributeSet File dupFile new File dup if context isIgnoringProjectTag dupFile equals context getBuildFile context getCurrentProjectName dup context getBuildFile Project MSG_WARN if context getBuildFile null project setUserProperty context getCurrentProjectName context getBuildFile toString if context isIgnoringProjectTag return if project getProperty null project setBasedir project getProperty else if baseDir null project setBasedir context getBuildFileParent getAbsolutePath else if new File baseDir isAbsolute project setBasedir baseDir else project setBaseDir fu resolveFile context getBuildFileParent baseDir project addTarget context getImplicitTarget context setCurrentTarget context getImplicitTarget public AntHandler onStartChild String uri String name String qname Attributes attrs AntXMLContext context throws SAXParseException if name equals uri equals uri equals ANT_CORE_URI return ProjectHelper2 targetHandler else return ProjectHelper2 elementHandler public static class TargetHandler extends AntHandler public void onStartElement String uri String tag String qname Attributes attrs AntXMLContext context throws SAXParseException String name null String depends Project project context getProject Target target new Target target setProject project context addTarget target for int attrs getLength String attrUri attrs getURI if attrUri null attrUri equals attrUri equals uri String key attrs getLocalName String value attrs getValue if key equals name value if equals name throw new BuildException else if key equals depends value else if key equals target setIf value else if key equals target setUnless value else if key equals if value null value equals context getProject addReference value target else if key equals target setDescription value else throw new SAXParseException key context getLocator if name null throw new SAXParseException context getLocator Hashtable currentTargets project getTargets if currentTargets containsKey name if context getCurrentProjectName null String newName context getCurrentProjectName name name newName Project MSG_VERBOSE name newName else name Project MSG_VERBOSE name null if name null target setName name project addOrReplaceTarget name target if depends length target setDepends depends public AntHandler onStartChild String uri String name String qname Attributes attrs AntXMLContext context throws SAXParseException return ProjectHelper2 elementHandler public void onEndElement String uri String tag AntXMLContext context context setCurrentTarget context getImplicitTarget public static class ElementHandler extends AntHandler public ElementHandler public void onStartElement String uri String tag String qname Attributes attrs AntXMLContext context throws SAXParseException RuntimeConfigurable parentWrapper context currentWrapper Object parent null if parentWrapper null parent parentWrapper getProxy UnknownElement task new UnknownElement tag task setProject context getProject task setNamespace uri task setQName qname task setTaskType ProjectHelper genComponentName task getNamespace tag task setTaskName qname Location location new Location context getLocator getSystemId context getLocator getLineNumber context getLocator getColumnNumber task setLocation location task setOwningTarget context getCurrentTarget context configureId task attrs if parent null UnknownElement parent addChild task else context getCurrentTarget addTask task RuntimeConfigurable wrapper new RuntimeConfigurable task task getTaskName for int attrs getLength String attrUri attrs getURI if attrUri null attrUri equals attrUri equals uri String name attrs getLocalName String value attrs getValue if name equals int index value indexOf if index String prefix value substring index String mappedUri context getPrefixMapping prefix if mappedUri null throw new BuildException prefix value ProjectHelper genComponentName mappedUri value substring index wrapper setAttribute name value if parentWrapper null parentWrapper addChild wrapper context pushWrapper wrapper public void characters char buf int start int count AntXMLContext context throws SAXParseException RuntimeConfigurable wrapper context currentWrapper wrapper addText buf start count public AntHandler onStartChild String uri String tag String qname Attributes attrs AntXMLContext context throws SAXParseException return ProjectHelper2 elementHandler public void onEndElement String uri String tag AntXMLContext context context popWrapper', 'bug': '1'}
{'sequence': 'public class SubAnt extends Task private Path buildpath private String target null private String antfile private File genericantfile null private boolean inheritAll false private boolean inheritRefs false private boolean failOnError true private String output null private Vector properties new Vector private Vector references new Vector private Vector propertySets new Vector public void execute if buildpath null throw new BuildException final String filenames buildpath list final int count filenames length if count log Project MSG_WARN return BuildException buildException null for int count File file null Throwable thrownException null try File directory null file new File filenames if file isDirectory if genericantfile null directory file file genericantfile else file new File file antfile execute file directory catch RuntimeException ex if getProject isKeepGoingMode thrownException ex catch Throwable ex if getProject isKeepGoingMode throw new BuildException ex thrownException ex if thrownException null if thrownException instanceof BuildException log file thrownException getMessage Project MSG_ERR if buildException null buildException BuildException thrownException else log file thrownException getMessage Project MSG_ERR thrownException printStackTrace System err if buildException null buildException new BuildException thrownException if buildException null throw buildException private void execute File file File directory throws BuildException if file exists file isDirectory file canRead String msg file if failOnError throw new BuildException msg log msg Project MSG_WARN return Ant ant createAntTask directory String antfilename null try antfilename file getCanonicalPath catch IOException throw new BuildException ant setAntfile antfilename try ant execute catch BuildException if failOnError throw log target antfilename getMessage Project MSG_WARN public void setAntfile String antfile this antfile antfile public void setGenericAntfile File afile this genericantfile afile public void setFailonerror boolean failOnError this failOnError failOnError public void setTarget String target this target target public void setOutput String this output public void setInheritall boolean this inheritAll public void setInheritrefs boolean this inheritRefs public void addProperty Property properties addElement public void addReference Ant Reference references addElement public void addPropertyset PropertySet ps propertySets addElement ps public void addDirset DirSet set getBuildpath addDirset set public void addFileset FileSet set getBuildpath addFileset set public void addFilelist FileList list getBuildpath addFilelist list public void setBuildpath Path getBuildpath append public Path createBuildpath return getBuildpath createPath public Path PathElement createBuildpathElement return getBuildpath createPathElement private Path getBuildpath if buildpath null buildpath new Path getProject return buildpath public void setBuildpathRef Reference createBuildpath setRefid private Ant createAntTask File directory Ant ant Ant getProject createTask ant setOwningTarget getOwningTarget ant setTaskName getTaskName ant init if target null target length ant setTarget target if output null ant setOutput output if directory null ant setDir directory ant setInheritAll inheritAll for Enumeration properties elements hasMoreElements copyProperty ant createProperty Property nextElement for Enumeration propertySets elements hasMoreElements ant addPropertyset PropertySet nextElement ant setInheritRefs inheritRefs for Enumeration references elements hasMoreElements ant addReference Ant Reference nextElement return ant private static void copyProperty Property to Property from to setName from getName if from getValue null to setValue from getValue if from getFile null to setFile from getFile if from getResource null to setResource from getResource if from getPrefix null to setPrefix from getPrefix if from getRefid null to setRefid from getRefid if from getEnvironment null to setEnvironment from getEnvironment if from getClasspath null to setClasspath from getClasspath', 'bug': '0'}
{'sequence': 'public interface FileSelector boolean isSelected File basedir String filename File file throws BuildException', 'bug': '0'}
{'sequence': 'public class Path extends DataType implements Cloneable private Vector elements public static Path systemClasspath new Path null System getProperty public class PathElement private String parts public void setLocation File loc parts new String translateFile loc getAbsolutePath public void setPath String path parts Path translatePath getProject path public String getParts return parts public Path Project String path this createPathElement setPath path public Path Project project setProject project elements new Vector public void setLocation File location throws BuildException if isReference throw tooManyAttributes createPathElement setLocation location public void setPath String path throws BuildException if isReference throw tooManyAttributes createPathElement setPath path public void setRefid Reference throws BuildException if elements isEmpty throw tooManyAttributes elements addElement super setRefid public PathElement createPathElement throws BuildException if isReference throw noChildrenAllowed PathElement pe new PathElement elements addElement pe return pe public void addFileset FileSet fs throws BuildException if isReference throw noChildrenAllowed elements addElement fs setChecked false public void addFilelist FileList fl throws BuildException if isReference throw noChildrenAllowed elements addElement fl setChecked false public void addDirset DirSet dset throws BuildException if isReference throw noChildrenAllowed elements addElement dset setChecked false public void add Path path throws BuildException if isReference throw noChildrenAllowed elements addElement path setChecked false public Path createPath throws BuildException if isReference throw noChildrenAllowed Path new Path getProject elements addElement setChecked false return public void append Path other if other null return String other list for int length if elements indexOf elements addElement public void addExisting Path source addExisting source false public void addExisting Path source boolean tryUserDir String list source list File userDir tryUserDir new File System getProperty null for int list length File null if getProject null getProject resolveFile list else new File list if tryUserDir exists new File userDir list if exists setLocation else log Project MSG_VERBOSE public String list if isChecked Stack stk new Stack stk push this dieOnCircularReference stk getProject Vector result new Vector elements size for int elements size Object elements elementAt if instanceof Reference Reference Reference getReferencedObject getProject if instanceof Path String msg getRefId throw new BuildException msg if instanceof String addUnlessPresent result String else if instanceof PathElement String parts PathElement getParts if parts null throw new BuildException for int parts length addUnlessPresent result parts else if instanceof Path Path Path if getProject null setProject getProject String parts list for int parts length addUnlessPresent result parts else if instanceof DirSet DirSet dset DirSet DirectoryScanner ds dset getDirectoryScanner getProject String ds getIncludedDirectories File dir dset getDir getProject addUnlessPresent result dir else if instanceof FileSet FileSet fs FileSet DirectoryScanner ds fs getDirectoryScanner getProject String ds getIncludedFiles File dir fs getDir getProject addUnlessPresent result dir else if instanceof FileList FileList fl FileList String fl getFiles getProject File dir fl getDir getProject addUnlessPresent result dir String res new String result size result copyInto res return res public String toString final String list list if list length return final StringBuffer result new StringBuffer list toString for int list length result append File pathSeparatorChar result append list return result toString public static String translatePath Project project String source final Vector result new Vector if source null return new String PathTokenizer tok new PathTokenizer source StringBuffer element new StringBuffer while tok hasMoreTokens String pathElement tok nextToken try element append resolveFile project pathElement catch BuildException project log pathElement Project MSG_VERBOSE for int element length translateFileSep element result addElement element toString element new StringBuffer String res new String result size result copyInto res return res public static String translateFile String source if source null return final StringBuffer result new StringBuffer source for int result length translateFileSep result return result toString protected static boolean translateFileSep StringBuffer buffer int pos if buffer charAt pos buffer charAt pos buffer setCharAt pos File separatorChar return true return false public int size return list length public Object clone try Path Path super clone elements Vector elements clone return catch CloneNotSupportedException throw new BuildException protected void dieOnCircularReference Stack stk Project throws BuildException if isChecked return Enumeration elements elements while hasMoreElements Object nextElement if instanceof Reference Reference getReferencedObject if instanceof DataType if stk contains throw circularReference else stk push DataType dieOnCircularReference stk stk pop setChecked true private static String resolveFile Project project String relativeName if project null File project resolveFile relativeName return getAbsolutePath return relativeName private static void addUnlessPresent Vector String if indexOf addElement private static void addUnlessPresent Vector File dir String for int length File new File dir String absolutePath getAbsolutePath addUnlessPresent translateFile absolutePath public Path concatSystemClasspath return concatSystemClasspath public Path concatSystemClasspath String defValue Path result new Path getProject String order defValue if getProject null String getProject getProperty if null order if order equals result addExisting Path systemClasspath true else if order equals result addExisting Path systemClasspath true result addExisting this else if order equals result addExisting this else if order equals log order Project MSG_WARN result addExisting this result addExisting Path systemClasspath true return result public void addJavaRuntime if equals System getProperty File kaffeShare new File System getProperty File separator File separator if kaffeShare isDirectory FileSet kaffeJarFiles new FileSet kaffeJarFiles setDir kaffeShare kaffeJarFiles setIncludes addFileset kaffeJarFiles if System getProperty toLowerCase Locale US indexOf FileSet msZipFiles new FileSet msZipFiles setDir new File System getProperty File separator msZipFiles setIncludes addFileset msZipFiles else if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 addExisting new Path null System getProperty File separator File separator else addExisting new Path null System getProperty File separator File separator addExisting new Path null System getProperty File separator File separator File separator String secJars for int secJars length addExisting new Path null System getProperty File separator File separator secJars addExisting new Path null System getProperty File separator File separator File separator secJars String ibmJars for int ibmJars length addExisting new Path null System getProperty File separator File separator ibmJars addExisting new Path null System getProperty File separator File separator File separator addExisting new Path null System getProperty File separator File separator File separator public void addExtdirs Path extdirs if extdirs null String extProp System getProperty if extProp null extdirs new Path getProject extProp else return String dirs extdirs list for int dirs length File dir getProject resolveFile dirs if dir exists dir isDirectory FileSet fs new FileSet fs setDir dir fs setIncludes addFileset fs', 'bug': '0'}
{'sequence': 'public final class StripLineComments extends BaseParamFilterReader implements ChainableReader private static final String COMMENTS_KEY private Vector comments new Vector private String line null public StripLineComments super public StripLineComments final Reader in super in public final int read throws IOException if getInitialized initialize setInitialized true int ch if line null ch line charAt if line length line null else line line substring else line readLine final int commentsSize comments size while line null for int commentsSize String comment String comments elementAt if line startsWith comment line null break if line null line readLine else break if line null return read return ch public final void addConfiguredComment final Comment comment comments addElement comment getValue private void setComments final Vector comments this comments comments private final Vector getComments return comments public final Reader chain final Reader rdr StripLineComments newFilter new StripLineComments rdr newFilter setComments getComments newFilter setInitialized true return newFilter private final void initialize Parameter params getParameters if params null for int params length if COMMENTS_KEY equals params getType comments addElement params getValue public static class Comment private String value public final void setValue String comment value comment public final String getValue return value', 'bug': '0'}
{'sequence': 'public class Sequential extends Task implements TaskContainer private Vector nestedTasks new Vector public void addTask Task nestedTask nestedTasks addElement nestedTask public void execute throws BuildException for Enumeration nestedTasks elements hasMoreElements Task nestedTask Task nextElement nestedTask perform', 'bug': '0'}
{'sequence': 'public final class TaskLogger private Task m_task public TaskLogger final Task task this m_task task public void info final String message m_task log message Project MSG_INFO public void error final String message m_task log message Project MSG_ERR public void warning final String message m_task log message Project MSG_WARN public void verbose final String message m_task log message Project MSG_VERBOSE public void debug final String message m_task log message Project MSG_DEBUG', 'bug': '0'}
{'sequence': 'public class Gcj extends DefaultCompilerAdapter public boolean execute throws BuildException Commandline cmd attributes log Project MSG_VERBOSE cmd setupGCJCommand int firstFileName cmd size logAndAddFilesToCompile cmd return executeExternalCompile cmd getCommandline firstFileName protected Commandline setupGCJCommand Commandline cmd new Commandline Path classpath new Path project if bootclasspath null classpath append bootclasspath classpath addExtdirs extdirs if bootclasspath null bootclasspath size includeJavaRuntime true classpath append getCompileClasspath if compileSourcepath null classpath append compileSourcepath else classpath append src String exec getJavac getExecutable cmd setExecutable exec null exec if destDir null cmd createArgument setValue cmd createArgument setFile destDir if destDir mkdirs throw new BuildException cmd createArgument setValue cmd createArgument setPath classpath if encoding null cmd createArgument setValue encoding if debug cmd createArgument setValue if optimize cmd createArgument setValue cmd createArgument setValue addCurrentCompilerArgs cmd return cmd', 'bug': '1'}
{'sequence': 'public class SelectSelector extends BaseSelectorContainer private String ifProperty private String unlessProperty public SelectSelector public String toString StringBuffer buf new StringBuffer if hasSelectors buf append if ifProperty null buf append buf append ifProperty if unlessProperty null buf append buf append unlessProperty buf append buf append super toString buf append return buf toString private SelectSelector getRef Object getCheckedRef this getClass return SelectSelector public boolean hasSelectors if isReference return getRef hasSelectors return super hasSelectors public int selectorCount if isReference return getRef selectorCount return super selectorCount public FileSelector getSelectors Project if isReference return getRef getSelectors return super getSelectors public Enumeration selectorElements if isReference return getRef selectorElements return super selectorElements public void appendSelector FileSelector selector if isReference throw noChildrenAllowed super appendSelector selector public void verifySettings int cnt selectorCount if cnt cnt setError public boolean passesConditions if ifProperty null getProject getProperty ifProperty null return false else if unlessProperty null getProject getProperty unlessProperty null return false return true public void setIf String ifProperty this ifProperty ifProperty public void setUnless String unlessProperty this unlessProperty unlessProperty public boolean isSelected File basedir String filename File file validate if passesConditions return false Enumeration selectorElements if hasMoreElements return true FileSelector FileSelector nextElement return isSelected basedir filename file', 'bug': '0'}
{'sequence': 'public class FilenameSelector extends BaseExtendSelector private String pattern null private boolean casesensitive true private boolean negated false public static final String NAME_KEY public static final String CASE_KEY public static final String NEGATE_KEY public FilenameSelector public String toString StringBuffer buf new StringBuffer buf append pattern buf append if negated buf append else buf append buf append if casesensitive buf append else buf append buf append return buf toString public void setName String pattern pattern pattern replace File separatorChar replace File separatorChar if pattern endsWith File separator pattern this pattern pattern public void setCasesensitive boolean casesensitive this casesensitive casesensitive public void setNegate boolean negated this negated negated public void setParameters Parameter parameters super setParameters parameters if parameters null for int parameters length String paramname parameters getName if NAME_KEY equalsIgnoreCase paramname setName parameters getValue else if CASE_KEY equalsIgnoreCase paramname setCasesensitive Project toBoolean parameters getValue else if NEGATE_KEY equalsIgnoreCase paramname setNegate Project toBoolean parameters getValue else setError paramname public void verifySettings if pattern null setError public boolean isSelected File basedir String filename File file validate return SelectorUtils matchPath pattern filename casesensitive negated', 'bug': '0'}
{'sequence': 'public class TypeSelector extends BaseExtendSelector private String type null public static final String TYPE_KEY public TypeSelector public String toString StringBuffer buf new StringBuffer buf append type buf append return buf toString public void setType FileType fileTypes this type fileTypes getValue public void setParameters Parameter parameters super setParameters parameters if parameters null for int parameters length String paramname parameters getName if TYPE_KEY equalsIgnoreCase paramname FileType type new FileType type setValue parameters getValue setType type else setError paramname public void verifySettings if type null setError public boolean isSelected File basedir String filename File file validate if file isDirectory return type equals FileType DIR else return type equals FileType FILE public static class FileType extends EnumeratedAttribute public static final String FILE public static final String DIR public String getValues return new String FILE DIR', 'bug': '0'}
{'sequence': 'public class GUnzip extends Unpack private static final String DEFAULT_EXTENSION protected String getDefaultExtension return DEFAULT_EXTENSION protected void extract if source lastModified dest lastModified log source getAbsolutePath dest getAbsolutePath FileOutputStream out null GZIPInputStream zIn null FileInputStream fis null try out new FileOutputStream dest fis new FileInputStream source zIn new GZIPInputStream fis byte buffer new byte int count do out write buffer count count zIn read buffer buffer length while count catch IOException ioe String msg ioe getMessage throw new BuildException msg ioe getLocation finally if fis null try fis close catch IOException ioex if out null try out close catch IOException ioex if zIn null try zIn close catch IOException ioex', 'bug': '0'}
{'sequence': 'public class Basename extends Task private File file private String property private String suffix public void setFile File file this file file public void setProperty String property this property property public void setSuffix String suffix this suffix suffix public void execute throws BuildException if property null throw new BuildException getLocation if file null throw new BuildException getLocation String value file getName if suffix null value endsWith suffix int pos value length suffix length if pos suffix charAt value charAt pos pos value value substring pos getProject setNewProperty property value', 'bug': '0'}
{'sequence': 'public interface SelectorScanner void setSelectors FileSelector selectors String getDeselectedDirectories String getDeselectedFiles', 'bug': '0'}
{'sequence': 'public class KeepAliveOutputStream extends FilterOutputStream public KeepAliveOutputStream OutputStream out super out public void close throws IOException', 'bug': '0'}
{'sequence': 'public class PathTokenizer private StringTokenizer tokenizer private String lookahead null private boolean onNetWare Os isFamily private boolean dosStyleFilesystem public PathTokenizer String path if onNetWare tokenizer new StringTokenizer path true else tokenizer new StringTokenizer path false dosStyleFilesystem File pathSeparatorChar public boolean hasMoreTokens if lookahead null return true return tokenizer hasMoreTokens public String nextToken throws NoSuchElementException String token null if lookahead null token lookahead lookahead null else token tokenizer nextToken trim if onNetWare if token length Character isLetter token charAt dosStyleFilesystem tokenizer hasMoreTokens String nextToken tokenizer nextToken trim if nextToken startsWith nextToken startsWith token nextToken else lookahead nextToken else if token equals File pathSeparator token equals token tokenizer nextToken trim if tokenizer hasMoreTokens String nextToken tokenizer nextToken trim if nextToken equals File pathSeparator if nextToken equals if token startsWith token startsWith token startsWith token startsWith String oneMore tokenizer nextToken trim if oneMore equals File pathSeparator token oneMore else token lookahead oneMore else lookahead nextToken return token', 'bug': '0'}
{'sequence': 'public abstract class Definer extends DefBase private String name private String classname private File file private String resource private int format Format PROPERTIES private boolean definerSet false private int onError OnError FAIL private String adapter private String adaptTo private Class adapterClass private Class adaptToClass public static class OnError extends EnumeratedAttribute public static final int FAIL REPORT IGNORE public OnError super public OnError String value setValue value public String getValues return new String public static class Format extends EnumeratedAttribute public static final int PROPERTIES XML public String getValues return new String public void setOnError OnError onError this onError onError getIndex public void setFormat Format format this format format getIndex public String getName return name public File getFile return file public String getResource return resource public void execute throws BuildException ClassLoader al createLoader if definerSet throw new BuildException getTaskName getLocation if name null if classname null throw new BuildException getTaskName getLocation addDefinition al name classname else if classname null String msg throw new BuildException msg getLocation if file null final URL url fileToURL urls new Enumeration private boolean more true public boolean hasMoreElements return more public Object nextElement throws NoSuchElementException if more more false return url else throw new NoSuchElementException else urls resourceToURLs al while urls hasMoreElements URL url URL urls nextElement int format this format if url toString toLowerCase Locale US endsWith format Format XML if format Format PROPERTIES loadProperties al url break else loadAntlib al url private URL fileToURL if file exists log file Project MSG_WARN return null if file isFile log file Project MSG_WARN return null try return file toURL catch Exception ex log file ex toString Project MSG_WARN return null Enumeration ret try ret classLoader getResources resource catch IOException throw new BuildException resource getLocation if ret hasMoreElements if onError OnError IGNORE log resource Project MSG_WARN return ret protected void loadProperties ClassLoader al URL url InputStream is null try is url openStream if is null log url Project MSG_WARN return Properties props new Properties props load is Enumeration keys props keys while keys hasMoreElements name String keys nextElement classname props getProperty name addDefinition al name classname catch IOException ex throw new BuildException ex getLocation finally if is null try is close catch IOException private void loadAntlib ClassLoader classLoader URL url try Antlib antlib Antlib createAntlib getProject url getURI antlib setClassLoader classLoader antlib setURI getURI antlib perform catch BuildException ex throw ProjectHelper addLocationToBuildException ex getLocation public void setFile File file if definerSet tooManyDefinitions definerSet true this file file public void setResource String res if definerSet tooManyDefinitions definerSet true this resource res public void setName String name if definerSet tooManyDefinitions definerSet true this name name public String getClassname return classname public void setClassname String classname this classname classname public void setAdapter String adapter this adapter adapter protected void setAdapterClass Class adapterClass this adapterClass adapterClass public void setAdaptTo String adaptTo this adaptTo adaptTo protected void setAdaptToClass Class adaptToClass this adaptToClass adaptToClass protected void addDefinition ClassLoader al String name String classname throws BuildException Class cl null try try name ProjectHelper genComponentName getURI name if onError OnError IGNORE cl Class forName classname true al if adapter null adapterClass Class forName adapter true al if adaptTo null adaptToClass Class forName adaptTo true al AntTypeDefinition def new AntTypeDefinition def setName name def setClassName classname def setClass cl def setAdapterClass adapterClass def setAdaptToClass adaptToClass def setClassLoader al if cl null def checkClass getProject ComponentHelper getComponentHelper getProject addDataTypeDefinition def catch ClassNotFoundException cnfe String msg getTaskName classname throw new BuildException msg cnfe getLocation catch NoClassDefFoundError ncdfe String msg getTaskName classname ncdfe getMessage throw new BuildException msg ncdfe getLocation catch BuildException ex switch onError case OnError FAIL throw ex case OnError REPORT log ex getLocation ex getMessage Project MSG_WARN break default log ex getLocation ex getMessage Project MSG_DEBUG private void tooManyDefinitions throw new BuildException getLocation', 'bug': '1'}
{'sequence': 'public interface InputHandler void handleInput InputRequest request throws org apache tools ant BuildException', 'bug': '0'}
{'sequence': 'public class IsReference extends ProjectComponent implements Condition private Reference ref private String type public void setRefid Reference ref public void setType String type this type type public boolean eval throws BuildException if ref null throw new BuildException Object getProject getReference ref getRefId if null return false else if type null return true else Class typeClass Class getProject getDataTypeDefinitions get type if typeClass null typeClass Class getProject getTaskDefinitions get type if typeClass null return false return typeClass isAssignableFrom getClass', 'bug': '0'}
{'sequence': 'public class BUnzip2 extends Unpack private static final String DEFAULT_EXTENSION protected String getDefaultExtension return DEFAULT_EXTENSION protected void extract if source lastModified dest lastModified log source getAbsolutePath dest getAbsolutePath FileOutputStream out null CBZip2InputStream zIn null FileInputStream fis null BufferedInputStream bis null try out new FileOutputStream dest fis new FileInputStream source bis new BufferedInputStream fis int bis read if throw new BuildException getLocation bis read if throw new BuildException getLocation zIn new CBZip2InputStream bis byte buffer new byte int count do out write buffer count count zIn read buffer buffer length while count catch IOException ioe String msg ioe getMessage throw new BuildException msg ioe getLocation finally if bis null try bis close catch IOException ioex if fis null try fis close catch IOException ioex if out null try out close catch IOException ioex if zIn null try zIn close catch IOException ioex', 'bug': '0'}
{'sequence': 'public class ProjectHelper public static final String ANT_CORE_URI public static final String ANT_CURRENT_URI public static final String ANTLIB_URI public static final String HELPER_PROPERTY public static final String SERVICE_ID public static void configureProject Project project File buildFile throws BuildException ProjectHelper helper ProjectHelper getProjectHelper project addReference helper helper parse project buildFile public ProjectHelper public Vector getImportStack public void parse Project project Object source throws BuildException throw new BuildException this getClass getName public static ProjectHelper getProjectHelper throws BuildException ProjectHelper helper null String helperClass System getProperty HELPER_PROPERTY try if helperClass null helper newHelper helperClass catch SecurityException System out println helperClass HELPER_PROPERTY if helper null try ClassLoader classLoader LoaderUtils getContextClassLoader InputStream is null if classLoader null is classLoader getResourceAsStream SERVICE_ID if is null is ClassLoader getSystemResourceAsStream SERVICE_ID if is null InputStreamReader isr try isr new InputStreamReader is catch java io UnsupportedEncodingException isr new InputStreamReader is BufferedReader rd new BufferedReader isr String helperClassName rd readLine rd close if helperClassName null equals helperClassName helper newHelper helperClassName catch Exception ex System out println SERVICE_ID if helper null return helper else try return new ProjectHelper2 catch Throwable String message getClass getName getMessage throw new BuildException message private static ProjectHelper newHelper String helperClass throws BuildException ClassLoader classLoader LoaderUtils getContextClassLoader try Class clazz null if classLoader null try clazz classLoader loadClass helperClass catch ClassNotFoundException ex if clazz null clazz Class forName helperClass return ProjectHelper clazz newInstance catch Exception throw new BuildException public static ClassLoader getContextClassLoader if LoaderUtils isContextLoaderAvailable return null return LoaderUtils getContextClassLoader public static void configure Object target AttributeList attrs Project project throws BuildException if target instanceof TypeAdapter target TypeAdapter target getProxy IntrospectionHelper ih IntrospectionHelper getHelper target getClass project addBuildListener ih for int attrs getLength String value replaceProperties project attrs getValue project getProperties try ih setAttribute project target attrs getName toLowerCase Locale US value catch BuildException be if attrs getName equals throw be public static void addText Project project Object target char buf int start int count throws BuildException addText project target new String buf start count public static void addText Project project Object target String text throws BuildException if text null return if target instanceof TypeAdapter target TypeAdapter target getProxy IntrospectionHelper getHelper target getClass addText project target text public static void storeChild Project project Object parent Object child String tag IntrospectionHelper ih IntrospectionHelper getHelper parent getClass ih storeElement project parent child tag public static String replaceProperties Project project String value throws BuildException return project replaceProperties value public static String replaceProperties Project project String value Hashtable keys throws BuildException PropertyHelper ph PropertyHelper getPropertyHelper project return ph replaceProperties null value keys public static void parsePropertyString String value Vector fragments Vector propertyRefs throws BuildException PropertyHelper parsePropertyStringDefault value fragments propertyRefs public static String genComponentName String uri String name if uri null uri equals uri equals ANT_CORE_URI return name return uri name public static String extractUriFromComponentName String componentName if componentName null return int index componentName lastIndexOf if index return return componentName substring index public static String extractNameFromComponentName String componentName int index componentName lastIndexOf if index return componentName return componentName substring index public static BuildException addLocationToBuildException BuildException ex Location newLocation if ex getLocation null ex getMessage null return ex String errorMessage System getProperty ex getLocation toString ex getMessage if newLocation null return new BuildException errorMessage else return new BuildException errorMessage newLocation', 'bug': '1'}
{'sequence': 'public class KeySubst extends Task private File source null private File dest null private String sep private Hashtable replacements new Hashtable public void execute throws BuildException log log if source null dest null log return BufferedReader br null BufferedWriter bw null try br new BufferedReader new FileReader source dest delete bw new BufferedWriter new FileWriter dest String line null String newline null line br readLine while line null if line length bw newLine else newline KeySubst replace line replacements bw write newline bw newLine line br readLine bw flush catch IOException ioe ioe printStackTrace finally if bw null try bw close catch IOException if br null try br close catch IOException public void setSrc File this source public void setDest File dest this dest dest public void setSep String sep this sep sep public void setKeys String keys if keys null keys length StringTokenizer tok new StringTokenizer keys this sep false while tok hasMoreTokens String token tok nextToken trim StringTokenizer itok new StringTokenizer token false String name itok nextToken String value itok nextToken replacements put name value public static void main String args try Hashtable hash new Hashtable hash put hash put System out println KeySubst replace hash catch Exception printStackTrace public static String replace String origString Hashtable keys throws BuildException StringBuffer finalString new StringBuffer int index int String key null while index origString indexOf key origString substring index origString indexOf index finalString append origString substring index if keys containsKey key finalString append keys get key else finalString append finalString append key finalString append index key length finalString append origString substring return finalString toString', 'bug': '0'}
{'sequence': 'public class PropertyHelper private Project project private PropertyHelper next private Hashtable properties new Hashtable private Hashtable userProperties new Hashtable private Hashtable inheritedProperties new Hashtable protected PropertyHelper public void setProject Project this project public void setNext PropertyHelper next this next next public PropertyHelper getNext return next public static synchronized PropertyHelper getPropertyHelper Project project PropertyHelper helper PropertyHelper project getReference if helper null return helper helper new PropertyHelper helper setProject project project addReference helper return helper public boolean setPropertyHook String ns String name Object value boolean inherited boolean user boolean isNew if getNext null boolean subst getNext setPropertyHook ns name value inherited user isNew if subst return true return false public Object getPropertyHook String ns String name boolean user if getNext null Object getNext getPropertyHook ns name user if null return if name startsWith name name substring length Object project getReference name if null return null return toString return null public void parsePropertyString String value Vector fragments Vector propertyRefs throws BuildException parsePropertyStringDefault value fragments propertyRefs public String replaceProperties String ns String value Hashtable keys throws BuildException if value null return null Vector fragments new Vector Vector propertyRefs new Vector parsePropertyString value fragments propertyRefs StringBuffer sb new StringBuffer Enumeration fragments elements Enumeration propertyRefs elements while hasMoreElements String fragment String nextElement if fragment null String propertyName String nextElement Object replacement null if keys null replacement keys get propertyName if replacement null replacement getProperty ns propertyName if replacement null project log propertyName Project MSG_VERBOSE fragment replacement null replacement toString propertyName sb append fragment return sb toString public synchronized boolean setProperty String ns String name Object value boolean verbose if null userProperties get name if verbose project log name Project MSG_VERBOSE return false boolean done setPropertyHook ns name value false false false if done return true if null properties get name verbose project log name Project MSG_VERBOSE if verbose project log name value Project MSG_DEBUG properties put name value return true public synchronized void setNewProperty String ns String name Object value if null properties get name project log name Project MSG_VERBOSE return boolean done setPropertyHook ns name value false false true if done return project log name value Project MSG_DEBUG if name null value null properties put name value public synchronized void setUserProperty String ns String name Object value project log name value Project MSG_DEBUG userProperties put name value boolean done setPropertyHook ns name value false true false if done return properties put name value public synchronized void setInheritedProperty String ns String name Object value inheritedProperties put name value project log name value Project MSG_DEBUG userProperties put name value boolean done setPropertyHook ns name value true false false if done return properties put name value public synchronized Object getProperty String ns String name if name null return null Object getPropertyHook ns name false if null return return properties get name public synchronized Object getUserProperty String ns String name if name null return null Object getPropertyHook ns name true if null return return userProperties get name public Hashtable getProperties Hashtable propertiesCopy new Hashtable Enumeration properties keys while hasMoreElements Object name nextElement Object value properties get name propertiesCopy put name value return propertiesCopy public Hashtable getUserProperties Hashtable propertiesCopy new Hashtable Enumeration userProperties keys while hasMoreElements Object name nextElement Object value properties get name propertiesCopy put name value return propertiesCopy public void copyInheritedProperties Project other Enumeration inheritedProperties keys while hasMoreElements String arg nextElement toString if other getUserProperty arg null continue Object value inheritedProperties get arg other setInheritedProperty arg value toString public void copyUserProperties Project other Enumeration userProperties keys while hasMoreElements Object arg nextElement if inheritedProperties containsKey arg continue Object value userProperties get arg other setUserProperty arg toString value toString static void parsePropertyStringDefault String value Vector fragments Vector propertyRefs throws BuildException int prev int pos while pos value indexOf prev if pos fragments addElement value substring prev pos if pos value length fragments addElement prev pos else if value charAt pos if value charAt pos fragments addElement prev pos else fragments addElement value substring pos pos prev pos else int endName value indexOf pos if endName throw new BuildException value String propertyName value substring pos endName fragments addElement null propertyRefs addElement propertyName prev endName if prev value length fragments addElement value substring prev', 'bug': '1'}
{'sequence': 'public class CommandlineJava implements Cloneable private Commandline vmCommand new Commandline private Commandline javaCommand new Commandline private SysProperties sysProperties new SysProperties private Path classpath null private Path bootclasspath null private String vmVersion private String maxMemory null private Assertions assertions null private boolean executeJar false public static class SysProperties extends Environment implements Cloneable Properties sys null private Vector propertySets new Vector public String getVariables throws BuildException List definitions new LinkedList ListIterator list definitions listIterator addDefinitionsToList list if definitions size return null else return String definitions toArray new String public void addDefinitionsToList ListIterator listIt String props super getVariables if props null for int props length listIt add props Properties propertySets mergePropertySets for Enumeration propertySets keys hasMoreElements String key String nextElement String value propertySets getProperty key listIt add key value public int size Properties mergePropertySets return variables size size public void setSystem throws BuildException try sys System getProperties Properties new Properties for Enumeration sys keys hasMoreElements Object nextElement put sys get putAll mergePropertySets for Enumeration variables elements hasMoreElements Environment Variable Environment Variable nextElement put getKey getValue System setProperties catch SecurityException throw new BuildException public void restoreSystem throws BuildException if sys null throw new BuildException try System setProperties sys sys null catch SecurityException throw new BuildException public Object clone try SysProperties SysProperties super clone variables Vector variables clone propertySets Vector propertySets clone return catch CloneNotSupportedException return null public void addSyspropertyset PropertySet ps propertySets addElement ps private Properties mergePropertySets Properties new Properties for Enumeration propertySets elements hasMoreElements PropertySet ps PropertySet nextElement putAll ps getProperties return public CommandlineJava setVm JavaEnvUtils getJreExecutable setVmversion JavaEnvUtils getJavaVersion public Commandline Argument createArgument return javaCommand createArgument public Commandline Argument createVmArgument return vmCommand createArgument public void addSysproperty Environment Variable sysp sysProperties addVariable sysp public void addSyspropertyset PropertySet sysp sysProperties addSyspropertyset sysp public void setVm String vm vmCommand setExecutable vm public void setVmversion String value vmVersion value public Assertions getAssertions return assertions public void setAssertions Assertions assertions this assertions assertions public void setJar String jarpathname javaCommand setExecutable jarpathname executeJar true public String getJar if executeJar return javaCommand getExecutable return null public void setClassname String classname javaCommand setExecutable classname executeJar false public String getClassname if executeJar return javaCommand getExecutable return null public Path createClasspath Project if classpath null classpath new Path return classpath public Path createBootclasspath Project if bootclasspath null bootclasspath new Path return bootclasspath public String getVmversion return vmVersion public String getCommandline List commands new LinkedList final ListIterator listIterator commands listIterator addCommandsToList listIterator return String commands toArray new String private void addCommandsToList final ListIterator listIterator getActualVMCommand addCommandToList listIterator sysProperties addDefinitionsToList listIterator if haveBootclasspath true listIterator add bootclasspath toString if haveClasspath listIterator add listIterator add classpath concatSystemClasspath toString if getAssertions null getAssertions applyAssertions this if executeJar listIterator add javaCommand addCommandToList listIterator public void setMaxmemory String max this maxMemory max public String toString return Commandline toString getCommandline public String describeCommand return Commandline describeCommand getCommandline public String describeJavaCommand return Commandline describeCommand getJavaCommand private Commandline getActualVMCommand Commandline actualVMCommand Commandline vmCommand clone if maxMemory null if vmVersion startsWith actualVMCommand createArgument setValue maxMemory else actualVMCommand createArgument setValue maxMemory return actualVMCommand public int size int size getActualVMCommand size javaCommand size sysProperties size if haveClasspath size if haveBootclasspath true size if executeJar size if getAssertions null size getAssertions size return size public Commandline getJavaCommand return javaCommand public Commandline getVmCommand return getActualVMCommand public Path getClasspath return classpath public Path getBootclasspath return bootclasspath public void setSystemProperties throws BuildException sysProperties setSystem public void restoreSystemProperties throws BuildException sysProperties restoreSystem public SysProperties getSystemProperties return sysProperties public Object clone try CommandlineJava CommandlineJava super clone vmCommand Commandline vmCommand clone javaCommand Commandline javaCommand clone sysProperties SysProperties sysProperties clone if classpath null classpath Path classpath clone if bootclasspath null bootclasspath Path bootclasspath clone if assertions null assertions Assertions assertions clone return catch CloneNotSupportedException throw new BuildException public void clearJavaArgs javaCommand clearArgs private boolean haveClasspath Path fullClasspath classpath null classpath concatSystemClasspath null return fullClasspath null fullClasspath toString trim length private boolean haveBootclasspath boolean log if bootclasspath null bootclasspath toString trim length if bootclasspath toString equals bootclasspath concatSystemClasspath toString if log System out println else if vmVersion startsWith if log System out println else return true return false', 'bug': '1'}
{'sequence': 'public final class TailFilter extends BaseParamFilterReader implements ChainableReader private static final String LINES_KEY private static final String SKIP_KEY private static final int DEFAULT_NUM_LINES private long lines DEFAULT_NUM_LINES private long skip private boolean completedReadAhead false private LineTokenizer lineTokenizer null private String line null private int linePos private LinkedList lineList new LinkedList public TailFilter super public TailFilter final Reader in super in lineTokenizer new LineTokenizer lineTokenizer setIncludeDelims true public final int read throws IOException if getInitialized initialize setInitialized true while line null line length line lineTokenizer getToken in line tailFilter line if line null return linePos int ch line charAt linePos linePos if linePos line length line null return ch public final void setLines final long lines this lines lines private final long getLines return lines public final void setSkip final long skip this skip skip private final long getSkip return skip public final Reader chain final Reader rdr TailFilter newFilter new TailFilter rdr newFilter setLines getLines newFilter setSkip getSkip newFilter setInitialized true return newFilter private final void initialize Parameter params getParameters if params null for int params length if LINES_KEY equals params getName setLines new Long params getValue longValue continue if SKIP_KEY equals params getName skip new Long params getValue longValue continue private String tailFilter String line if completedReadAhead if line null lineList add line if lines if lineList size skip return String lineList removeFirst else long linesToKeep lines skip skip if linesToKeep lineList size lineList removeFirst return completedReadAhead true if skip for int skip lineList removeLast if lines while lineList size lines lineList removeFirst if lineList size return String lineList removeFirst return null', 'bug': '0'}
{'sequence': 'public final class ExpandProperties extends BaseFilterReader implements ChainableReader private String queuedData null public ExpandProperties super public ExpandProperties final Reader in super in public final int read throws IOException int ch if queuedData null queuedData length queuedData null if queuedData null ch queuedData charAt queuedData queuedData substring if queuedData length queuedData null else queuedData readFully if queuedData null ch else Project project getProject queuedData project replaceProperties queuedData return read return ch public final Reader chain final Reader rdr ExpandProperties newFilter new ExpandProperties rdr newFilter setProject getProject return newFilter', 'bug': '0'}
{'sequence': 'public class DirectoryScanner implements FileScanner SelectorScanner ResourceFactory private static final boolean ON_VMS Os isFamily protected static final String DEFAULTEXCLUDES private static Vector defaultExcludes new Vector static resetDefaultExcludes protected File basedir protected String includes protected String excludes protected FileSelector selectors null protected Vector filesIncluded protected Vector filesNotIncluded protected Vector filesExcluded protected Vector dirsIncluded protected Vector dirsNotIncluded protected Vector dirsExcluded protected Vector filesDeselected protected Vector dirsDeselected protected boolean haveSlowResults false protected boolean isCaseSensitive true private boolean followSymlinks true private static final FileUtils fileUtils FileUtils newFileUtils protected boolean everythingIncluded true public DirectoryScanner protected static boolean matchPatternStart String pattern String str return SelectorUtils matchPatternStart pattern str protected static boolean matchPatternStart String pattern String str boolean isCaseSensitive return SelectorUtils matchPatternStart pattern str isCaseSensitive protected static boolean matchPath String pattern String str return SelectorUtils matchPath pattern str protected static boolean matchPath String pattern String str boolean isCaseSensitive return SelectorUtils matchPath pattern str isCaseSensitive public static boolean match String pattern String str return SelectorUtils match pattern str protected static boolean match String pattern String str boolean isCaseSensitive return SelectorUtils match pattern str isCaseSensitive public static String getDefaultExcludes return String defaultExcludes toArray new String defaultExcludes size public static boolean addDefaultExclude String if defaultExcludes indexOf defaultExcludes add return true return false public static boolean removeDefaultExclude String return defaultExcludes remove public static void resetDefaultExcludes defaultExcludes new Vector for int DEFAULTEXCLUDES length defaultExcludes add DEFAULTEXCLUDES public void setBasedir String basedir setBasedir new File basedir replace File separatorChar replace File separatorChar public void setBasedir File basedir this basedir basedir public File getBasedir return basedir public boolean isCaseSensitive return isCaseSensitive public void setCaseSensitive boolean isCaseSensitive this isCaseSensitive isCaseSensitive public boolean isFollowSymlinks return followSymlinks public void setFollowSymlinks boolean followSymlinks this followSymlinks followSymlinks public void setIncludes String includes if includes null this includes null else this includes new String includes length for int includes length String pattern pattern includes replace File separatorChar replace File separatorChar if pattern endsWith File separator pattern this includes pattern public void setExcludes String excludes if excludes null this excludes null else this excludes new String excludes length for int excludes length String pattern pattern excludes replace File separatorChar replace File separatorChar if pattern endsWith File separator pattern this excludes pattern public void setSelectors FileSelector selectors this selectors selectors public boolean isEverythingIncluded return everythingIncluded public void scan throws IllegalStateException if basedir null throw new IllegalStateException if basedir exists throw new IllegalStateException basedir if basedir isDirectory throw new IllegalStateException basedir if includes null includes new String includes if excludes null excludes new String filesIncluded new Vector filesNotIncluded new Vector filesExcluded new Vector filesDeselected new Vector dirsIncluded new Vector dirsNotIncluded new Vector dirsExcluded new Vector dirsDeselected new Vector if isIncluded if isExcluded if isSelected basedir dirsIncluded addElement else dirsDeselected addElement else dirsExcluded addElement else dirsNotIncluded addElement checkIncludePatterns clearCaches private void checkIncludePatterns Hashtable newroots new Hashtable for int icounter icounter includes length icounter String newpattern SelectorUtils rtrimWildcardTokens includes icounter newroots put newpattern includes icounter if newroots containsKey scandir basedir true else Enumeration enum2 newroots keys File canonBase null try canonBase basedir getCanonicalFile catch IOException ex throw new BuildException ex while enum2 hasMoreElements String currentelement String enum2 nextElement String originalpattern String newroots get currentelement File myfile new File basedir currentelement if myfile exists try File canonFile myfile getCanonicalFile String path fileUtils removeLeadingPath canonBase canonFile if path equals currentelement ON_VMS myfile findFile basedir currentelement if myfile null currentelement fileUtils removeLeadingPath basedir myfile catch IOException ex throw new BuildException ex if myfile null myfile exists isCaseSensitive File findFileCaseInsensitive basedir currentelement if exists currentelement fileUtils removeLeadingPath basedir myfile if myfile null myfile exists if followSymlinks isSymlink basedir currentelement continue if myfile isDirectory if isIncluded currentelement currentelement length accountForIncludedDir currentelement myfile true else if currentelement length if currentelement charAt currentelement length File separatorChar currentelement currentelement File separatorChar scandir myfile currentelement true else if isCaseSensitive originalpattern equals currentelement accountForIncludedFile currentelement myfile else if isCaseSensitive originalpattern equalsIgnoreCase currentelement accountForIncludedFile currentelement myfile protected void slowScan if haveSlowResults return String excl new String dirsExcluded size dirsExcluded copyInto excl String notIncl new String dirsNotIncluded size dirsNotIncluded copyInto notIncl for int excl length if couldHoldIncluded excl scandir new File basedir excl excl File separator false for int notIncl length if couldHoldIncluded notIncl scandir new File basedir notIncl notIncl File separator false haveSlowResults true protected void scandir File dir String vpath boolean fast if fast hasBeenScanned vpath return String newfiles dir list if newfiles null throw new BuildException dir getAbsolutePath if followSymlinks Vector noLinks new Vector for int newfiles length try if fileUtils isSymbolicLink dir newfiles String name vpath newfiles File file new File dir newfiles if file isDirectory dirsExcluded addElement name else filesExcluded addElement name else noLinks addElement newfiles catch IOException ioe String msg System err println msg noLinks addElement newfiles newfiles new String noLinks size noLinks copyInto newfiles for int newfiles length String name vpath newfiles File file new File dir newfiles if file isDirectory if isIncluded name accountForIncludedDir name file fast else everythingIncluded false dirsNotIncluded addElement name if fast couldHoldIncluded name scandir file name File separator fast if fast scandir file name File separator fast else if file isFile if isIncluded name accountForIncludedFile name file else everythingIncluded false filesNotIncluded addElement name private void accountForIncludedFile String name File file if filesIncluded contains name filesExcluded contains name filesDeselected contains name if isExcluded name if isSelected name file filesIncluded addElement name else everythingIncluded false filesDeselected addElement name else everythingIncluded false filesExcluded addElement name private void accountForIncludedDir String name File file boolean fast if dirsIncluded contains name dirsExcluded contains name dirsDeselected contains name if isExcluded name if isSelected name file dirsIncluded addElement name if fast scandir file name File separator fast else everythingIncluded false dirsDeselected addElement name if fast couldHoldIncluded name scandir file name File separator fast else everythingIncluded false dirsExcluded addElement name if fast couldHoldIncluded name scandir file name File separator fast protected boolean isIncluded String name for int includes length if matchPath includes name isCaseSensitive return true return false protected boolean couldHoldIncluded String name for int includes length if matchPatternStart includes name isCaseSensitive if isMorePowerfulThanExcludes name includes return true return false private boolean isMorePowerfulThanExcludes String name String includepattern String soughtexclude name File separator for int counter counter excludes length counter if excludes counter equals soughtexclude return false return true protected boolean isExcluded String name for int excludes length if matchPath excludes name isCaseSensitive return true return false protected boolean isSelected String name File file if selectors null for int selectors length if selectors isSelected basedir name file return false return true public String getIncludedFiles String files new String filesIncluded size filesIncluded copyInto files Arrays sort files return files public String getNotIncludedFiles slowScan String files new String filesNotIncluded size filesNotIncluded copyInto files return files public String getExcludedFiles slowScan String files new String filesExcluded size filesExcluded copyInto files return files public String getDeselectedFiles slowScan String files new String filesDeselected size filesDeselected copyInto files return files public String getIncludedDirectories String directories new String dirsIncluded size dirsIncluded copyInto directories Arrays sort directories return directories public String getNotIncludedDirectories slowScan String directories new String dirsNotIncluded size dirsNotIncluded copyInto directories return directories public String getExcludedDirectories slowScan String directories new String dirsExcluded size dirsExcluded copyInto directories return directories public String getDeselectedDirectories slowScan String directories new String dirsDeselected size dirsDeselected copyInto directories return directories public void addDefaultExcludes int excludesLength excludes null excludes length String newExcludes newExcludes new String excludesLength defaultExcludes size if excludesLength System arraycopy excludes newExcludes excludesLength String defaultExcludesTemp getDefaultExcludes for int defaultExcludesTemp length newExcludes excludesLength defaultExcludesTemp replace File separatorChar replace File separatorChar excludes newExcludes public Resource getResource String name File fileUtils resolveFile basedir name return new Resource name exists lastModified isDirectory private Map fileListMap new HashMap private String list File file String files String fileListMap get file if files null files file list if files null fileListMap put file files return files private File findFileCaseInsensitive File base String path File findFileCaseInsensitive base SelectorUtils tokenizePath path return null new File base path private File findFileCaseInsensitive File base Vector pathElements if pathElements size return base else if base isDirectory return null String files list base if files null throw new BuildException base getAbsolutePath String current String pathElements remove for int files length if files equals current base new File base files return findFileCaseInsensitive base pathElements for int files length if files equalsIgnoreCase current base new File base files return findFileCaseInsensitive base pathElements return null private File findFile File base String path return findFile base SelectorUtils tokenizePath path private File findFile File base Vector pathElements if pathElements size return base else if base isDirectory return null String files list base if files null throw new BuildException base getAbsolutePath String current String pathElements remove for int files length if files equals current base new File base files return findFile base pathElements return null private boolean isSymlink File base String path return isSymlink base SelectorUtils tokenizePath path private boolean isSymlink File base Vector pathElements if pathElements size String current String pathElements remove try if fileUtils isSymbolicLink base current return true else base new File base current return isSymlink base pathElements catch IOException ioe String msg System err println msg return false return false private Set scannedDirs new HashSet private boolean hasBeenScanned String vpath return scannedDirs add vpath private void clearCaches fileListMap clear scannedDirs clear', 'bug': '1'}
{'sequence': 'public class PumpStreamHandler implements ExecuteStreamHandler private Thread outputThread private Thread errorThread private Thread inputThread private OutputStream out private OutputStream err private InputStream input public PumpStreamHandler OutputStream out OutputStream err InputStream input this out out this err err this input input public PumpStreamHandler OutputStream out OutputStream err this out err null public PumpStreamHandler OutputStream outAndErr this outAndErr outAndErr public PumpStreamHandler this System out System err public void setProcessOutputStream InputStream is createProcessOutputPump is out public void setProcessErrorStream InputStream is if err null createProcessErrorPump is err public void setProcessInputStream OutputStream os if input null inputThread createPump input os true else try os close catch IOException public void start outputThread start errorThread start if inputThread null inputThread start public void stop try outputThread join catch InterruptedException try errorThread join catch InterruptedException if inputThread null try inputThread join catch InterruptedException try err flush catch IOException try out flush catch IOException protected OutputStream getErr return err protected OutputStream getOut return out protected void createProcessOutputPump InputStream is OutputStream os outputThread createPump is os protected void createProcessErrorPump InputStream is OutputStream os errorThread createPump is os protected Thread createPump InputStream is OutputStream os return createPump is os false protected Thread createPump InputStream is OutputStream os boolean closeWhenExhausted final Thread result new Thread new StreamPumper is os closeWhenExhausted result setDaemon true return result', 'bug': '1'}
{'sequence': 'public class ResourceLocation private String name null private String publicId null private String location null private URL base null public void setPublicId String publicId this publicId publicId public void setLocation String location this location location public void setBase URL base this base base public String getPublicId return publicId public String getLocation return location public URL getBase return base', 'bug': '0'}
{'sequence': 'public class War extends Jar private File deploymentDescriptor private boolean descriptorAdded private static final FileUtils fu FileUtils newFileUtils public War super archiveType emptyBehavior public void setWarfile File warFile setDestFile warFile public void setWebxml File descr deploymentDescriptor descr if deploymentDescriptor exists throw new BuildException deploymentDescriptor ZipFileSet fs new ZipFileSet fs setFile deploymentDescriptor fs setFullpath super addFileset fs public void addLib ZipFileSet fs fs setPrefix super addFileset fs public void addClasses ZipFileSet fs fs setPrefix super addFileset fs public void addWebinf ZipFileSet fs fs setPrefix super addFileset fs protected void initZipOutputStream ZipOutputStream zOut throws IOException BuildException if deploymentDescriptor null isInUpdateMode throw new BuildException getLocation super initZipOutputStream zOut protected void zipFile File file ZipOutputStream zOut String vPath int mode throws IOException if vPath equalsIgnoreCase if deploymentDescriptor null fu fileNameEquals deploymentDescriptor file descriptorAdded log archiveType archiveType Project MSG_WARN else super zipFile file zOut vPath mode descriptorAdded true else super zipFile file zOut vPath mode protected void cleanUp descriptorAdded false super cleanUp', 'bug': '0'}
{'sequence': 'public class MacroDef extends AntlibDefinition private NestedSequential nestedSequential private String name private List attributes new ArrayList private Map elements new HashMap public void setName String name this name name public NestedSequential createSequential if this nestedSequential null throw new BuildException this nestedSequential new NestedSequential return this nestedSequential public static class NestedSequential implements TaskContainer private List nested new ArrayList public void addTask Task task nested add task public List getNested return nested public boolean similar NestedSequential other if nested size other nested size return false for int nested size UnknownElement me UnknownElement nested get UnknownElement UnknownElement other nested get if me similar return false return true public UnknownElement getNestedTask UnknownElement ret new UnknownElement ret setTaskName ret setNamespace ret setQName new RuntimeConfigurable ret for int nestedSequential getNested size UnknownElement UnknownElement nestedSequential getNested get ret addChild ret getWrapper addChild getWrapper return ret public List getAttributes return attributes public Map getElements return elements public static boolean isValidNameCharacter char return Character isLetterOrDigit private static boolean isValidName String name if name length return false for int name length if isValidNameCharacter name charAt return false return true public void addConfiguredAttribute Attribute attribute if attribute getName null throw new BuildException for int attributes size if Attribute attributes get getName equals attribute getName throw new BuildException attribute getName attributes add attribute public void addConfiguredElement TemplateElement element if element getName null throw new BuildException if elements get element getName null throw new BuildException element getName elements put element getName element public void execute if nestedSequential null throw new BuildException if name null throw new BuildException name ProjectHelper genComponentName getURI name MyAntTypeDefinition def new MyAntTypeDefinition this def setName name def setClass MacroInstance class ComponentHelper helper ComponentHelper getComponentHelper getProject helper addDataTypeDefinition def public static class Attribute private String name private String defaultValue public void setName String name if isValidName name throw new BuildException name this name name public String getName return name public void setDefault String defaultValue this defaultValue defaultValue public String getDefault return defaultValue public boolean equals Object obj if obj null return false if obj getClass getClass return false Attribute other Attribute obj if name null if other name null return false else if name equals other name return false if defaultValue null if other defaultValue null return false else if defaultValue equals other defaultValue return false return true public int hashCode return objectHashCode defaultValue objectHashCode name public static class TemplateElement private String name private boolean optional false public void setName String name if isValidName name throw new BuildException name this name name public String getName return name public void setOptional boolean optional this optional optional public boolean isOptional return optional public boolean equals Object obj if obj null return false if obj getClass getClass return false TemplateElement other TemplateElement obj if name null if other name null return false else if name equals other name return false return optional other optional public int hashCode return objectHashCode name optional public boolean equals Object obj if obj null return false if obj getClass equals getClass return false MacroDef other MacroDef obj if name null return other name null if name equals other name return false if getURI null getURI equals getURI equals ProjectHelper ANT_CORE_URI if other getURI null other getURI equals other getURI equals ProjectHelper ANT_CORE_URI return false else if getURI equals other getURI return false if nestedSequential similar other nestedSequential return false if attributes equals other attributes return false if elements equals other elements return false return true public int hashCode return objectHashCode name objectHashCode getURI objectHashCode nestedSequential objectHashCode attributes objectHashCode elements private static class MyAntTypeDefinition extends AntTypeDefinition private MacroDef macroDef public MyAntTypeDefinition MacroDef macroDef this macroDef macroDef public Object create Project project Object super create project if null return null MacroInstance setMacroDef macroDef return public boolean sameDefinition AntTypeDefinition other Project project if super sameDefinition other project return false MyAntTypeDefinition otherDef MyAntTypeDefinition other return macroDef equals otherDef macroDef public boolean similarDefinition AntTypeDefinition other Project project if super similarDefinition other project return false MyAntTypeDefinition otherDef MyAntTypeDefinition other return macroDef equals otherDef macroDef private static int objectHashCode Object if null return else return hashCode', 'bug': '0'}
{'sequence': 'public class Copydir extends MatchingTask private File srcDir private File destDir private boolean filtering false private boolean flatten false private boolean forceOverwrite false private Hashtable filecopyList new Hashtable public void setSrc File src srcDir src public void setDest File dest destDir dest public void setFiltering boolean filter filtering filter public void setFlatten boolean flatten this flatten flatten public void setForceoverwrite boolean force forceOverwrite force public void execute throws BuildException log if srcDir null throw new BuildException getLocation if srcDir exists throw new BuildException srcDir toString getLocation if destDir null throw new BuildException getLocation if srcDir equals destDir log Project MSG_WARN DirectoryScanner ds super getDirectoryScanner srcDir try String files ds getIncludedFiles scanDir srcDir destDir files if filecopyList size log filecopyList size filecopyList size destDir getAbsolutePath Enumeration filecopyList keys while hasMoreElements String fromFile String nextElement String toFile String filecopyList get fromFile try getProject copyFile fromFile toFile filtering forceOverwrite catch IOException ioe String msg fromFile toFile ioe getMessage throw new BuildException msg ioe getLocation finally filecopyList clear private void scanDir File from File to String files for int files length String filename files File srcFile new File from filename File destFile if flatten destFile new File to new File filename getName else destFile new File to filename if forceOverwrite srcFile lastModified destFile lastModified filecopyList put srcFile getAbsolutePath destFile getAbsolutePath', 'bug': '0'}
{'sequence': 'public final class LoadProperties extends Task private File srcFile null private final Vector filterChains new Vector private String encoding null public final void setSrcFile final File srcFile this srcFile srcFile public final void setEncoding final String encoding this encoding encoding public final void execute throws BuildException if srcFile null throw new BuildException if srcFile exists throw new BuildException if srcFile isFile throw new BuildException FileInputStream fis null BufferedInputStream bis null Reader instream null ByteArrayInputStream tis null try final long len srcFile length fis new FileInputStream srcFile bis new BufferedInputStream fis if encoding null instream new InputStreamReader bis else instream new InputStreamReader bis encoding ChainReaderHelper crh new ChainReaderHelper crh setPrimaryReader instream crh setFilterChains filterChains crh setProject getProject instream crh getAssembledReader String text crh readFully instream if text null if text endsWith text text if encoding null tis new ByteArrayInputStream text getBytes else tis new ByteArrayInputStream text getBytes encoding final Properties props new Properties props load tis Property propertyTask Property getProject createTask propertyTask setTaskName getTaskName propertyTask addProperties props catch final IOException ioe final String message ioe toString throw new BuildException message ioe getLocation catch final BuildException be throw be finally try if fis null fis close catch IOException ioex try if tis null tis close catch IOException ioex public final void addFilterChain FilterChain filter filterChains addElement filter', 'bug': '0'}
{'sequence': 'public class ZipFileSet extends FileSet public static final int DEFAULT_DIR_MODE UnixStat DIR_FLAG UnixStat DEFAULT_DIR_PERM public static final int DEFAULT_FILE_MODE UnixStat FILE_FLAG UnixStat DEFAULT_FILE_PERM private File srcFile null private String prefix private String fullpath private boolean hasDir false private int fileMode DEFAULT_FILE_MODE private int dirMode DEFAULT_DIR_MODE private boolean fileModeHasBeenSet false private boolean dirModeHasBeenSet false public ZipFileSet super protected ZipFileSet FileSet fileset super fileset protected ZipFileSet ZipFileSet fileset super fileset srcFile fileset srcFile prefix fileset prefix fullpath fileset fullpath hasDir fileset hasDir fileMode fileset fileMode dirMode fileset dirMode fileModeHasBeenSet fileset fileModeHasBeenSet dirModeHasBeenSet fileset dirModeHasBeenSet public void setDir File dir throws BuildException if isReference throw tooManyAttributes if srcFile null throw new BuildException else super setDir dir hasDir true public void setSrc File srcFile if isReference throw tooManyAttributes if hasDir throw new BuildException this srcFile srcFile public File getSrc Project if isReference return ZipFileSet getRef getSrc return srcFile public void setPrefix String prefix if prefix equals fullpath equals throw new BuildException this prefix prefix public String getPrefix Project if isReference return ZipFileSet getRef getPrefix return prefix public void setFullpath String fullpath if prefix equals fullpath equals throw new BuildException this fullpath fullpath public String getFullpath Project if isReference return ZipFileSet getRef getFullpath return fullpath public DirectoryScanner getDirectoryScanner Project if isReference return getRef getDirectoryScanner if srcFile null ZipScanner zs new ZipScanner zs setSrc srcFile super setDir getBaseDir setupDirectoryScanner zs zs init return zs else return super getDirectoryScanner public void setFileMode String octalString fileModeHasBeenSet true this fileMode UnixStat FILE_FLAG Integer parseInt octalString public int getFileMode Project if isReference return ZipFileSet getRef getFileMode return fileMode public boolean hasFileModeBeenSet if isReference return ZipFileSet getRef getProject hasFileModeBeenSet return fileModeHasBeenSet public void setDirMode String octalString dirModeHasBeenSet true this dirMode UnixStat DIR_FLAG Integer parseInt octalString public int getDirMode Project if isReference return ZipFileSet getRef getDirMode return dirMode public boolean hasDirModeBeenSet if isReference return ZipFileSet getRef getProject hasDirModeBeenSet return dirModeHasBeenSet protected AbstractFileSet getRef Project if isChecked Stack stk new Stack stk push this dieOnCircularReference stk Object getRefid getReferencedObject if instanceof ZipFileSet return AbstractFileSet else if instanceof FileSet ZipFileSet zfs new ZipFileSet FileSet zfs setPrefix prefix zfs setFullpath fullpath zfs fileModeHasBeenSet fileModeHasBeenSet zfs fileMode fileMode zfs dirModeHasBeenSet dirModeHasBeenSet zfs dirMode dirMode return zfs else String msg getRefid getRefId throw new BuildException msg public Object clone if isReference return ZipFileSet getRef getProject clone else return super clone', 'bug': '1'}
{'sequence': 'public final class Diagnostics private static final String TEST_CLASS private Diagnostics public static boolean isOptionalAvailable try Class forName TEST_CLASS catch ClassNotFoundException return false return true public static void validateVersion throws BuildException try Class optional Class forName String coreVersion getImplementationVersion Main class String optionalVersion getImplementationVersion optional if coreVersion null coreVersion equals optionalVersion throw new BuildException coreVersion optionalVersion catch ClassNotFoundException public static File listLibraries String home System getProperty if home null return null File libDir new File home FilenameFilter filter new FilenameFilter public boolean accept File dir String name return name endsWith String filenames libDir list filter if filenames null return null File files new File filenames length for int filenames length files new File libDir filenames return files public static void main String args doReport System out private static String getImplementationVersion Class clazz try Method method Class class getMethod new Class Object pkg method invoke clazz null if pkg null method pkg getClass getMethod new Class Object version method invoke pkg null return String version catch Exception return return null private static String getXmlParserName SAXParser saxParser getSAXParser if saxParser null return String saxParserName saxParser getClass getName return saxParserName private static SAXParser getSAXParser SAXParserFactory saxParserFactory SAXParserFactory newInstance if saxParserFactory null return null SAXParser saxParser null try saxParser saxParserFactory newSAXParser catch Exception return saxParser private static String getXMLParserLocation SAXParser saxParser getSAXParser if saxParser null return null String location getClassLocation saxParser getClass return location private static String getClassLocation Class clazz File LoaderUtils getClassSource clazz return null null getAbsolutePath public static void doReport PrintStream out out println out println Main getAntVersion out println out println out println out println out println getImplementationVersion Main class Class optional null try optional Class forName out println getImplementationVersion optional catch ClassNotFoundException out println out println out println out println out println doReportLibraries out out println out println out println out println doReportTasksAvailability out out println out println out println out println doReportWhich out out println out println out println out println doReportParserInfo out out println out println out println out println doReportSystemProperties out out println private static void doReportSystemProperties PrintStream out for Enumeration keys System getProperties keys keys hasMoreElements String key String keys nextElement out println key System getProperty key private static void doReportLibraries PrintStream out out println System getProperty File libs listLibraries if libs null out println return for int libs length out println libs getName libs length private static void doReportWhich PrintStream out Throwable error null try Class which Class forName Method method which getMethod new Class String class method invoke null new Object new String catch ClassNotFoundException out println catch InvocationTargetException error getTargetException null getTargetException catch Throwable error if error null out println error printStackTrace private static void doReportTasksAvailability PrintStream out InputStream is Main class getResourceAsStream if is null out println else Properties props new Properties try props load is for Enumeration keys props keys keys hasMoreElements String key String keys nextElement String classname props getProperty key try Class forName classname props remove key catch ClassNotFoundException out println key catch NoClassDefFoundError String pkg getMessage replace out println key pkg catch Error out println key if props size out println catch IOException out println getMessage private static void doReportParserInfo PrintStream out String parserName getXmlParserName String parserLocation getXMLParserLocation if parserName null parserName if parserLocation null parserLocation out println parserName out println parserLocation', 'bug': '1'}
{'sequence': 'public class MergingMapper implements FileNameMapper protected String mergedFile null public void setFrom String from public void setTo String to mergedFile new String to public String mapFileName String sourceFileName return mergedFile', 'bug': '0'}
{'sequence': 'public class HashvalueAlgorithm implements Algorithm public boolean isValid return true public String getValue File file try if file canRead return null java io FileInputStream fis new java io FileInputStream file byte content new byte fis available fis read content fis close String new String content int hash hashCode return Integer toString hash catch Exception return null public String toString return', 'bug': '0'}
{'sequence': 'class UUMailer extends PlainMailer protected void attach File file PrintStream out throws IOException if file exists file canRead throw new BuildException file getName FileInputStream finstr new FileInputStream file try BufferedInputStream in new BufferedInputStream finstr UUEncoder encoder new UUEncoder file getName encoder encode in out finally finstr close', 'bug': '0'}
{'sequence': 'public abstract class AbstractFileSet extends DataType implements Cloneable SelectorContainer private PatternSet defaultPatterns new PatternSet private Vector additionalPatterns new Vector private Vector selectors new Vector private File dir private boolean useDefaultExcludes true private boolean isCaseSensitive true private boolean followSymlinks true public AbstractFileSet super protected AbstractFileSet AbstractFileSet fileset this dir fileset dir this defaultPatterns fileset defaultPatterns this additionalPatterns fileset additionalPatterns this selectors fileset selectors this useDefaultExcludes fileset useDefaultExcludes this isCaseSensitive fileset isCaseSensitive this followSymlinks fileset followSymlinks setProject fileset getProject public void setRefid Reference throws BuildException if dir null defaultPatterns hasPatterns getProject throw tooManyAttributes if additionalPatterns isEmpty throw noChildrenAllowed if selectors isEmpty throw noChildrenAllowed super setRefid public void setDir File dir throws BuildException if isReference throw tooManyAttributes this dir dir public File getDir Project if isReference return getRef getDir return dir public PatternSet createPatternSet if isReference throw noChildrenAllowed PatternSet patterns new PatternSet additionalPatterns addElement patterns return patterns public PatternSet NameEntry createInclude if isReference throw noChildrenAllowed return defaultPatterns createInclude public PatternSet NameEntry createIncludesFile if isReference throw noChildrenAllowed return defaultPatterns createIncludesFile public PatternSet NameEntry createExclude if isReference throw noChildrenAllowed return defaultPatterns createExclude public PatternSet NameEntry createExcludesFile if isReference throw noChildrenAllowed return defaultPatterns createExcludesFile public void setFile File file if isReference throw tooManyAttributes setDir file getParentFile PatternSet NameEntry include createInclude include setName file getName public void setIncludes String includes if isReference throw tooManyAttributes defaultPatterns setIncludes includes public void setExcludes String excludes if isReference throw tooManyAttributes defaultPatterns setExcludes excludes public void setIncludesfile File incl throws BuildException if isReference throw tooManyAttributes defaultPatterns setIncludesfile incl public void setExcludesfile File excl throws BuildException if isReference throw tooManyAttributes defaultPatterns setExcludesfile excl public void setDefaultexcludes boolean useDefaultExcludes if isReference throw tooManyAttributes this useDefaultExcludes useDefaultExcludes public void setCaseSensitive boolean isCaseSensitive if isReference throw tooManyAttributes this isCaseSensitive isCaseSensitive public void setFollowSymlinks boolean followSymlinks if isReference throw tooManyAttributes this followSymlinks followSymlinks public boolean isFollowSymlinks if isReference return getRef getProject isFollowSymlinks else return followSymlinks protected String getDataTypeName Project project getProject if project null Hashtable typedefs project getDataTypeDefinitions for Enumeration typedefs keys hasMoreElements String typeName String nextElement Class typeClass Class typedefs get typeName if typeClass getClass return typeName String classname getClass getName int dotIndex classname lastIndexOf if dotIndex return classname return classname substring dotIndex public DirectoryScanner getDirectoryScanner Project if isReference return getRef getDirectoryScanner if dir null throw new BuildException getDataTypeName if dir exists throw new BuildException dir getAbsolutePath if dir isDirectory throw new BuildException dir getAbsolutePath DirectoryScanner ds new DirectoryScanner setupDirectoryScanner ds ds setFollowSymlinks followSymlinks ds scan return ds public void setupDirectoryScanner FileScanner ds Project if isReference getRef setupDirectoryScanner ds return if ds null throw new IllegalArgumentException ds setBasedir dir final int count additionalPatterns size for int count Object additionalPatterns elementAt defaultPatterns append PatternSet log getDataTypeName dir defaultPatterns Project MSG_DEBUG ds setIncludes defaultPatterns getIncludePatterns ds setExcludes defaultPatterns getExcludePatterns if ds instanceof SelectorScanner SelectorScanner ss SelectorScanner ds ss setSelectors getSelectors if useDefaultExcludes ds addDefaultExcludes ds setCaseSensitive isCaseSensitive protected AbstractFileSet getRef Project if isChecked Stack stk new Stack stk push this dieOnCircularReference stk Object getRefid getReferencedObject if getClass isAssignableFrom getClass String msg getRefid getRefId getDataTypeName throw new BuildException msg else return AbstractFileSet public boolean hasSelectors if isReference getProject null return getRef getProject hasSelectors return selectors isEmpty public boolean hasPatterns if isReference getProject null return getRef getProject hasPatterns if defaultPatterns hasPatterns getProject return true Enumeration additionalPatterns elements while hasMoreElements PatternSet ps PatternSet nextElement if ps hasPatterns getProject return true return false public int selectorCount if isReference getProject null return getRef getProject selectorCount return selectors size public FileSelector getSelectors Project if isReference return getRef getSelectors else FileSelector result new FileSelector selectors size selectors copyInto result return result public Enumeration selectorElements if isReference getProject null return getRef getProject selectorElements return selectors elements public void appendSelector FileSelector selector if isReference throw noChildrenAllowed selectors addElement selector public void addSelector SelectSelector selector appendSelector selector public void addAnd AndSelector selector appendSelector selector public void addOr OrSelector selector appendSelector selector public void addNot NotSelector selector appendSelector selector public void addNone NoneSelector selector appendSelector selector public void addMajority MajoritySelector selector appendSelector selector public void addDate DateSelector selector appendSelector selector public void addSize SizeSelector selector appendSelector selector public void addDifferent DifferentSelector selector appendSelector selector public void addFilename FilenameSelector selector appendSelector selector public void addType TypeSelector selector appendSelector selector public void addCustom ExtendSelector selector appendSelector selector public void addContains ContainsSelector selector appendSelector selector public void addPresent PresentSelector selector appendSelector selector public void addDepth DepthSelector selector appendSelector selector public void addDepend DependSelector selector appendSelector selector public void addContainsRegexp ContainsRegexpSelector selector appendSelector selector public void addModified ModifiedSelector selector appendSelector selector public void add FileSelector selector appendSelector selector public String toString DirectoryScanner ds getDirectoryScanner getProject String files ds getIncludedFiles StringBuffer sb new StringBuffer for int files length if sb append sb append files return sb toString public Object clone if isReference return getRef getProject clone else try AbstractFileSet fs AbstractFileSet super clone fs defaultPatterns PatternSet defaultPatterns clone fs additionalPatterns new Vector additionalPatterns size Enumeration additionalPatterns elements while hasMoreElements fs additionalPatterns addElement PatternSet nextElement clone fs selectors Vector fs selectors clone return fs catch CloneNotSupportedException throw new BuildException', 'bug': '1'}
{'sequence': 'public class MacroInstance extends Task implements DynamicConfigurator private MacroDef macroDef private Map map new HashMap private Map nsElements null private Map presentElements new HashMap private Hashtable localProperties new Hashtable public void setMacroDef MacroDef macroDef this macroDef macroDef public void setDynamicAttribute String name String value map put name value public Object createDynamicElement String name throws BuildException if getNsElements get name null throw new BuildException name if presentElements get name null throw new BuildException name Element ret new Element presentElements put name ret return ret private Map getNsElements if nsElements null nsElements new HashMap for Iterator macroDef getElements entrySet iterator hasNext Map Entry entry Map Entry next nsElements put String entry getKey entry getValue return nsElements public static class Element implements TaskContainer private List unknownElements new ArrayList public void addTask Task nestedTask unknownElements add nestedTask public List getUnknownElements return unknownElements private static final int STATE_NORMAL private static final int STATE_EXPECT_BRACKET private static final int STATE_EXPECT_NAME private static final int STATE_EXPECT_EXCAPE private String macroSubs String Map macroMapping if null return null StringBuffer ret new StringBuffer StringBuffer macroName null boolean inMacro false int state STATE_NORMAL for int length char ch charAt switch state case STATE_NORMAL if ch state STATE_EXPECT_BRACKET else ret append ch break case STATE_EXPECT_BRACKET if ch state STATE_EXPECT_NAME macroName new StringBuffer else if ch state STATE_EXPECT_EXCAPE else state STATE_NORMAL ret append ret append ch break case STATE_EXPECT_NAME if ch state STATE_NORMAL String name macroName toString String value String macroMapping get name if value null ret append name else ret append value macroName null else macroName append ch break case STATE_EXPECT_EXCAPE state STATE_NORMAL if ch ret append else ret append ret append ch break default break switch state case STATE_NORMAL break case STATE_EXPECT_BRACKET ret append break case STATE_EXPECT_NAME ret append ret append macroName toString break case STATE_EXPECT_EXCAPE ret append break default break return ret toString private UnknownElement copy UnknownElement ue UnknownElement ret new UnknownElement ue getTag ret setNamespace ue getNamespace ret setProject getProject ret setQName ue getQName ret setTaskName ue getTaskName ret setLocation ue getLocation if getOwningTarget null Target new Target setProject getProject ret setOwningTarget else ret setOwningTarget getOwningTarget RuntimeConfigurable rc new RuntimeConfigurable ret ue getTaskName rc setPolyType ue getWrapper getPolyType Map map ue getWrapper getAttributeMap for Iterator map entrySet iterator hasNext Map Entry entry Map Entry next rc setAttribute String entry getKey macroSubs String entry getValue localProperties rc addText macroSubs ue getWrapper getText toString localProperties Enumeration ue getWrapper getChildren while hasMoreElements RuntimeConfigurable RuntimeConfigurable nextElement UnknownElement unknownElement UnknownElement getProxy String tag unknownElement getTaskType MacroDef TemplateElement templateElement MacroDef TemplateElement getNsElements get tag if templateElement null UnknownElement child copy unknownElement rc addChild child getWrapper ret addChild child else Element element Element presentElements get tag if element null if templateElement isOptional throw new BuildException templateElement getName continue for Iterator element getUnknownElements iterator hasNext UnknownElement child UnknownElement next rc addChild child getWrapper ret addChild child return ret public void execute localProperties new Hashtable Set copyKeys new HashSet map keySet for Iterator macroDef getAttributes iterator hasNext MacroDef Attribute attribute MacroDef Attribute next String value String map get attribute getName if value null value attribute getDefault value macroSubs value localProperties if value null throw new BuildException attribute getName localProperties put attribute getName value copyKeys remove attribute getName if copyKeys contains copyKeys remove if copyKeys size throw new BuildException copyKeys size copyKeys UnknownElement copy macroDef getNestedTask init try perform catch BuildException ex throw ProjectHelper addLocationToBuildException ex getLocation', 'bug': '1'}
{'sequence': 'public abstract class MatchingTask extends Task implements SelectorContainer protected FileSet fileset new FileSet public void setProject Project project super setProject project fileset setProject project public PatternSet NameEntry createInclude return fileset createInclude public PatternSet NameEntry createIncludesFile return fileset createIncludesFile public PatternSet NameEntry createExclude return fileset createExclude public PatternSet NameEntry createExcludesFile return fileset createExcludesFile public PatternSet createPatternSet return fileset createPatternSet public void setIncludes String includes fileset setIncludes includes public void XsetItems String itemString log Project MSG_WARN if itemString null itemString equals itemString equals createInclude setName else StringTokenizer tok new StringTokenizer itemString while tok hasMoreTokens String pattern tok nextToken trim if pattern length public void setExcludes String excludes fileset setExcludes excludes public void XsetIgnore String ignoreString log Project MSG_WARN if ignoreString null ignoreString length StringTokenizer tok new StringTokenizer ignoreString false while tok hasMoreTokens public void setDefaultexcludes boolean useDefaultExcludes fileset setDefaultexcludes useDefaultExcludes protected DirectoryScanner getDirectoryScanner File baseDir fileset setDir baseDir return fileset getDirectoryScanner getProject public void setIncludesfile File includesfile fileset setIncludesfile includesfile public void setExcludesfile File excludesfile fileset setExcludesfile excludesfile public void setCaseSensitive boolean isCaseSensitive fileset setCaseSensitive isCaseSensitive public void setFollowSymlinks boolean followSymlinks fileset setFollowSymlinks followSymlinks public boolean hasSelectors return fileset hasSelectors public int selectorCount return fileset selectorCount public FileSelector getSelectors Project return fileset getSelectors public Enumeration selectorElements return fileset selectorElements public void appendSelector FileSelector selector fileset appendSelector selector public void addSelector SelectSelector selector fileset addSelector selector public void addAnd AndSelector selector fileset addAnd selector public void addOr OrSelector selector fileset addOr selector public void addNot NotSelector selector fileset addNot selector public void addNone NoneSelector selector fileset addNone selector public void addMajority MajoritySelector selector fileset addMajority selector public void addDate DateSelector selector fileset addDate selector public void addSize SizeSelector selector fileset addSize selector public void addFilename FilenameSelector selector fileset addFilename selector public void addCustom ExtendSelector selector fileset addCustom selector public void addContains ContainsSelector selector fileset addContains selector public void addPresent PresentSelector selector fileset addPresent selector public void addDepth DepthSelector selector fileset addDepth selector public void addDepend DependSelector selector fileset addDepend selector public void addContainsRegexp ContainsRegexpSelector selector fileset addContainsRegexp selector public void addDifferent DifferentSelector selector fileset addDifferent selector public void addType TypeSelector selector fileset addType selector public void addModified ModifiedSelector selector fileset addModified selector public void add FileSelector selector fileset add selector protected final FileSet getImplicitFileSet return fileset', 'bug': '0'}
{'sequence': 'public class Copy extends Task protected Vector filesets new Vector private boolean enableMultipleMappings false protected boolean filtering false protected boolean preserveLastModified false protected boolean forceOverwrite false protected boolean flatten false protected int verbosity Project MSG_VERBOSE protected boolean includeEmpty true private boolean failonerror true protected Hashtable fileCopyMap new Hashtable protected Hashtable dirCopyMap new Hashtable protected Hashtable completeDirMap new Hashtable protected Mapper mapperElement null private Vector filterChains new Vector private Vector filterSets new Vector private FileUtils fileUtils private String inputEncoding null private String outputEncoding null public Copy fileUtils FileUtils newFileUtils protected FileUtils getFileUtils return fileUtils public void setFile File file this file file public void setTofile File destFile this destFile destFile public void setTodir File destDir this destDir destDir public FilterChain createFilterChain FilterChain filterChain new FilterChain filterChains addElement filterChain return filterChain public FilterSet createFilterSet FilterSet filterSet new FilterSet filterSets addElement filterSet return filterSet public void setPreserveLastModified String preserve setPreserveLastModified Project toBoolean preserve public void setPreserveLastModified boolean preserve preserveLastModified preserve public boolean getPreserveLastModified return preserveLastModified protected Vector getFilterSets return filterSets protected Vector getFilterChains return filterChains public void setFiltering boolean filtering this filtering filtering public void setOverwrite boolean overwrite this forceOverwrite overwrite public void setFlatten boolean flatten this flatten flatten public void setVerbose boolean verbose if verbose this verbosity Project MSG_INFO else this verbosity Project MSG_VERBOSE public void setIncludeEmptyDirs boolean includeEmpty this includeEmpty includeEmpty public void setEnableMultipleMappings boolean enableMultipleMappings this enableMultipleMappings enableMultipleMappings public boolean isEnableMultipleMapping return enableMultipleMappings public void setFailOnError boolean failonerror this failonerror failonerror public void addFileset FileSet set filesets addElement set public Mapper createMapper throws BuildException if mapperElement null throw new BuildException getLocation mapperElement new Mapper getProject return mapperElement public void setEncoding String encoding this inputEncoding encoding if outputEncoding null outputEncoding encoding public String getEncoding return inputEncoding public void setOutputEncoding String encoding this outputEncoding encoding public String getOutputEncoding return outputEncoding public void execute throws BuildException File savedDestFile destFile File savedDestDir destDir FileSet savedFileSet null if file null destFile null filesets size savedFileSet FileSet filesets elementAt validateAttributes try if file null if file exists if destFile null destFile new File destDir file getName if forceOverwrite destFile exists file lastModified destFile lastModified fileCopyMap put file getAbsolutePath new String destFile getAbsolutePath else log file destFile Project MSG_VERBOSE else String message file getAbsolutePath if failonerror log message else throw new BuildException message for int filesets size FileSet fs FileSet filesets elementAt DirectoryScanner ds null try ds fs getDirectoryScanner getProject catch BuildException if failonerror getMessage endsWith throw else log getMessage continue File fromDir fs getDir getProject String srcFiles ds getIncludedFiles String srcDirs ds getIncludedDirectories boolean isEverythingIncluded ds isEverythingIncluded fs hasSelectors fs hasPatterns if isEverythingIncluded flatten mapperElement null completeDirMap put fromDir destDir scan fromDir destDir srcFiles srcDirs try doFileOperations catch BuildException if failonerror log getMessage Project MSG_ERR else throw finally file savedFile destFile savedDestFile destDir savedDestDir if savedFileSet null filesets insertElementAt savedFileSet fileCopyMap clear dirCopyMap clear completeDirMap clear protected void validateAttributes throws BuildException if file null filesets size throw new BuildException if destFile null destDir null throw new BuildException if destFile null destDir null throw new BuildException if file null file exists file isDirectory throw new BuildException if destFile null filesets size if filesets size throw new BuildException else FileSet fs FileSet filesets elementAt DirectoryScanner ds fs getDirectoryScanner getProject String srcFiles ds getIncludedFiles if srcFiles length throw new BuildException else if srcFiles length if file null file new File ds getBasedir srcFiles filesets removeElementAt else throw new BuildException else throw new BuildException if destFile null destDir fileUtils getParentFile destFile protected void scan File fromDir File toDir String files String dirs FileNameMapper mapper null if mapperElement null mapper mapperElement getImplementation else if flatten mapper new FlatFileNameMapper else mapper new IdentityMapper buildMap fromDir toDir files mapper fileCopyMap if includeEmpty buildMap fromDir toDir dirs mapper dirCopyMap protected void buildMap File fromDir File toDir String names FileNameMapper mapper Hashtable map String toCopy null if forceOverwrite Vector new Vector for int names length if mapper mapFileName names null addElement names toCopy new String size copyInto toCopy else SourceFileScanner ds new SourceFileScanner this toCopy ds restrict names fromDir toDir mapper for int toCopy length File src new File fromDir toCopy String mappedFiles mapper mapFileName toCopy if enableMultipleMappings map put src getAbsolutePath new String new File toDir mappedFiles getAbsolutePath else for int mappedFiles length mappedFiles new File toDir mappedFiles getAbsolutePath map put src getAbsolutePath mappedFiles protected void doFileOperations if fileCopyMap size log fileCopyMap size fileCopyMap size destDir getAbsolutePath Enumeration fileCopyMap keys while hasMoreElements String fromFile String nextElement String toFiles String fileCopyMap get fromFile for int toFiles length String toFile toFiles if fromFile equals toFile log fromFile verbosity continue try log fromFile toFile verbosity FilterSetCollection executionFilters new FilterSetCollection if filtering executionFilters addFilterSet getProject getGlobalFilterSet for Enumeration filterEnum filterSets elements filterEnum hasMoreElements executionFilters addFilterSet FilterSet filterEnum nextElement fileUtils copyFile fromFile toFile executionFilters filterChains forceOverwrite preserveLastModified inputEncoding outputEncoding getProject catch IOException ioe String msg fromFile toFile ioe getMessage File targetFile new File toFile if targetFile exists targetFile delete msg toFile throw new BuildException msg ioe getLocation if includeEmpty Enumeration dirCopyMap elements int createCount while hasMoreElements String dirs String nextElement for int dirs length File new File dirs if exists if mkdirs log getAbsolutePath Project MSG_ERR else createCount if createCount log dirCopyMap size dirCopyMap size createCount createCount destDir getAbsolutePath', 'bug': '1'}
{'sequence': 'public class DTDLocation extends ResourceLocation', 'bug': '0'}
{'sequence': 'public class Typedef extends Definer', 'bug': '0'}
{'sequence': 'public class ApacheCatalog extends Catalog private ApacheCatalogResolver resolver null protected Catalog newCatalog ApacheCatalog cat ApacheCatalog super newCatalog cat setResolver resolver return cat public void setResolver ApacheCatalogResolver resolver this resolver resolver public void addEntry CatalogEntry entry int type entry getEntryType if type PUBLIC String publicid PublicId normalize entry getEntryArg String systemid normalizeURI entry getEntryArg if resolver null catalogManager debug message else resolver addPublicEntry publicid systemid base else if type URI String uri normalizeURI entry getEntryArg String altURI normalizeURI entry getEntryArg if resolver null catalogManager debug message else resolver addURIEntry uri altURI base super addEntry entry', 'bug': '0'}
{'sequence': 'public class StringInputStream extends InputStream private StringReader in private String encoding private byte slack private int begin public StringInputStream String source in new StringReader source public StringInputStream String source String encoding in new StringReader source this encoding encoding public synchronized int read throws IOException if in null throw new IOException byte result if slack null begin slack length result slack begin if begin slack length slack null else byte buf new byte if read buf return result buf if result return result else return result public synchronized int read byte int off int len throws IOException if in null throw new IOException while slack null int in read buf if return if String new String buf if encoding null slack getBytes else slack getBytes encoding begin if len slack length begin len slack length begin System arraycopy slack begin off len if begin len slack length slack null return len public synchronized void mark final int limit try in mark limit catch IOException ioe throw new RuntimeException ioe getMessage public synchronized int available throws IOException if in null throw new IOException if slack null return slack length begin if in ready return else return public boolean markSupported public synchronized void reset throws IOException if in null throw new IOException slack null in reset public synchronized void close throws IOException in close slack null in null', 'bug': '0'}
{'sequence': 'class ChangeLogWriter private static final SimpleDateFormat c_outputDate new SimpleDateFormat private static final SimpleDateFormat c_outputTime new SimpleDateFormat static TimeZone utc TimeZone getTimeZone c_outputDate setTimeZone utc c_outputTime setTimeZone utc public void printChangeLog final PrintWriter output final CVSEntry entries output println output println for int entries length final CVSEntry entry entries printEntry output entry output println output flush output close private void printEntry final PrintWriter output final CVSEntry entry output println output println c_outputDate format entry getDate output println c_outputTime format entry getDate output println entry getAuthor final Enumeration enumeration entry getFiles elements while enumeration hasMoreElements final RCSFile file RCSFile enumeration nextElement output println output println file getName output println file getRevision final String previousRevision file getPreviousRevision if previousRevision null output println previousRevision output println output println entry getComment output println', 'bug': '0'}
{'sequence': 'public class Jikes extends DefaultCompilerAdapter public boolean execute throws BuildException attributes log Project MSG_VERBOSE Path classpath new Path project if bootclasspath null classpath append bootclasspath classpath addExtdirs extdirs if bootclasspath null bootclasspath size includeJavaRuntime true else classpath append getCompileClasspath if compileSourcepath null classpath append compileSourcepath else classpath append src String jikesPath System getProperty if jikesPath null classpath append new Path project jikesPath Commandline cmd new Commandline String exec getJavac getExecutable cmd setExecutable exec null exec if deprecation true cmd createArgument setValue if destDir null cmd createArgument setValue cmd createArgument setFile destDir cmd createArgument setValue cmd createArgument setPath classpath if encoding null cmd createArgument setValue cmd createArgument setValue encoding if debug cmd createArgument setValue if optimize cmd createArgument setValue if verbose cmd createArgument setValue if depend cmd createArgument setValue if target null cmd createArgument setValue cmd createArgument setValue target String emacsProperty project getProperty if emacsProperty null Project toBoolean emacsProperty cmd createArgument setValue String warningsProperty project getProperty if warningsProperty null attributes log Project MSG_WARN attributes log Project MSG_WARN if Project toBoolean warningsProperty cmd createArgument setValue if attributes getNowarn cmd createArgument setValue String pedanticProperty project getProperty if pedanticProperty null Project toBoolean pedanticProperty cmd createArgument setValue String fullDependProperty project getProperty if fullDependProperty null Project toBoolean fullDependProperty cmd createArgument setValue if attributes getSource null cmd createArgument setValue cmd createArgument setValue attributes getSource addCurrentCompilerArgs cmd int firstFileName cmd size logAndAddFilesToCompile cmd return executeExternalCompile cmd getCommandline firstFileName', 'bug': '1'}
{'sequence': 'public class BuildNumber extends Task private static final String DEFAULT_PROPERTY_NAME private static final String DEFAULT_FILENAME DEFAULT_PROPERTY_NAME private File myFile public void setFile final File file myFile file public void execute throws BuildException validate final Properties properties loadProperties final int buildNumber getBuildNumber properties properties put DEFAULT_PROPERTY_NAME String valueOf buildNumber FileOutputStream output null try output new FileOutputStream myFile final String header properties store output header catch final IOException ioe final String message myFile throw new BuildException message ioe finally if null output try output close catch final IOException ioe getProject log ioe Project MSG_ERR myFile savedFile getProject setNewProperty DEFAULT_PROPERTY_NAME String valueOf buildNumber private int getBuildNumber final Properties properties throws BuildException final String buildNumber properties getProperty DEFAULT_PROPERTY_NAME trim try return Integer parseInt buildNumber catch final NumberFormatException nfe final String message myFile buildNumber throw new BuildException message nfe private Properties loadProperties throws BuildException FileInputStream input null try final Properties properties new Properties input new FileInputStream myFile properties load input return properties catch final IOException ioe throw new BuildException ioe finally if null input try input close catch final IOException ioe getProject log ioe Project MSG_ERR private void validate throws BuildException if null myFile myFile getProject resolveFile DEFAULT_FILENAME if myFile exists try FileUtils newFileUtils createNewFile myFile catch final IOException ioe final String message myFile throw new BuildException message ioe if myFile canRead final String message myFile throw new BuildException message if myFile canWrite final String message myFile throw new BuildException message', 'bug': '0'}
{'sequence': 'public class Reference private String refid public Reference super public Reference String id this setRefId id public void setRefId String id refid id public String getRefId return refid public Object getReferencedObject Project project throws BuildException if refid null throw new BuildException Object project getReference refid if null throw new BuildException refid return', 'bug': '0'}
{'sequence': 'public class Chmod extends ExecuteOn private FileSet defaultSet new FileSet private boolean defaultSetDefined false private boolean havePerm false public Chmod super setExecutable super setParallel true super setSkipEmptyFilesets true public void setProject Project project super setProject project defaultSet setProject project public void setFile File src FileSet fs new FileSet fs setFile src addFileset fs public void setDir File src defaultSet setDir src public void setPerm String perm createArg setValue perm havePerm true public PatternSet NameEntry createInclude defaultSetDefined true return defaultSet createInclude public PatternSet NameEntry createExclude defaultSetDefined true return defaultSet createExclude public PatternSet createPatternSet defaultSetDefined true return defaultSet createPatternSet public void setIncludes String includes defaultSetDefined true defaultSet setIncludes includes public void setExcludes String excludes defaultSetDefined true defaultSet setExcludes excludes public void setDefaultexcludes boolean useDefaultExcludes defaultSetDefined true defaultSet setDefaultexcludes useDefaultExcludes protected void checkConfiguration if havePerm throw new BuildException getLocation if defaultSetDefined defaultSet getDir getProject null addFileset defaultSet super checkConfiguration public void execute throws BuildException if defaultSetDefined defaultSet getDir getProject null try super execute finally if defaultSetDefined defaultSet getDir getProject null filesets removeElement defaultSet else if isValidOs Execute execute prepareExec Commandline cloned Commandline cmdl clone cloned createArgument setValue defaultSet getDir getProject getPath try execute setCommandline cloned getCommandline runExecute execute catch IOException throw new BuildException getLocation finally logFlush public void setExecutable String throw new BuildException getTaskType getLocation public void setCommand Commandline cmdl throw new BuildException getTaskType getLocation public void setSkipEmptyFilesets boolean skip throw new BuildException getTaskType getLocation public void setAddsourcefile boolean throw new BuildException getTaskType getLocation protected boolean isValidOs return Os isFamily super isValidOs', 'bug': '0'}
{'sequence': 'public class AntlibDefinition extends Task private String uri private ClassLoader antlibClassLoader public void setURI String uri throws BuildException if uri equals ProjectHelper ANT_CORE_URI uri if uri startsWith throw new BuildException uri this uri uri public String getURI return uri public void setAntlibClassLoader ClassLoader classLoader this antlibClassLoader classLoader public ClassLoader getAntlibClassLoader return antlibClassLoader', 'bug': '0'}
{'sequence': 'public class PackageNameMapper extends GlobPatternMapper protected String extractVariablePart String name String var name substring prefixLength name length postfixLength return var replace File separatorChar', 'bug': '0'}
{'sequence': 'public class LineTokenizer extends ProjectComponent implements Tokenizer private String lineEnd private int pushed private boolean includeDelims false public void setIncludeDelims boolean includeDelims this includeDelims includeDelims public String getToken Reader in throws IOException int ch if pushed ch pushed pushed else ch in read if ch return null lineEnd StringBuffer line new StringBuffer int state while ch if state if ch state else if ch lineEnd break else line append char ch else state if ch lineEnd else pushed ch lineEnd break ch in read if ch state lineEnd if includeDelims line append lineEnd return line toString public String getPostToken if includeDelims return return lineEnd', 'bug': '0'}
{'sequence': 'public class TaskAdapter extends Task implements TypeAdapter private Object proxy public static void checkTaskClass final Class taskClass final Project project try final Method executeM taskClass getMethod null if Void TYPE equals executeM getReturnType final String message executeM getReturnType taskClass project log message Project MSG_WARN catch NoSuchMethodException final String message taskClass project log message Project MSG_ERR throw new BuildException message public void checkProxyClass Class proxyClass checkTaskClass proxyClass getProject public void execute throws BuildException Method setProjectM null try Class proxy getClass setProjectM getMethod new Class Project class if setProjectM null setProjectM invoke proxy new Object getProject catch NoSuchMethodException catch Exception ex log proxy getClass Project MSG_ERR throw new BuildException ex Method executeM null try Class proxy getClass executeM getMethod new Class if executeM null log proxy getClass Project MSG_ERR throw new BuildException proxy getClass executeM invoke proxy null return catch java lang reflect InvocationTargetException ie log proxy getClass Project MSG_VERBOSE Throwable ie getTargetException if instanceof BuildException throw BuildException else throw new BuildException catch Exception ex log proxy getClass Project MSG_VERBOSE throw new BuildException ex public void setProxy Object this proxy public Object getProxy return proxy', 'bug': '0'}
{'sequence': 'public abstract class DefaultRmicAdapter implements RmicAdapter private Rmic attributes private FileNameMapper mapper private static final Random rand new Random public DefaultRmicAdapter public void setRmic Rmic attributes this attributes attributes mapper new RmicFileNameMapper public Rmic getRmic return attributes protected String getStubClassSuffix return protected String getSkelClassSuffix return protected String getTieClassSuffix return public FileNameMapper getMapper return mapper public Path getClasspath return getCompileClasspath protected Path getCompileClasspath Path classpath new Path attributes getProject classpath setLocation attributes getBase Path cp attributes getClasspath if cp null cp new Path attributes getProject if attributes getIncludeantruntime classpath addExisting cp concatSystemClasspath else classpath addExisting cp concatSystemClasspath if attributes getIncludejavaruntime classpath addJavaRuntime return classpath protected Commandline setupRmicCommand return setupRmicCommand null protected Commandline setupRmicCommand String options Commandline cmd new Commandline if options null for int options length cmd createArgument setValue options Path classpath getCompileClasspath cmd createArgument setValue cmd createArgument setFile attributes getBase if attributes getExtdirs null if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 classpath addExtdirs attributes getExtdirs else cmd createArgument setValue cmd createArgument setPath attributes getExtdirs cmd createArgument setValue cmd createArgument setPath classpath String stubVersion attributes getStubVersion if null stubVersion if equals stubVersion cmd createArgument setValue else if equals stubVersion cmd createArgument setValue else cmd createArgument setValue if null attributes getSourceBase cmd createArgument setValue if attributes getIiop attributes log Project MSG_INFO cmd createArgument setValue if attributes getIiopopts null attributes log attributes getIiopopts Project MSG_INFO cmd createArgument setValue attributes getIiopopts if attributes getIdl cmd createArgument setValue attributes log Project MSG_INFO if attributes getIdlopts null cmd createArgument setValue attributes getIdlopts attributes log attributes getIdlopts Project MSG_INFO if attributes getDebug cmd createArgument setValue cmd addArguments attributes getCurrentCompilerArgs logAndAddFilesToCompile cmd return cmd protected void logAndAddFilesToCompile Commandline cmd Vector compileList attributes getCompileList attributes log cmd describeArguments Project MSG_VERBOSE StringBuffer niceSourceList new StringBuffer if compileList size niceSourceList append niceSourceList append for int compileList size String arg String compileList elementAt cmd createArgument setValue arg niceSourceList append arg attributes log niceSourceList toString Project MSG_VERBOSE private class RmicFileNameMapper implements FileNameMapper RmicFileNameMapper public void setFrom String public void setTo String public String mapFileName String name if name null name endsWith name endsWith getStubClassSuffix name endsWith getSkelClassSuffix name endsWith getTieClassSuffix return null String base name substring name length String classname base replace File separatorChar if attributes getVerify attributes isValidRmiRemote classname return null String target new String name rand nextLong if attributes getIiop attributes getIdl if equals attributes getStubVersion target new String base getStubClassSuffix else target new String base getStubClassSuffix base getSkelClassSuffix else if attributes getIdl int lastSlash base lastIndexOf File separatorChar String dirname int index if lastSlash index else index lastSlash dirname base substring index String filename base substring index try Class attributes getLoader loadClass classname if isInterface target new String dirname filename getStubClassSuffix else Class interf attributes getRemoteInterface String iName interf getName String iDir int iIndex int lastDot iName lastIndexOf if lastDot iIndex else iIndex lastDot iDir iName substring iIndex iDir iDir replace File separatorChar target new String dirname filename getTieClassSuffix iDir iName substring iIndex getStubClassSuffix catch ClassNotFoundException attributes log classname Project MSG_WARN catch NoClassDefFoundError attributes log classname Project MSG_WARN catch Throwable attributes log classname getMessage Project MSG_WARN return target', 'bug': '0'}
{'sequence': 'public final class Parameter private String name null private String type null private String value null public final void setName final String name this name name public final void setType final String type this type type public final void setValue final String value this value value public final String getName return name public final String getType return type public final String getValue return value', 'bug': '0'}
{'sequence': 'public final class IntrospectionHelper implements BuildListener private Hashtable attributeTypes private Hashtable attributeSetters private Hashtable nestedTypes private Hashtable nestedCreators private List addTypeMethods private Method addText null private Class bean private static Hashtable helpers new Hashtable private static final Hashtable PRIMITIVE_TYPE_MAP new Hashtable static Class primitives Boolean TYPE Byte TYPE Character TYPE Short TYPE Integer TYPE Long TYPE Float TYPE Double TYPE Class wrappers Boolean class Byte class Character class Short class Integer class Long class Float class Double class for int primitives length PRIMITIVE_TYPE_MAP put primitives wrappers private IntrospectionHelper final Class bean attributeTypes new Hashtable attributeSetters new Hashtable nestedTypes new Hashtable nestedCreators new Hashtable addTypeMethods new ArrayList this bean bean Method methods bean getMethods for int methods length final Method methods final String name getName Class returnType getReturnType Class args getParameterTypes if args length java lang Void TYPE equals returnType name equals name equals insertAddTypeMethod continue if org apache tools ant Task class isAssignableFrom bean args length isHiddenSetMethod name args continue if org apache tools ant TaskContainer class isAssignableFrom bean args length equals name org apache tools ant Task class equals args continue if equals name java lang Void TYPE equals returnType args length java lang String class equals args addText methods else if name startsWith java lang Void TYPE equals returnType args length args isArray String propName getPropertyName name if attributeSetters get propName null if java lang String class equals args continue AttributeSetter as createAttributeSetter args propName if as null attributeTypes put propName args attributeSetters put propName as else if name startsWith returnType isArray returnType isPrimitive args length String propName getPropertyName name if nestedCreators get propName null nestedTypes put propName returnType nestedCreators put propName new NestedCreator public boolean isPolyMorphic return false public Object getRealObject return null public Class getElementClass return null public Object create Project project Object parent Object ignore throws InvocationTargetException IllegalAccessException return invoke parent new Object public void store Object parent Object child else if name startsWith java lang Void TYPE equals returnType args length java lang String class equals args args isArray args isPrimitive try Constructor constructor null try constructor args getConstructor new Class catch NoSuchMethodException ex constructor args getConstructor new Class Project class final Constructor constructor String propName getPropertyName name nestedTypes put propName args nestedCreators put propName new NestedCreator public boolean isPolyMorphic return true public Object getRealObject return null public Class getElementClass return getDeclaringClass public Object create Project project Object parent Object child throws InvocationTargetException IllegalAccessException InstantiationException if child null return child else if getParameterTypes length return newInstance new Object else return newInstance new Object project public void store Object parent Object child throws InvocationTargetException IllegalAccessException InstantiationException invoke parent new Object child catch NoSuchMethodException nse else if name startsWith java lang Void TYPE equals returnType args length java lang String class equals args args isArray args isPrimitive try Constructor constructor null try constructor args getConstructor new Class catch NoSuchMethodException ex constructor args getConstructor new Class Project class final Constructor constructor String propName getPropertyName name nestedTypes put propName args nestedCreators put propName new NestedCreator public boolean isPolyMorphic return true public Object getRealObject return null public Class getElementClass return getDeclaringClass public Object create Project project Object parent Object child throws InvocationTargetException IllegalAccessException InstantiationException if child null else if getParameterTypes length child newInstance new Object else child newInstance new Object project invoke parent new Object child return child public void store Object parent Object child throws InvocationTargetException IllegalAccessException InstantiationException catch NoSuchMethodException nse private boolean isHiddenSetMethod String name Class type if equals name org apache tools ant Location class equals type return true if equals name java lang String class equals type return true return false public static synchronized IntrospectionHelper getHelper Class IntrospectionHelper ih IntrospectionHelper helpers get if ih null ih new IntrospectionHelper helpers put ih return ih public static synchronized IntrospectionHelper getHelper Project Class IntrospectionHelper ih IntrospectionHelper helpers get if ih null ih new IntrospectionHelper helpers put ih addBuildListener ih return ih public void setAttribute Project Object element String attributeName String value throws BuildException AttributeSetter as AttributeSetter attributeSetters get attributeName if as null if element instanceof DynamicConfigurator DynamicConfigurator dc DynamicConfigurator element dc setDynamicAttribute attributeName value return else String msg getElementName element attributeName throw new BuildException msg try as set element value catch IllegalAccessException ie throw new BuildException ie catch InvocationTargetException ite Throwable ite getTargetException if instanceof BuildException throw BuildException throw new BuildException public void addText Project project Object element String text throws BuildException if addText null if text trim length return else String msg project getElementName element throw new BuildException msg try addText invoke element new String text catch IllegalAccessException ie throw new BuildException ie catch InvocationTargetException ite Throwable ite getTargetException if instanceof BuildException throw BuildException throw new BuildException public void throwNotSupported Project project Object parent String elementName String msg project getElementName parent elementName throw new BuildException msg private NestedCreator getNestedCreator Project project String parentUri Object parent String elementName throws BuildException String uri ProjectHelper extractUriFromComponentName elementName String name ProjectHelper extractNameFromComponentName elementName NestedCreator nc null nc NestedCreator nestedCreators get name toLowerCase Locale US if nc null nc createAddTypeCreator project parent elementName if nc null parent instanceof DynamicConfigurator DynamicConfigurator dc DynamicConfigurator parent final Object nestedElement dc createDynamicElement name toLowerCase Locale US if nestedElement null nc new NestedCreator public boolean isPolyMorphic return false public Class getElementClass return null public Object getRealObject return null public Object create Project project Object parent Object ignore return nestedElement public void store Object parent Object child if nc null throwNotSupported project parent elementName return nc public Object createElement Project project Object parent String elementName throws BuildException NestedCreator nc getNestedCreator project parent elementName try Object nestedElement nc create project parent null if project null project setProjectReference nestedElement return nestedElement catch IllegalAccessException ie throw new BuildException ie catch InstantiationException ine throw new BuildException ine catch InvocationTargetException ite Throwable ite getTargetException if instanceof BuildException throw BuildException throw new BuildException public Creator getElementCreator Project project String parentUri Object parent String elementName UnknownElement ue NestedCreator nc getNestedCreator project parentUri parent elementName return new Creator project parent nc public boolean supportsNestedElement String elementName return nestedCreators containsKey elementName toLowerCase Locale US DynamicConfigurator class isAssignableFrom bean addTypeMethods size public boolean supportsNestedElement String parentUri String elementName String uri ProjectHelper extractUriFromComponentName elementName String name ProjectHelper extractNameFromComponentName elementName return nestedCreators containsKey name toLowerCase Locale US DynamicConfigurator class isAssignableFrom bean addTypeMethods size public void storeElement Project project Object parent Object child String elementName throws BuildException if elementName null return NestedCreator ns NestedCreator nestedCreators get elementName toLowerCase Locale US if ns null return try ns store parent child catch IllegalAccessException ie throw new BuildException ie catch InstantiationException ine throw new BuildException ine catch InvocationTargetException ite Throwable ite getTargetException if instanceof BuildException throw BuildException throw new BuildException public Class getElementType String elementName throws BuildException Class nt Class nestedTypes get elementName if nt null String msg bean getName elementName throw new BuildException msg return nt public Class getAttributeType String attributeName throws BuildException Class at Class attributeTypes get attributeName if at null String msg bean getName attributeName throw new BuildException msg return at public boolean supportsCharacters return addText null public Enumeration getAttributes return attributeSetters keys public Enumeration getNestedElements return nestedTypes keys private AttributeSetter createAttributeSetter final Method Class arg final String attrName final Class reflectedArg PRIMITIVE_TYPE_MAP containsKey arg Class PRIMITIVE_TYPE_MAP get arg arg if java lang String class equals reflectedArg return new AttributeSetter public void set Project Object parent String value throws InvocationTargetException IllegalAccessException invoke parent new String value else if java lang Character class equals reflectedArg return new AttributeSetter public void set Project Object parent String value throws InvocationTargetException IllegalAccessException if value length throw new BuildException attrName invoke parent new Character new Character value charAt else if java lang Boolean class equals reflectedArg return new AttributeSetter public void set Project Object parent String value throws InvocationTargetException IllegalAccessException invoke parent new Boolean new Boolean Project toBoolean value else if java lang Class class equals reflectedArg return new AttributeSetter public void set Project Object parent String value throws InvocationTargetException IllegalAccessException BuildException try invoke parent new Class Class forName value catch ClassNotFoundException ce throw new BuildException ce else if java io File class equals reflectedArg return new AttributeSetter public void set Project Object parent String value throws InvocationTargetException IllegalAccessException invoke parent new File resolveFile value else if org apache tools ant types Path class equals reflectedArg return new AttributeSetter public void set Project Object parent String value throws InvocationTargetException IllegalAccessException invoke parent new Path new Path value else if EnumeratedAttribute class isAssignableFrom reflectedArg return new AttributeSetter public void set Project Object parent String value throws InvocationTargetException IllegalAccessException BuildException try EnumeratedAttribute ea EnumeratedAttribute reflectedArg newInstance ea setValue value invoke parent new EnumeratedAttribute ea catch InstantiationException ie throw new BuildException ie else try final Constructor reflectedArg getConstructor new Class java lang String class return new AttributeSetter public void set Project Object parent String value throws InvocationTargetException IllegalAccessException BuildException try Object attribute newInstance new String value if null setProjectReference attribute invoke parent new Object attribute catch InstantiationException ie throw new BuildException ie catch NoSuchMethodException nme return null protected String getElementName Project project Object element return project getElementName element private String getPropertyName String methodName String prefix int start prefix length return methodName substring start toLowerCase Locale US public static final class Creator private NestedCreator nestedCreator private Object parent private Project project private Object nestedObject private String polyType private Creator Project project Object parent NestedCreator nestedCreator this project project this parent parent this nestedCreator nestedCreator public void setPolyType String polyType this polyType polyType public Object create if polyType null if nestedCreator isPolyMorphic throw new BuildException Class elementClass nestedCreator getElementClass ComponentHelper helper ComponentHelper getComponentHelper project nestedObject ComponentHelper getComponentHelper project createComponent polyType if nestedObject null throw new BuildException polyType try nestedObject nestedCreator create project parent nestedObject if project null project setProjectReference nestedObject return nestedObject catch IllegalAccessException ex throw new BuildException ex catch InstantiationException ex throw new BuildException ex catch IllegalArgumentException ex if polyType null throw new BuildException polyType throw ex catch InvocationTargetException ex Throwable ex getTargetException if instanceof BuildException throw BuildException throw new BuildException public Object getRealObject return nestedCreator getRealObject public void store try nestedCreator store parent nestedObject catch IllegalAccessException ex throw new BuildException ex catch InstantiationException ex throw new BuildException ex catch IllegalArgumentException ex if polyType null throw new BuildException polyType throw ex catch InvocationTargetException ex Throwable ex getTargetException if instanceof BuildException throw BuildException throw new BuildException private interface NestedCreator boolean isPolyMorphic Class getElementClass Object getRealObject Object create Project project Object parent Object child throws InvocationTargetException IllegalAccessException InstantiationException void store Object parent Object child throws InvocationTargetException IllegalAccessException InstantiationException private interface AttributeSetter void set Project Object parent String value throws InvocationTargetException IllegalAccessException BuildException public void buildFinished BuildEvent event attributeTypes clear attributeSetters clear nestedTypes clear nestedCreators clear addText null helpers clear public void buildStarted BuildEvent event public void targetStarted BuildEvent event public void targetFinished BuildEvent event public void taskStarted BuildEvent event public void taskFinished BuildEvent event public void messageLogged BuildEvent event private NestedCreator createAddTypeCreator Project project Object parent String elementName throws BuildException if addTypeMethods size return null ComponentHelper helper ComponentHelper getComponentHelper project Object addedObject null Method addMethod null Class clazz helper getComponentClass elementName if clazz null return null addMethod findMatchingMethod clazz addTypeMethods if addMethod null return null addedObject helper createComponent elementName if addedObject null return null Object rObject addedObject if addedObject instanceof PreSetDef PreSetDefinition rObject PreSetDef PreSetDefinition addedObject createObject project final Method method addMethod final Object nestedObject addedObject final Object realObject rObject return new NestedCreator public boolean isPolyMorphic return false public Class getElementClass return null public Object create Project project Object parent Object ignore throws InvocationTargetException IllegalAccessException if method getName endsWith method invoke parent new Object realObject return nestedObject public Object getRealObject return realObject public void store Object parent Object child throws InvocationTargetException IllegalAccessException InstantiationException if method getName endsWith method invoke parent new Object realObject private void insertAddTypeMethod Method method Class argClass method getParameterTypes for int addTypeMethods size Method current Method addTypeMethods get if current getParameterTypes equals argClass if current getParameterTypes isAssignableFrom argClass addTypeMethods add method addTypeMethods add method private Method findMatchingMethod Class paramClass List methods Class matchedClass null Method matchedMethod null for int methods size Method method Method methods get Class methodClass method getParameterTypes if methodClass isAssignableFrom paramClass if matchedClass null matchedClass methodClass matchedMethod method else if methodClass isAssignableFrom matchedClass throw new BuildException matchedClass getName methodClass getName paramClass getName return matchedMethod', 'bug': '1'}
{'sequence': 'public class Javac12 extends DefaultCompilerAdapter public boolean execute throws BuildException attributes log Project MSG_VERBOSE Commandline cmd setupJavacCommand true OutputStream logstr new LogOutputStream attributes Project MSG_WARN try Class Class forName Constructor cons getConstructor new Class OutputStream class String class Object compiler cons newInstance new Object logstr Method compile getMethod new Class String class Boolean ok Boolean compile invoke compiler new Object cmd getArguments return ok booleanValue catch ClassNotFoundException ex throw new BuildException location catch Exception ex if ex instanceof BuildException throw BuildException ex else throw new BuildException ex location finally try logstr close catch IOException throw new BuildException', 'bug': '0'}
{'sequence': 'public class FileSet extends AbstractFileSet public FileSet super protected FileSet FileSet fileset super fileset public Object clone if isReference return FileSet getRef getProject clone else return super clone', 'bug': '0'}
{'sequence': 'public class MultipleChoiceInputRequest extends InputRequest private Vector choices new Vector public MultipleChoiceInputRequest String prompt Vector choices super prompt if choices null throw new IllegalArgumentException this choices choices public Vector getChoices return choices public boolean isInputValid return choices contains getInput', 'bug': '0'}
{'sequence': 'public class MailMessage public static final String DEFAULT_HOST public static final int DEFAULT_PORT private String host private int port DEFAULT_PORT private String from private Vector replyto private Vector to private Vector cc private Vector headersKeys private Vector headersValues private MailPrintStream out private SmtpResponseReader in private Socket socket private static final int OK_READY private static final int OK_HELO private static final int OK_FROM private static final int OK_RCPT_1 private static final int OK_RCPT_2 private static final int OK_DATA private static final int OK_DOT private static final int OK_QUIT public MailMessage throws IOException this DEFAULT_HOST DEFAULT_PORT public MailMessage String host throws IOException this host DEFAULT_PORT public MailMessage String host int port throws IOException this port port this host host replyto new Vector to new Vector cc new Vector headersKeys new Vector headersValues new Vector connect sendHelo public void setPort int port this port port public void from String from throws IOException sendFrom from this from from public void replyto String rto this replyto addElement rto public void to String to throws IOException sendRcpt to this to addElement to public void cc String cc throws IOException sendRcpt cc this cc addElement cc public void bcc String bcc throws IOException sendRcpt bcc public void setSubject String subj setHeader subj public void setHeader String name String value headersKeys add name headersValues add value public PrintStream getPrintStream throws IOException setFromHeader setReplyToHeader setToHeader setCcHeader setHeader sendData flushHeaders return out void setFromHeader setHeader from void setReplyToHeader if replyto isEmpty setHeader vectorToList replyto void setToHeader if to isEmpty setHeader vectorToList to void setCcHeader if cc isEmpty setHeader vectorToList cc String vectorToList Vector StringBuffer buf new StringBuffer Enumeration elements while hasMoreElements buf append nextElement if hasMoreElements buf append return buf toString void flushHeaders throws IOException for int headersKeys size String name String headersKeys elementAt String value String headersValues elementAt out println name value out println out flush public void sendAndClose throws IOException try sendDot sendQuit finally disconnect static String sanitizeAddress String int paramDepth int start int end int len length for int len char charAt if paramDepth if start else if paramDepth if end else if paramDepth start else if paramDepth end if end end len return substring start end void connect throws IOException socket new Socket host port out new MailPrintStream new BufferedOutputStream socket getOutputStream in new SmtpResponseReader socket getInputStream getReady void getReady throws IOException String response in getResponse int ok OK_READY if isResponseOK response ok throw new IOException response void sendHelo throws IOException String local InetAddress getLocalHost getHostName int ok OK_HELO send local ok void sendFrom String from throws IOException int ok OK_FROM send sanitizeAddress from ok void sendRcpt String rcpt throws IOException int ok OK_RCPT_1 OK_RCPT_2 send sanitizeAddress rcpt ok void sendData throws IOException int ok OK_DATA send ok void sendDot throws IOException int ok OK_DOT void sendQuit throws IOException int ok OK_QUIT try send ok catch IOException throw new ErrorInQuitException void send String msg int ok throws IOException String response in getResponse if isResponseOK response ok throw new IOException msg response boolean isResponseOK String response int ok for int ok length if response startsWith ok return true return false void disconnect throws IOException if out null out close if in null try in close catch IOException if socket null try socket close catch IOException class MailPrintStream extends PrintStream private int lastChar public MailPrintStream OutputStream out public void write int if lastChar rawWrite else if lastChar rawWrite else rawWrite lastChar public void write byte buf int off int len for int len write buf off void rawWrite int super write void rawPrint String int len length for int len rawWrite charAt', 'bug': '0'}
{'sequence': 'public class PropertySet extends DataType private boolean dynamic true private Vector cachedNames private Vector ptyRefs new Vector private Vector setRefs new Vector private Mapper public static class PropertyRef private int count private String name private String regex private String prefix private String builtin public void setName String name assertValid name this name name public void setRegex String regex assertValid regex this regex regex public void setPrefix String prefix assertValid prefix this prefix prefix public void setBuiltin BuiltinPropertySetName String builtin getValue assertValid builtin this builtin builtin private void assertValid String attr String value if value null value length throw new BuildException attr if count throw new BuildException public String toString return name regex prefix builtin public void appendName String name PropertyRef ref new PropertyRef ref setName name addPropertyref ref public void appendRegex String regex PropertyRef ref new PropertyRef ref setRegex regex addPropertyref ref public void appendPrefix String prefix PropertyRef ref new PropertyRef ref setPrefix prefix addPropertyref ref public void appendBuiltin BuiltinPropertySetName PropertyRef ref new PropertyRef ref setBuiltin addPropertyref ref public void setMapper String type String from String to Mapper mapper createMapper Mapper MapperType mapperType new Mapper MapperType mapperType setValue type mapper setFrom from mapper setTo to public void addPropertyref PropertyRef ref assertNotReference ptyRefs addElement ref public void addPropertyset PropertySet ref assertNotReference setRefs addElement ref public Mapper createMapper assertNotReference if null throw new BuildException new Mapper getProject return public void setDynamic boolean dynamic assertNotReference this dynamic dynamic public boolean getDynamic return isReference getRef dynamic dynamic public Mapper getMapper return isReference getRef public Properties getProperties Vector names null Project prj getProject if getDynamic cachedNames null if isReference getRef addPropertyNames names prj getProperties else addPropertyNames names prj getProperties if getDynamic cachedNames names else names cachedNames FileNameMapper mapper null Mapper myMapper getMapper if myMapper null mapper myMapper getImplementation Properties properties new Properties for Enumeration names elements hasMoreElements String name String nextElement String value prj getProperty name if mapper null String newname mapper mapFileName name if newname null name newname properties setProperty name value return properties private void addPropertyNames Vector names Hashtable properties Project prj getProject for Enumeration ptyRefs elements hasMoreElements PropertyRef ref PropertyRef nextElement if ref name null if prj getProperty ref name null names addElement ref name else if ref prefix null for Enumeration properties keys hasMoreElements String name String nextElement if name startsWith ref prefix names addElement name else if ref regex null RegexpMatcherFactory matchMaker new RegexpMatcherFactory RegexpMatcher matcher matchMaker newRegexpMatcher matcher setPattern ref regex for Enumeration properties keys hasMoreElements String name String nextElement if matcher matches name names addElement name else if ref builtin null Enumeration e2 null if ref builtin equals BuiltinPropertySetName ALL e2 properties keys else if ref builtin equals BuiltinPropertySetName SYSTEM e2 System getProperties keys else if ref builtin equals BuiltinPropertySetName COMMANDLINE e2 getProject getUserProperties keys else throw new BuildException while e2 hasMoreElements names addElement e2 nextElement else throw new BuildException for Enumeration setRefs elements hasMoreElements PropertySet set PropertySet nextElement set addPropertyNames names properties protected PropertySet getRef if isChecked Stack stk new Stack stk push this dieOnCircularReference stk getProject Object getRefid getReferencedObject getProject if instanceof PropertySet String msg getRefid getRefId throw new BuildException msg else return PropertySet public final void setRefid Reference if noAttributeSet throw tooManyAttributes super setRefid protected final void assertNotReference if isReference throw tooManyAttributes noAttributeSet false private boolean noAttributeSet true public static class BuiltinPropertySetName extends EnumeratedAttribute static final String ALL static final String SYSTEM static final String COMMANDLINE public String getValues return new String ALL SYSTEM COMMANDLINE', 'bug': '1'}
{'sequence': 'public interface XSLTLogger void log String msg', 'bug': '0'}
{'sequence': 'public class DemuxOutputStream extends OutputStream private static class BufferInfo private ByteArrayOutputStream buffer private boolean crSeen false private static final int MAX_SIZE private static final int INTIAL_SIZE private static final int CR private static final int LF private Hashtable buffers new Hashtable private Project project private boolean isErrorStream public DemuxOutputStream Project project boolean isErrorStream this project project this isErrorStream isErrorStream private BufferInfo getBufferInfo Thread current Thread currentThread BufferInfo bufferInfo BufferInfo buffers get current if bufferInfo null bufferInfo new BufferInfo bufferInfo buffer new ByteArrayOutputStream INTIAL_SIZE bufferInfo crSeen false buffers put current bufferInfo return bufferInfo private void resetBufferInfo Thread current Thread currentThread BufferInfo bufferInfo BufferInfo buffers get current try bufferInfo buffer close catch IOException bufferInfo buffer new ByteArrayOutputStream bufferInfo crSeen false private void removeBuffer Thread current Thread currentThread buffers remove current public void write int cc throws IOException final byte byte cc BufferInfo bufferInfo getBufferInfo if bufferInfo buffer write cc processBuffer bufferInfo buffer else if bufferInfo crSeen processBuffer bufferInfo buffer bufferInfo buffer write cc bufferInfo crSeen if bufferInfo crSeen bufferInfo buffer size MAX_SIZE processBuffer bufferInfo buffer protected void processBuffer ByteArrayOutputStream buffer String output buffer toString project demuxOutput output isErrorStream resetBufferInfo protected void processFlush ByteArrayOutputStream buffer String output buffer toString project demuxFlush output isErrorStream resetBufferInfo public void close throws IOException flush removeBuffer public void flush throws IOException BufferInfo bufferInfo getBufferInfo if bufferInfo buffer size processFlush bufferInfo buffer public void write byte int off int len throws IOException int offset off int blockStartOffset offset int remaining len BufferInfo bufferInfo getBufferInfo while remaining while remaining offset LF offset CR offset remaining int blockLength offset blockStartOffset if blockLength bufferInfo buffer write blockStartOffset blockLength while remaining offset LF offset CR write offset offset remaining blockStartOffset offset', 'bug': '0'}
{'sequence': 'public class DefaultLogger implements BuildLogger public static final int LEFT_COLUMN_SIZE protected PrintStream out protected PrintStream err protected int msgOutputLevel Project MSG_ERR private long startTime System currentTimeMillis protected static final String lSep StringUtils LINE_SEP protected boolean emacsMode false public DefaultLogger public void setMessageOutputLevel int level this msgOutputLevel level public void setOutputPrintStream PrintStream output this out new PrintStream output true public void setErrorPrintStream PrintStream err this err new PrintStream err true public void setEmacsMode boolean emacsMode this emacsMode emacsMode public void buildStarted BuildEvent event startTime System currentTimeMillis public void buildFinished BuildEvent event Throwable error event getException StringBuffer message new StringBuffer if error null message append StringUtils LINE_SEP message append else message append StringUtils LINE_SEP message append message append StringUtils LINE_SEP if Project MSG_VERBOSE msgOutputLevel error instanceof BuildException message append StringUtils getStackTrace error else if error instanceof BuildException message append error toString append lSep else message append error getMessage append lSep message append StringUtils LINE_SEP message append message append formatTime System currentTimeMillis startTime String msg message toString if error null printMessage msg out Project MSG_VERBOSE else printMessage msg err Project MSG_ERR log msg public void targetStarted BuildEvent event if Project MSG_INFO msgOutputLevel event getTarget getName equals String msg StringUtils LINE_SEP event getTarget getName printMessage msg out event getPriority log msg public void targetFinished BuildEvent event public void taskStarted BuildEvent event public void taskFinished BuildEvent event public void messageLogged BuildEvent event int priority event getPriority if priority msgOutputLevel StringBuffer message new StringBuffer if event getTask null emacsMode String name event getTask getTaskName String label name int size LEFT_COLUMN_SIZE label length StringBuffer tmp new StringBuffer for int size tmp append tmp append label label tmp toString try BufferedReader new BufferedReader new StringReader event getMessage String line readLine boolean first true while line null if first message append StringUtils LINE_SEP first false message append label append line line readLine catch IOException message append label append event getMessage else message append event getMessage String msg message toString if priority Project MSG_ERR printMessage msg out priority else printMessage msg err priority log msg protected static String formatTime final long millis return DateUtils formatElapsedTime millis protected void printMessage final String message final PrintStream stream final int priority stream println message protected void log String message', 'bug': '1'}
{'sequence': 'public class TarInputStream extends FilterInputStream protected boolean debug protected boolean hasHitEOF protected int entrySize protected int entryOffset protected byte oneBuf protected byte readBuf protected TarBuffer buffer protected TarEntry currEntry private boolean v7Format public TarInputStream InputStream is this is TarBuffer DEFAULT_BLKSIZE TarBuffer DEFAULT_RCDSIZE public TarInputStream InputStream is int blockSize this is blockSize TarBuffer DEFAULT_RCDSIZE public TarInputStream InputStream is int blockSize int recordSize super is this buffer new TarBuffer is blockSize recordSize this readBuf null this oneBuf new byte this debug false this hasHitEOF false this v7Format false public void setDebug boolean debug this debug debug this buffer setDebug debug public void close throws IOException this buffer close public int getRecordSize return this buffer getRecordSize public int available throws IOException return this entrySize this entryOffset public long skip long numToSkip throws IOException byte skipBuf new byte long skip numToSkip while skip int realSkip int skip skipBuf length skipBuf length skip int numRead this read skipBuf realSkip if numRead break skip numRead return numToSkip skip public boolean markSupported return false public void mark int markLimit public void reset public TarEntry getNextEntry throws IOException if this hasHitEOF return null if this currEntry null int numToSkip this entrySize this entryOffset if this debug System err println this currEntry getName this entrySize this entryOffset numToSkip if numToSkip this skip numToSkip this readBuf null byte headerBuf this buffer readRecord if headerBuf null if this debug System err println this hasHitEOF true else if this buffer isEOFRecord headerBuf if this debug System err println this hasHitEOF true if this hasHitEOF this currEntry null else this currEntry new TarEntry headerBuf if headerBuf headerBuf headerBuf headerBuf headerBuf this v7Format true if this debug System err println this currEntry getName this currEntry getSize this entryOffset this entrySize int this currEntry getSize if this currEntry null this currEntry isGNULongNameEntry StringBuffer longName new StringBuffer byte buffer new byte int length while length read buffer longName append new String buffer length getNextEntry if longName length longName charAt longName length longName deleteCharAt longName length this currEntry setName longName toString return this currEntry public int read throws IOException int num this read this oneBuf if num return num else return int this oneBuf public int read byte buf throws IOException return this read buf buf length public int read byte buf int offset int numToRead throws IOException int totalRead if this entryOffset this entrySize return if numToRead this entryOffset this entrySize numToRead this entrySize this entryOffset if this readBuf null int sz numToRead this readBuf length this readBuf length numToRead System arraycopy this readBuf buf offset sz if sz this readBuf length this readBuf null else int newLen this readBuf length sz byte newBuf new byte newLen System arraycopy this readBuf sz newBuf newLen this readBuf newBuf totalRead sz numToRead sz offset sz while numToRead byte rec this buffer readRecord if rec null throw new IOException numToRead int sz numToRead int recLen rec length if recLen sz System arraycopy rec buf offset sz this readBuf new byte recLen sz System arraycopy rec sz this readBuf recLen sz else sz recLen System arraycopy rec buf offset recLen totalRead sz numToRead sz offset sz this entryOffset totalRead return totalRead public void copyEntryContents OutputStream out throws IOException byte buf new byte while true int numRead this read buf buf length if numRead break out write buf numRead', 'bug': '1'}
{'sequence': 'public class DifferentSelector extends MappingSelector private FileUtils fileUtils FileUtils newFileUtils private boolean ignoreFileTimes true public void setIgnoreFileTimes boolean ignoreFileTimes this ignoreFileTimes ignoreFileTimes protected boolean selectionTest File srcfile File destfile if srcfile exists destfile exists return true if srcfile length destfile length return true if ignoreFileTimes boolean sameDate sameDate destfile lastModified srcfile lastModified granularity destfile lastModified srcfile lastModified granularity if sameDate return true try return fileUtils contentEquals srcfile destfile catch IOException throw new BuildException srcfile destfile', 'bug': '0'}
{'sequence': 'public interface BuildListener extends EventListener void buildStarted BuildEvent event void buildFinished BuildEvent event void targetStarted BuildEvent event void targetFinished BuildEvent event void taskStarted BuildEvent event void taskFinished BuildEvent event void messageLogged BuildEvent event', 'bug': '0'}
{'sequence': 'public class Contains implements Condition private String string subString private boolean caseSensitive true public void setString String string this string string public void setSubstring String subString this subString subString public void setCasesensitive boolean caseSensitive public boolean eval throws BuildException if string null subString null throw new BuildException return caseSensitive string indexOf subString string toLowerCase indexOf subString toLowerCase', 'bug': '0'}
{'sequence': 'public class Antlib extends Task implements TaskContainer public static final String TAG public static Antlib createAntlib Project project URL antlibUrl String uri try antlibUrl openConnection connect catch IOException ex throw new BuildException antlibUrl ex ComponentHelper helper ComponentHelper getComponentHelper project helper enterAntLib uri try ProjectHelper2 parser new ProjectHelper2 UnknownElement ue parser parseUnknownElement project antlibUrl if ue getTag equals TAG throw new BuildException ue getTag TAG ue getLocation Antlib antlib new Antlib antlib setProject project antlib setLocation ue getLocation antlib init ue configure antlib return antlib finally helper exitAntLib private ClassLoader classLoader private String uri private List tasks new ArrayList protected void setClassLoader ClassLoader classLoader this classLoader classLoader protected void setURI String uri this uri uri private ClassLoader getClassLoader if classLoader null classLoader Antlib class getClassLoader return classLoader public void addTask Task nestedTask tasks add nestedTask public void execute for Iterator tasks iterator hasNext UnknownElement ue UnknownElement next setLocation ue getLocation ue maybeConfigure Object configuredObject ue getRealThing if configuredObject null continue if configuredObject instanceof AntlibDefinition throw new BuildException ue getTag configuredObject getClass AntlibDefinition def AntlibDefinition configuredObject def setURI uri def setAntlibClassLoader getClassLoader def init def execute', 'bug': '0'}
{'sequence': 'public class ProjectHelperImpl extends ProjectHelper private org xml sax Parser parser private Project project private File buildFile private File buildFileParent private Locator locator private Target implicitTarget new Target private static FileUtils fu FileUtils newFileUtils public ProjectHelperImpl implicitTarget setName public void parse Project project Object source throws BuildException if source instanceof File throw new BuildException File buildFile File source FileInputStream inputStream null InputSource inputSource null this project project this buildFile new File buildFile getAbsolutePath buildFileParent new File this buildFile getParent try try parser JAXPUtils getParser catch BuildException parser new XMLReaderAdapter JAXPUtils getXMLReader String uri fu toURI buildFile getAbsolutePath inputStream new FileInputStream buildFile inputSource new InputSource inputStream inputSource setSystemId uri project log buildFile uri Project MSG_VERBOSE HandlerBase hb new RootHandler this parser setDocumentHandler hb parser setEntityResolver hb parser setErrorHandler hb parser setDTDHandler hb parser parse inputSource catch SAXParseException exc Location location new Location exc getSystemId exc getLineNumber exc getColumnNumber Throwable exc getException if instanceof BuildException BuildException be BuildException if be getLocation Location UNKNOWN_LOCATION be setLocation location throw be throw new BuildException exc getMessage location catch SAXException exc Throwable exc getException if instanceof BuildException throw BuildException throw new BuildException exc getMessage catch FileNotFoundException exc throw new BuildException exc catch UnsupportedEncodingException exc throw new BuildException exc catch IOException exc throw new BuildException exc getMessage exc finally if inputStream null try inputStream close catch IOException ioe static class AbstractHandler extends HandlerBase protected DocumentHandler parentHandler ProjectHelperImpl helperImpl public AbstractHandler ProjectHelperImpl helperImpl DocumentHandler parentHandler this parentHandler parentHandler this helperImpl helperImpl helperImpl parser setDocumentHandler this public void startElement String tag AttributeList attrs throws SAXParseException throw new SAXParseException tag helperImpl locator public void characters char buf int start int count throws SAXParseException String new String buf start count trim if length throw new SAXParseException helperImpl locator public void endElement String name throws SAXException helperImpl parser setDocumentHandler parentHandler static class RootHandler extends HandlerBase ProjectHelperImpl helperImpl public RootHandler ProjectHelperImpl helperImpl this helperImpl helperImpl public InputSource resolveEntity String publicId String systemId helperImpl project log systemId Project MSG_VERBOSE if systemId startsWith String path fu fromURI systemId File file new File path if file isAbsolute file fu resolveFile helperImpl buildFileParent path try InputSource inputSource new InputSource new FileInputStream file inputSource setSystemId fu toURI file getAbsolutePath return inputSource catch FileNotFoundException fne helperImpl project log file getAbsolutePath Project MSG_WARN return null public void startElement String tag AttributeList attrs throws SAXParseException if tag equals new ProjectHandler helperImpl this init tag attrs else throw new SAXParseException helperImpl locator public void setDocumentLocator Locator locator helperImpl locator locator static class ProjectHandler extends AbstractHandler public ProjectHandler ProjectHelperImpl helperImpl DocumentHandler parentHandler super helperImpl parentHandler public void init String tag AttributeList attrs throws SAXParseException String def null String name null String id null String baseDir null for int attrs getLength String key attrs getName String value attrs getValue if key equals def value else if key equals name value else if key equals id value else if key equals baseDir value else throw new SAXParseException attrs getName helperImpl locator if def null def equals helperImpl project setDefaultTarget def else throw new BuildException if name null helperImpl project setName name helperImpl project addReference name helperImpl project if id null helperImpl project addReference id helperImpl project if helperImpl project getProperty null helperImpl project setBasedir helperImpl project getProperty else if baseDir null helperImpl project setBasedir helperImpl buildFileParent getAbsolutePath else if new File baseDir isAbsolute helperImpl project setBasedir baseDir else File resolvedBaseDir helperImpl project resolveFile baseDir helperImpl buildFileParent helperImpl project setBaseDir resolvedBaseDir helperImpl project addTarget helperImpl implicitTarget public void startElement String name AttributeList attrs throws SAXParseException if name equals handleTarget name attrs else handleElement helperImpl this helperImpl implicitTarget name attrs private void handleTarget String tag AttributeList attrs throws SAXParseException new TargetHandler helperImpl this init tag attrs static class TargetHandler extends AbstractHandler private Target target public TargetHandler ProjectHelperImpl helperImpl DocumentHandler parentHandler super helperImpl parentHandler public void init String tag AttributeList attrs throws SAXParseException String name null String depends String ifCond null String unlessCond null String id null String description null for int attrs getLength String key attrs getName String value attrs getValue if key equals name value if name equals throw new BuildException new Location helperImpl locator else if key equals depends value else if key equals ifCond value else if key equals unlessCond value else if key equals id value else if key equals description value else throw new SAXParseException key helperImpl locator if name null throw new SAXParseException helperImpl locator target new Target target addDependency target setName name target setIf ifCond target setUnless unlessCond target setDescription description helperImpl project addTarget name target if id null id equals helperImpl project addReference id target if depends length target setDepends depends public void startElement String name AttributeList attrs throws SAXParseException handleElement helperImpl this target name attrs private static void handleElement ProjectHelperImpl helperImpl DocumentHandler parent Target target String elementName AttributeList attrs throws SAXParseException if elementName equals new DescriptionHandler helperImpl parent else if helperImpl project getDataTypeDefinitions get elementName null new DataTypeHandler helperImpl parent target init elementName attrs else new TaskHandler helperImpl parent target null target init elementName attrs static class DescriptionHandler extends AbstractHandler public DescriptionHandler ProjectHelperImpl helperImpl DocumentHandler parentHandler super helperImpl parentHandler public void characters char buf int start int count String text new String buf start count String currentDescription helperImpl project getDescription if currentDescription null helperImpl project setDescription text else helperImpl project setDescription currentDescription text static class TaskHandler extends AbstractHandler private Target target private TaskContainer container private Task task private RuntimeConfigurable parentWrapper private RuntimeConfigurable wrapper null public TaskHandler ProjectHelperImpl helperImpl DocumentHandler parentHandler TaskContainer container RuntimeConfigurable parentWrapper Target target super helperImpl parentHandler this container container this parentWrapper parentWrapper this target target public void init String tag AttributeList attrs throws SAXParseException try task helperImpl project createTask tag catch BuildException if task null task new UnknownElement tag task setProject helperImpl project task setTaskName tag task setLocation new Location helperImpl locator helperImpl configureId task attrs task setOwningTarget target container addTask task task init wrapper task getRuntimeConfigurableWrapper wrapper setAttributes attrs if parentWrapper null parentWrapper addChild wrapper public void characters char buf int start int count wrapper addText buf start count public void startElement String name AttributeList attrs throws SAXParseException if task instanceof TaskContainer new TaskHandler helperImpl this TaskContainer task wrapper target init name attrs else new NestedElementHandler helperImpl this task wrapper target init name attrs static class NestedElementHandler extends AbstractHandler private Object parent private Object child private RuntimeConfigurable parentWrapper private RuntimeConfigurable childWrapper null private Target target public NestedElementHandler ProjectHelperImpl helperImpl DocumentHandler parentHandler Object parent RuntimeConfigurable parentWrapper Target target super helperImpl parentHandler if parent instanceof TypeAdapter this parent TypeAdapter parent getProxy else this parent parent this parentWrapper parentWrapper this target target public void init String propType AttributeList attrs throws SAXParseException Class parentClass parent getClass IntrospectionHelper ih IntrospectionHelper getHelper parentClass try String elementName propType toLowerCase Locale US if parent instanceof UnknownElement UnknownElement uc new UnknownElement elementName uc setProject helperImpl project UnknownElement parent addChild uc child uc else child ih createElement helperImpl project parent elementName helperImpl configureId child attrs childWrapper new RuntimeConfigurable child propType childWrapper setAttributes attrs parentWrapper addChild childWrapper catch BuildException exc throw new SAXParseException exc getMessage helperImpl locator exc public void characters char buf int start int count childWrapper addText buf start count public void startElement String name AttributeList attrs throws SAXParseException if child instanceof TaskContainer new TaskHandler helperImpl this TaskContainer child childWrapper target init name attrs else new NestedElementHandler helperImpl this child childWrapper target init name attrs static class DataTypeHandler extends AbstractHandler private Target target private Object element private RuntimeConfigurable wrapper null public DataTypeHandler ProjectHelperImpl helperImpl DocumentHandler parentHandler Target target super helperImpl parentHandler this target target public void init String propType AttributeList attrs throws SAXParseException try element helperImpl project createDataType propType if element null throw new BuildException propType wrapper new RuntimeConfigurable element propType wrapper setAttributes attrs target addDataType wrapper catch BuildException exc throw new SAXParseException exc getMessage helperImpl locator exc public void characters char buf int start int count wrapper addText buf start count public void startElement String name AttributeList attrs throws SAXParseException new NestedElementHandler helperImpl this element wrapper target init name attrs private void configureId Object target AttributeList attr String id attr getValue if id null project addReference id target', 'bug': '1'}
{'sequence': 'public class PropertiesfileCache implements Cache private File cachefile null private Properties cache new Properties private boolean cacheLoaded false private boolean cacheDirty true public PropertiesfileCache public PropertiesfileCache File cachefile this cachefile cachefile public void setCachefile File file cachefile file public File getCachefile return cachefile public boolean isValid return cachefile null public void load if cachefile null cachefile isFile cachefile canRead try BufferedInputStream bis new BufferedInputStream new FileInputStream cachefile cache load bis bis close catch Exception printStackTrace cacheLoaded true cacheDirty false public void save if cacheDirty return if cachefile null cache propertyNames hasMoreElements try BufferedOutputStream bos new BufferedOutputStream new FileOutputStream cachefile cache store bos null bos flush bos close catch Exception printStackTrace cacheDirty false public void delete cache new Properties cachefile delete cacheLoaded true cacheDirty false public Object get Object key if cacheLoaded load try return cache getProperty String valueOf key catch ClassCastException return null public void put Object key Object value cache put String valueOf key String valueOf value cacheDirty true public Iterator iterator Vector new java util Vector Enumeration en cache propertyNames while en hasMoreElements add en nextElement return iterator public String toString StringBuffer buf new StringBuffer buf append buf append append cachefile buf append append cache size buf append return buf toString', 'bug': '1'}
{'sequence': 'public class CvsUser private String m_userID private String m_displayName public void setDisplayname final String displayName m_displayName displayName public void setUserid final String userID m_userID userID String getUserID return m_userID String getDisplayname return m_displayName void validate throws BuildException if null m_userID final String message throw new BuildException message if null m_displayName final String message m_userID throw new BuildException message', 'bug': '0'}
{'sequence': 'public class BZip2 extends Pack protected void pack CBZip2OutputStream zOut null try BufferedOutputStream bos new BufferedOutputStream new FileOutputStream zipFile bos write bos write zOut new CBZip2OutputStream bos zipFile source zOut catch IOException ioe String msg ioe getMessage throw new BuildException msg ioe getLocation finally if zOut null try zOut close catch IOException', 'bug': '0'}
{'sequence': 'public interface TypeAdapter void setProject Project Project getProject void setProxy Object Object getProxy void checkProxyClass Class proxyClass', 'bug': '0'}
{'sequence': 'class ProcessDestroyer implements Runnable private Vector processes new Vector private Method addShutdownHookMethod private Method removeShutdownHookMethod private ProcessDestroyerImpl destroyProcessThread null private boolean added false private class ProcessDestroyerImpl extends Thread private boolean shouldDestroy true public ProcessDestroyerImpl super public void run if shouldDestroy ProcessDestroyer this run public void setShouldDestroy boolean shouldDestroy this shouldDestroy shouldDestroy public ProcessDestroyer try Class paramTypes Thread class addShutdownHookMethod Runtime class getMethod paramTypes removeShutdownHookMethod Runtime class getMethod paramTypes catch NoSuchMethodException catch Exception printStackTrace private void addShutdownHook if addShutdownHookMethod null destroyProcessThread new ProcessDestroyerImpl Object args destroyProcessThread try addShutdownHookMethod invoke Runtime getRuntime args added true catch IllegalAccessException printStackTrace catch InvocationTargetException printStackTrace private void removeShutdownHook if removeShutdownHookMethod null destroyProcessThread null Object args destroyProcessThread try Boolean removed Boolean removeShutdownHookMethod invoke Runtime getRuntime args if removed booleanValue System err println destroyProcessThread setShouldDestroy false destroyProcessThread start try destroyProcessThread join catch InterruptedException ie destroyProcessThread null added false catch IllegalAccessException printStackTrace catch InvocationTargetException printStackTrace public boolean isAddedAsShutdownHook return added public boolean add Process process synchronized processes if processes size addShutdownHook processes addElement process return processes contains process public boolean remove Process process synchronized processes boolean processRemoved processes removeElement process if processes size processes notifyAll removeShutdownHook return processRemoved public void run synchronized processes Enumeration processes elements while hasMoreElements Process nextElement destroy try processes wait catch InterruptedException interrupt', 'bug': '0'}
{'sequence': 'public class PresentSelector extends BaseSelector private File targetdir null private Mapper mapperElement null private FileNameMapper map null private boolean destmustexist true public PresentSelector public String toString StringBuffer buf new StringBuffer if targetdir null buf append else buf append targetdir getName buf append if destmustexist buf append else buf append if map null buf append map toString else if mapperElement null buf append mapperElement toString buf append return buf toString public void setTargetdir File targetdir this targetdir targetdir public Mapper createMapper throws BuildException if mapperElement null throw new BuildException mapperElement new Mapper getProject return mapperElement public void setPresent FilePresence fp if fp getIndex destmustexist false public void verifySettings if targetdir null setError if mapperElement null map new IdentityMapper else map mapperElement getImplementation if map null setError public boolean isSelected File basedir String filename File file validate String destfiles map mapFileName filename if destfiles null return false if destfiles length destfiles null throw new BuildException targetdir filename String destname destfiles File destfile new File targetdir destname return destfile exists destmustexist public static class FilePresence extends EnumeratedAttribute public String getValues return new String', 'bug': '0'}
{'sequence': 'public class FilterSetCollection private Vector filterSets new Vector public FilterSetCollection public FilterSetCollection FilterSet filterSet addFilterSet filterSet public void addFilterSet FilterSet filterSet filterSets addElement filterSet public String replaceTokens String line String replacedLine line for Enumeration filterSets elements hasMoreElements FilterSet filterSet FilterSet nextElement replacedLine filterSet replaceTokens replacedLine return replacedLine public boolean hasFilters for Enumeration filterSets elements hasMoreElements FilterSet filterSet FilterSet nextElement if filterSet hasFilters return true return false', 'bug': '0'}
{'sequence': 'public class GenerateKey extends Task public static class DnameParam private String name private String value public void setName String name this name name public String getName return name public void setValue String value this value value public String getValue return value public static class DistinguishedName private Vector params new Vector public Object createParam DnameParam param new DnameParam params addElement param return param public Enumeration getParams return params elements public String toString final int size params size final StringBuffer sb new StringBuffer boolean firstPass true for int size if firstPass sb append firstPass false final DnameParam param DnameParam params elementAt sb append encode param getName sb append sb append encode param getValue return sb toString public String encode final String string int end string indexOf if end return string final StringBuffer sb new StringBuffer int start while end sb append string substring start end sb append start end end string indexOf start sb append string substring start return sb toString protected String alias protected String keystore protected String storepass protected String storetype protected String keypass protected String sigalg protected String keyalg protected String dname protected DistinguishedName expandedDname protected int keysize protected int validity protected boolean verbose public DistinguishedName createDname throws BuildException if null expandedDname throw new BuildException if null dname throw new BuildException expandedDname new DistinguishedName return expandedDname public void setDname final String dname if null expandedDname throw new BuildException this dname dname public void setAlias final String alias this alias alias public void setKeystore final String keystore this keystore keystore public void setStorepass final String storepass this storepass storepass public void setStoretype final String storetype this storetype storetype public void setKeypass final String keypass this keypass keypass public void setSigalg final String sigalg this sigalg sigalg public void setKeyalg final String keyalg this keyalg keyalg public void setKeysize final String keysize throws BuildException try this keysize Integer parseInt keysize catch final NumberFormatException nfe throw new BuildException public void setValidity final String validity throws BuildException try this validity Integer parseInt validity catch final NumberFormatException nfe throw new BuildException public void setVerbose final boolean verbose this verbose verbose public void execute throws BuildException if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 throw new BuildException if null alias throw new BuildException if null storepass throw new BuildException if null dname null expandedDname throw new BuildException final StringBuffer sb new StringBuffer sb append if verbose sb append sb append sb append alias sb append if null dname sb append sb append dname sb append if null expandedDname sb append sb append expandedDname sb append if null keystore sb append sb append keystore sb append if null storepass sb append sb append storepass sb append if null storetype sb append sb append storetype sb append sb append if null keypass sb append keypass else sb append storepass sb append if null sigalg sb append sb append sigalg sb append if null keyalg sb append sb append keyalg sb append if keysize sb append sb append keysize sb append if validity sb append sb append validity sb append log alias final ExecTask cmd ExecTask getProject createTask cmd setExecutable Commandline Argument arg cmd createArg arg setLine sb toString cmd setFailonerror true cmd setTaskName getTaskName cmd execute', 'bug': '0'}
{'sequence': 'public interface Cache boolean isValid void delete void load void save Object get Object key void put Object key Object value Iterator iterator', 'bug': '0'}
{'sequence': 'public class EmailTask extends Task public static final String AUTO public static final String MIME public static final String UU public static final String PLAIN public static class Encoding extends EnumeratedAttribute public String getValues return new String AUTO MIME UU PLAIN private String encoding AUTO private String host private int port private String subject null private Message message null private boolean failOnError true private boolean includeFileNames false private String messageMimeType null private EmailAddress from null private Vector replyToList new Vector private Vector toList new Vector private Vector ccList new Vector private Vector bccList new Vector private Vector files new Vector private Vector filesets new Vector private String charset null private String user null private String password null private boolean SSL false public void setUser String user this user user public void setPassword String password this password password public void setSSL boolean SSL this SSL SSL public void setEncoding Encoding encoding this encoding encoding getValue public void setMailport int port this port port public void setMailhost String host this host host public void setSubject String subject this subject subject public void setMessage String message if this message null throw new BuildException this message new Message message this message setProject getProject public void setMessageFile File file if this message null throw new BuildException this message new Message file this message setProject getProject public void setMessageMimeType String type this messageMimeType type public void addMessage Message message throws BuildException if this message null throw new BuildException this message message public void addFrom EmailAddress address if this from null throw new BuildException this from address public void setFrom String address if this from null throw new BuildException this from new EmailAddress address public void addReplyTo EmailAddress address this replyToList add address public void setReplyTo String address this replyToList add new EmailAddress address public void addTo EmailAddress address toList addElement address public void setToList String list StringTokenizer tokens new StringTokenizer list while tokens hasMoreTokens toList addElement new EmailAddress tokens nextToken public void addCc EmailAddress address ccList addElement address public void setCcList String list StringTokenizer tokens new StringTokenizer list while tokens hasMoreTokens ccList addElement new EmailAddress tokens nextToken public void addBcc EmailAddress address bccList addElement address public void setBccList String list StringTokenizer tokens new StringTokenizer list while tokens hasMoreTokens bccList addElement new EmailAddress tokens nextToken public void setFailOnError boolean failOnError this failOnError failOnError public void setFiles String filenames StringTokenizer new StringTokenizer filenames while hasMoreTokens files addElement getProject resolveFile nextToken public void addFileset FileSet fs filesets addElement fs public void setIncludefilenames boolean includeFileNames this includeFileNames includeFileNames public boolean getIncludeFileNames return includeFileNames public void execute Message savedMessage message Vector savedFiles Vector files clone try Mailer mailer null boolean autoFound false if encoding equals MIME encoding equals AUTO autoFound try mailer Mailer Class forName newInstance autoFound true log Project MSG_VERBOSE catch Throwable log getMessage Project MSG_WARN if autoFound false user null password null encoding equals UU encoding equals PLAIN throw new BuildException if autoFound false SSL encoding equals UU encoding equals PLAIN throw new BuildException if encoding equals UU encoding equals AUTO autoFound try mailer Mailer Class forName newInstance autoFound true log Project MSG_VERBOSE catch Throwable log Project MSG_WARN if encoding equals PLAIN encoding equals AUTO autoFound mailer new PlainMailer autoFound true log Project MSG_VERBOSE if mailer null throw new BuildException encoding if message null message new Message message setProject getProject if from null from getAddress null throw new BuildException if toList isEmpty ccList isEmpty bccList isEmpty throw new BuildException if messageMimeType null if message isMimeTypeSpecified throw new BuildException else message setMimeType messageMimeType if charset null if message getCharset null throw new BuildException else message setCharset charset Enumeration filesets elements while hasMoreElements FileSet fs FileSet nextElement DirectoryScanner ds fs getDirectoryScanner getProject String includedFiles ds getIncludedFiles File baseDir ds getBasedir for int includedFiles length File file new File baseDir includedFiles files addElement file log subject Project MSG_INFO log from Project MSG_VERBOSE log replyToList Project MSG_VERBOSE log toList Project MSG_VERBOSE log ccList Project MSG_VERBOSE log bccList Project MSG_VERBOSE mailer setHost host mailer setPort port mailer setUser user mailer setPassword password mailer setSSL SSL mailer setMessage message mailer setFrom from mailer setReplyToList replyToList mailer setToList toList mailer setCcList ccList mailer setBccList bccList mailer setFiles files mailer setSubject subject mailer setTask this mailer setIncludeFileNames includeFileNames mailer send int count files size log count count Project MSG_INFO catch BuildException log Project MSG_WARN if failOnError throw catch Exception log Project MSG_WARN if failOnError throw new BuildException finally message savedMessage files savedFiles public void setCharset String charset this charset charset public String getCharset return charset', 'bug': '0'}
{'sequence': 'public class FlatFileNameMapper implements FileNameMapper public void setFrom String from public void setTo String to public String mapFileName String sourceFileName return new String new java io File sourceFileName getName', 'bug': '0'}
{'sequence': 'public class Transform extends ExecuteOn', 'bug': '0'}
{'sequence': 'public class GlobPatternMapper implements FileNameMapper protected String fromPrefix null protected String fromPostfix null protected int prefixLength protected int postfixLength protected String toPrefix null protected String toPostfix null public void setFrom String from int index from lastIndexOf if index fromPrefix from fromPostfix else fromPrefix from substring index fromPostfix from substring index prefixLength fromPrefix length postfixLength fromPostfix length public void setTo String to int index to lastIndexOf if index toPrefix to toPostfix else toPrefix to substring index toPostfix to substring index public String mapFileName String sourceFileName if fromPrefix null sourceFileName startsWith fromPrefix sourceFileName endsWith fromPostfix return null return new String toPrefix extractVariablePart sourceFileName toPostfix protected String extractVariablePart String name return name substring prefixLength name length postfixLength', 'bug': '0'}
{'sequence': 'public class ErrorInQuitException extends IOException public ErrorInQuitException IOException super getMessage', 'bug': '0'}
{'sequence': 'public class RmicAdapterFactory private RmicAdapterFactory public static RmicAdapter getRmic String rmicType Task task throws BuildException if rmicType equalsIgnoreCase return new SunRmic else if rmicType equalsIgnoreCase return new KaffeRmic else if rmicType equalsIgnoreCase return new WLRmic return resolveClassName rmicType private static RmicAdapter resolveClassName String className throws BuildException try Class Class forName className Object newInstance return RmicAdapter catch ClassNotFoundException cnfe throw new BuildException className cnfe catch ClassCastException cce throw new BuildException className cce catch Throwable throw new BuildException className', 'bug': '1'}
{'sequence': 'class RCSFile private String m_name private String m_revision private String m_previousRevision RCSFile final String name final String rev this name rev null RCSFile final String name final String revision final String previousRevision m_name name m_revision revision if revision equals previousRevision m_previousRevision previousRevision String getName return m_name String getRevision return m_revision String getPreviousRevision return m_previousRevision', 'bug': '0'}
{'sequence': 'public class XmlLogger implements BuildLogger private int msgOutputLevel Project MSG_DEBUG private PrintStream outStream private static DocumentBuilder builder getDocumentBuilder private static DocumentBuilder getDocumentBuilder try return DocumentBuilderFactory newInstance newDocumentBuilder catch Exception exc throw new ExceptionInInitializerError exc private static final String BUILD_TAG private static final String TARGET_TAG private static final String TASK_TAG private static final String MESSAGE_TAG private static final String NAME_ATTR private static final String TIME_ATTR private static final String PRIORITY_ATTR private static final String LOCATION_ATTR private static final String ERROR_ATTR private static final String STACKTRACE_TAG private Document doc builder newDocument private Hashtable tasks new Hashtable private Hashtable targets new Hashtable private Hashtable threadStacks new Hashtable private TimedElement buildElement null private static class TimedElement private long startTime private Element element public XmlLogger public void buildStarted BuildEvent event buildElement new TimedElement buildElement startTime System currentTimeMillis buildElement element doc createElement BUILD_TAG public void buildFinished BuildEvent event long totalTime System currentTimeMillis buildElement startTime buildElement element setAttribute TIME_ATTR DefaultLogger formatTime totalTime if event getException null buildElement element setAttribute ERROR_ATTR event getException toString Throwable event getException Text errText doc createCDATASection StringUtils getStackTrace Element stacktrace doc createElement STACKTRACE_TAG stacktrace appendChild errText buildElement element appendChild stacktrace String outFilename event getProject getProperty if outFilename null outFilename String xslUri event getProject getProperty if xslUri null xslUri Writer out null try OutputStream stream outStream if stream null stream new FileOutputStream outFilename out new OutputStreamWriter stream out write if xslUri length out write xslUri new DOMElementWriter write buildElement element out out flush catch IOException exc throw new BuildException exc finally if out null try out close catch IOException buildElement null private Stack getStack Stack threadStack Stack threadStacks get Thread currentThread if threadStack null threadStack new Stack threadStacks put Thread currentThread threadStack return threadStack public void targetStarted BuildEvent event Target target event getTarget TimedElement targetElement new TimedElement targetElement startTime System currentTimeMillis targetElement element doc createElement TARGET_TAG targetElement element setAttribute NAME_ATTR target getName targets put target targetElement getStack push targetElement public void targetFinished BuildEvent event Target target event getTarget TimedElement targetElement TimedElement targets get target if targetElement null long totalTime System currentTimeMillis targetElement startTime targetElement element setAttribute TIME_ATTR DefaultLogger formatTime totalTime TimedElement parentElement null Stack threadStack getStack if threadStack empty TimedElement poppedStack TimedElement threadStack pop if poppedStack targetElement throw new RuntimeException poppedStack element targetElement element if threadStack empty parentElement TimedElement threadStack peek if parentElement null buildElement element appendChild targetElement element else parentElement element appendChild targetElement element public void taskStarted BuildEvent event TimedElement taskElement new TimedElement taskElement startTime System currentTimeMillis taskElement element doc createElement TASK_TAG Task task event getTask String name event getTask getTaskName taskElement element setAttribute NAME_ATTR name taskElement element setAttribute LOCATION_ATTR event getTask getLocation toString tasks put task taskElement getStack push taskElement public void taskFinished BuildEvent event Task task event getTask TimedElement taskElement TimedElement tasks get task if taskElement null long totalTime System currentTimeMillis taskElement startTime taskElement element setAttribute TIME_ATTR DefaultLogger formatTime totalTime Target target task getOwningTarget TimedElement targetElement null if target null targetElement TimedElement targets get target if targetElement null buildElement element appendChild taskElement element else targetElement element appendChild taskElement element Stack threadStack getStack if threadStack empty TimedElement poppedStack TimedElement threadStack pop if poppedStack taskElement throw new RuntimeException poppedStack element taskElement element private TimedElement getTaskElement Task task TimedElement element TimedElement tasks get task if element null return element for Enumeration tasks keys hasMoreElements Task key Task nextElement if key instanceof UnknownElement if UnknownElement key getTask task return TimedElement tasks get key return null public void messageLogged BuildEvent event int priority event getPriority if priority msgOutputLevel return Element messageElement doc createElement MESSAGE_TAG String name switch event getPriority case Project MSG_ERR name break case Project MSG_WARN name break case Project MSG_INFO name break default name break messageElement setAttribute PRIORITY_ATTR name Text messageText doc createCDATASection event getMessage messageElement appendChild messageText TimedElement parentElement null Task task event getTask Target target event getTarget if task null parentElement getTaskElement task if parentElement null target null parentElement TimedElement targets get target if parentElement null parentElement element appendChild messageElement else buildElement element appendChild messageElement public void setMessageOutputLevel int level msgOutputLevel level public void setOutputPrintStream PrintStream output this outStream new PrintStream output true public void setEmacsMode boolean emacsMode public void setErrorPrintStream PrintStream err', 'bug': '0'}
{'sequence': 'public class Description extends DataType public void addText String text ProjectHelper ph ProjectHelper getProjectHelper if ph instanceof ProjectHelperImpl return String currentDescription getProject getDescription if currentDescription null getProject setDescription text else getProject setDescription currentDescription text public static String getDescription Project project StringBuffer description new StringBuffer Vector targets Vector project getReference for int targets size Target Target targets elementAt concatDescriptions project description return description toString private static void concatDescriptions Project project Target StringBuffer description if null return Vector tasks findElementInTarget project if tasks null return for int tasks size Task task Task tasks elementAt if task instanceof UnknownElement continue UnknownElement ue UnknownElement task StringBuffer descComp ue getWrapper getText if descComp null description append Object descComp private static Vector findElementInTarget Project project Target String name Task tasks getTasks Vector elems new Vector for int tasks length if name equals tasks getTaskName elems addElement tasks return elems', 'bug': '0'}
{'sequence': 'public class Location implements Serializable private String fileName private int lineNumber private int columnNumber public static final Location UNKNOWN_LOCATION new Location private Location this null public Location String fileName this fileName public Location Locator loc this loc getSystemId loc getLineNumber loc getColumnNumber public Location String fileName int lineNumber int columnNumber if fileName null fileName startsWith this fileName FileUtils newFileUtils fromURI fileName else this fileName fileName this lineNumber lineNumber this columnNumber columnNumber public String getFileName return fileName public int getLineNumber return lineNumber public String toString StringBuffer buf new StringBuffer if fileName null buf append fileName if lineNumber buf append buf append lineNumber buf append return buf toString', 'bug': '0'}
{'sequence': 'public class CallTarget extends Task private Ant callee private String subTarget private boolean inheritAll true private boolean inheritRefs false public void setInheritAll boolean inherit inheritAll inherit public void setInheritRefs boolean inheritRefs this inheritRefs inheritRefs public void init callee Ant getProject createTask callee setOwningTarget getOwningTarget callee setTaskName getTaskName callee setLocation getLocation callee init public void execute throws BuildException if callee null init if subTarget null throw new BuildException getLocation callee setAntfile getProject getProperty callee setTarget subTarget callee setInheritAll inheritAll callee setInheritRefs inheritRefs callee execute public Property createParam if callee null init return callee createProperty public void addReference Ant Reference if callee null init callee addReference public void addPropertyset org apache tools ant types PropertySet ps if callee null init callee addPropertyset ps public void setTarget String target subTarget target public void handleOutput String output if callee null callee handleOutput output else super handleOutput output public int handleInput byte buffer int offset int length throws IOException if callee null return callee handleInput buffer offset length else return super handleInput buffer offset length public void handleFlush String output if callee null callee handleFlush output else super handleFlush output public void handleErrorOutput String output if callee null callee handleErrorOutput output else super handleErrorOutput output public void handleErrorFlush String output if callee null callee handleErrorFlush output else super handleErrorFlush output', 'bug': '0'}
{'sequence': 'public class ManifestException extends Exception public ManifestException String msg super msg', 'bug': '0'}
{'sequence': 'public class Jvc extends DefaultCompilerAdapter public boolean execute throws BuildException attributes log Project MSG_VERBOSE Path classpath new Path project if bootclasspath null classpath append bootclasspath if includeJavaRuntime classpath addExtdirs extdirs classpath append getCompileClasspath if compileSourcepath null classpath append compileSourcepath else classpath append src Commandline cmd new Commandline String exec getJavac getExecutable cmd setExecutable exec null exec if destDir null cmd createArgument setValue cmd createArgument setFile destDir cmd createArgument setValue cmd createArgument setPath classpath boolean msExtensions true String mse getProject getProperty if mse null msExtensions Project toBoolean mse if msExtensions cmd createArgument setValue cmd createArgument setValue cmd createArgument setValue if debug cmd createArgument setValue if optimize cmd createArgument setValue if verbose cmd createArgument setValue addCurrentCompilerArgs cmd int firstFileName cmd size logAndAddFilesToCompile cmd return executeExternalCompile cmd getCommandline firstFileName', 'bug': '0'}
{'sequence': 'public interface ExtendFileSelector extends FileSelector Parameterizable', 'bug': '0'}
{'sequence': 'public class XSLTProcess extends MatchingTask implements XSLTLogger private File destDir null private File baseDir null private String xslFile null private String targetExtension private Vector params new Vector private File inFile null private File outFile null private String processor private Path classpath null private XSLTLiaison liaison private boolean stylesheetLoaded false private boolean force false private FileUtils fileUtils private Vector outputProperties new Vector private XMLCatalog xmlCatalog new XMLCatalog private static final String TRAX_LIAISON_CLASS private static final String XSLP_LIAISON_CLASS private static final String XALAN_LIAISON_CLASS private boolean performDirectoryScan true private Factory factory null private boolean reuseLoadedStylesheet true public XSLTProcess fileUtils FileUtils newFileUtils public void setScanIncludedDirectories boolean performDirectoryScan public void setReloadStylesheet boolean reuseLoadedStylesheet public void execute throws BuildException File savedBaseDir baseDir DirectoryScanner scanner String list String dirs if xslFile null throw new BuildException getLocation if inFile null inFile exists throw new BuildException inFile toString getLocation try if baseDir null baseDir getProject resolveFile liaison getLiaison if liaison instanceof XSLTLoggerAware XSLTLoggerAware liaison setLogger this log liaison getClass toString Project MSG_VERBOSE File stylesheet getProject resolveFile xslFile if stylesheet exists stylesheet fileUtils resolveFile baseDir xslFile if stylesheet exists log log if inFile null outFile null process inFile outFile stylesheet return if destDir null String msg throw new BuildException msg scanner getDirectoryScanner baseDir log destDir Project MSG_INFO list scanner getIncludedFiles for int list length process baseDir list destDir stylesheet if performDirectoryScan dirs scanner getIncludedDirectories for int dirs length list new File baseDir dirs list for int list length process baseDir list destDir stylesheet finally liaison null stylesheetLoaded false baseDir savedBaseDir public void setForce boolean force this force force public void setBasedir File dir baseDir dir public void setDestdir File dir destDir dir public void setExtension String name targetExtension name public void setStyle String xslFile this xslFile xslFile public void setClasspath Path classpath createClasspath append classpath public Path createClasspath if classpath null classpath new Path getProject return classpath createPath public void setClasspathRef Reference createClasspath setRefid public void setProcessor String processor this processor processor public void addConfiguredXMLCatalog XMLCatalog xmlCatalog this xmlCatalog addConfiguredXMLCatalog xmlCatalog private void resolveProcessor String proc throws Exception if proc equals final Class clazz loadClass TRAX_LIAISON_CLASS liaison XSLTLiaison clazz newInstance else if proc equals log final Class clazz loadClass XSLP_LIAISON_CLASS liaison XSLTLiaison clazz newInstance else if proc equals log final Class clazz loadClass XALAN_LIAISON_CLASS liaison XSLTLiaison clazz newInstance else liaison XSLTLiaison loadClass proc newInstance private Class loadClass String classname throws Exception if classpath null return Class forName classname else AntClassLoader al getProject createClassLoader classpath Class Class forName classname true al return public void setOut File outFile this outFile outFile public void setIn File inFile this inFile inFile private void process File baseDir String xmlFile File destDir File stylesheet throws BuildException String fileExt targetExtension File outFile null File inFile null try long styleSheetLastModified stylesheet lastModified inFile new File baseDir xmlFile if inFile isDirectory log inFile Project MSG_VERBOSE return int dotPos xmlFile lastIndexOf if dotPos outFile new File destDir xmlFile substring xmlFile lastIndexOf fileExt else outFile new File destDir xmlFile fileExt if force inFile lastModified outFile lastModified styleSheetLastModified outFile lastModified ensureDirectoryFor outFile log inFile outFile configureLiaison stylesheet liaison transform inFile outFile catch Exception ex log inFile Project MSG_INFO if outFile null outFile delete throw new BuildException ex private void process File inFile File outFile File stylesheet throws BuildException try long styleSheetLastModified stylesheet lastModified log inFile inFile lastModified Project MSG_DEBUG log outFile outFile lastModified Project MSG_DEBUG log xslFile styleSheetLastModified Project MSG_DEBUG if force inFile lastModified outFile lastModified styleSheetLastModified outFile lastModified ensureDirectoryFor outFile log inFile outFile Project MSG_INFO configureLiaison stylesheet liaison transform inFile outFile else log inFile outFile stylesheet Project MSG_DEBUG catch Exception ex log inFile Project MSG_INFO if outFile null outFile delete throw new BuildException ex private void ensureDirectoryFor File targetFile throws BuildException File directory fileUtils getParentFile targetFile if directory exists if directory mkdirs throw new BuildException directory getAbsolutePath public Factory getFactory return factory public XMLCatalog getXMLCatalog return xmlCatalog public Enumeration getOutputProperties return outputProperties elements protected XSLTLiaison getLiaison if liaison null if processor null try resolveProcessor processor catch Exception throw new BuildException else try resolveProcessor catch Throwable e1 try resolveProcessor catch Throwable e2 try resolveProcessor catch Throwable e3 e3 printStackTrace e2 printStackTrace throw new BuildException e1 return liaison public Param createParam Param new Param params addElement return public static class Param private String name null private String expression null private String ifProperty private String unlessProperty private Project project public void setProject Project project this project project public void setName String name this name name public void setExpression String expression this expression expression public String getName throws BuildException if name null throw new BuildException return name public String getExpression throws BuildException if expression null throw new BuildException return expression public void setIf String ifProperty this ifProperty ifProperty public void setUnless String unlessProperty this unlessProperty unlessProperty public boolean shouldUse if ifProperty null project getProperty ifProperty null return false else if unlessProperty null project getProperty unlessProperty null return false return true public OutputProperty createOutputProperty OutputProperty new OutputProperty outputProperties addElement return public static class OutputProperty private String name private String value public String getName return name public void setName String name this name name public String getValue return value public void setValue String value this value value public void init throws BuildException super init xmlCatalog setProject getProject protected void configureLiaison File stylesheet throws BuildException if stylesheetLoaded reuseLoadedStylesheet return stylesheetLoaded true try log stylesheet Project MSG_INFO liaison setStylesheet stylesheet for Enumeration params elements hasMoreElements Param Param nextElement if shouldUse liaison addParam getName getExpression if liaison instanceof XSLTLiaison2 XSLTLiaison2 liaison configure this catch Exception ex log stylesheet Project MSG_INFO throw new BuildException ex public Factory createFactory throws BuildException if factory null throw new BuildException factory new Factory return factory public static class Factory private String name private Vector attributes new Vector public String getName return name public void setName String name this name name public void addAttribute Attribute attr attributes addElement attr public Enumeration getAttributes return attributes elements public static class Attribute implements DynamicConfigurator private String name private Object value public String getName return name public Object getValue return value public Object createDynamicElement String name throws BuildException return null public void setDynamicAttribute String name String value throws BuildException if equalsIgnoreCase name this name value else if equalsIgnoreCase name if equalsIgnoreCase value equalsIgnoreCase value this value new Boolean value else try this value new Integer value catch NumberFormatException this value value else throw new BuildException name', 'bug': '1'}
{'sequence': 'public class Manifest public static final String ATTRIBUTE_MANIFEST_VERSION public static final String ATTRIBUTE_SIGNATURE_VERSION public static final String ATTRIBUTE_NAME public static final String ATTRIBUTE_FROM public static final String ATTRIBUTE_CLASSPATH public static final String DEFAULT_MANIFEST_VERSION public static final int MAX_LINE_LENGTH public static final int MAX_SECTION_LENGTH MAX_LINE_LENGTH public static final String EOL public static class Attribute private String name null private Vector values new Vector private int currentIndex public Attribute public Attribute String line throws ManifestException parse line public Attribute String name String value this name name setValue value public int hashCode int hashCode if name null hashCode name hashCode hashCode values hashCode return hashCode public boolean equals Object rhs if rhs null rhs getClass getClass return false if rhs this return true Attribute rhsAttribute Attribute rhs String lhsKey getKey String rhsKey rhsAttribute getKey if lhsKey null rhsKey null lhsKey null rhsKey null lhsKey equals rhsKey return false return CollectionUtils equals values rhsAttribute values public void parse String line throws ManifestException int index line indexOf if index throw new ManifestException line name line substring index setValue line substring index public void setName String name this name name public String getName return name public String getKey if name null return null return name toLowerCase public void setValue String value if currentIndex values size values addElement value currentIndex values size else values setElementAt value currentIndex public String getValue if values size return null String fullValue for Enumeration getValues hasMoreElements String value String nextElement fullValue value return fullValue trim public void addValue String value currentIndex setValue value public Enumeration getValues return values elements public void addContinuation String line String currentValue String values elementAt currentIndex setValue currentValue line substring public void write PrintWriter writer throws IOException for Enumeration getValues hasMoreElements writeValue writer String nextElement private void writeValue PrintWriter writer String value throws IOException String line name value while line getBytes length MAX_LINE_LENGTH int breakIndex MAX_SECTION_LENGTH String section line substring breakIndex while section getBytes length MAX_SECTION_LENGTH breakIndex breakIndex section line substring breakIndex if breakIndex throw new IOException name value writer print section EOL line line substring breakIndex writer print line EOL public static class Section private Vector warnings new Vector private String name null private Hashtable attributes new Hashtable private Vector attributeIndex new Vector public void setName String name this name name public String getName return name public String read BufferedReader reader throws ManifestException IOException Attribute attribute null while true String line reader readLine if line null line length return null if line charAt if attribute null if name null name line substring else throw new ManifestException line else attribute addContinuation line else attribute new Attribute line String nameReadAhead addAttributeAndCheck attribute attribute getAttribute attribute getKey if nameReadAhead null return nameReadAhead public void merge Section section throws ManifestException if name null section getName null name null name equalsIgnoreCase section getName throw new ManifestException Enumeration section getAttributeKeys Attribute classpathAttribute null while hasMoreElements String attributeName String nextElement Attribute attribute section getAttribute attributeName if attributeName equalsIgnoreCase ATTRIBUTE_CLASSPATH if classpathAttribute null classpathAttribute new Attribute classpathAttribute setName ATTRIBUTE_CLASSPATH Enumeration cpe attribute getValues while cpe hasMoreElements String value String cpe nextElement classpathAttribute addValue value else storeAttribute attribute if classpathAttribute null storeAttribute classpathAttribute Enumeration warnEnum section warnings elements while warnEnum hasMoreElements warnings addElement warnEnum nextElement public void write PrintWriter writer throws IOException if name null Attribute nameAttr new Attribute ATTRIBUTE_NAME name nameAttr write writer Enumeration getAttributeKeys while hasMoreElements String key String nextElement Attribute attribute getAttribute key attribute write writer writer print EOL public Attribute getAttribute String attributeName return Attribute attributes get attributeName toLowerCase public Enumeration getAttributeKeys return attributeIndex elements public String getAttributeValue String attributeName Attribute attribute getAttribute attributeName toLowerCase if attribute null return null return attribute getValue public void removeAttribute String attributeName String key attributeName toLowerCase attributes remove key attributeIndex removeElement key public void addConfiguredAttribute Attribute attribute throws ManifestException String check addAttributeAndCheck attribute if check null throw new BuildException public String addAttributeAndCheck Attribute attribute throws ManifestException if attribute getName null attribute getValue null throw new BuildException if attribute getKey equalsIgnoreCase ATTRIBUTE_NAME warnings addElement ATTRIBUTE_NAME attribute getName attribute getValue return attribute getValue if attribute getKey startsWith ATTRIBUTE_FROM toLowerCase warnings addElement ATTRIBUTE_FROM attribute getName attribute getValue else String attributeKey attribute getKey if attributeKey equalsIgnoreCase ATTRIBUTE_CLASSPATH Attribute classpathAttribute Attribute attributes get attributeKey if classpathAttribute null storeAttribute attribute else warnings addElement Enumeration attribute getValues while hasMoreElements String value String nextElement classpathAttribute addValue value else if attributes containsKey attributeKey throw new ManifestException attribute getName else storeAttribute attribute return null public Object clone Section cloned new Section cloned setName name Enumeration getAttributeKeys while hasMoreElements String key String nextElement Attribute attribute getAttribute key cloned storeAttribute new Attribute attribute getName attribute getValue return cloned private void storeAttribute Attribute attribute if attribute null return String attributeKey attribute getKey attributes put attributeKey attribute if attributeIndex contains attributeKey attributeIndex addElement attributeKey public Enumeration getWarnings return warnings elements public int hashCode int hashCode if name null hashCode name hashCode hashCode attributes hashCode return hashCode public boolean equals Object rhs if rhs null rhs getClass getClass return false if rhs this return true Section rhsSection Section rhs return CollectionUtils equals attributes rhsSection attributes private String manifestVersion DEFAULT_MANIFEST_VERSION private Section mainSection new Section private Hashtable sections new Hashtable private Vector sectionIndex new Vector public static Manifest getDefaultManifest throws BuildException try String defManifest InputStream in Manifest class getResourceAsStream defManifest if in null throw new BuildException defManifest try Manifest defaultManifest new Manifest new InputStreamReader in Attribute createdBy new Attribute System getProperty System getProperty defaultManifest getMainSection storeAttribute createdBy return defaultManifest catch UnsupportedEncodingException return new Manifest new InputStreamReader in catch ManifestException throw new BuildException catch IOException throw new BuildException public Manifest manifestVersion null public Manifest Reader throws ManifestException IOException BufferedReader reader new BufferedReader String nextSectionName mainSection read reader String readManifestVersion mainSection getAttributeValue ATTRIBUTE_MANIFEST_VERSION if readManifestVersion null manifestVersion readManifestVersion mainSection removeAttribute ATTRIBUTE_MANIFEST_VERSION String line null while line reader readLine null if line length continue Section section new Section if nextSectionName null Attribute sectionName new Attribute line if sectionName getName equalsIgnoreCase ATTRIBUTE_NAME throw new ManifestException ATTRIBUTE_NAME sectionName getName nextSectionName sectionName getValue else Attribute firstAttribute new Attribute line section addAttributeAndCheck firstAttribute section setName nextSectionName nextSectionName section read reader addConfiguredSection section public void addConfiguredSection Section section throws ManifestException String sectionName section getName if sectionName null throw new BuildException sections put sectionName section if sectionIndex contains sectionName sectionIndex addElement sectionName public void addConfiguredAttribute Attribute attribute throws ManifestException if attribute getKey null attribute getValue null throw new BuildException if attribute getKey equalsIgnoreCase ATTRIBUTE_MANIFEST_VERSION manifestVersion attribute getValue else mainSection addConfiguredAttribute attribute public void merge Manifest other throws ManifestException merge other false public void merge Manifest other boolean overwriteMain throws ManifestException if other null if overwriteMain mainSection Section other mainSection clone else mainSection merge other mainSection if other manifestVersion null manifestVersion other manifestVersion Enumeration other getSectionNames while hasMoreElements String sectionName String nextElement Section ourSection Section sections get sectionName Section otherSection Section other sections get sectionName if ourSection null if otherSection null addConfiguredSection Section otherSection clone else ourSection merge otherSection public void write PrintWriter writer throws IOException writer print ATTRIBUTE_MANIFEST_VERSION manifestVersion EOL String signatureVersion mainSection getAttributeValue ATTRIBUTE_SIGNATURE_VERSION if signatureVersion null writer print ATTRIBUTE_SIGNATURE_VERSION signatureVersion EOL mainSection removeAttribute ATTRIBUTE_SIGNATURE_VERSION mainSection write writer if signatureVersion null try Attribute svAttr new Attribute ATTRIBUTE_SIGNATURE_VERSION signatureVersion mainSection addConfiguredAttribute svAttr catch ManifestException Enumeration sectionIndex elements while hasMoreElements String sectionName String nextElement Section section getSection sectionName section write writer public String toString StringWriter sw new StringWriter try write new PrintWriter sw catch IOException return null return sw toString public Enumeration getWarnings Vector warnings new Vector Enumeration warnEnum mainSection getWarnings while warnEnum hasMoreElements warnings addElement warnEnum nextElement Enumeration sections elements while hasMoreElements Section section Section nextElement Enumeration e2 section getWarnings while e2 hasMoreElements warnings addElement e2 nextElement return warnings elements public int hashCode int hashCode if manifestVersion null hashCode manifestVersion hashCode hashCode mainSection hashCode hashCode sections hashCode return hashCode public boolean equals Object rhs if rhs null rhs getClass getClass return false if rhs this return true Manifest rhsManifest Manifest rhs if manifestVersion null if rhsManifest manifestVersion null return false else if manifestVersion equals rhsManifest manifestVersion return false if mainSection equals rhsManifest mainSection return false return CollectionUtils equals sections rhsManifest sections public String getManifestVersion return manifestVersion public Section getMainSection return mainSection public Section getSection String name return Section sections get name public Enumeration getSectionNames return sectionIndex elements', 'bug': '1'}
{'sequence': 'public class DependSelector extends MappingSelector public DependSelector public String toString StringBuffer buf new StringBuffer if targetdir null buf append else buf append targetdir getName buf append buf append granularity if map null buf append buf append map toString else if mapperElement null buf append buf append mapperElement toString buf append return buf toString public boolean selectionTest File srcfile File destfile boolean selected SelectorUtils isOutOfDate srcfile destfile granularity return selected', 'bug': '0'}
{'sequence': 'public class Not extends ConditionBase implements Condition public boolean eval throws BuildException if countConditions throw new BuildException if countConditions throw new BuildException return Condition getConditions nextElement eval', 'bug': '0'}
{'sequence': 'public interface SelectorContainer boolean hasSelectors int selectorCount FileSelector getSelectors Project Enumeration selectorElements void appendSelector FileSelector selector void addSelector SelectSelector selector void addAnd AndSelector selector void addOr OrSelector selector void addNot NotSelector selector void addNone NoneSelector selector void addMajority MajoritySelector selector void addDate DateSelector selector void addSize SizeSelector selector void addFilename FilenameSelector selector void addCustom ExtendSelector selector void addContains ContainsSelector selector void addPresent PresentSelector selector void addDepth DepthSelector selector void addDepend DependSelector selector void addContainsRegexp ContainsRegexpSelector selector void addType TypeSelector selector void addDifferent DifferentSelector selector void addModified ModifiedSelector selector void add FileSelector selector', 'bug': '0'}
{'sequence': 'public class Exit extends Task private String message private String ifCondition unlessCondition public void setMessage String value this message value public void setIf String ifCondition public void setUnless String unlessCondition public void execute throws BuildException if testIfCondition testUnlessCondition String text null if message null message length text message else if getProject getProperty ifCondition null text ifCondition if unlessCondition null unlessCondition length getProject getProperty unlessCondition null if text null text else text text unlessCondition else if text null text throw new BuildException text public void addText String msg if message null message message getProject replaceProperties msg private boolean testIfCondition if ifCondition null equals ifCondition return true return getProject getProperty ifCondition null private boolean testUnlessCondition if unlessCondition null equals unlessCondition return true return getProject getProperty unlessCondition null', 'bug': '0'}
{'sequence': 'public class Copyfile extends Task private File srcFile private File destFile private boolean filtering false private boolean forceOverwrite false public void setSrc File src srcFile src public void setForceoverwrite boolean force forceOverwrite force public void setDest File dest destFile dest public void setFiltering String filter filtering Project toBoolean filter public void execute throws BuildException log if srcFile null throw new BuildException getLocation if srcFile exists throw new BuildException srcFile toString getLocation if destFile null throw new BuildException getLocation if srcFile equals destFile log Project MSG_WARN if forceOverwrite srcFile lastModified destFile lastModified try getProject copyFile srcFile destFile filtering forceOverwrite catch IOException ioe String msg srcFile getAbsolutePath ioe getMessage throw new BuildException msg', 'bug': '0'}
{'sequence': 'public class TokenFilter extends BaseFilterReader implements ChainableReader public interface Filter String filter String string private Vector filters new Vector private Tokenizer tokenizer null private String delimOutput null private String line null private int linePos public TokenFilter super public TokenFilter final Reader in super in public int read throws IOException if tokenizer null tokenizer new LineTokenizer while line null line length line tokenizer getToken in if line null return for Enumeration filters elements hasMoreElements Filter filter Filter nextElement line filter filter line if line null break linePos if line null if tokenizer getPostToken length if delimOutput null line line delimOutput else line line tokenizer getPostToken int ch line charAt linePos linePos if linePos line length line null return ch public final Reader chain final Reader reader TokenFilter newFilter new TokenFilter reader newFilter filters filters newFilter tokenizer tokenizer newFilter delimOutput delimOutput newFilter setProject getProject return newFilter public void setDelimOutput String delimOutput this delimOutput resolveBackSlash delimOutput public void addLineTokenizer LineTokenizer tokenizer add tokenizer public void addStringTokenizer StringTokenizer tokenizer add tokenizer public void addFileTokenizer FileTokenizer tokenizer add tokenizer public void add Tokenizer tokenizer if this tokenizer null throw new BuildException this tokenizer tokenizer public void addReplaceString ReplaceString filter filters addElement filter public void addContainsString ContainsString filter filters addElement filter public void addReplaceRegex ReplaceRegex filter filters addElement filter public void addContainsRegex ContainsRegex filter filters addElement filter public void addTrim Trim filter filters addElement filter public void addIgnoreBlank IgnoreBlank filter filters addElement filter public void addDeleteCharacters DeleteCharacters filter filters addElement filter public void add Filter filter filters addElement filter public static class FileTokenizer extends ProjectComponent implements Tokenizer public String getToken Reader in throws IOException return FileUtils readFully in public String getPostToken return public static class StringTokenizer extends ProjectComponent implements Tokenizer private String intraString private int pushed private char delims null private boolean delimsAreTokens false private boolean suppressDelims false private boolean includeDelims false public void setDelims String delims this delims resolveBackSlash delims toCharArray public void setDelimsAreTokens boolean delimsAreTokens this delimsAreTokens delimsAreTokens public void setSuppressDelims boolean suppressDelims this suppressDelims suppressDelims public void setIncludeDelims boolean includeDelims this includeDelims includeDelims public String getToken Reader in throws IOException int ch if pushed ch pushed pushed else ch in read if ch return null boolean inToken true intraString StringBuffer word new StringBuffer StringBuffer padding new StringBuffer while ch char char ch boolean isDelim isDelim if inToken if isDelim if delimsAreTokens if word length word append else pushed ch break padding append inToken false else word append else if isDelim padding append else pushed ch break ch in read intraString padding toString if includeDelims word append intraString return word toString public String getPostToken if suppressDelims includeDelims return return intraString private boolean isDelim char ch if delims null return Character isWhitespace ch for int delims length if delims ch return true return false public abstract static class ChainableReaderFilter extends ProjectComponent implements ChainableReader Filter private boolean byLine true public void setByLine boolean byLine this byLine byLine public Reader chain Reader reader TokenFilter tokenFilter new TokenFilter reader if byLine tokenFilter add new FileTokenizer tokenFilter add this return tokenFilter public static class ReplaceString extends ChainableReaderFilter private String from private String to public void setFrom String from this from from public void setTo String to this to to public String filter String line if from null throw new BuildException StringBuffer ret new StringBuffer int start int found line indexOf from while found if found start ret append line substring start found if to null ret append to start found from length found line indexOf line start if line length start ret append line substring start line length return ret toString public static class ContainsString extends ProjectComponent implements Filter private String contains public void setContains String contains this contains contains public String filter String string if contains null throw new BuildException if string indexOf contains return string return null public static class ReplaceRegex extends ChainableReaderFilter private String from private String to private RegularExpression regularExpression private Substitution substitution private boolean initialized false private String flags private int options private Regexp regexp public void setPattern String from this from from public void setReplace String to this to to public void setFlags String flags this flags flags private void initialize if initialized return options convertRegexOptions flags if from null throw new BuildException regularExpression new RegularExpression regularExpression setPattern from regexp regularExpression getRegexp getProject if to null to substitution new Substitution substitution setExpression to public String filter String line initialize if regexp matches line options return line return regexp substitute line substitution getExpression getProject options public static class ContainsRegex extends ChainableReaderFilter private String from private String to private Project project private RegularExpression regularExpression private Substitution substitution private boolean initialized false private String flags private int options private Regexp regexp public void setPattern String from this from from public void setReplace String to this to to public void setFlags String flags this flags flags private void initialize if initialized return options convertRegexOptions flags if from null throw new BuildException regularExpression new RegularExpression regularExpression setPattern from regexp regularExpression getRegexp project if to null return substitution new Substitution substitution setExpression to public String filter String string initialize if regexp matches string options return null if substitution null return string return regexp substitute string substitution getExpression getProject options public static class Trim extends ChainableReaderFilter public String filter String line return line trim public static class IgnoreBlank extends ChainableReaderFilter public String filter String line if line trim length return null return line public static class DeleteCharacters extends ProjectComponent implements Filter ChainableReader private String deleteChars public void setChars String deleteChars this deleteChars resolveBackSlash deleteChars public String filter String string StringBuffer output new StringBuffer string length for int string length char ch string charAt if isDeleteCharacter ch output append ch return output toString public Reader chain Reader reader return new BaseFilterReader reader public int read throws IOException while true int in read if return if isDeleteCharacter char return private boolean isDeleteCharacter char for int deleteChars length if deleteChars charAt return true return false public static String resolveBackSlash String input StringBuffer new StringBuffer boolean backSlashSeen false for int input length char input charAt if backSlashSeen if backSlashSeen true else append else switch case append char break case append char break case append char break case append char break case append char break case append break default append backSlashSeen false return toString public static int convertRegexOptions String flags if flags null return int options if flags indexOf options Regexp REPLACE_ALL if flags indexOf options Regexp MATCH_CASE_INSENSITIVE if flags indexOf options Regexp MATCH_MULTILINE if flags indexOf options Regexp MATCH_SINGLELINE return options', 'bug': '0'}
{'sequence': 'public final class StripJavaComments extends BaseFilterReader implements ChainableReader private int readAheadCh private boolean inString false private boolean quoted false public StripJavaComments super public StripJavaComments final Reader in super in public final int read throws IOException int ch if readAheadCh ch readAheadCh readAheadCh else ch in read if ch quoted inString inString quoted false else if ch quoted quoted else quoted false if inString if ch ch in read if ch while ch ch ch ch in read else if ch while ch ch in read if ch ch in read while ch ch ch in read if ch ch read break else readAheadCh ch ch return ch public final Reader chain final Reader rdr StripJavaComments newFilter new StripJavaComments rdr return newFilter', 'bug': '0'}
{'sequence': 'public class SmtpResponseReader protected BufferedReader reader null private StringBuffer result new StringBuffer public SmtpResponseReader InputStream in reader new BufferedReader new InputStreamReader in public String getResponse throws IOException result setLength String line reader readLine if line null line length result append line substring result append while line null append line if hasMoreLines line break line reader readLine return result toString trim public void close throws IOException reader close protected boolean hasMoreLines String line return line length line charAt private void append String line if line length result append line substring result append', 'bug': '0'}
{'sequence': 'public final class LoadFile extends Task private File srcFile null private boolean failOnError true private String encoding null private String property null private final Vector filterChains new Vector public final void setEncoding final String encoding this encoding encoding public final void setProperty final String property this property property public final void setSrcFile final File srcFile this srcFile srcFile public final void setFailonerror final boolean fail failOnError fail public final void execute throws BuildException if srcFile null throw new BuildException if property null throw new BuildException FileInputStream fis null BufferedInputStream bis null Reader instream null log srcFile property Project MSG_VERBOSE try final long len srcFile length log len Project MSG_DEBUG final int size int len fis new FileInputStream srcFile bis new BufferedInputStream fis if encoding null instream new InputStreamReader bis else instream new InputStreamReader bis encoding String text if size ChainReaderHelper crh new ChainReaderHelper crh setBufferSize size crh setPrimaryReader instream crh setFilterChains filterChains crh setProject getProject instream crh getAssembledReader text crh readFully instream if text null if text length getProject setNewProperty property text log text length Project MSG_VERBOSE log property text Project MSG_DEBUG catch final IOException ioe final String message ioe toString if failOnError throw new BuildException message ioe getLocation else log message Project MSG_ERR catch final BuildException be if failOnError throw be else log be getMessage Project MSG_ERR finally try if fis null fis close catch IOException ioex public final void addFilterChain FilterChain filter filterChains addElement filter', 'bug': '0'}
{'sequence': 'public class LazyHashtable extends Hashtable protected boolean initAllDone false public LazyHashtable super protected void initAll if initAllDone return initAllDone true public Enumeration elements initAll return super elements public boolean isEmpty initAll return super isEmpty public int size initAll return super size public boolean contains Object value initAll return super contains value public boolean containsKey Object value initAll return super containsKey value public boolean containsValue Object value return contains value public Enumeration keys initAll return super keys', 'bug': '0'}
{'sequence': 'public class ExitException extends SecurityException private int status public ExitException int status super status this status status public ExitException String msg int status super msg this status status public int getStatus return status', 'bug': '0'}
{'sequence': 'public class Move extends Copy public Move super setOverwrite true protected void doFileOperations if completeDirMap size Enumeration completeDirMap keys while hasMoreElements File fromDir File nextElement File toDir File completeDirMap get fromDir try log fromDir toDir verbosity renameFile fromDir toDir filtering forceOverwrite catch IOException ioe String msg fromDir toDir ioe getMessage throw new BuildException msg ioe getLocation log fileCopyMap size destDir getAbsolutePath Enumeration fileCopyMap keys while hasMoreElements String fromFile String nextElement File new File fromFile boolean selfMove false String toFiles String fileCopyMap get fromFile for int toFiles length String toFile String toFiles if fromFile equals toFile log fromFile verbosity selfMove true continue File new File toFile if toFiles length selfMove moveFile filtering forceOverwrite else copyFile filtering forceOverwrite if includeEmpty Enumeration dirCopyMap keys int createCount while hasMoreElements String fromDirName String nextElement String toDirNames String dirCopyMap get fromDirName boolean selfMove false for int toDirNames length if fromDirName equals toDirNames log fromDirName verbosity selfMove true continue File new File toDirNames if exists if mkdirs log getAbsolutePath Project MSG_ERR else createCount File fromDir new File fromDirName if selfMove okToDelete fromDir deleteDir fromDir if createCount log dirCopyMap size dirCopyMap size createCount createCount destDir getAbsolutePath private void moveFile File fromFile File toFile boolean filtering boolean overwrite boolean moved false try log fromFile toFile verbosity moved renameFile fromFile toFile filtering forceOverwrite catch IOException ioe String msg fromFile toFile ioe getMessage throw new BuildException msg ioe getLocation if moved copyFile fromFile toFile filtering overwrite if fromFile delete throw new BuildException fromFile getAbsolutePath private void copyFile File fromFile File toFile boolean filtering boolean overwrite try log fromFile toFile verbosity FilterSetCollection executionFilters new FilterSetCollection if filtering executionFilters addFilterSet getProject getGlobalFilterSet for Enumeration filterEnum getFilterSets elements filterEnum hasMoreElements executionFilters addFilterSet FilterSet filterEnum nextElement getFileUtils copyFile fromFile toFile executionFilters getFilterChains forceOverwrite getPreserveLastModified getEncoding getOutputEncoding getProject catch IOException ioe String msg fromFile toFile ioe getMessage throw new BuildException msg ioe getLocation protected boolean okToDelete File String list list if list null return false for int list length String list File new File if isDirectory if okToDelete return false else return true protected void deleteDir File String list list if list null return for int list length String list File new File if isDirectory deleteDir else throw new BuildException getAbsolutePath log getAbsolutePath verbosity if delete throw new BuildException getAbsolutePath protected boolean renameFile File sourceFile File destFile boolean filtering boolean overwrite throws IOException BuildException boolean renamed true if getFilterSets null getFilterSets size getFilterChains null getFilterChains size renamed false else if filtering String parentPath destFile getParent if parentPath null File parent new File parentPath if parent exists parent mkdirs if destFile exists destFile isFile if destFile delete throw new BuildException destFile renamed sourceFile renameTo destFile else renamed false return renamed', 'bug': '0'}
{'sequence': 'public interface XSLTLiaison void setStylesheet File stylesheet throws Exception void addParam String name String expression throws Exception void transform File infile File outfile throws Exception', 'bug': '0'}
{'sequence': 'public class EmailAddress private String name private String address public EmailAddress public EmailAddress String email final int minLen int len email length if len minLen if email charAt email charAt email charAt len email charAt len this address trim email true return int paramDepth int start int end int nStart int nEnd for int len char email charAt if paramDepth if start nStart else if paramDepth if end nEnd else if paramDepth if start nEnd start else if paramDepth end if end len nStart if end end len if nEnd nEnd len this address trim email substring start end true this name trim email substring nStart nEnd false if this name length this address length len this name null private String trim String boolean trimAngleBrackets int start int end length boolean trim false do trim false if charAt end charAt end trimAngleBrackets charAt end charAt end charAt end trim true end if charAt start charAt start trimAngleBrackets charAt start charAt start trim true start while trim return substring start end public void setName String name this name name public void setAddress String address this address address public String toString if name null return address else return name address public String getAddress return address public String getName return name', 'bug': '0'}
{'sequence': 'public interface TimeoutObserver void timeoutOccured Watchdog', 'bug': '0'}
{'sequence': 'public class SunRmic extends DefaultRmicAdapter public boolean execute throws BuildException getRmic log Project MSG_VERBOSE Commandline cmd setupRmicCommand LogOutputStream logstr new LogOutputStream getRmic Project MSG_WARN try Class Class forName Constructor cons getConstructor new Class OutputStream class String class Object rmic cons newInstance new Object logstr Method doRmic getMethod new Class String class Boolean ok Boolean doRmic invoke rmic new Object cmd getArguments return ok booleanValue catch ClassNotFoundException ex throw new BuildException getRmic getLocation catch Exception ex if ex instanceof BuildException throw BuildException ex else throw new BuildException ex getRmic getLocation finally try logstr close catch IOException throw new BuildException', 'bug': '0'}
{'sequence': 'public class ZipScanner extends DirectoryScanner protected File srcFile private Resource lastScannedResource private Hashtable myentries private String encoding public void setSrc File srcFile this srcFile srcFile public void setEncoding String encoding this encoding encoding public String getIncludedFiles if srcFile null Vector myvector new Vector scanme for Enumeration myentries elements hasMoreElements Resource myresource Resource nextElement if myresource isDirectory match myresource getName myvector addElement myresource getName String files new String myvector size myvector copyInto files Arrays sort files return files else return super getIncludedFiles public String getIncludedDirectories if srcFile null Vector myvector new Vector scanme for Enumeration myentries elements hasMoreElements Resource myresource Resource nextElement if myresource isDirectory match myresource getName myvector addElement myresource getName String files new String myvector size myvector copyInto files Arrays sort files return files else return super getIncludedDirectories public void init if includes null includes new String includes if excludes null excludes new String public boolean match String path String vpath path replace File separatorChar replace File separatorChar return isIncluded vpath isExcluded vpath public Resource getResource String name if srcFile null return super getResource name else if name equals return new Resource true Long MAX_VALUE true scanme if myentries containsKey name return Resource myentries get name else if myentries containsKey name return Resource myentries get name else return new Resource name private void scanme Resource thisresource new Resource srcFile getAbsolutePath srcFile exists srcFile lastModified if lastScannedResource null lastScannedResource getName equals thisresource getName lastScannedResource getLastModified thisresource getLastModified return ZipEntry entry null ZipFile zf null myentries new Hashtable try try zf new ZipFile srcFile encoding catch ZipException ex throw new BuildException srcFile ex catch IOException ex throw new BuildException srcFile ex Enumeration zf getEntries while hasMoreElements entry ZipEntry nextElement myentries put new String entry getName new Resource entry getName true entry getTime entry isDirectory finally if zf null try zf close catch IOException ex lastScannedResource thisresource', 'bug': '0'}
{'sequence': 'public class DepthSelector extends BaseExtendSelector public int min public int max public static final String MIN_KEY public static final String MAX_KEY public DepthSelector public String toString StringBuffer buf new StringBuffer buf append min buf append buf append max buf append return buf toString public void setMin int min this min min public void setMax int max this max max public void setParameters Parameter parameters super setParameters parameters if parameters null for int parameters length String paramname parameters getName if MIN_KEY equalsIgnoreCase paramname try setMin Integer parseInt parameters getValue catch NumberFormatException nfe1 setError parameters getValue else if MAX_KEY equalsIgnoreCase paramname try setMax Integer parseInt parameters getValue catch NumberFormatException nfe1 setError parameters getValue else setError paramname public void verifySettings if min max setError if max min max setError public boolean isSelected File basedir String filename File file validate int depth String absBase basedir getAbsolutePath String absFile file getAbsolutePath StringTokenizer tokBase new StringTokenizer absBase File separator StringTokenizer tokFile new StringTokenizer absFile File separator while tokFile hasMoreTokens String filetoken tokFile nextToken if tokBase hasMoreTokens String basetoken tokBase nextToken if basetoken equals filetoken throw new BuildException filename absBase else depth if max depth max return false if tokBase hasMoreTokens throw new BuildException filename absBase if min depth min return false return true', 'bug': '0'}
{'sequence': 'public class CvsTagDiff extends AbstractCvsTask static final String FILE_STRING static final String TO_STRING static final String FILE_IS_NEW static final String REVISION static final String FILE_HAS_CHANGED static final String FILE_WAS_REMOVED private String mystartTag private String myendTag private String mystartDate private String myendDate private File mydestfile private FileUtils myfileUtils FileUtils newFileUtils public void setPackage String public void setStartTag String mystartTag public void setStartDate String mystartDate public void setEndTag String myendTag public void setEndDate String myendDate public void setDestFile File mydestfile public void execute throws BuildException validate addCommandArgument addCommandArgument if mystartTag null addCommandArgument addCommandArgument mystartTag else addCommandArgument addCommandArgument mystartDate if myendTag null addCommandArgument addCommandArgument myendTag else addCommandArgument addCommandArgument myendDate while myTokenizer hasMoreTokens addCommandArgument myTokenizer nextToken setCommand File tmpFile null try tmpFile myfileUtils createTempFile null tmpFile deleteOnExit setOutput tmpFile super execute CvsTagEntry entries parseRDiff tmpFile writeTagDiff entries finally if tmpFile null tmpFile delete private CvsTagEntry parseRDiff File tmpFile throws BuildException BufferedReader reader null try reader new BufferedReader new FileReader tmpFile int headerLength toBeRemoved length Vector entries new Vector String line reader readLine int index CvsTagEntry entry null while null line if line length headerLength if line startsWith toBeRemoved line line substring headerLength else line line substring FILE_STRING length if index line indexOf FILE_IS_NEW String filename line substring index String rev null int indexrev if indexrev line indexOf REVISION index rev line substring indexrev REVISION length entry new CvsTagEntry filename rev entries addElement entry log entry toString Project MSG_VERBOSE else if index line indexOf FILE_HAS_CHANGED String filename line substring index int revSeparator line indexOf index String prevRevision line substring index FILE_HAS_CHANGED length revSeparator String revision line substring revSeparator TO_STRING length entry new CvsTagEntry filename revision prevRevision entries addElement entry log entry toString Project MSG_VERBOSE else if index line indexOf FILE_WAS_REMOVED String filename line substring index String rev null int indexrev if indexrev line indexOf REVISION index rev line substring indexrev REVISION length entry new CvsTagEntry filename null rev entries addElement entry log entry toString Project MSG_VERBOSE line reader readLine CvsTagEntry array new CvsTagEntry entries size entries copyInto array return array catch IOException throw new BuildException finally if reader null try reader close catch IOException log toString Project MSG_ERR private void writeTagDiff CvsTagEntry entries throws BuildException FileOutputStream output null try output new FileOutputStream mydestfile PrintWriter writer new PrintWriter new OutputStreamWriter output writer println writer print if mystartTag null writer print mystartTag else writer print mystartDate if myendTag null writer print myendTag else writer print myendDate writer print getCvsRoot writer println for int entries length writeTagEntry writer entries writer println writer flush writer close catch UnsupportedEncodingException uee log uee toString Project MSG_ERR catch IOException ioe throw new BuildException ioe toString ioe finally if null output try output close catch IOException ioe log ioe toString Project MSG_ERR private void writeTagEntry PrintWriter writer CvsTagEntry entry writer println writer println writer println entry getFile if entry getRevision null writer println entry getRevision if entry getPreviousRevision null writer println entry getPreviousRevision writer println writer println private void validate throws BuildException throw new BuildException if null mydestfile throw new BuildException if null mystartTag null mystartDate throw new BuildException if null mystartTag null mystartDate throw new BuildException if null myendTag null myendDate throw new BuildException if null myendTag null myendDate throw new BuildException', 'bug': '0'}
{'sequence': 'class CVSEntry private Date m_date private String m_author private final String m_comment private final Vector m_files new Vector public CVSEntry Date date String author String comment m_date date m_author author m_comment comment public void addFile String file String revision m_files addElement new RCSFile file revision public void addFile String file String revision String previousRevision m_files addElement new RCSFile file revision previousRevision Date getDate return m_date void setAuthor final String author m_author author String getAuthor return m_author String getComment return m_comment Vector getFiles return m_files public String toString return getAuthor getDate getFiles getComment', 'bug': '0'}
{'sequence': 'public class Java extends Task private CommandlineJava cmdl new CommandlineJava private Environment env new Environment private boolean fork false private boolean newEnvironment false private File dir null private boolean failOnError false private boolean append false private Long timeout null private Redirector redirector new Redirector this private String resultProperty private Permissions perm null private boolean spawn false private boolean incompatibleWithSpawn false public void execute throws BuildException File savedDir dir Permissions savedPermissions perm int err try err executeJava if err if failOnError throw new BuildException err getLocation else log err Project MSG_ERR maybeSetResultPropertyValue err finally dir savedDir perm savedPermissions public int executeJava throws BuildException String classname cmdl getClassname if classname null cmdl getJar null throw new BuildException if fork cmdl getJar null throw new BuildException if spawn fork throw new BuildException if spawn incompatibleWithSpawn getProject log Project MSG_ERR getProject log Project MSG_ERR throw new BuildException if cmdl getAssertions null fork log if fork if perm null log Project MSG_WARN log cmdl describeCommand Project MSG_VERBOSE else if cmdl getVmCommand size log Project MSG_WARN if dir null log Project MSG_WARN if newEnvironment null env getVariables log Project MSG_WARN if cmdl getBootclasspath null log Project MSG_WARN if perm null failOnError true perm new Permissions true log this cmdl getClassname Project MSG_VERBOSE log cmdl describeJavaCommand Project MSG_VERBOSE try if fork if spawn return fork cmdl getCommandline else spawn cmdl getCommandline return else try run cmdl return catch ExitException ex return ex getStatus catch BuildException if failOnError throw else log getMessage Project MSG_ERR return catch Throwable if failOnError throw new BuildException else log getMessage Project MSG_ERR return public void setSpawn boolean spawn this spawn spawn public void setClasspath Path createClasspath append public Path createClasspath return cmdl createClasspath getProject createPath public Path createBootclasspath return cmdl createBootclasspath getProject createPath public Permissions createPermissions if perm null perm new Permissions return perm public void setClasspathRef Reference createClasspath setRefid public void setJar File jarfile throws BuildException if cmdl getClassname null throw new BuildException cmdl setJar jarfile getAbsolutePath public void setClassname String throws BuildException if cmdl getJar null throw new BuildException cmdl setClassname public void setArgs String log Project MSG_WARN cmdl createArgument setLine public Commandline Argument createArg return cmdl createArgument public void setResultProperty String resultProperty this resultProperty resultProperty protected void maybeSetResultPropertyValue int result String res Integer toString result if resultProperty null getProject setNewProperty resultProperty res public void setFork boolean this fork public void setJvmargs String log Project MSG_WARN cmdl createVmArgument setLine public Commandline Argument createJvmarg return cmdl createVmArgument public void setJvm String cmdl setVm public void addSysproperty Environment Variable sysp cmdl addSysproperty sysp public void addSyspropertyset PropertySet sysp cmdl addSyspropertyset sysp public void setFailonerror boolean fail failOnError fail incompatibleWithSpawn true public void setDir File this dir public void setOutput File out redirector setOutput out incompatibleWithSpawn true public void setInput File input redirector setInput input incompatibleWithSpawn true public void setInputString String inputString redirector setInputString inputString incompatibleWithSpawn true public void setLogError boolean logError redirector setLogError logError incompatibleWithSpawn true public void setError File error redirector setError error incompatibleWithSpawn true public void setOutputproperty String outputProp redirector setOutputProperty outputProp incompatibleWithSpawn true public void setErrorProperty String errorProperty redirector setErrorProperty errorProperty incompatibleWithSpawn true public void setMaxmemory String max cmdl setMaxmemory max public void setJVMVersion String value cmdl setVmversion value public void addEnv Environment Variable var env addVariable var public void setNewenvironment boolean newenv newEnvironment newenv public void setAppend boolean append this append append incompatibleWithSpawn true public void setTimeout Long value timeout value incompatibleWithSpawn true public void addAssertions Assertions asserts if cmdl getAssertions null throw new BuildException cmdl setAssertions asserts protected void handleOutput String output if redirector getOutputStream null redirector handleOutput output else super handleOutput output public int handleInput byte buffer int offset int length throws IOException if redirector getInputStream null return redirector handleInput buffer offset length else return super handleInput buffer offset length protected void handleFlush String output if redirector getOutputStream null redirector handleFlush output else super handleFlush output protected void handleErrorOutput String output if redirector getErrorStream null redirector handleErrorOutput output else super handleErrorOutput output protected void handleErrorFlush String output if redirector getErrorStream null redirector handleErrorFlush output else super handleErrorOutput output private void run CommandlineJava command throws BuildException try ExecuteJava exe new ExecuteJava exe setJavaCommand command getJavaCommand exe setClasspath command getClasspath exe setSystemProperties command getSystemProperties exe setPermissions perm exe setTimeout timeout redirector createStreams exe execute getProject redirector complete if exe killedProcess throw new BuildException catch IOException throw new BuildException private int fork String command throws BuildException Execute exe new Execute redirector createHandler createWatchdog exe setAntRun getProject if dir null dir getProject getBaseDir else if dir exists dir isDirectory throw new BuildException dir getAbsolutePath getLocation exe setWorkingDirectory dir String environment env getVariables if environment null for int environment length log environment Project MSG_VERBOSE exe setNewenvironment newEnvironment exe setEnvironment environment exe setCommandline command try int rc exe execute redirector complete if exe killedProcess throw new BuildException return rc catch IOException throw new BuildException getLocation private void spawn String command throws BuildException Execute exe new Execute exe setAntRun getProject if dir null dir getProject getBaseDir else if dir exists dir isDirectory throw new BuildException dir getAbsolutePath getLocation exe setWorkingDirectory dir String environment env getVariables if environment null for int environment length log environment Project MSG_VERBOSE exe setNewenvironment newEnvironment exe setEnvironment environment exe setCommandline command try exe spawn catch IOException throw new BuildException getLocation protected void run String classname Vector args throws BuildException CommandlineJava cmdj new CommandlineJava cmdj setClassname classname for int args size cmdj createArgument setValue String args elementAt run cmdj public void clearArgs cmdl clearJavaArgs protected ExecuteWatchdog createWatchdog throws BuildException if timeout null return null return new ExecuteWatchdog timeout longValue', 'bug': '1'}
{'sequence': 'public class ConditionTask extends ConditionBase private String property null private String value public void setProperty String property public void setValue String value public void execute throws BuildException if countConditions throw new BuildException if countConditions throw new BuildException if property null throw new BuildException Condition Condition getConditions nextElement if eval log property value Project MSG_DEBUG getProject setNewProperty property value else log property Project MSG_DEBUG', 'bug': '0'}
{'sequence': 'public class TarBuffer public static final int DEFAULT_RCDSIZE public static final int DEFAULT_BLKSIZE DEFAULT_RCDSIZE private InputStream inStream private OutputStream outStream private byte blockBuffer private int currBlkIdx private int currRecIdx private int blockSize private int recordSize private int recsPerBlock private boolean debug public TarBuffer InputStream inStream this inStream TarBuffer DEFAULT_BLKSIZE public TarBuffer InputStream inStream int blockSize this inStream blockSize TarBuffer DEFAULT_RCDSIZE public TarBuffer InputStream inStream int blockSize int recordSize this inStream inStream this outStream null this initialize blockSize recordSize public TarBuffer OutputStream outStream this outStream TarBuffer DEFAULT_BLKSIZE public TarBuffer OutputStream outStream int blockSize this outStream blockSize TarBuffer DEFAULT_RCDSIZE public TarBuffer OutputStream outStream int blockSize int recordSize this inStream null this outStream outStream this initialize blockSize recordSize private void initialize int blockSize int recordSize this debug false this blockSize blockSize this recordSize recordSize this recsPerBlock this blockSize this recordSize this blockBuffer new byte this blockSize if this inStream null this currBlkIdx this currRecIdx this recsPerBlock else this currBlkIdx this currRecIdx public int getBlockSize return this blockSize public int getRecordSize return this recordSize public void setDebug boolean debug this debug debug public boolean isEOFRecord byte record for int sz this getRecordSize sz if record return false return true public void skipRecord throws IOException if this debug System err println this currRecIdx this currBlkIdx if this inStream null throw new IOException if this currRecIdx this recsPerBlock if this readBlock this currRecIdx public byte readRecord throws IOException if this debug System err println this currRecIdx this currBlkIdx if this inStream null throw new IOException if this currRecIdx this recsPerBlock if this readBlock return null byte result new byte this recordSize System arraycopy this blockBuffer this currRecIdx this recordSize result this recordSize this currRecIdx return result private boolean readBlock throws IOException if this debug System err println this currBlkIdx if this inStream null throw new IOException this currRecIdx int offset int bytesNeeded this blockSize while bytesNeeded long numBytes this inStream read this blockBuffer offset bytesNeeded if numBytes break offset numBytes bytesNeeded numBytes if numBytes this blockSize if this debug System err println numBytes this blockSize this currBlkIdx return true public int getCurrentBlockNum return this currBlkIdx public int getCurrentRecordNum return this currRecIdx public void writeRecord byte record throws IOException if this debug System err println this currRecIdx this currBlkIdx if this outStream null throw new IOException if record length this recordSize throw new IOException record length this recordSize if this currRecIdx this recsPerBlock this writeBlock System arraycopy record this blockBuffer this currRecIdx this recordSize this recordSize this currRecIdx public void writeRecord byte buf int offset throws IOException if this debug System err println this currRecIdx this currBlkIdx if this outStream null throw new IOException if offset this recordSize buf length throw new IOException buf length offset this recordSize if this currRecIdx this recsPerBlock this writeBlock System arraycopy buf offset this blockBuffer this currRecIdx this recordSize this recordSize this currRecIdx private void writeBlock throws IOException if this debug System err println this currBlkIdx if this outStream null throw new IOException this outStream write this blockBuffer this blockSize this outStream flush this currRecIdx this currBlkIdx private void flushBlock throws IOException if this debug System err println if this outStream null throw new IOException if this currRecIdx this writeBlock public void close throws IOException if this debug System err println if this outStream null this flushBlock if this outStream System out this outStream System err this outStream close this outStream null else if this inStream null if this inStream System in this inStream close this inStream null', 'bug': '1'}
{'sequence': 'public class Permissions private List grantedPermissions new LinkedList private List revokedPermissions new LinkedList private java security Permissions granted null private SecurityManager origSm null private boolean active false private boolean delegateToOldSM false public Permissions public Permissions boolean delegateToOldSM this delegateToOldSM delegateToOldSM public void addConfiguredGrant Permissions Permission perm grantedPermissions add perm public void addConfiguredRevoke Permissions Permission perm revokedPermissions add perm public void setSecurityManager throws BuildException origSm System getSecurityManager init System setSecurityManager new MySM active true private void init throws BuildException granted new java security Permissions for Iterator revokedPermissions listIterator hasNext Permissions Permission Permissions Permission next if getClassName null throw new BuildException for Iterator grantedPermissions listIterator hasNext Permissions Permission Permissions Permission next if getClassName null throw new BuildException else java security Permission perm new UnresolvedPermission getClassName getName getActions null granted add perm granted add new java net SocketPermission granted add new java util PropertyPermission granted add new java util PropertyPermission granted add new java util PropertyPermission granted add new java util PropertyPermission granted add new java util PropertyPermission granted add new java util PropertyPermission granted add new java util PropertyPermission granted add new java util PropertyPermission granted add new java util PropertyPermission granted add new java util PropertyPermission granted add new java util PropertyPermission granted add new java util PropertyPermission granted add new java util PropertyPermission granted add new java util PropertyPermission granted add new java util PropertyPermission granted add new java util PropertyPermission granted add new java util PropertyPermission granted add new java util PropertyPermission granted add new java util PropertyPermission granted add new java util PropertyPermission public void restoreSecurityManager active false System setSecurityManager origSm private class MySM extends SecurityManager public void checkExit int status java security Permission perm new java lang RuntimePermission null try checkPermission perm catch SecurityException throw new ExitException getMessage status public void checkPermission java security Permission perm if active if delegateToOldSM perm getName equals boolean permOK false if granted implies perm permOK true checkRevoked perm if permOK origSm null origSm checkPermission perm else if granted implies perm throw new SecurityException perm checkRevoked perm private void checkRevoked java security Permission perm for Iterator revokedPermissions listIterator hasNext if Permissions Permission next matches perm throw new SecurityException perm public static class Permission private String className private String name private String actionString private Set actions public void setClass String aClass className aClass trim public String getClassName return className public void setName String aName name aName trim public String getName return name public void setActions String actions actionString actions if actions length this actions parseActions actions public String getActions return actionString boolean matches java security Permission perm if className equals perm getClass getName return false if name null if name endsWith if perm getName startsWith name substring name length return false else if name equals perm getName return false if actions null Set as parseActions perm getActions int size as size as removeAll actions if as size size return false return true private Set parseActions String actions Set result new HashSet StringTokenizer tk new StringTokenizer actions while tk hasMoreTokens String item tk nextToken trim if item equals result add item return result public String toString return className name actions', 'bug': '0'}
{'sequence': 'public class Dirname extends Task private File file private String property public void setFile File file this file file public void setProperty String property this property property public void execute throws BuildException if property null throw new BuildException getLocation if file null throw new BuildException getLocation else String value file getParent getProject setNewProperty property value', 'bug': '0'}
{'sequence': 'public class ExtraFieldUtils private static Hashtable implementations static implementations new Hashtable register AsiExtraField class public static void register Class try ZipExtraField ze ZipExtraField newInstance implementations put ze getHeaderId catch ClassCastException cc throw new RuntimeException catch InstantiationException ie throw new RuntimeException catch IllegalAccessException ie throw new RuntimeException public static ZipExtraField createExtraField ZipShort headerId throws InstantiationException IllegalAccessException Class Class implementations get headerId if null return ZipExtraField newInstance UnrecognizedExtraField new UnrecognizedExtraField setHeaderId headerId return public static ZipExtraField parse byte data throws ZipException Vector new Vector int start while start data length ZipShort headerId new ZipShort data start int length new ZipShort data start getValue if start length data length throw new ZipException start try ZipExtraField ze createExtraField headerId ze parseFromLocalFileData data start length addElement ze catch InstantiationException ie throw new ZipException ie getMessage catch IllegalAccessException iae throw new ZipException iae getMessage start length throw new ZipException start ZipExtraField result new ZipExtraField size copyInto result return result public static byte mergeLocalFileDataData ZipExtraField data int sum data length for int data length sum data getLocalFileDataLength getValue byte result new byte sum int start for int data length System arraycopy data getHeaderId getBytes result start System arraycopy data getLocalFileDataLength getBytes result start byte local data getLocalFileDataData System arraycopy local result start local length start local length return result public static byte mergeCentralDirectoryData ZipExtraField data int sum data length for int data length sum data getCentralDirectoryLength getValue byte result new byte sum int start for int data length System arraycopy data getHeaderId getBytes result start System arraycopy data getCentralDirectoryLength getBytes result start byte local data getCentralDirectoryData System arraycopy local result start local length start local length return result', 'bug': '0'}
{'sequence': 'public class Expand extends Task private boolean overwrite true private Vector patternsets new Vector private Vector filesets new Vector private static final String NATIVE_ENCODING private String encoding public void execute throws BuildException if equals getTaskType log if source null filesets size throw new BuildException if dest null throw new BuildException if dest exists dest isDirectory throw new BuildException getLocation FileUtils fileUtils FileUtils newFileUtils if source null if source isDirectory throw new BuildException getLocation else expandFile fileUtils source dest if filesets size for int filesets size FileSet fs FileSet filesets elementAt DirectoryScanner ds fs getDirectoryScanner getProject File fromDir fs getDir getProject String files ds getIncludedFiles for int files length File file new File fromDir files expandFile fileUtils file dest protected void expandFile FileUtils fileUtils File srcF File dir log srcF dir Project MSG_INFO ZipFile zf null try zf new ZipFile srcF encoding Enumeration zf getEntries while hasMoreElements ZipEntry ze ZipEntry nextElement extractFile fileUtils srcF dir zf getInputStream ze ze getName new Date ze getTime ze isDirectory log Project MSG_VERBOSE catch IOException ioe throw new BuildException srcF getPath ioe finally if zf null try zf close catch IOException protected void extractFile FileUtils fileUtils File srcF File dir InputStream compressedInputStream String entryName Date entryDate boolean isDirectory throws IOException if patternsets null patternsets size String name entryName replace File separatorChar replace File separatorChar boolean included false for int patternsets size PatternSet PatternSet patternsets elementAt String incls getIncludePatterns getProject if incls null incls length incls new String for int incls length String pattern incls replace File separatorChar replace File separatorChar if pattern endsWith File separator pattern included SelectorUtils matchPath pattern name if included break if included break String excls getExcludePatterns getProject if excls null for int excls length String pattern excls replace File separatorChar replace File separatorChar if pattern endsWith File separator pattern included SelectorUtils matchPath pattern name if included break if included return File fileUtils resolveFile dir entryName try if overwrite exists lastModified entryDate getTime log Project MSG_DEBUG return log entryName Project MSG_VERBOSE File dirF fileUtils getParentFile if dirF null dirF mkdirs if isDirectory mkdirs else byte buffer new byte int length FileOutputStream fos null try fos new FileOutputStream while length compressedInputStream read buffer fos write buffer length fos close fos null finally if fos null try fos close catch IOException fileUtils setFileLastModified entryDate getTime catch FileNotFoundException ex log getPath Project MSG_WARN public void setDest File this dest public void setSrc File this source public void setOverwrite boolean overwrite public void addPatternset PatternSet set patternsets addElement set public void addFileset FileSet set filesets addElement set public void setEncoding String encoding if NATIVE_ENCODING equals encoding encoding null this encoding encoding', 'bug': '1'}
{'sequence': 'public abstract class BaseSelectorContainer extends BaseSelector implements SelectorContainer private Vector selectorsList new Vector public BaseSelectorContainer public boolean hasSelectors return selectorsList isEmpty public int selectorCount return selectorsList size public FileSelector getSelectors Project FileSelector result new FileSelector selectorsList size selectorsList copyInto result return result public Enumeration selectorElements return selectorsList elements public String toString StringBuffer buf new StringBuffer Enumeration selectorElements if hasMoreElements while hasMoreElements buf append nextElement toString if hasMoreElements buf append return buf toString public void appendSelector FileSelector selector selectorsList addElement selector public void validate verifySettings String errmsg getError if errmsg null throw new BuildException errmsg Enumeration selectorElements while hasMoreElements Object nextElement if instanceof BaseSelector BaseSelector validate public abstract boolean isSelected File basedir String filename File file public void addSelector SelectSelector selector appendSelector selector public void addAnd AndSelector selector appendSelector selector public void addOr OrSelector selector appendSelector selector public void addNot NotSelector selector appendSelector selector public void addNone NoneSelector selector appendSelector selector public void addMajority MajoritySelector selector appendSelector selector public void addDate DateSelector selector appendSelector selector public void addSize SizeSelector selector appendSelector selector public void addFilename FilenameSelector selector appendSelector selector public void addCustom ExtendSelector selector appendSelector selector public void addContains ContainsSelector selector appendSelector selector public void addPresent PresentSelector selector appendSelector selector public void addDepth DepthSelector selector appendSelector selector public void addDepend DependSelector selector appendSelector selector public void addDifferent DifferentSelector selector appendSelector selector public void addType TypeSelector selector appendSelector selector public void addContainsRegexp ContainsRegexpSelector selector appendSelector selector public void addModified ModifiedSelector selector appendSelector selector public void add FileSelector selector appendSelector selector', 'bug': '0'}
{'sequence': 'public class CollectionUtils public static boolean equals Vector v1 Vector v2 if v1 v2 return true if v1 null v2 null return false return v1 equals v2 public static boolean equals Dictionary d1 Dictionary d2 if d1 d2 return true if d1 null d2 null return false if d1 size d2 size return false Enumeration e1 d1 keys while e1 hasMoreElements Object key e1 nextElement Object value1 d1 get key Object value2 d2 get key if value2 null value1 equals value2 return false return true public static void putAll Dictionary m1 Dictionary m2 for Enumeration it m2 keys it hasMoreElements Object key it nextElement m1 put key m2 get key public static final class EmptyEnumeration implements Enumeration public EmptyEnumeration public boolean hasMoreElements return false public Object nextElement throws NoSuchElementException throw new NoSuchElementException', 'bug': '0'}
{'sequence': 'public interface RegexpMatcher int MATCH_DEFAULT int MATCH_CASE_INSENSITIVE int MATCH_MULTILINE int MATCH_SINGLELINE void setPattern String pattern throws BuildException String getPattern throws BuildException boolean matches String argument throws BuildException Vector getGroups String argument throws BuildException boolean matches String input int options throws BuildException Vector getGroups String input int options throws BuildException', 'bug': '0'}
{'sequence': 'public class CBZip2InputStream extends InputStream implements BZip2Constants private static void cadvise System out println private static void badBGLengths cadvise private static void bitStreamEOF cadvise private static void compressedStreamEOF cadvise private void makeMaps int nInUse for if inUse seqToUnseq nInUse char unseqToSeq char nInUse nInUse private int last private int origPtr private int blockSize100k private boolean blockRandomised private int bsBuff private int bsLive private CRC mCrc new CRC private boolean inUse new boolean private int nInUse private char seqToUnseq new char private char unseqToSeq new char private char selector new char MAX_SELECTORS private char selectorMtf new char MAX_SELECTORS private int tt private char ll8 private int unzftab new int private int limit new int N_GROUPS MAX_ALPHA_SIZE private int base new int N_GROUPS MAX_ALPHA_SIZE private int perm new int N_GROUPS MAX_ALPHA_SIZE private int minLens new int N_GROUPS private InputStream bsStream private boolean streamEnd false private int currentChar private static final int START_BLOCK_STATE private static final int RAND_PART_A_STATE private static final int RAND_PART_B_STATE private static final int RAND_PART_C_STATE private static final int NO_RAND_PART_A_STATE private static final int NO_RAND_PART_B_STATE private static final int NO_RAND_PART_C_STATE private int currentState START_BLOCK_STATE private int storedBlockCRC storedCombinedCRC private int computedBlockCRC computedCombinedCRC int i2 count chPrev ch2 int tPos int rNToGo int rTPos int j2 char public CBZip2InputStream InputStream zStream ll8 null tt null bsSetStream zStream initialize initBlock setupBlock public int read if streamEnd return else int retChar currentChar switch currentState case START_BLOCK_STATE break case RAND_PART_A_STATE break case RAND_PART_B_STATE setupRandPartB break case RAND_PART_C_STATE setupRandPartC break case NO_RAND_PART_A_STATE break case NO_RAND_PART_B_STATE setupNoRandPartB break case NO_RAND_PART_C_STATE setupNoRandPartC break default break return retChar private void initialize char magic3 magic4 magic3 bsGetUChar magic4 bsGetUChar if magic3 magic4 magic4 bsFinishedWithStream streamEnd true return setDecompressStructureSizes magic4 computedCombinedCRC private void initBlock char magic1 magic2 magic3 magic4 char magic5 magic6 magic1 bsGetUChar magic2 bsGetUChar magic3 bsGetUChar magic4 bsGetUChar magic5 bsGetUChar magic6 bsGetUChar if magic1 magic2 magic3 magic4 magic5 magic6 complete return if magic1 magic2 magic3 magic4 magic5 magic6 badBlockHeader streamEnd true return storedBlockCRC bsGetInt32 if bsR blockRandomised true else blockRandomised false getAndMoveToFrontDecode mCrc initialiseCRC currentState START_BLOCK_STATE private void endBlock computedBlockCRC mCrc getFinalCRC if storedBlockCRC computedBlockCRC crcError computedCombinedCRC computedCombinedCRC computedCombinedCRC computedCombinedCRC computedBlockCRC private void complete storedCombinedCRC bsGetInt32 if storedCombinedCRC computedCombinedCRC crcError bsFinishedWithStream streamEnd true private static void blockOverrun cadvise private static void badBlockHeader cadvise private static void crcError cadvise private void bsFinishedWithStream try if this bsStream null if this bsStream System in this bsStream close this bsStream null catch IOException ioe private void bsSetStream InputStream bsStream bsLive bsBuff private int bsR int int while bsLive int zzi char thech try thech char bsStream read catch IOException compressedStreamEOF if thech compressedStreamEOF zzi thech bsBuff bsBuff zzi bsLive bsBuff bsLive bsLive return private char bsGetUChar return char bsR private int bsGetint int bsR bsR bsR bsR return private int bsGetIntVS int numBits return int bsR numBits private int bsGetInt32 return int bsGetint private void hbCreateDecodeTables int limit int base int perm char length int minLen int maxLen int alphaSize int pp vec pp for minLen maxLen for alphaSize if length perm pp pp for MAX_CODE_LEN base for alphaSize base length for MAX_CODE_LEN base base for MAX_CODE_LEN limit vec for minLen maxLen vec base base limit vec vec for minLen maxLen base limit base private void recvDecodingTables char len new char N_GROUPS MAX_ALPHA_SIZE int nGroups nSelectors alphaSize int minLen maxLen boolean inUse16 new boolean for if bsR inUse16 true else inUse16 false for inUse false for if inUse16 for if bsR inUse true makeMaps alphaSize nInUse nGroups bsR nSelectors bsR for nSelectors while bsR selectorMtf char char pos new char N_GROUPS char tmp for nGroups pos for nSelectors selectorMtf tmp pos while pos pos pos tmp selector tmp for nGroups int curr bsR for alphaSize while bsR if bsR curr else curr len char curr for nGroups minLen maxLen for alphaSize if len maxLen maxLen len if len minLen minLen len hbCreateDecodeTables limit base perm len minLen maxLen alphaSize minLens minLen private void getAndMoveToFrontDecode char yy new char int nextSym limitLast int EOB groupNo groupPos limitLast baseBlockSize blockSize100k origPtr bsGetIntVS recvDecodingTables EOB nInUse groupNo groupPos for unzftab for yy char last int zt zn zvec zj if groupPos groupNo groupPos G_SIZE groupPos zt selector groupNo zn minLens zt zvec bsR zn while zvec limit zt zn zn while bsLive int zzi char thech try thech char bsStream read catch IOException compressedStreamEOF if thech compressedStreamEOF zzi thech bsBuff bsBuff zzi bsLive zj bsBuff bsLive bsLive zvec zvec zj nextSym perm zt zvec base zt zn while true if nextSym EOB break if nextSym RUNA nextSym RUNB char ch int int do if nextSym RUNA else if nextSym RUNB int zt zn zvec zj if groupPos groupNo groupPos G_SIZE groupPos zt selector groupNo zn minLens zt zvec bsR zn while zvec limit zt zn zn while bsLive int zzi char thech try thech char bsStream read catch IOException compressedStreamEOF if thech compressedStreamEOF zzi thech bsBuff bsBuff zzi bsLive zj bsBuff bsLive bsLive zvec zvec zj nextSym perm zt zvec base zt zn while nextSym RUNA nextSym RUNB ch seqToUnseq yy unzftab ch while last ll8 last ch if last limitLast blockOverrun continue else char tmp last if last limitLast blockOverrun tmp yy nextSym unzftab seqToUnseq tmp ll8 last seqToUnseq tmp nextSym for yy yy yy yy yy yy yy yy for yy yy yy tmp int zt zn zvec zj if groupPos groupNo groupPos G_SIZE groupPos zt selector groupNo zn minLens zt zvec bsR zn while zvec limit zt zn zn while bsLive int zzi char thech try thech char bsStream read catch IOException compressedStreamEOF zzi thech bsBuff bsBuff zzi bsLive zj bsBuff bsLive bsLive zvec zvec zj nextSym perm zt zvec base zt zn continue private void setupBlock int cftab new int char ch cftab for cftab unzftab for cftab cftab for last ch char ll8 tt cftab ch cftab ch cftab null tPos tt origPtr count i2 if blockRandomised rNToGo rTPos setupRandPartA else setupNoRandPartA private void setupRandPartA if i2 last chPrev ch2 ch2 ll8 tPos tPos tt tPos if rNToGo rNToGo rNums rTPos rTPos if rTPos rTPos rNToGo ch2 int rNToGo i2 currentChar ch2 currentState RAND_PART_B_STATE mCrc updateCRC ch2 else endBlock initBlock setupBlock private void setupNoRandPartA if i2 last chPrev ch2 ch2 ll8 tPos tPos tt tPos i2 currentChar ch2 currentState NO_RAND_PART_B_STATE mCrc updateCRC ch2 else endBlock initBlock setupBlock private void setupRandPartB if ch2 chPrev currentState RAND_PART_A_STATE count setupRandPartA else count if count ll8 tPos tPos tt tPos if rNToGo rNToGo rNums rTPos rTPos if rTPos rTPos rNToGo rNToGo j2 currentState RAND_PART_C_STATE setupRandPartC else currentState RAND_PART_A_STATE setupRandPartA private void setupRandPartC if j2 int currentChar ch2 mCrc updateCRC ch2 j2 else currentState RAND_PART_A_STATE i2 count setupRandPartA private void setupNoRandPartB if ch2 chPrev currentState NO_RAND_PART_A_STATE count setupNoRandPartA else count if count ll8 tPos tPos tt tPos currentState NO_RAND_PART_C_STATE j2 setupNoRandPartC else currentState NO_RAND_PART_A_STATE setupNoRandPartA private void setupNoRandPartC if j2 int currentChar ch2 mCrc updateCRC ch2 j2 else currentState NO_RAND_PART_A_STATE i2 count setupNoRandPartA private void setDecompressStructureSizes int newSize100k if newSize100k newSize100k blockSize100k blockSize100k blockSize100k newSize100k if newSize100k return int baseBlockSize newSize100k ll8 new char tt new int', 'bug': '0'}
{'sequence': 'public class FileUtils private static Random rand new Random System currentTimeMillis private static Object lockReflection new Object private static java lang reflect Method setLastModified null private boolean onNetWare Os isFamily private static boolean isSpecial new boolean private static char escapedChar1 new char private static char escapedChar2 new char public static final long FAT_FILE_TIMESTAMP_GRANULARITY static for int isSpecial true escapedChar1 Character forDigit escapedChar2 Character forDigit isSpecial true escapedChar1 escapedChar2 char escChs int len escChs length char ch for int len ch escChs isSpecial ch true escapedChar1 ch Character forDigit ch escapedChar2 ch Character forDigit ch public static FileUtils newFileUtils return new FileUtils protected FileUtils public URL getFileURL File file throws MalformedURLException return new URL toURI file getAbsolutePath public void copyFile String sourceFile String destFile throws IOException copyFile new File sourceFile new File destFile null false false public void copyFile String sourceFile String destFile FilterSetCollection filters throws IOException copyFile new File sourceFile new File destFile filters false false public void copyFile String sourceFile String destFile FilterSetCollection filters boolean overwrite throws IOException copyFile new File sourceFile new File destFile filters overwrite false public void copyFile String sourceFile String destFile FilterSetCollection filters boolean overwrite boolean preserveLastModified throws IOException copyFile new File sourceFile new File destFile filters overwrite preserveLastModified public void copyFile String sourceFile String destFile FilterSetCollection filters boolean overwrite boolean preserveLastModified String encoding throws IOException copyFile new File sourceFile new File destFile filters overwrite preserveLastModified encoding public void copyFile String sourceFile String destFile FilterSetCollection filters Vector filterChains boolean overwrite boolean preserveLastModified String encoding Project project throws IOException copyFile new File sourceFile new File destFile filters filterChains overwrite preserveLastModified encoding project public void copyFile String sourceFile String destFile FilterSetCollection filters Vector filterChains boolean overwrite boolean preserveLastModified String inputEncoding String outputEncoding Project project throws IOException copyFile new File sourceFile new File destFile filters filterChains overwrite preserveLastModified inputEncoding outputEncoding project public void copyFile File sourceFile File destFile throws IOException copyFile sourceFile destFile null false false public void copyFile File sourceFile File destFile FilterSetCollection filters throws IOException copyFile sourceFile destFile filters false false public void copyFile File sourceFile File destFile FilterSetCollection filters boolean overwrite throws IOException copyFile sourceFile destFile filters overwrite false public void copyFile File sourceFile File destFile FilterSetCollection filters boolean overwrite boolean preserveLastModified throws IOException copyFile sourceFile destFile filters overwrite preserveLastModified null public void copyFile File sourceFile File destFile FilterSetCollection filters boolean overwrite boolean preserveLastModified String encoding throws IOException copyFile sourceFile destFile filters null overwrite preserveLastModified encoding null public void copyFile File sourceFile File destFile FilterSetCollection filters Vector filterChains boolean overwrite boolean preserveLastModified String encoding Project project throws IOException copyFile sourceFile destFile filters filterChains overwrite preserveLastModified encoding encoding project public void copyFile File sourceFile File destFile FilterSetCollection filters Vector filterChains boolean overwrite boolean preserveLastModified String inputEncoding String outputEncoding Project project throws IOException if overwrite destFile exists destFile lastModified sourceFile lastModified if destFile exists destFile isFile destFile delete File parent getParentFile destFile if parent null parent exists parent mkdirs final boolean filterSetsAvailable filters null filters hasFilters final boolean filterChainsAvailable filterChains null filterChains size if filterSetsAvailable BufferedReader in null BufferedWriter out null try if inputEncoding null in new BufferedReader new FileReader sourceFile else InputStreamReader isr new InputStreamReader new FileInputStream sourceFile inputEncoding in new BufferedReader isr if outputEncoding null out new BufferedWriter new FileWriter destFile else OutputStreamWriter osw new OutputStreamWriter new FileOutputStream destFile outputEncoding out new BufferedWriter osw if filterChainsAvailable ChainReaderHelper crh new ChainReaderHelper crh setBufferSize crh setPrimaryReader in crh setFilterChains filterChains crh setProject project Reader rdr crh getAssembledReader in new BufferedReader rdr LineTokenizer lineTokenizer new LineTokenizer lineTokenizer setIncludeDelims true String newline null String line lineTokenizer getToken in while line null if line length out newLine else newline filters replaceTokens line out write newline line lineTokenizer getToken in finally if out null out close if in null in close else if filterChainsAvailable inputEncoding null inputEncoding equals outputEncoding inputEncoding null outputEncoding null BufferedReader in null BufferedWriter out null try if inputEncoding null in new BufferedReader new FileReader sourceFile else in new BufferedReader new InputStreamReader new FileInputStream sourceFile inputEncoding if outputEncoding null out new BufferedWriter new FileWriter destFile else out new BufferedWriter new OutputStreamWriter new FileOutputStream destFile outputEncoding if filterChainsAvailable ChainReaderHelper crh new ChainReaderHelper crh setBufferSize crh setPrimaryReader in crh setFilterChains filterChains crh setProject project Reader rdr crh getAssembledReader in new BufferedReader rdr char buffer new char while true int nRead in read buffer buffer length if nRead break out write buffer nRead finally if out null out close if in null in close else FileInputStream in null FileOutputStream out null try in new FileInputStream sourceFile out new FileOutputStream destFile byte buffer new byte int count do out write buffer count count in read buffer buffer length while count finally if out null out close if in null in close if preserveLastModified setFileLastModified destFile sourceFile lastModified protected final Method getSetLastModified if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 return null synchronized lockReflection if setLastModified null try setLastModified java io File class getMethod new Class Long TYPE catch NoSuchMethodException nse throw new BuildException nse return setLastModified public void setFileLastModified File file long time throws BuildException if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 return Long times new Long if time times new Long System currentTimeMillis else times new Long time try getSetLastModified invoke file times catch java lang reflect InvocationTargetException ite Throwable nested ite getTargetException throw new BuildException file nested catch Throwable other throw new BuildException file other public File resolveFile File file String filename filename filename replace File separatorChar replace File separatorChar if onNetWare if filename startsWith File separator filename length Character isLetter filename charAt filename charAt return normalize filename else int colon filename indexOf if filename startsWith File separator colon return normalize filename if file null return new File filename File helpFile new File file getAbsolutePath StringTokenizer tok new StringTokenizer filename File separator while tok hasMoreTokens String part tok nextToken if part equals helpFile getParentFile helpFile if helpFile null String msg filename file getPath throw new BuildException msg else if part equals else helpFile new File helpFile part return new File helpFile getAbsolutePath public File normalize String path String orig path path path replace File separatorChar replace File separatorChar int colon path indexOf if onNetWare if path startsWith File separator path length Character isLetter path charAt colon String msg path throw new BuildException msg else if path startsWith File separator colon String msg path throw new BuildException msg boolean dosWithDrive false String root null if onNetWare path length Character isLetter path charAt path charAt onNetWare colon dosWithDrive true char ca path replace toCharArray StringBuffer sbRoot new StringBuffer for int colon sbRoot append Character toUpperCase ca sbRoot append if colon path length sbRoot append File separatorChar root sbRoot toString StringBuffer sbPath new StringBuffer for int colon ca length if ca ca ca sbPath append ca path sbPath toString replace File separatorChar else if path length root File separator path else if path charAt File separatorChar root File separator File separator path path substring else root File separator path path substring Stack new Stack push root StringTokenizer tok new StringTokenizer path File separator while tok hasMoreTokens String thisToken tok nextToken if equals thisToken continue else if equals thisToken if size throw new BuildException orig else pop push thisToken StringBuffer sb new StringBuffer for int size if sb append File separatorChar sb append elementAt path sb toString if dosWithDrive path path replace return new File path public String toVMSPath File String osPath String path normalize getAbsolutePath getPath String name getName boolean isAbsolute path charAt File separatorChar boolean isDirectory isDirectory name regionMatches true name length String device null StringBuffer directory null String file null int index if isAbsolute index path indexOf File separatorChar if index return path substring else device path substring index if isDirectory directory new StringBuffer path substring index replace File separatorChar else int dirEnd path lastIndexOf File separatorChar path length if dirEnd dirEnd index file path substring index else directory new StringBuffer path substring index dirEnd replace File separatorChar index dirEnd if path length index file path substring index if isAbsolute directory null directory insert osPath device null device directory null directory file null file return osPath public File createTempFile String prefix String suffix File parentDir File result null String parent System getProperty if parentDir null parent parentDir getPath DecimalFormat fmt new DecimalFormat synchronized rand do result new File parent prefix fmt format Math abs rand nextInt suffix while result exists return result public boolean contentEquals File f1 File f2 throws IOException if f1 exists f2 exists return false if f1 exists return true if f1 isDirectory f2 isDirectory return false if fileNameEquals f1 f2 return true if f1 length f2 length return false InputStream in1 null InputStream in2 null try in1 new BufferedInputStream new FileInputStream f1 in2 new BufferedInputStream new FileInputStream f2 int expectedByte in1 read while expectedByte if expectedByte in2 read return false expectedByte in1 read if in2 read return false return true finally if in1 null try in1 close catch IOException if in2 null try in2 close catch IOException public File getParentFile File if null String getParent if null return new File return null public static final String readFully Reader rdr throws IOException return readFully rdr public static final String readFully Reader rdr int bufferSize throws IOException if bufferSize throw new IllegalArgumentException final char buffer new char bufferSize int bufferLength String text null StringBuffer textBuffer null while bufferLength bufferLength rdr read buffer if bufferLength if textBuffer null textBuffer new StringBuffer new String buffer bufferLength else textBuffer append new String buffer bufferLength if textBuffer null text textBuffer toString return text public boolean createNewFile File throws IOException if null if exists return false FileOutputStream fos null try fos new FileOutputStream fos write new byte finally if fos null fos close return true return false public boolean isSymbolicLink File parent String name throws IOException File resolvedParent new File parent getCanonicalPath File toTest new File resolvedParent name return toTest getAbsolutePath equals toTest getCanonicalPath public String removeLeadingPath File leading File path String normalize leading getAbsolutePath getAbsolutePath String normalize path getAbsolutePath getAbsolutePath if equals return if endsWith File separator File separator if startsWith return substring length else return public String toURI String path boolean isDir new File path isDirectory StringBuffer sb new StringBuffer try path normalize path getAbsolutePath if path startsWith File separator sb append catch BuildException path path replace CharacterIterator iter new StringCharacterIterator path for char iter first CharacterIterator DONE iter next if isSpecial sb append sb append escapedChar1 sb append escapedChar2 else sb append if isDir path endsWith sb append return sb toString public String fromURI String uri String path Locator fromURI uri try path normalize path getAbsolutePath catch BuildException return path public boolean fileNameEquals File f1 File f2 return normalize f1 getAbsolutePath equals normalize f2 getAbsolutePath public void rename File from File to throws IOException if to exists to delete throw new IOException to from File parent getParentFile to if parent null parent exists parent mkdirs throw new IOException parent from if from renameTo to copyFile from to if from delete throw new IOException from public long getFileTimestampGranularity if Os isFamily return FAT_FILE_TIMESTAMP_GRANULARITY else return', 'bug': '1'}
{'sequence': 'public interface XSLTLiaison2 extends XSLTLiaison void configure XSLTProcess xsltTask', 'bug': '0'}
{'sequence': 'public class UnrecognizedExtraField implements ZipExtraField private ZipShort headerId public void setHeaderId ZipShort headerId this headerId headerId public ZipShort getHeaderId return headerId private byte localData public void setLocalFileDataData byte data localData data public ZipShort getLocalFileDataLength return new ZipShort localData length public byte getLocalFileDataData return localData private byte centralData public void setCentralDirectoryData byte data centralData data public ZipShort getCentralDirectoryLength if centralData null return new ZipShort centralData length return getLocalFileDataLength public byte getCentralDirectoryData if centralData null return centralData return getLocalFileDataData public void parseFromLocalFileData byte data int offset int length byte tmp new byte length System arraycopy data offset tmp length setLocalFileDataData tmp', 'bug': '0'}
{'sequence': 'public class UnknownElement extends Task private String elementName private String namespace private String qname private Object realThing private boolean presetDefed false public UnknownElement String elementName this elementName elementName public String getTag return elementName public String getNamespace return namespace public void setNamespace String namespace if namespace equals ProjectHelper ANT_CURRENT_URI ComponentHelper helper ComponentHelper getComponentHelper getProject namespace helper getCurrentAntlibUri this namespace namespace public String getQName return qname public void setQName String qname this qname qname public RuntimeConfigurable getWrapper return super getWrapper public void maybeConfigure throws BuildException configure makeObject this getWrapper public void configure Object realObject realThing realObject getWrapper setProxy realThing Task task null if realThing instanceof Task task Task realThing task setRuntimeConfigurableWrapper getWrapper this getOwningTarget replaceChild this Task realThing handleChildren realThing getWrapper if task null task maybeConfigure else getWrapper maybeConfigure getProject protected void handleOutput String output if realThing instanceof Task Task realThing handleOutput output else super handleOutput output protected int handleInput byte buffer int offset int length throws IOException if realThing instanceof Task return Task realThing handleInput buffer offset length else return super handleInput buffer offset length protected void handleFlush String output if realThing instanceof Task Task realThing handleFlush output else super handleFlush output protected void handleErrorOutput String output if realThing instanceof Task Task realThing handleErrorOutput output else super handleErrorOutput output protected void handleErrorFlush String output if realThing instanceof Task Task realThing handleErrorOutput output else super handleErrorOutput output public void execute if realThing null throw new BuildException elementName getLocation if realThing instanceof Task Task realThing execute realThing null public void addChild UnknownElement child if children null children new ArrayList children add child protected void handleChildren Object parent RuntimeConfigurable parentWrapper throws BuildException if parent instanceof TypeAdapter parent TypeAdapter parent getProxy String parentUri getNamespace Class parentClass parent getClass IntrospectionHelper ih IntrospectionHelper getHelper parentClass if children null Iterator it children iterator for int it hasNext RuntimeConfigurable childWrapper parentWrapper getChild UnknownElement child UnknownElement it next if handleChild parentUri ih parent child childWrapper if parent instanceof TaskContainer ih throwNotSupported getProject parent child getTag else TaskContainer container TaskContainer parent container addTask child protected String getComponentName return ProjectHelper genComponentName getNamespace getTag public void applyPreSet UnknownElement if presetDefed return getWrapper applyPreSet getWrapper if children null List newChildren new ArrayList newChildren addAll children if children null newChildren addAll children children newChildren presetDefed true protected Object makeObject UnknownElement ue RuntimeConfigurable ComponentHelper helper ComponentHelper getComponentHelper getProject String name ue getComponentName Object helper createComponent ue ue getNamespace name if null throw getNotFoundException name if instanceof PreSetDef PreSetDefinition PreSetDef PreSetDefinition def PreSetDef PreSetDefinition def createObject ue getProject ue applyPreSet def getPreSets if instanceof Task Task task Task task setTaskType ue getTaskType task setTaskName ue getTaskName if instanceof Task Task task Task task setOwningTarget getOwningTarget task init return protected Task makeTask UnknownElement ue RuntimeConfigurable Task task getProject createTask ue getTag if task null task setLocation getLocation task setOwningTarget getOwningTarget task init return task protected BuildException getNotFoundException String what String elementName String lSep System getProperty String msg what elementName lSep lSep lSep lSep lSep lSep lSep elementName lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep lSep return new BuildException msg getLocation public String getTaskName return realThing null realThing instanceof Task super getTaskName Task realThing getTaskName public Task getTask if realThing instanceof Task return Task realThing return null public Object getRealThing return realThing private boolean handleChild String parentUri IntrospectionHelper ih Object parent UnknownElement child RuntimeConfigurable childWrapper String childName ProjectHelper genComponentName child getNamespace child getTag if ih supportsNestedElement parentUri childName IntrospectionHelper Creator creator ih getElementCreator getProject parentUri parent childName child creator setPolyType childWrapper getPolyType Object realChild creator create if realChild instanceof PreSetDef PreSetDefinition PreSetDef PreSetDefinition def PreSetDef PreSetDefinition realChild realChild creator getRealObject child applyPreSet def getPreSets childWrapper setCreator creator childWrapper setProxy realChild if realChild instanceof Task Task childTask Task realChild childTask setRuntimeConfigurableWrapper childWrapper childTask setTaskName childName childTask setTaskType childName childTask setLocation child getLocation child handleChildren realChild childWrapper return true return false public boolean similar Object obj if obj null return false if getClass getName equals obj getClass getName return false UnknownElement other UnknownElement obj if equalsString elementName other elementName return false if namespace equals other namespace return false if qname equals other qname return false if getWrapper getAttributeMap equals other getWrapper getAttributeMap return false if getWrapper getText toString equals other getWrapper getText toString return false if children null children size return other children null other children size if other children null return false if children size other children size return false for int children size UnknownElement child UnknownElement children get if child similar other children get return false return true private boolean equalsString String String if null return null return equals', 'bug': '1'}
{'sequence': 'public class Message extends ProjectComponent private File messageSource null private StringBuffer buffer new StringBuffer private String mimeType private boolean specified false private String charset null public Message public Message String text addText text public Message File file messageSource file public void addText String text buffer append text public void setSrc File src this messageSource src public void setMimeType String mimeType this mimeType mimeType specified true public String getMimeType return mimeType public void print PrintStream ps throws IOException PrintWriter out charset null new PrintWriter new OutputStreamWriter ps charset new PrintWriter ps if messageSource null FileReader freader new FileReader messageSource try BufferedReader in new BufferedReader freader String line null while line in readLine null out println getProject replaceProperties line finally freader close else out println getProject replaceProperties buffer substring out flush public boolean isMimeTypeSpecified return specified public void setCharset String charset this charset charset public String getCharset return charset', 'bug': '0'}
{'sequence': 'public class EscapeUnicode extends BaseParamFilterReader implements ChainableReader private StringBuffer unicodeBuf public EscapeUnicode super unicodeBuf new StringBuffer public EscapeUnicode final Reader in super in unicodeBuf new StringBuffer public final int read throws IOException if getInitialized initialize setInitialized true int ch if unicodeBuf length ch in read if ch char achar char ch if achar unicodeBuf new StringBuffer String Integer toHexString ch for int length unicodeBuf setCharAt unicodeBuf length length charAt ch else ch int unicodeBuf charAt unicodeBuf deleteCharAt return ch public final Reader chain final Reader rdr EscapeUnicode newFilter new EscapeUnicode rdr newFilter setInitialized true return newFilter private final void initialize', 'bug': '0'}
{'sequence': 'public class Exec extends Task private String os private String out private File dir private String command protected PrintWriter fos null private boolean failOnError false public Exec System err println System err println System err println public void execute throws BuildException run command protected int run String command throws BuildException String myos System getProperty log myos Project MSG_VERBOSE if os null os indexOf myos log os Project MSG_VERBOSE return if dir null dir getProject getBaseDir if myos toLowerCase indexOf if dir equals getProject resolveFile if myos toLowerCase indexOf command dir command else String ant getProject getProperty if ant null throw new BuildException getLocation String antRun getProject resolveFile ant toString command antRun dir command else String ant getProject getProperty if ant null throw new BuildException getLocation String antRun getProject resolveFile ant toString command antRun dir command try log command Project MSG_VERBOSE Process proc Runtime getRuntime exec command if out null fos new PrintWriter new FileWriter out log out Project MSG_VERBOSE StreamPumper inputPumper new StreamPumper proc getInputStream Project MSG_INFO StreamPumper errorPumper new StreamPumper proc getErrorStream Project MSG_WARN inputPumper start errorPumper start proc waitFor inputPumper join errorPumper join proc destroy logFlush err proc exitValue if err if failOnError throw new BuildException err getLocation else log err Project MSG_ERR catch IOException ioe throw new BuildException command ioe getLocation catch InterruptedException ex return err public void setDir String this dir getProject resolveFile public void setOs String os this os os public void setCommand String command this command command public void setOutput String out this out out public void setFailonerror boolean fail failOnError fail protected void outputLog String line int messageLevel if fos null log line messageLevel else fos println line protected void logFlush if fos null fos close class StreamPumper extends Thread private BufferedReader din private int messageLevel private boolean endOfStream false private int SLEEP_TIME public StreamPumper InputStream is int messageLevel this din new BufferedReader new InputStreamReader is this messageLevel messageLevel public void pumpStream throws IOException if endOfStream String line din readLine if line null outputLog line messageLevel else endOfStream true public void run try try while endOfStream pumpStream sleep SLEEP_TIME catch InterruptedException ie din close catch IOException ioe', 'bug': '0'}
{'sequence': 'public abstract class Unpack extends Task protected File source protected File dest public void setSrc String src log setSrc getProject resolveFile src public void setDest String dest log setDest getProject resolveFile dest public void setSrc File src source src public void setDest File dest this dest dest private void validate throws BuildException if source null throw new BuildException getLocation if source exists throw new BuildException getLocation if source isDirectory throw new BuildException getLocation if dest null dest new File source getParent if dest isDirectory String defaultExtension getDefaultExtension createDestFile defaultExtension private void createDestFile String defaultExtension String sourceName source getName int len sourceName length if defaultExtension null len defaultExtension length defaultExtension equalsIgnoreCase sourceName substring len defaultExtension length dest new File dest sourceName substring len defaultExtension length else dest new File dest sourceName public void execute throws BuildException try validate extract finally dest savedDest protected abstract String getDefaultExtension protected abstract void extract', 'bug': '0'}
{'sequence': 'public class FilterSet extends DataType implements Cloneable public static class Filter String token String value public Filter String token String value this token token this value value public Filter public void setToken String token this token token public void setValue String value this value value public String getToken return token public String getValue return value public class FiltersFile public FiltersFile public void setFile File file readFiltersFromFile file public static final String DEFAULT_TOKEN_START public static final String DEFAULT_TOKEN_END private String startOfToken DEFAULT_TOKEN_START private String endOfToken DEFAULT_TOKEN_END private Vector filters new Vector public FilterSet protected FilterSet FilterSet filterset super this filters Vector filterset getFilters clone protected Vector getFilters if isReference return getRef getFilters return filters protected FilterSet getRef return FilterSet getCheckedRef FilterSet class public Hashtable getFilterHash int filterSize getFilters size Hashtable filterHash new Hashtable filterSize for Enumeration getFilters elements hasMoreElements Filter filter Filter nextElement filterHash put filter getToken filter getValue return filterHash public void setFiltersfile File filtersFile throws BuildException if isReference throw tooManyAttributes readFiltersFromFile filtersFile public void setBeginToken String startOfToken if isReference throw tooManyAttributes if startOfToken null equals startOfToken throw new BuildException this startOfToken startOfToken public String getBeginToken if isReference return getRef getBeginToken return startOfToken public void setEndToken String endOfToken if isReference throw tooManyAttributes if endOfToken null equals endOfToken throw new BuildException this endOfToken endOfToken public String getEndToken if isReference return getRef getEndToken return endOfToken public void readFiltersFromFile File filtersFile throws BuildException if isReference throw tooManyAttributes if filtersFile exists throw new BuildException filtersFile if filtersFile isFile log filtersFile Project MSG_VERBOSE FileInputStream in null try Properties props new Properties in new FileInputStream filtersFile props load in Enumeration props propertyNames Vector filters getFilters while hasMoreElements String strPropName String nextElement String strValue props getProperty strPropName filters addElement new Filter strPropName strValue catch Exception ex throw new BuildException filtersFile finally if in null try in close catch IOException ioex else throw new BuildException filtersFile public String replaceTokens String line String beginToken getBeginToken String endToken getEndToken int index line indexOf beginToken if index Hashtable tokens getFilterHash try StringBuffer new StringBuffer int String token null String value null do int endIndex line indexOf endToken index beginToken length if endIndex break token line substring index beginToken length endIndex append line substring index if tokens containsKey token value String tokens get token if value equals token value replaceTokens value token log beginToken token endToken value Project MSG_VERBOSE append value index beginToken length token length endToken length else append beginToken index beginToken length while index line indexOf beginToken append line substring return toString catch StringIndexOutOfBoundsException return line else return line private Vector passedTokens private boolean duplicateToken false private String replaceTokens String line String parent throws BuildException if passedTokens null passedTokens new Vector if passedTokens contains parent duplicateToken duplicateToken true StringBuffer sb new StringBuffer sb append sb append passedTokens sb append getBeginToken parent getEndToken sb append getBeginToken passedTokens lastElement sb append getEndToken System out println sb toString return parent passedTokens addElement parent String value this replaceTokens line if value indexOf getBeginToken duplicateToken duplicateToken false passedTokens null else if duplicateToken if passedTokens size value String passedTokens lastElement passedTokens removeElementAt passedTokens size if passedTokens size value getBeginToken value getEndToken duplicateToken false return value public void addFilter Filter filter if isReference throw noChildrenAllowed filters addElement filter public FiltersFile createFiltersfile if isReference throw noChildrenAllowed return new FiltersFile public void addFilter String token String value if isReference throw noChildrenAllowed filters addElement new Filter token value public void addConfiguredFilterSet FilterSet filterSet if isReference throw noChildrenAllowed for Enumeration filterSet getFilters elements hasMoreElements filters addElement nextElement public boolean hasFilters return getFilters size public Object clone throws BuildException if isReference return FilterSet getRef clone else try FilterSet fs FilterSet super clone fs filters Vector getFilters clone fs setProject getProject return fs catch CloneNotSupportedException throw new BuildException', 'bug': '1'}
{'sequence': 'public class DirSet extends AbstractFileSet public DirSet super protected DirSet DirSet dirset super dirset public Object clone if isReference return DirSet getRef getProject clone else return super clone', 'bug': '0'}
{'sequence': 'public class Zip extends MatchingTask protected File zipFile private ZipScanner zs private File baseDir protected Hashtable entries new Hashtable private Vector groupfilesets new Vector private Vector filesetsFromGroupfilesets new Vector protected String duplicate private boolean doCompress true private boolean doUpdate false private boolean savedDoUpdate false private boolean doFilesonly false protected String archiveType private static final long EMPTY_CRC new CRC32 getValue protected String emptyBehavior private Vector filesets new Vector protected Hashtable addedDirs new Hashtable private Vector addedFiles new Vector protected boolean doubleFilePass false protected boolean skipWriting false private static FileUtils fileUtils FileUtils newFileUtils private boolean addingNewFiles false private String encoding private boolean keepCompression false public void setZipfile File zipFile setDestFile zipFile public void setFile File file setDestFile file public void setDestFile File destFile this zipFile destFile public File getDestFile return zipFile public void setBasedir File baseDir this baseDir baseDir public void setCompress boolean doCompress public boolean isCompress return doCompress public void setFilesonly boolean doFilesonly public void setUpdate boolean doUpdate savedDoUpdate public boolean isInUpdateMode return doUpdate public void addFileset FileSet set filesets addElement set public void addZipfileset ZipFileSet set filesets addElement set public void addZipGroupFileset FileSet set groupfilesets addElement set public void setDuplicate Duplicate df duplicate df getValue public static class WhenEmpty extends EnumeratedAttribute public String getValues return new String public void setWhenempty WhenEmpty we emptyBehavior we getValue public void setEncoding String encoding this encoding encoding public String getEncoding return encoding public void setKeepCompression boolean keep keepCompression keep public void execute throws BuildException if doubleFilePass skipWriting true executeMain skipWriting false executeMain else executeMain public void executeMain throws BuildException if baseDir null filesets size groupfilesets size equals archiveType throw new BuildException if zipFile null throw new BuildException archiveType File renamedFile null addingNewFiles true if doUpdate zipFile exists doUpdate false log archiveType Project MSG_DEBUG for int groupfilesets size log Project MSG_VERBOSE FileSet fs FileSet groupfilesets elementAt FileScanner scanner fs getDirectoryScanner getProject String files scanner getIncludedFiles File basedir scanner getBasedir for int files length log files Project MSG_VERBOSE ZipFileSet zf new ZipFileSet zf setProject getProject zf setSrc new File basedir files filesets addElement zf filesetsFromGroupfilesets addElement zf Vector vfss new Vector if baseDir null FileSet fs FileSet getImplicitFileSet clone fs setDir baseDir vfss addElement fs for int filesets size FileSet fs FileSet filesets elementAt vfss addElement fs FileSet fss new FileSet vfss size vfss copyInto fss boolean success false try ArchiveState state getResourcesToAdd fss zipFile false if state isOutOfDate return Resource addThem state getResourcesToAdd if doUpdate renamedFile fileUtils createTempFile fileUtils getParentFile zipFile renamedFile deleteOnExit try fileUtils rename zipFile renamedFile catch SecurityException throw new BuildException zipFile getAbsolutePath catch IOException throw new BuildException zipFile getAbsolutePath String action doUpdate log action archiveType zipFile getAbsolutePath ZipOutputStream zOut null try if skipWriting zOut new ZipOutputStream zipFile zOut setEncoding encoding if doCompress zOut setMethod ZipOutputStream DEFLATED else zOut setMethod ZipOutputStream STORED initZipOutputStream zOut for int fss length if addThem length addResources fss addThem zOut if doUpdate addingNewFiles false ZipFileSet oldFiles new ZipFileSet oldFiles setProject getProject oldFiles setSrc renamedFile for int addedFiles size PatternSet NameEntry ne oldFiles createExclude ne setName String addedFiles elementAt DirectoryScanner ds oldFiles getDirectoryScanner getProject ZipScanner ds setEncoding encoding String ds getIncludedFiles Resource new Resource length for int length ds getResource if doFilesonly String ds getIncludedDirectories Resource dr new Resource length for int length dr ds getResource Resource tmp new Resource tmp length dr length System arraycopy dr dr length System arraycopy tmp dr length tmp length addResources oldFiles zOut finalizeZipOutputStream zOut if doUpdate if renamedFile delete log renamedFile getName Project MSG_WARN success true finally try if zOut null zOut close catch IOException ex if success throw ex catch IOException ioe String msg archiveType ioe getMessage if doUpdate renamedFile null zipFile delete msg if doUpdate renamedFile null try fileUtils rename renamedFile zipFile catch IOException msg renamedFile getName throw new BuildException msg ioe getLocation finally cleanUp protected final boolean isAddingNewFiles return addingNewFiles protected final void addResources FileSet fileset Resource resources ZipOutputStream zOut throws IOException String prefix String fullpath int dirMode ZipFileSet DEFAULT_DIR_MODE int fileMode ZipFileSet DEFAULT_FILE_MODE ZipFileSet zfs null if fileset instanceof ZipFileSet zfs ZipFileSet fileset prefix zfs getPrefix getProject fullpath zfs getFullpath getProject dirMode zfs getDirMode getProject fileMode zfs getFileMode getProject if prefix length fullpath length throw new BuildException if resources length fullpath length throw new BuildException if prefix length if prefix endsWith prefix endsWith prefix addParentDirs null prefix zOut dirMode ZipFile zf null try boolean dealingWithFiles false File base null if zfs null zfs getSrc getProject null dealingWithFiles true base fileset getDir getProject else zf new ZipFile zfs getSrc getProject encoding for int resources length String name null if fullpath length name fullpath else name resources getName name name replace File separatorChar if equals name continue if resources isDirectory name endsWith name name if doFilesonly dealingWithFiles resources isDirectory zfs hasDirModeBeenSet int nextToLastSlash name lastIndexOf name length if nextToLastSlash addParentDirs base name substring nextToLastSlash zOut prefix dirMode ZipEntry ze zf getEntry resources getName addParentDirs base name zOut prefix ze getUnixMode else addParentDirs base name zOut prefix dirMode if resources isDirectory dealingWithFiles File fileUtils resolveFile base resources getName zipFile zOut prefix name fileMode else if resources isDirectory ZipEntry ze zf getEntry resources getName if ze null boolean oldCompress doCompress if keepCompression doCompress ze getMethod ZipEntry DEFLATED try zipFile zf getInputStream ze zOut prefix name ze getTime zfs getSrc getProject zfs hasFileModeBeenSet fileMode ze getUnixMode finally doCompress oldCompress finally if zf null zf close protected void initZipOutputStream ZipOutputStream zOut throws IOException BuildException protected void finalizeZipOutputStream ZipOutputStream zOut throws IOException BuildException protected boolean createEmptyZip File zipFile throws BuildException log archiveType zipFile Project MSG_INFO OutputStream os null try os new FileOutputStream zipFile byte empty new byte empty empty os write empty catch IOException ioe throw new BuildException ioe getMessage ioe getLocation finally if os null try os close catch IOException return true private synchronized ZipScanner getZipScanner if zs null zs new ZipScanner zs setEncoding encoding zs setSrc zipFile return zs protected ArchiveState getResourcesToAdd FileSet filesets File zipFile boolean needsUpdate throws BuildException Resource initialResources grabResources filesets if isEmpty initialResources if needsUpdate doUpdate return new ArchiveState true initialResources if emptyBehavior equals if doUpdate log archiveType zipFile Project MSG_VERBOSE else log archiveType zipFile Project MSG_WARN else if emptyBehavior equals throw new BuildException archiveType zipFile getLocation else createEmptyZip zipFile return new ArchiveState needsUpdate initialResources if zipFile exists return new ArchiveState true initialResources if needsUpdate doUpdate return new ArchiveState true initialResources Resource newerResources new Resource filesets length for int filesets length if fileset instanceof ZipFileSet ZipFileSet fileset getSrc getProject null File base filesets getDir getProject for int initialResources length File resourceAsFile fileUtils resolveFile base initialResources getName if resourceAsFile equals zipFile throw new BuildException getLocation for int filesets length if initialResources length newerResources new Resource continue FileNameMapper myMapper new IdentityMapper if filesets instanceof ZipFileSet ZipFileSet zfs ZipFileSet filesets if zfs getFullpath getProject null zfs getFullpath getProject equals MergingMapper fm new MergingMapper fm setTo zfs getFullpath getProject myMapper fm else if zfs getPrefix getProject null zfs getPrefix getProject equals GlobPatternMapper gm new GlobPatternMapper gm setFrom String prefix zfs getPrefix getProject if prefix endsWith prefix endsWith prefix gm setTo prefix myMapper gm Resource resources initialResources if doFilesonly resources selectFileResources resources newerResources ResourceUtils selectOutOfDateSources this resources myMapper getZipScanner needsUpdate needsUpdate newerResources length if needsUpdate doUpdate break if needsUpdate doUpdate return new ArchiveState true initialResources return new ArchiveState needsUpdate newerResources protected Resource grabResources FileSet filesets Resource result new Resource filesets length for int filesets length DirectoryScanner rs filesets getDirectoryScanner getProject if rs instanceof ZipScanner ZipScanner rs setEncoding encoding Vector resources new Vector String directories rs getIncludedDirectories for int directories length resources addElement rs getResource directories String files rs getIncludedFiles for int files length resources addElement rs getResource files result new Resource resources size resources copyInto result return result protected void zipDir File dir ZipOutputStream zOut String vPath int mode throws IOException if addedDirs get vPath null return log vPath Project MSG_VERBOSE addedDirs put vPath vPath if skipWriting ZipEntry ze new ZipEntry vPath if dir null dir exists ze setTime dir lastModified else ze setTime System currentTimeMillis ze setSize ze setMethod ZipEntry STORED ze setCrc EMPTY_CRC ze setUnixMode mode zOut putNextEntry ze protected void zipFile InputStream in ZipOutputStream zOut String vPath long lastModified File fromArchive int mode throws IOException if entries contains vPath if duplicate equals log vPath Project MSG_INFO return else if duplicate equals throw new BuildException vPath else log vPath Project MSG_VERBOSE else log vPath Project MSG_VERBOSE entries put vPath vPath if skipWriting ZipEntry ze new ZipEntry vPath ze setTime lastModified ze setMethod doCompress ZipEntry DEFLATED ZipEntry STORED if zOut isSeekable doCompress long size CRC32 cal new CRC32 if in markSupported ByteArrayOutputStream bos new ByteArrayOutputStream byte buffer new byte int count do size count cal update buffer count bos write buffer count count in read buffer buffer length while count in new ByteArrayInputStream bos toByteArray else in mark Integer MAX_VALUE byte buffer new byte int count do size count cal update buffer count count in read buffer buffer length while count in reset ze setSize size ze setCrc cal getValue ze setUnixMode mode zOut putNextEntry ze byte buffer new byte int count do if count zOut write buffer count count in read buffer buffer length while count addedFiles addElement vPath protected void zipFile File file ZipOutputStream zOut String vPath int mode throws IOException if file equals zipFile throw new BuildException getLocation FileInputStream fIn new FileInputStream file try zipFile fIn zOut vPath file lastModified null mode finally fIn close protected final void addParentDirs File baseDir String entry ZipOutputStream zOut String prefix int dirMode throws IOException if doFilesonly Stack directories new Stack int slashPos entry length while slashPos entry lastIndexOf slashPos String dir entry substring slashPos if addedDirs get prefix dir null break directories push dir while directories isEmpty String dir String directories pop File null if baseDir null new File baseDir dir else new File dir zipDir zOut prefix dir dirMode protected void cleanUp addedDirs clear addedFiles removeAllElements entries clear addingNewFiles false doUpdate savedDoUpdate Enumeration filesetsFromGroupfilesets elements while hasMoreElements ZipFileSet zf ZipFileSet nextElement filesets removeElement zf filesetsFromGroupfilesets removeAllElements public void reset filesets removeAllElements zipFile null baseDir null groupfilesets removeAllElements duplicate archiveType doCompress true emptyBehavior doUpdate false doFilesonly false encoding null protected static final boolean isEmpty Resource for int length if length return false return true protected Resource selectFileResources Resource orig if orig length return orig Vector new Vector orig length for int orig length if orig isDirectory addElement orig else log orig getName Project MSG_VERBOSE if size orig length Resource new Resource size copyInto return return orig public static class Duplicate extends EnumeratedAttribute public String getValues return new String public static class ArchiveState private boolean outOfDate private Resource resourcesToAdd ArchiveState boolean state Resource outOfDate state resourcesToAdd public boolean isOutOfDate return outOfDate public Resource getResourcesToAdd return resourcesToAdd', 'bug': '1'}
{'sequence': 'public class ScriptRunner private String language private String script private Map beans new HashMap public void addBeans Map dictionary for Iterator dictionary keySet iterator hasNext String key String next try Object val dictionary get key addBean key val catch BuildException ex public void addBean String key Object bean boolean isValid key length Character isJavaIdentifierStart key charAt for int isValid key length isValid Character isJavaIdentifierPart key charAt if isValid beans put key bean public void executeScript String execName throws BuildException if language null throw new BuildException try BSFManager manager new BSFManager for Iterator beans keySet iterator hasNext String key String next Object value beans get key if value null manager declareBean key value value getClass else manager undeclareBean key manager exec language execName script catch BSFException be Throwable be Throwable te be getTargetException if te null if te instanceof BuildException throw BuildException te else te throw new BuildException public void setLanguage String language this language language public String getLanguage return language public void setSrc File file if file exists throw new BuildException file getPath int count int file length byte data new byte count try FileInputStream inStream new FileInputStream file inStream read data inStream close catch IOException throw new BuildException script new String data public void addText String text this script text', 'bug': '1'}
{'sequence': 'public class Or extends ConditionBase implements Condition public boolean eval throws BuildException Enumeration getConditions while hasMoreElements Condition Condition nextElement if eval return true return false', 'bug': '0'}
{'sequence': 'public class Tstamp extends Task private Vector customFormats new Vector private String prefix public void setPrefix String prefix this prefix prefix if this prefix endsWith this prefix public void execute throws BuildException try Date new Date Enumeration customFormats elements while hasMoreElements CustomFormat cts CustomFormat nextElement cts execute getProject getLocation SimpleDateFormat dstamp new SimpleDateFormat setProperty dstamp format SimpleDateFormat tstamp new SimpleDateFormat setProperty tstamp format SimpleDateFormat today new SimpleDateFormat Locale US setProperty today format catch Exception throw new BuildException public CustomFormat createFormat CustomFormat cts new CustomFormat customFormats addElement cts return cts private void setProperty String name String value getProject setNewProperty prefix name value public class CustomFormat private TimeZone timeZone private String propertyName private String pattern private String language private String country private String variant private int offset private int field Calendar DATE public CustomFormat public void setProperty String propertyName this propertyName propertyName public void setPattern String pattern this pattern pattern public void setLocale String locale StringTokenizer st new StringTokenizer locale try language st nextToken if st hasMoreElements country st nextToken if st hasMoreElements variant st nextToken if st hasMoreElements throw new BuildException getLocation else country catch NoSuchElementException throw new BuildException getLocation public void setTimezone String id timeZone TimeZone getTimeZone id public void setOffset int offset this offset offset public void setUnit String unit log Unit new Unit setValue unit field getCalendarField public void setUnit Unit unit field unit getCalendarField public void execute Project project Date date Location location if propertyName null throw new BuildException location if pattern null throw new BuildException location SimpleDateFormat sdf if language null sdf new SimpleDateFormat pattern else if variant null sdf new SimpleDateFormat pattern new Locale language country else sdf new SimpleDateFormat pattern new Locale language country variant if offset Calendar calendar Calendar getInstance calendar setTime date calendar add field offset date calendar getTime if timeZone null sdf setTimeZone timeZone Tstamp this setProperty propertyName sdf format date public static class Unit extends EnumeratedAttribute private static final String MILLISECOND private static final String SECOND private static final String MINUTE private static final String HOUR private static final String DAY private static final String WEEK private static final String MONTH private static final String YEAR private static final String units MILLISECOND SECOND MINUTE HOUR DAY WEEK MONTH YEAR private Hashtable calendarFields new Hashtable public Unit calendarFields put MILLISECOND new Integer Calendar MILLISECOND calendarFields put SECOND new Integer Calendar SECOND calendarFields put MINUTE new Integer Calendar MINUTE calendarFields put HOUR new Integer Calendar HOUR_OF_DAY calendarFields put DAY new Integer Calendar DATE calendarFields put WEEK new Integer Calendar WEEK_OF_YEAR calendarFields put MONTH new Integer Calendar MONTH calendarFields put YEAR new Integer Calendar YEAR public int getCalendarField String key getValue toLowerCase Integer Integer calendarFields get key return intValue public String getValues return units', 'bug': '0'}
{'sequence': 'public interface TarConstants int NAMELEN int MODELEN int UIDLEN int GIDLEN int CHKSUMLEN int SIZELEN int MAGICLEN int MODTIMELEN int UNAMELEN int GNAMELEN int DEVLEN byte LF_OLDNORM byte LF_NORMAL byte byte LF_LINK byte byte LF_SYMLINK byte byte LF_CHR byte byte LF_BLK byte byte LF_DIR byte byte LF_FIFO byte byte LF_CONTIG byte String TMAGIC String GNU_TMAGIC String GNU_LONGLINK byte LF_GNUTYPE_LONGNAME byte', 'bug': '1'}
{'sequence': 'public class InputRequest private String prompt private String input public InputRequest String prompt if prompt null throw new IllegalArgumentException this prompt prompt public String getPrompt return prompt public void setInput String input this input input public boolean isInputValid return true public String getInput return input', 'bug': '0'}
{'sequence': 'public class Watchdog implements Runnable private Vector observers new Vector private long timeout private boolean stopped false public Watchdog long timeout if timeout throw new IllegalArgumentException this timeout timeout public void addTimeoutObserver TimeoutObserver to observers addElement to public void removeTimeoutObserver TimeoutObserver to observers removeElement to protected final void fireTimeoutOccured Enumeration observers elements while hasMoreElements TimeoutObserver nextElement timeoutOccured this public synchronized void start stopped false Thread new Thread this setDaemon true start public synchronized void stop stopped true notifyAll public synchronized void run final long until System currentTimeMillis timeout long now while stopped until now System currentTimeMillis try wait until now catch InterruptedException if stopped fireTimeoutOccured', 'bug': '0'}
{'sequence': 'public final class ClassConstants extends BaseFilterReader implements ChainableReader private String queuedData null private static final String JAVA_CLASS_HELPER public ClassConstants super public ClassConstants final Reader in super in public final int read throws IOException int ch if queuedData null queuedData length queuedData null if queuedData null ch queuedData charAt queuedData queuedData substring if queuedData length queuedData null else final String clazz readFully if clazz null ch else final byte bytes clazz getBytes try final Class javaClassHelper Class forName JAVA_CLASS_HELPER if javaClassHelper null final Class params byte class final Method getConstants javaClassHelper getMethod params final Object args bytes final StringBuffer sb StringBuffer getConstants invoke null args if sb length queuedData sb toString return read catch ClassNotFoundException cnfe throw new IOException cnfe getMessage catch NoSuchMethodException nsme throw new IOException nsme getMessage catch IllegalAccessException iae throw new IOException iae getMessage catch IllegalArgumentException iarge throw new IOException iarge getMessage catch InvocationTargetException ite throw new IOException ite getMessage return ch public final Reader chain final Reader rdr ClassConstants newFilter new ClassConstants rdr return newFilter', 'bug': '1'}
{'sequence': 'public class ExecTask extends Task private String os private File dir protected boolean failOnError false protected boolean newEnvironment false private Long timeout null private Environment env new Environment protected Commandline cmdl new Commandline private String resultProperty private boolean failIfExecFails true private String executable private boolean resolveExecutable false private boolean spawn false private boolean incompatibleWithSpawn false private Redirector redirector new Redirector this private boolean vmLauncher true public void setSpawn boolean spawn this spawn spawn public void setTimeout Long value timeout value incompatibleWithSpawn true public void setTimeout Integer value if value null timeout null else setTimeout new Long value intValue incompatibleWithSpawn true public void setExecutable String value this executable value cmdl setExecutable value public void setDir File this dir public void setOs String os this os os public void setCommand Commandline cmdl log Project MSG_WARN this cmdl cmdl public void setOutput File out redirector setOutput out incompatibleWithSpawn true public void setInput File input redirector setInput input incompatibleWithSpawn true public void setInputString String inputString redirector setInputString inputString incompatibleWithSpawn true public void setLogError boolean logError redirector setLogError logError incompatibleWithSpawn true public void setError File error redirector setError error incompatibleWithSpawn true public void setOutputproperty String outputProp redirector setOutputProperty outputProp incompatibleWithSpawn true public void setErrorProperty String errorProperty redirector setErrorProperty errorProperty incompatibleWithSpawn true public void setFailonerror boolean fail failOnError fail incompatibleWithSpawn true public void setNewenvironment boolean newenv newEnvironment newenv public void setResolveExecutable boolean resolveExecutable this resolveExecutable resolveExecutable public boolean getResolveExecutable return resolveExecutable public void addEnv Environment Variable var env addVariable var public Commandline Argument createArg return cmdl createArgument public void setResultProperty String resultProperty this resultProperty resultProperty incompatibleWithSpawn true protected void maybeSetResultPropertyValue int result String res Integer toString result if resultProperty null getProject setNewProperty resultProperty res public void setFailIfExecutionFails boolean flag failIfExecFails flag incompatibleWithSpawn true public void setAppend boolean append redirector setAppend append incompatibleWithSpawn true protected String resolveExecutable String exec boolean searchPath if resolveExecutable return exec File executableFile getProject resolveFile exec if executableFile exists return executableFile getAbsolutePath FileUtils fileUtils FileUtils newFileUtils if dir null executableFile fileUtils resolveFile dir exec if executableFile exists return executableFile getAbsolutePath if searchPath Vector env Execute getProcEnvironment Enumeration env elements Path null while hasMoreElements String line String nextElement if line startsWith line startsWith new Path getProject line substring break if null String dirs list for int dirs length executableFile fileUtils resolveFile new File dirs exec if executableFile exists return executableFile getAbsolutePath return exec public void execute throws BuildException cmdl setExecutable resolveExecutable executable false checkConfiguration if isValidOs try runExec prepareExec finally dir savedDir protected void checkConfiguration throws BuildException if cmdl getExecutable null throw new BuildException getLocation if dir null dir exists throw new BuildException if dir null dir isDirectory throw new BuildException if spawn incompatibleWithSpawn getProject log Project MSG_ERR getProject log Project MSG_ERR throw new BuildException protected boolean isValidOs String myos System getProperty log myos Project MSG_VERBOSE if os null os indexOf myos log myos os Project MSG_VERBOSE return false return true public void setVMLauncher boolean vmLauncher this vmLauncher vmLauncher protected Execute prepareExec throws BuildException if dir null dir getProject getBaseDir Execute exe new Execute createHandler createWatchdog exe setAntRun getProject exe setWorkingDirectory dir exe setVMLauncher vmLauncher exe setSpawn spawn String environment env getVariables if environment null for int environment length log environment Project MSG_VERBOSE exe setNewenvironment newEnvironment exe setEnvironment environment return exe protected final void runExecute Execute exe throws IOException if spawn returnCode exe execute if exe killedProcess String msg if failOnError throw new BuildException msg else log msg Project MSG_WARN maybeSetResultPropertyValue returnCode if Execute isFailure returnCode if failOnError throw new BuildException getTaskType returnCode getLocation else log returnCode Project MSG_ERR redirector complete else exe spawn protected void runExec Execute exe throws BuildException log cmdl describeCommand Project MSG_VERBOSE exe setCommandline cmdl getCommandline try runExecute exe catch IOException if failIfExecFails throw new BuildException toString getLocation else log toString Project MSG_ERR finally logFlush protected ExecuteStreamHandler createHandler throws BuildException return redirector createHandler protected ExecuteWatchdog createWatchdog throws BuildException if timeout null return null return new ExecuteWatchdog timeout longValue protected void logFlush', 'bug': '0'}
{'sequence': 'public interface CompilerAdapter void setJavac Javac attributes boolean execute throws BuildException', 'bug': '0'}
{'sequence': 'public interface ResourceFactory Resource getResource String name', 'bug': '0'}
{'sequence': 'public class Touch extends Task private File file private long millis private String dateTime private Vector filesets new Vector private FileUtils fileUtils public Touch fileUtils FileUtils newFileUtils public void setFile File file this file file public void setMillis long millis this millis millis public void setDatetime String dateTime this dateTime dateTime public void addFileset FileSet set filesets addElement set public void execute throws BuildException long savedMillis millis if file null filesets size throw new BuildException if file null file exists file isDirectory throw new BuildException try if dateTime null DateFormat df DateFormat getDateTimeInstance DateFormat SHORT DateFormat SHORT Locale US try setMillis df parse dateTime getTime catch ParseException pe df DateFormat getDateTimeInstance DateFormat SHORT DateFormat MEDIUM Locale US try setMillis df parse dateTime getTime catch ParseException pe2 throw new BuildException pe2 getMessage pe getLocation if millis throw new BuildException dateTime touch finally millis savedMillis protected void touch throws BuildException if file null if file exists log file Project MSG_INFO try fileUtils createNewFile file catch IOException ioe throw new BuildException file ioe getLocation if millis JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 log Project MSG_WARN return boolean resetMillis false if millis resetMillis true millis System currentTimeMillis if file null touch file for int filesets size FileSet fs FileSet filesets elementAt DirectoryScanner ds fs getDirectoryScanner getProject File fromDir fs getDir getProject String srcFiles ds getIncludedFiles String srcDirs ds getIncludedDirectories for int srcFiles length touch new File fromDir srcFiles for int srcDirs length touch new File fromDir srcDirs if resetMillis millis protected void touch File file throws BuildException if file canWrite throw new BuildException file if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 return fileUtils setFileLastModified file millis', 'bug': '1'}
{'sequence': 'public class Jikes protected JikesOutputParser jop protected String command protected Project project protected Jikes JikesOutputParser jop String command Project project super System err println System err println System err println this jop jop this command command this project project protected void compile String args String commandArray null File tmpFile null try String myos System getProperty if myos toLowerCase indexOf args length PrintWriter out null try String tempFileName new Random System currentTimeMillis nextLong tmpFile new File tempFileName out new PrintWriter new FileWriter tmpFile for int args length out println args out flush commandArray new String command tmpFile getAbsolutePath catch IOException throw new BuildException finally if out null try out close catch Throwable else commandArray new String args length commandArray command System arraycopy args commandArray args length try Execute exe new Execute jop exe setAntRun project exe setWorkingDirectory project getBaseDir exe setCommandline commandArray exe execute catch IOException throw new BuildException finally if tmpFile null tmpFile delete', 'bug': '0'}
{'sequence': 'public class Deltree extends Task private File dir public void setDir File dir this dir dir public void execute throws BuildException log if dir null throw new BuildException getLocation if dir exists if dir isDirectory if dir delete throw new BuildException dir getAbsolutePath getLocation return log dir getAbsolutePath try removeDir dir catch IOException ioe String msg dir getAbsolutePath throw new BuildException msg getLocation private void removeDir File dir throws IOException String list dir list for int list length String list File new File dir if isDirectory removeDir else if delete throw new BuildException getAbsolutePath if dir delete throw new BuildException dir getAbsolutePath', 'bug': '0'}
{'sequence': 'public class ZipEntry extends java util zip ZipEntry implements Cloneable private static final int PLATFORM_UNIX private static final int PLATFORM_FAT private int internalAttributes private int platform PLATFORM_FAT private long externalAttributes private Vector extraFields new Vector private String name null public ZipEntry String name super name public ZipEntry java util zip ZipEntry entry throws ZipException super entry getName setComment entry getComment setMethod entry getMethod setTime entry getTime long size entry getSize if size setSize size long cSize entry getCompressedSize if cSize setComprSize cSize long crc entry getCrc if crc setCrc crc byte extra entry getExtra if extra null setExtraFields ExtraFieldUtils parse extra else setExtra public ZipEntry ZipEntry entry throws ZipException this java util zip ZipEntry entry setInternalAttributes entry getInternalAttributes setExternalAttributes entry getExternalAttributes setExtraFields entry getExtraFields protected ZipEntry super public Object clone try ZipEntry ZipEntry super clone setName getName setComment getComment setMethod getMethod setTime getTime long size getSize if size setSize size long cSize getCompressedSize if cSize setComprSize cSize long crc getCrc if crc setCrc crc extraFields Vector extraFields clone setInternalAttributes getInternalAttributes setExternalAttributes getExternalAttributes setExtraFields getExtraFields return catch Throwable return null public int getInternalAttributes return internalAttributes public void setInternalAttributes int value internalAttributes value public long getExternalAttributes return externalAttributes public void setExternalAttributes long value externalAttributes value public void setUnixMode int mode setExternalAttributes mode mode isDirectory platform PLATFORM_UNIX public int getUnixMode return int getExternalAttributes public int getPlatform return platform protected void setPlatform int platform this platform platform public void setExtraFields ZipExtraField fields extraFields removeAllElements for int fields length extraFields addElement fields setExtra public ZipExtraField getExtraFields ZipExtraField result new ZipExtraField extraFields size extraFields copyInto result return result public void addExtraField ZipExtraField ze ZipShort type ze getHeaderId boolean done false for int done extraFields size if ZipExtraField extraFields elementAt getHeaderId equals type extraFields setElementAt ze done true if done extraFields addElement ze setExtra public void removeExtraField ZipShort type boolean done false for int done extraFields size if ZipExtraField extraFields elementAt getHeaderId equals type extraFields removeElementAt done true if done throw new java util NoSuchElementException setExtra public void setExtra byte extra throws RuntimeException try setExtraFields ExtraFieldUtils parse extra catch Exception throw new RuntimeException getMessage protected void setExtra super setExtra ExtraFieldUtils mergeLocalFileDataData getExtraFields public byte getLocalFileDataExtra byte extra getExtra return extra null extra new byte public byte getCentralDirectoryExtra return ExtraFieldUtils mergeCentralDirectoryData getExtraFields private Long compressedSize null public void setComprSize long size if haveSetCompressedSize performSetCompressedSize this size else compressedSize new Long size public long getCompressedSize if compressedSize null return compressedSize longValue return super getCompressedSize public String getName return name null super getName name public boolean isDirectory return getName endsWith protected void setName String name this name name private static Method setCompressedSizeMethod null private static Object lockReflection new Object private static boolean triedToGetMethod false private static boolean haveSetCompressedSize checkSCS return setCompressedSizeMethod null private static void performSetCompressedSize ZipEntry ze long size Long new Long size try setCompressedSizeMethod invoke ze catch InvocationTargetException ite Throwable nested ite getTargetException throw new RuntimeException ze nested getMessage catch Throwable other throw new RuntimeException ze other getMessage private static void checkSCS if triedToGetMethod synchronized lockReflection triedToGetMethod true try setCompressedSizeMethod java util zip ZipEntry class getMethod new Class Long TYPE catch NoSuchMethodException nse', 'bug': '1'}
{'sequence': 'public class Get extends Task private boolean verbose false private boolean ignoreErrors false private String uname null private String pword null public void execute throws BuildException if source null throw new BuildException getLocation if dest null throw new BuildException getLocation if dest exists dest isDirectory throw new BuildException getLocation if dest exists dest canWrite throw new BuildException dest getAbsolutePath getLocation try log source long timestamp boolean hasTimestamp false if useTimestamp dest exists timestamp dest lastModified if verbose Date new Date timestamp log toString hasTimestamp true URLConnection connection source openConnection if useTimestamp hasTimestamp connection setIfModifiedSince timestamp if uname null pword null String up uname pword String encoding try Object encoder Class forName newInstance encoding String encoder getClass getMethod new Class byte class invoke encoder new Object up getBytes Base64Converter encoder new Base64Converter encoding encoder encode up getBytes connection setRequestProperty encoding connection connect if connection instanceof HttpURLConnection HttpURLConnection httpConnection HttpURLConnection connection if httpConnection getResponseCode HttpURLConnection HTTP_NOT_MODIFIED log return if httpConnection getResponseCode HttpURLConnection HTTP_UNAUTHORIZED String message if ignoreErrors log message Project MSG_WARN return else throw new BuildException message InputStream is null for int try is connection getInputStream break catch IOException ex log ex if is null log source dest if ignoreErrors return throw new BuildException source dest getLocation FileOutputStream fos new FileOutputStream dest boolean finished false try byte buffer new byte int length int dots while length is read buffer fos write buffer length if verbose System out print if dots System out flush dots if verbose System out println finished true finally if fos null fos close is close if finished dest delete if useTimestamp long remoteTimestamp connection getLastModified if verbose Date new Date remoteTimestamp log toString remoteTimestamp if remoteTimestamp FileUtils newFileUtils setFileLastModified dest remoteTimestamp catch IOException ioe log source dest if ignoreErrors return throw new BuildException ioe getLocation public void setSrc URL this source public void setDest File dest this dest dest public void setVerbose boolean verbose public void setIgnoreErrors boolean ignoreErrors public void setUseTimestamp boolean if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 useTimestamp public void setUsername String this uname public void setPassword String this pword private static class Base64Converter public final char alphabet public String encode String return encode getBytes public String encode byte octetString int bits24 int bits6 char out new char octetString length int outIndex int while octetString length bits24 octetString bits24 octetString bits6 bits24 out outIndex alphabet bits6 bits6 bits24 out outIndex alphabet bits6 bits6 bits24 out outIndex alphabet bits6 bits6 bits24 out outIndex alphabet bits6 if octetString length bits24 octetString bits24 octetString bits6 bits24 out outIndex alphabet bits6 bits6 bits24 out outIndex alphabet bits6 bits6 bits24 out outIndex alphabet bits6 out outIndex else if octetString length bits24 octetString bits6 bits24 out outIndex alphabet bits6 bits6 bits24 out outIndex alphabet bits6 out outIndex out outIndex return new String out', 'bug': '1'}
{'sequence': 'public class FileList extends DataType private Vector filenames new Vector private File dir public FileList super protected FileList FileList filelist this dir filelist dir this filenames filelist filenames setProject filelist getProject public void setRefid Reference throws BuildException if dir null filenames size throw tooManyAttributes super setRefid public void setDir File dir throws BuildException if isReference throw tooManyAttributes this dir dir public File getDir Project if isReference return getRef getDir return dir public void setFiles String filenames if isReference throw tooManyAttributes if filenames null filenames length StringTokenizer tok new StringTokenizer filenames false while tok hasMoreTokens this filenames addElement tok nextToken public String getFiles Project if isReference return getRef getFiles if dir null throw new BuildException if filenames size throw new BuildException String result new String filenames size filenames copyInto result return result protected FileList getRef Project if isChecked Stack stk new Stack stk push this dieOnCircularReference stk Object getRefid getReferencedObject if instanceof FileList String msg getRefid getRefId throw new BuildException msg else return FileList', 'bug': '0'}
{'sequence': 'public class Property extends Task protected String name protected String value protected File file protected URL url protected String resource protected Path classpath protected String env protected Reference ref protected String prefix private Project fallback public Property this false protected Property boolean userProperty this userProperty null protected Property boolean userProperty Project fallback this userProperty userProperty this fallback fallback public void setName String name this name name public String getName return name public void setLocation File location setValue location getAbsolutePath public void setValue String value this value value public String getValue return value public void setFile File file this file file public File getFile return file public void setUrl URL url this url url public URL getUrl return url public void setPrefix String prefix this prefix prefix if prefix endsWith this prefix public String getPrefix return prefix public void setRefid Reference ref this ref ref public Reference getRefid return ref public void setResource String resource this resource resource public String getResource return resource public void setEnvironment String env this env env public String getEnvironment return env public void setClasspath Path classpath if this classpath null this classpath classpath else this classpath append classpath public Path createClasspath if this classpath null this classpath new Path getProject return this classpath createPath public void setClasspathRef Reference createClasspath setRefid public Path getClasspath return classpath public void setUserProperty boolean userProperty log Project MSG_WARN public String toString return value null value public void execute throws BuildException if getProject null throw new IllegalStateException if name null if value null ref null throw new BuildException getLocation else if url null file null resource null env null throw new BuildException getLocation if url null file null resource null prefix null throw new BuildException getLocation if name null value null addProperty name value if file null loadFile file if url null loadUrl url if resource null loadResource resource if env null loadEnvironment env if name null ref null try addProperty name ref getReferencedObject getProject toString catch BuildException be if fallback null addProperty name ref getReferencedObject fallback toString else throw be protected void loadUrl URL url throws BuildException Properties props new Properties log url Project MSG_VERBOSE try InputStream is url openStream try props load is finally if is null is close addProperties props catch IOException ex throw new BuildException ex getLocation protected void loadFile File file throws BuildException Properties props new Properties log file getAbsolutePath Project MSG_VERBOSE try if file exists FileInputStream fis new FileInputStream file try props load fis finally if fis null fis close addProperties props else log file getAbsolutePath Project MSG_VERBOSE catch IOException ex throw new BuildException ex getLocation protected void loadResource String name Properties props new Properties log name Project MSG_VERBOSE InputStream is null try ClassLoader cL null if classpath null cL getProject createClassLoader classpath else cL this getClass getClassLoader if cL null is ClassLoader getSystemResourceAsStream name else is cL getResourceAsStream name if is null props load is addProperties props else log name Project MSG_WARN catch IOException ex throw new BuildException ex getLocation finally if is null try is close catch IOException protected void loadEnvironment String prefix Properties props new Properties if prefix endsWith prefix log prefix Project MSG_VERBOSE Vector osEnv Execute getProcEnvironment for Enumeration osEnv elements hasMoreElements String entry String nextElement int pos entry indexOf if pos log entry Project MSG_WARN else props put prefix entry substring pos entry substring pos addProperties props protected void addProperties Properties props resolveAllProperties props Enumeration props keys while hasMoreElements String name String nextElement String value props getProperty name String getProject replaceProperties value if prefix null name prefix name addProperty name protected void addProperty String String if userProperty if getProject getUserProperty null getProject setInheritedProperty else log Project MSG_VERBOSE else getProject setNewProperty private void resolveAllProperties Properties props throws BuildException for Enumeration props keys hasMoreElements String name String nextElement Stack referencesSeen new Stack resolve props name referencesSeen private void resolve Properties props String name Stack referencesSeen throws BuildException if referencesSeen contains name throw new BuildException name String value props getProperty name Vector fragments new Vector Vector propertyRefs new Vector ProjectHelper parsePropertyString value fragments propertyRefs if propertyRefs size referencesSeen push name StringBuffer sb new StringBuffer Enumeration fragments elements Enumeration propertyRefs elements while hasMoreElements String fragment String nextElement if fragment null String propertyName String nextElement fragment getProject getProperty propertyName if fragment null if props containsKey propertyName resolve props propertyName referencesSeen fragment props getProperty propertyName else fragment propertyName sb append fragment value sb toString props put name value referencesSeen pop', 'bug': '0'}
{'sequence': 'public class Resource implements Cloneable Comparable private String name null private boolean exists true private long lastmodified private boolean directory false public Resource public Resource String name this name false false public Resource String name boolean exists long lastmodified this name exists lastmodified false public Resource String name boolean exists long lastmodified boolean directory this name name this exists exists this lastmodified lastmodified this directory directory public String getName return name public void setName String name this name name public boolean isExists return exists public void setExists boolean exists this exists exists public long getLastModified return exists lastmodified lastmodified public void setLastModified long lastmodified this lastmodified lastmodified public boolean isDirectory return directory public void setDirectory boolean directory this directory directory public Object clone try return super clone catch CloneNotSupportedException throw new Error public int compareTo Object other if other instanceof Resource throw new IllegalArgumentException Resource Resource other return getName compareTo getName', 'bug': '0'}
{'sequence': 'public class Untar extends Expand private UntarCompressionMethod compression new UntarCompressionMethod public void setCompression UntarCompressionMethod method compression method public void setEncoding String encoding throw new BuildException getTaskName getLocation protected void expandFile FileUtils fileUtils File srcF File dir TarInputStream tis null try log srcF dir Project MSG_INFO tis new TarInputStream compression decompress srcF new BufferedInputStream new FileInputStream srcF TarEntry te null while te tis getNextEntry null extractFile fileUtils srcF dir tis te getName te getModTime te isDirectory log Project MSG_VERBOSE catch IOException ioe throw new BuildException srcF getPath ioe getLocation finally if tis null try tis close catch IOException public static final class UntarCompressionMethod extends EnumeratedAttribute private static final String NONE private static final String GZIP private static final String BZIP2 public UntarCompressionMethod super setValue NONE public String getValues return new String NONE GZIP BZIP2 private InputStream decompress final File file final InputStream istream throws IOException BuildException final String value getValue if GZIP equals value return new GZIPInputStream istream else if BZIP2 equals value final char magic new char for int magic length if istream read magic throw new BuildException file toString return new CBZip2InputStream istream return istream', 'bug': '1'}
{'sequence': 'public class ManifestTask extends Task private Manifest nestedManifest new Manifest private File manifestFile private Mode mode private String encoding public static class Mode extends EnumeratedAttribute public String getValues return new String public ManifestTask mode new Mode mode setValue public void addConfiguredSection Manifest Section section throws ManifestException nestedManifest addConfiguredSection section public void addConfiguredAttribute Manifest Attribute attribute throws ManifestException nestedManifest addConfiguredAttribute attribute public void setFile File manifestFile public void setEncoding String encoding this encoding encoding public void setMode Mode mode public void execute throws BuildException if manifestFile null throw new BuildException Manifest toWrite Manifest getDefaultManifest Manifest current null BuildException error null if manifestFile exists FileInputStream fis null InputStreamReader isr null try fis new FileInputStream manifestFile if encoding null isr new InputStreamReader fis else isr new InputStreamReader fis encoding current new Manifest isr catch ManifestException error new BuildException manifestFile getLocation catch IOException error new BuildException manifestFile getLocation finally if isr null try isr close catch IOException try if mode getValue equals manifestFile exists if current null toWrite merge current else if error null throw error toWrite merge nestedManifest catch ManifestException throw new BuildException getLocation if toWrite equals current log Project MSG_VERBOSE return PrintWriter null try FileOutputStream fos new FileOutputStream manifestFile OutputStreamWriter osw new OutputStreamWriter fos new PrintWriter osw toWrite write catch IOException throw new BuildException manifestFile getLocation finally if null close', 'bug': '1'}
{'sequence': 'public class TarOutputStream extends FilterOutputStream public static final int LONGFILE_ERROR public static final int LONGFILE_TRUNCATE public static final int LONGFILE_GNU protected boolean debug protected int currSize protected int currBytes protected byte oneBuf protected byte recordBuf protected int assemLen protected byte assemBuf protected TarBuffer buffer protected int longFileMode LONGFILE_ERROR public TarOutputStream OutputStream os this os TarBuffer DEFAULT_BLKSIZE TarBuffer DEFAULT_RCDSIZE public TarOutputStream OutputStream os int blockSize this os blockSize TarBuffer DEFAULT_RCDSIZE public TarOutputStream OutputStream os int blockSize int recordSize super os this buffer new TarBuffer os blockSize recordSize this debug false this assemLen this assemBuf new byte recordSize this recordBuf new byte recordSize this oneBuf new byte public void setLongFileMode int longFileMode this longFileMode longFileMode public void setDebug boolean debugF this debug debugF public void setBufferDebug boolean debug this buffer setDebug debug public void finish throws IOException this writeEOFRecord public void close throws IOException this finish this buffer close public int getRecordSize return this buffer getRecordSize public void putNextEntry TarEntry entry throws IOException if entry getName length TarConstants NAMELEN if longFileMode LONGFILE_GNU TarEntry longLinkEntry new TarEntry TarConstants GNU_LONGLINK TarConstants LF_GNUTYPE_LONGNAME longLinkEntry setSize entry getName length putNextEntry longLinkEntry write entry getName getBytes write closeEntry else if longFileMode LONGFILE_TRUNCATE throw new RuntimeException entry getName TarConstants NAMELEN entry writeEntryHeader this recordBuf this buffer writeRecord this recordBuf this currBytes if entry isDirectory this currSize else this currSize int entry getSize public void closeEntry throws IOException if this assemLen for int this assemLen this assemBuf length this assemBuf this buffer writeRecord this assemBuf this currBytes this assemLen this assemLen if this currBytes this currSize throw new IOException this currBytes this currSize public void write int throws IOException this oneBuf byte this write this oneBuf public void write byte wBuf throws IOException this write wBuf wBuf length public void write byte wBuf int wOffset int numToWrite throws IOException if this currBytes numToWrite this currSize throw new IOException numToWrite this currSize if this assemLen if this assemLen numToWrite this recordBuf length int aLen this recordBuf length this assemLen System arraycopy this assemBuf this recordBuf this assemLen System arraycopy wBuf wOffset this recordBuf this assemLen aLen this buffer writeRecord this recordBuf this currBytes this recordBuf length wOffset aLen numToWrite aLen this assemLen else System arraycopy wBuf wOffset this assemBuf this assemLen numToWrite wOffset numToWrite this assemLen numToWrite numToWrite numToWrite while numToWrite if numToWrite this recordBuf length System arraycopy wBuf wOffset this assemBuf this assemLen numToWrite this assemLen numToWrite break this buffer writeRecord wBuf wOffset int num this recordBuf length this currBytes num numToWrite num wOffset num private void writeEOFRecord throws IOException for int this recordBuf length this recordBuf this buffer writeRecord this recordBuf', 'bug': '1'}
{'sequence': 'public interface Parameterizable void setParameters Parameter parameters', 'bug': '0'}
{'sequence': 'public class ZipFile private Hashtable entries new Hashtable private Hashtable nameMap new Hashtable private Hashtable dataOffsets new Hashtable private String encoding null private RandomAccessFile archive public ZipFile File throws IOException this null public ZipFile String name throws IOException this new File name null public ZipFile String name String encoding throws IOException this new File name encoding public ZipFile File String encoding throws IOException this encoding encoding archive new RandomAccessFile populateFromCentralDirectory resolveLocalFileHeaderData public String getEncoding return encoding public void close throws IOException archive close public Enumeration getEntries return entries keys public ZipEntry getEntry String name return ZipEntry nameMap get name public InputStream getInputStream ZipEntry ze throws IOException ZipException Long start Long dataOffsets get ze if start null return null BoundedInputStream bis new BoundedInputStream start longValue ze getCompressedSize switch ze getMethod case ZipEntry STORED return bis case ZipEntry DEFLATED bis addDummy return new InflaterInputStream bis new Inflater true default throw new ZipException ze getMethod private static final int CFH_LEN private void populateFromCentralDirectory throws IOException positionAtCentralDirectory byte cfh new byte CFH_LEN byte signatureBytes new byte archive readFully signatureBytes ZipLong sig new ZipLong signatureBytes while sig equals ZipOutputStream CFH_SIG archive readFully cfh int off ZipEntry ze new ZipEntry ZipShort versionMadeBy new ZipShort cfh off off ze setPlatform versionMadeBy getValue ze setMethod new ZipShort cfh off getValue off ze setTime fromDosTime new ZipLong cfh off getTime off ze setCrc new ZipLong cfh off getValue off ze setCompressedSize new ZipLong cfh off getValue off ze setSize new ZipLong cfh off getValue off int fileNameLen new ZipShort cfh off getValue off int extraLen new ZipShort cfh off getValue off int commentLen new ZipShort cfh off getValue off ze setInternalAttributes new ZipShort cfh off getValue off ze setExternalAttributes new ZipLong cfh off getValue off entries put ze new Long new ZipLong cfh off getValue byte fileName new byte fileNameLen archive readFully fileName ze setName getString fileName nameMap put ze getName ze archive skipBytes extraLen byte comment new byte commentLen archive readFully comment ze setComment getString comment archive readFully signatureBytes sig new ZipLong signatureBytes private static final int MIN_EOCD_SIZE private static final int CFD_LOCATOR_OFFSET private void positionAtCentralDirectory throws IOException long off archive length MIN_EOCD_SIZE archive seek off byte sig ZipOutputStream EOCD_SIG getBytes int curr archive read boolean found false while curr if curr sig curr archive read if curr sig curr archive read if curr sig curr archive read if curr sig found true break archive seek off curr archive read if found throw new ZipException archive seek off CFD_LOCATOR_OFFSET byte cfdOffset new byte archive readFully cfdOffset archive seek new ZipLong cfdOffset getValue private static final long LFH_OFFSET_FOR_FILENAME_LENGTH private void resolveLocalFileHeaderData throws IOException Enumeration getEntries while hasMoreElements ZipEntry ze ZipEntry nextElement long offset Long entries get ze longValue archive seek offset LFH_OFFSET_FOR_FILENAME_LENGTH byte new byte archive readFully int fileNameLen new ZipShort getValue archive readFully int extraFieldLen new ZipShort getValue archive skipBytes fileNameLen byte localExtraData new byte extraFieldLen archive readFully localExtraData ze setExtra localExtraData dataOffsets put ze new Long offset LFH_OFFSET_FOR_FILENAME_LENGTH fileNameLen extraFieldLen protected static Date fromDosTime ZipLong long dosTime getValue Calendar cal Calendar getInstance cal set Calendar YEAR int dosTime cal set Calendar MONTH int dosTime cal set Calendar DATE int dosTime cal set Calendar HOUR_OF_DAY int dosTime cal set Calendar MINUTE int dosTime cal set Calendar SECOND int dosTime return cal getTime protected String getString byte bytes throws ZipException if encoding null return new String bytes else try return new String bytes encoding catch UnsupportedEncodingException uee throw new ZipException uee getMessage private class BoundedInputStream extends InputStream private long remaining private long loc private boolean addDummyByte false BoundedInputStream long start long remaining this remaining remaining loc start public int read throws IOException if remaining if addDummyByte addDummyByte false return return synchronized archive archive seek loc return archive read public int read byte int off int len throws IOException if remaining if addDummyByte addDummyByte false off return return if len return if len remaining len int remaining int ret synchronized archive archive seek loc ret archive read off len if ret loc ret remaining ret return ret void addDummy addDummyByte true', 'bug': '1'}
{'sequence': 'public class Sj extends DefaultCompilerAdapter public boolean execute throws BuildException attributes log Project MSG_VERBOSE Commandline cmd setupJavacCommand String exec getJavac getExecutable cmd setExecutable exec null exec int firstFileName cmd size compileList length return executeExternalCompile cmd getCommandline firstFileName', 'bug': '0'}
{'sequence': 'public class Filter extends Task private String token private String value private File filtersFile public void setToken String token this token token public void setValue String value this value value public void setFiltersfile File filtersFile this filtersFile filtersFile public void execute throws BuildException boolean isFiltersFromFile filtersFile null token null value null boolean isSingleFilter filtersFile null token null value null if isFiltersFromFile isSingleFilter throw new BuildException getLocation if isSingleFilter getProject getGlobalFilterSet addFilter token value if isFiltersFromFile readFilters protected void readFilters throws BuildException log filtersFile Project MSG_VERBOSE getProject getGlobalFilterSet readFiltersFromFile filtersFile', 'bug': '0'}
{'sequence': 'public interface BuildLogger extends BuildListener void setMessageOutputLevel int level void setOutputPrintStream PrintStream output void setEmacsMode boolean emacsMode void setErrorPrintStream PrintStream err', 'bug': '0'}
{'sequence': 'public class Recorder extends Task private String filename null private Boolean append null private Boolean start null private int loglevel private boolean emacsMode false private static Hashtable recorderEntries new Hashtable public void setName String fname filename fname public void setAction ActionChoices action if action getValue equalsIgnoreCase start Boolean TRUE else start Boolean FALSE public void setAppend boolean append this append new Boolean append public void setEmacsMode boolean emacsMode this emacsMode emacsMode public void setLoglevel VerbosityLevelChoices level String lev level getValue if lev equalsIgnoreCase loglevel Project MSG_ERR else if lev equalsIgnoreCase loglevel Project MSG_WARN else if lev equalsIgnoreCase loglevel Project MSG_INFO else if lev equalsIgnoreCase loglevel Project MSG_VERBOSE else if lev equalsIgnoreCase loglevel Project MSG_DEBUG public void execute throws BuildException if filename null throw new BuildException getProject log filename Project MSG_DEBUG RecorderEntry recorder getRecorder filename getProject recorder setMessageOutputLevel loglevel recorder setRecordState start recorder setEmacsMode emacsMode public static class ActionChoices extends EnumeratedAttribute private static final String values public String getValues return values public static class VerbosityLevelChoices extends EnumeratedAttribute private static final String values public String getValues return values protected RecorderEntry getRecorder String name Project proj throws BuildException Object recorderEntries get name RecorderEntry entry if null try entry new RecorderEntry name PrintStream out null if append null out new PrintStream new FileOutputStream name else out new PrintStream new FileOutputStream name append booleanValue entry setErrorPrintStream out entry setOutputPrintStream out catch IOException ioe throw new BuildException ioe proj addBuildListener entry recorderEntries put name entry else entry RecorderEntry return entry', 'bug': '1'}
{'sequence': 'public class Echo extends Task protected File file null protected boolean append false protected int logLevel Project MSG_WARN public void execute throws BuildException if file null log message logLevel else FileWriter out null try out new FileWriter file getAbsolutePath append out write message message length catch IOException ioe throw new BuildException ioe getLocation finally if out null try out close catch IOException ioex public void setMessage String msg this message msg public void setFile File file this file file public void setAppend boolean append this append append public void addText String msg message getProject replaceProperties msg public void setLevel EchoLevel echoLevel String option echoLevel getValue if option equals logLevel Project MSG_ERR else if option equals logLevel Project MSG_WARN else if option equals logLevel Project MSG_INFO else if option equals logLevel Project MSG_VERBOSE else logLevel Project MSG_DEBUG public static class EchoLevel extends EnumeratedAttribute public String getValues return new String', 'bug': '0'}
{'sequence': 'public interface ExecuteStreamHandler void setProcessInputStream OutputStream os throws IOException void setProcessErrorStream InputStream is throws IOException void setProcessOutputStream InputStream is throws IOException void start throws IOException void stop', 'bug': '0'}
{'sequence': 'public class Parallel extends Task implements TaskContainer public static class TaskList implements TaskContainer private List tasks new ArrayList public void addTask Task nestedTask throws BuildException tasks add nestedTask private Vector nestedTasks new Vector private final Object semaphore new Object private int numThreads private int numThreadsPerProcessor private long timeout private volatile boolean stillRunning private boolean timedOut private boolean failOnAny private TaskList daemonTasks private StringBuffer exceptionMessage private int numExceptions private Throwable firstException private Location firstLocation public void addDaemons TaskList daemonTasks if this daemonTasks null throw new BuildException this daemonTasks daemonTasks public void setPollInterval int pollInterval public void setFailOnAny boolean failOnAny this failOnAny failOnAny public void addTask Task nestedTask nestedTasks addElement nestedTask public void setThreadsPerProcessor int numThreadsPerProcessor this numThreadsPerProcessor numThreadsPerProcessor public void setThreadCount int numThreads this numThreads numThreads public void setTimeout long timeout this timeout timeout public void execute throws BuildException updateThreadCounts if numThreads numThreads nestedTasks size spinThreads private void updateThreadCounts if numThreadsPerProcessor int numProcessors getNumProcessors if numProcessors numThreads numProcessors numThreadsPerProcessor private void processExceptions TaskRunnable runnables if runnables null return for int runnables length Throwable runnables getException if null numExceptions if firstException null firstException if instanceof BuildException firstLocation Location UNKNOWN_LOCATION firstLocation BuildException getLocation exceptionMessage append StringUtils LINE_SEP exceptionMessage append getMessage private void spinThreads throws BuildException final int numTasks nestedTasks size TaskRunnable runnables new TaskRunnable numTasks stillRunning true timedOut false int threadNumber for Enumeration nestedTasks elements hasMoreElements threadNumber Task nestedTask Task nextElement runnables threadNumber new TaskRunnable nestedTask final int maxRunning numTasks numThreads numTasks numThreads TaskRunnable running new TaskRunnable maxRunning threadNumber ThreadGroup group new ThreadGroup TaskRunnable daemons null if daemonTasks null daemonTasks tasks size daemons new TaskRunnable daemonTasks tasks size synchronized semaphore if daemons null for int daemons length daemons new TaskRunnable Task daemonTasks tasks get Thread daemonThread new Thread group daemons daemonThread setDaemon true daemonThread start for int maxRunning running runnables threadNumber Thread thread new Thread group running thread start if timeout Thread timeoutThread new Thread public synchronized void run try wait timeout synchronized semaphore stillRunning false timedOut true semaphore notifyAll catch InterruptedException timeoutThread start outer while threadNumber numTasks stillRunning for int maxRunning if running null running finished running runnables threadNumber Thread thread new Thread group running thread start continue outer try semaphore wait catch InterruptedException ie outer2 while stillRunning for int maxRunning if running null running finished try semaphore wait catch InterruptedException ie continue outer2 stillRunning false if timedOut throw new BuildException exceptionMessage new StringBuffer numExceptions firstException null firstLocation Location UNKNOWN_LOCATION processExceptions daemons processExceptions runnables if numExceptions if firstException instanceof BuildException throw BuildException firstException else throw new BuildException firstException else if numExceptions throw new BuildException exceptionMessage toString firstLocation private int getNumProcessors try Class paramTypes Method availableProcessors Runtime class getMethod paramTypes Object args Integer ret Integer availableProcessors invoke Runtime getRuntime args return ret intValue catch Exception return private class TaskRunnable implements Runnable private Throwable exception private Task task boolean finished TaskRunnable Task task this task task public void run try task perform catch Throwable exception finally synchronized semaphore finished true if failOnAny stillRunning false semaphore notifyAll public Throwable getException return exception', 'bug': '1'}
{'sequence': 'public interface TaskContainer void addTask Task task', 'bug': '0'}
{'sequence': 'public final class StripLineBreaks extends BaseParamFilterReader implements ChainableReader private static final String DEFAULT_LINE_BREAKS private static final String LINE_BREAKS_KEY private String lineBreaks DEFAULT_LINE_BREAKS public StripLineBreaks super public StripLineBreaks final Reader in super in public final int read throws IOException if getInitialized initialize setInitialized true int ch in read while ch if lineBreaks indexOf ch break else ch in read return ch public final void setLineBreaks final String lineBreaks this lineBreaks lineBreaks private final String getLineBreaks return lineBreaks public final Reader chain final Reader rdr StripLineBreaks newFilter new StripLineBreaks rdr newFilter setLineBreaks getLineBreaks newFilter setInitialized true return newFilter private final void initialize String userDefinedLineBreaks null Parameter params getParameters if params null for int params length if LINE_BREAKS_KEY equals params getName userDefinedLineBreaks params getValue break if userDefinedLineBreaks null lineBreaks userDefinedLineBreaks', 'bug': '0'}
{'sequence': 'public class Environment protected Vector variables public static class Variable private String key value public Variable super public void setKey String key this key key public void setValue String value this value value public String getKey return this key public String getValue return this value public void setPath Path path this value path toString public void setFile java io File file this value file getAbsolutePath public String getContent throws BuildException if key null value null throw new BuildException StringBuffer sb new StringBuffer key trim sb append append value trim return sb toString public Environment variables new Vector public void addVariable Variable var variables addElement var public String getVariables throws BuildException if variables size return null String result new String variables size for int result length result Variable variables elementAt getContent return result', 'bug': '1'}
{'sequence': 'public class DependSet extends MatchingTask private Vector sourceFileSets new Vector private Vector sourceFileLists new Vector private Vector targetFileSets new Vector private Vector targetFileLists new Vector public DependSet public void addSrcfileset FileSet fs sourceFileSets addElement fs public void addSrcfilelist FileList fl sourceFileLists addElement fl public void addTargetfileset FileSet fs targetFileSets addElement fs public void addTargetfilelist FileList fl targetFileLists addElement fl public void execute throws BuildException if sourceFileSets size sourceFileLists size throw new BuildException if targetFileSets size targetFileLists size throw new BuildException long now new Date getTime if Os isFamily now Vector allTargets new Vector long oldestTargetTime File oldestTarget null Enumeration enumTargetSets targetFileSets elements while enumTargetSets hasMoreElements FileSet targetFS FileSet enumTargetSets nextElement if targetFS getDir getProject exists continue DirectoryScanner targetDS targetFS getDirectoryScanner getProject String targetFiles targetDS getIncludedFiles for int targetFiles length File dest new File targetFS getDir getProject targetFiles allTargets addElement dest if dest lastModified now log targetFiles Project MSG_WARN if oldestTarget null dest lastModified oldestTargetTime oldestTargetTime dest lastModified oldestTarget dest boolean upToDate true Enumeration enumTargetLists targetFileLists elements while enumTargetLists hasMoreElements FileList targetFL FileList enumTargetLists nextElement String targetFiles targetFL getFiles getProject for int targetFiles length File dest new File targetFL getDir getProject targetFiles if dest exists log targetFiles Project MSG_VERBOSE upToDate false continue else allTargets addElement dest if dest lastModified now log targetFiles Project MSG_WARN if oldestTarget null dest lastModified oldestTargetTime oldestTargetTime dest lastModified oldestTarget dest if oldestTarget null log oldestTarget Project MSG_VERBOSE else upToDate false if upToDate Enumeration enumSourceLists sourceFileLists elements while upToDate enumSourceLists hasMoreElements FileList sourceFL FileList enumSourceLists nextElement String sourceFiles sourceFL getFiles getProject for int upToDate sourceFiles length File src new File sourceFL getDir getProject sourceFiles if src lastModified now log sourceFiles Project MSG_WARN if src exists log sourceFiles Project MSG_VERBOSE upToDate false break if src lastModified oldestTargetTime upToDate false log oldestTarget sourceFiles Project MSG_VERBOSE if upToDate Enumeration enumSourceSets sourceFileSets elements while upToDate enumSourceSets hasMoreElements FileSet sourceFS FileSet enumSourceSets nextElement DirectoryScanner sourceDS sourceFS getDirectoryScanner getProject String sourceFiles sourceDS getIncludedFiles for int upToDate sourceFiles length File src new File sourceFS getDir getProject sourceFiles if src lastModified now log sourceFiles Project MSG_WARN if src lastModified oldestTargetTime upToDate false log oldestTarget sourceFiles Project MSG_VERBOSE if upToDate log Project MSG_VERBOSE for Enumeration allTargets elements hasMoreElements File fileToRemove File nextElement log fileToRemove getAbsolutePath Project MSG_VERBOSE fileToRemove delete', 'bug': '1'}
{'sequence': 'public class ExtendSelector extends BaseSelector private String classname null private FileSelector dynselector null private Vector paramVec new Vector private Path classpath null public ExtendSelector public void setClassname String classname this classname classname public void selectorCreate if classname null classname length try Class null if classpath null Class forName classname else AntClassLoader al getProject createClassLoader classpath Class forName classname true al dynselector FileSelector newInstance final Project project getProject if project null project setProjectReference dynselector catch ClassNotFoundException cnfexcept setError classname catch InstantiationException iexcept setError classname catch IllegalAccessException iaexcept setError classname else setError public void addParam Parameter paramVec addElement public final void setClasspath Path classpath if isReference throw tooManyAttributes if this classpath null this classpath classpath else this classpath append classpath public final Path createClasspath if isReference throw noChildrenAllowed if this classpath null this classpath new Path getProject return this classpath createPath public final Path getClasspath return classpath public void setClasspathref Reference if isReference throw tooManyAttributes createClasspath setRefid public void verifySettings if dynselector null selectorCreate if classname null classname length setError else if dynselector null setError else if dynselector instanceof ExtendFileSelector paramVec size setError public boolean isSelected File basedir String filename File file throws BuildException validate if paramVec size dynselector instanceof ExtendFileSelector Parameter paramArray new Parameter paramVec size paramVec copyInto paramArray ExtendFileSelector dynselector setParameters paramArray return dynselector isSelected basedir filename file', 'bug': '0'}
{'sequence': 'public interface Algorithm boolean isValid String getValue File file', 'bug': '0'}
{'sequence': 'public class Available extends Task implements Condition private String property private String classname private String file private Path filepath private String resource private FileDir type private Path classpath private AntClassLoader loader private String value private boolean isTask false private boolean ignoreSystemclasses false public void setClasspath Path classpath createClasspath append classpath public Path createClasspath if this classpath null this classpath new Path getProject return this classpath createPath public void setClasspathRef Reference createClasspath setRefid public void setFilepath Path filepath createFilepath append filepath public Path createFilepath if this filepath null this filepath new Path getProject return this filepath createPath public void setProperty String property this property property public void setValue String value this value value public void setClassname String classname if equals classname this classname classname public void setFile File file this file FileUtils newFileUtils removeLeadingPath getProject getBaseDir file public void setResource String resource this resource resource public void setType String type log this type new FileDir this type setValue type public void setType FileDir type this type type public void setIgnoresystemclasses boolean ignore this ignoreSystemclasses ignore public void execute throws BuildException if property null throw new BuildException getLocation isTask true try if eval String oldvalue getProject getProperty property if null oldvalue oldvalue equals value log StringUtils LINE_SEP getProject setProperty property value finally isTask false public boolean eval throws BuildException if classname null file null resource null throw new BuildException getLocation if type null if file null throw new BuildException getLocation if classpath null classpath setProject getProject this loader getProject createClassLoader classpath String appendix if isTask appendix property else setTaskName if classname null checkClass classname log classname appendix Project MSG_VERBOSE return false if file null checkFile if type null log type file appendix Project MSG_VERBOSE else log file appendix Project MSG_VERBOSE return false if resource null checkResource resource log resource appendix Project MSG_VERBOSE return false if loader null loader cleanup loader null if isTask setTaskName null return true private boolean checkFile if filepath null return checkFile getProject resolveFile file file else String paths filepath list for int paths length log paths Project MSG_DEBUG File path new File paths if path exists file equals paths if type null log path Project MSG_VERBOSE return true else if type isDir path isDirectory log path Project MSG_VERBOSE return true else if type isFile path isFile log path Project MSG_VERBOSE return true return false FileUtils fileUtils FileUtils newFileUtils File parent fileUtils getParentFile path if parent null parent exists file equals parent getAbsolutePath if type null log parent Project MSG_VERBOSE return true else if type isDir log parent Project MSG_VERBOSE return true return false if path exists path isDirectory if checkFile new File path file file path return true if parent null parent exists if checkFile new File parent file file parent return true if parent null File grandParent fileUtils getParentFile parent if grandParent null grandParent exists if checkFile new File grandParent file file grandParent return true return false private boolean checkFile File String text if type null if type isDir if isDirectory log text Project MSG_VERBOSE return isDirectory else if type isFile if isFile log text Project MSG_VERBOSE return isFile if exists log text Project MSG_VERBOSE return exists private boolean checkResource String resource if loader null return loader getResourceAsStream resource null else ClassLoader cL this getClass getClassLoader if cL null return cL getResourceAsStream resource null else return ClassLoader getSystemResourceAsStream resource null private boolean checkClass String classname try Class requiredClass null if ignoreSystemclasses loader getProject createClassLoader classpath loader setParentFirst false loader addJavaLibraries if loader null try requiredClass loader findClass classname catch SecurityException se return true else return false else if loader null requiredClass loader loadClass classname else ClassLoader this getClass getClassLoader if null requiredClass Class forName classname true else requiredClass Class forName classname return true catch ClassNotFoundException log classname Project MSG_DEBUG return false catch NoClassDefFoundError log getMessage classname Project MSG_DEBUG return false public static class FileDir extends EnumeratedAttribute private static final String VALUES public String getValues return VALUES public boolean isDir return equalsIgnoreCase getValue public boolean isFile return equalsIgnoreCase getValue', 'bug': '1'}
{'sequence': 'public class LogStreamHandler extends PumpStreamHandler public LogStreamHandler Task task int outlevel int errlevel super new LogOutputStream task outlevel new LogOutputStream task errlevel public void stop super stop try getErr close getOut close catch IOException throw new BuildException', 'bug': '0'}
{'sequence': 'public class TarUtils public static long parseOctal byte header int offset int length long result boolean stillPadding true int end offset length for int offset end if header break if header byte header if stillPadding continue if header byte break stillPadding false result result header return result public static StringBuffer parseName byte header int offset int length StringBuffer result new StringBuffer length int end offset length for int offset end if header break result append char header return result public static int getNameBytes StringBuffer name byte buf int offset int length int for length name length buf offset byte name charAt for length buf offset return offset length public static int getOctalBytes long value byte buf int offset int length int idx length buf offset idx idx buf offset idx byte idx if value buf offset idx byte idx else for long val value idx val idx buf offset idx byte byte byte val val val for idx idx buf offset idx byte return offset length public static int getLongOctalBytes long value byte buf int offset int length byte temp new byte length getOctalBytes value temp length System arraycopy temp buf offset length return offset length public static int getCheckSumOctalBytes long value byte buf int offset int length getOctalBytes value buf offset length buf offset length byte buf offset length return offset length public static long computeCheckSum byte buf long sum for int buf length sum buf return sum', 'bug': '0'}
{'sequence': 'public class Main implements AntMain public static final String DEFAULT_BUILD_FILENAME private int msgOutputLevel Project MSG_INFO private static PrintStream out System out private static PrintStream err System err private Vector targets new Vector private Properties definedProps new Properties private Vector listeners new Vector private Vector propertyFiles new Vector private boolean allowInput true private boolean keepGoingMode false private String loggerClassname null private String inputHandlerClassname null private boolean emacsMode false private boolean readyToRun false private boolean projectHelp false private static boolean isLogFileUsed false private static void printMessage Throwable String message getMessage if message null System err println message public static void start String args Properties additionalUserProperties ClassLoader coreLoader Main new Main startAnt args additionalUserProperties coreLoader public void startAnt String args Properties additionalUserProperties ClassLoader coreLoader try Diagnostics validateVersion processArgs args catch Throwable exc handleLogfile printMessage exc System exit if additionalUserProperties null for Enumeration additionalUserProperties keys hasMoreElements String key String nextElement String property additionalUserProperties getProperty key definedProps put key property int exitCode try runBuild coreLoader exitCode catch BuildException be if err System err printMessage be catch Throwable exc exc printStackTrace printMessage exc finally handleLogfile System exit exitCode private static void handleLogfile if isLogFileUsed if out null try out close catch final Exception if err null try err close catch final Exception public static void main String args start args null null public Main protected Main String args throws BuildException processArgs args private void processArgs String args String searchForThis null PrintStream logTo null for int args length String arg args if arg equals arg equals printUsage return else if arg equals printVersion return else if arg equals Diagnostics doReport System out return else if arg equals arg equals msgOutputLevel Project MSG_WARN else if arg equals arg equals printVersion msgOutputLevel Project MSG_VERBOSE else if arg equals arg equals printVersion msgOutputLevel Project MSG_DEBUG else if arg equals allowInput false else if arg equals arg equals try File logFile new File args logTo new PrintStream new FileOutputStream logFile isLogFileUsed true catch IOException ioe String msg throw new BuildException msg catch ArrayIndexOutOfBoundsException aioobe String msg throw new BuildException msg else if arg equals arg equals arg equals try buildFile new File args replace File separatorChar catch ArrayIndexOutOfBoundsException aioobe String msg throw new BuildException msg else if arg equals try listeners addElement args catch ArrayIndexOutOfBoundsException aioobe String msg throw new BuildException msg else if arg startsWith String name arg substring arg length String value null int posEq name indexOf if posEq value name substring posEq name name substring posEq else if args length value args else throw new BuildException name definedProps put name value else if arg equals if loggerClassname null throw new BuildException try loggerClassname args catch ArrayIndexOutOfBoundsException aioobe throw new BuildException else if arg equals if inputHandlerClassname null throw new BuildException try inputHandlerClassname args catch ArrayIndexOutOfBoundsException aioobe throw new BuildException else if arg equals arg equals emacsMode true else if arg equals arg equals projectHelp true else if arg equals arg equals if args length searchForThis args else searchForThis DEFAULT_BUILD_FILENAME else if arg startsWith try propertyFiles addElement args catch ArrayIndexOutOfBoundsException aioobe String msg throw new BuildException msg else if arg equals arg equals keepGoingMode true else if arg startsWith String msg arg System out println msg printUsage throw new BuildException else targets addElement arg if buildFile null if searchForThis null buildFile findBuildFile System getProperty searchForThis else buildFile new File DEFAULT_BUILD_FILENAME if buildFile exists System out println buildFile throw new BuildException if buildFile isDirectory System out println buildFile throw new BuildException for int propertyFileIndex propertyFileIndex propertyFiles size propertyFileIndex String filename String propertyFiles elementAt propertyFileIndex Properties props new Properties FileInputStream fis null try fis new FileInputStream filename props load fis catch IOException System out println filename getMessage finally if fis null try fis close catch IOException Enumeration propertyNames props propertyNames while propertyNames hasMoreElements String name String propertyNames nextElement if definedProps getProperty name null definedProps put name props getProperty name if msgOutputLevel Project MSG_INFO System out println buildFile if logTo null out logTo err logTo System setOut out System setErr err readyToRun true private File getParentFile File file String filename file getAbsolutePath file new File filename filename file getParent if filename null msgOutputLevel Project MSG_VERBOSE System out println filename return filename null null new File filename private File findBuildFile String start String suffix throws BuildException if msgOutputLevel Project MSG_INFO System out println suffix File parent new File new File start getAbsolutePath File file new File parent suffix while file exists parent getParentFile parent if parent null throw new BuildException file new File parent suffix return file private void runBuild ClassLoader coreLoader throws BuildException if readyToRun return final Project project new Project project setCoreLoader coreLoader Throwable error null try addBuildListeners project addInputHandler project PrintStream err System err PrintStream out System out InputStream in System in SecurityManager oldsm null if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_0 JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 oldsm System getSecurityManager try if allowInput project setDefaultInputStream System in System setIn new DemuxInputStream project System setOut new PrintStream new DemuxOutputStream project false System setErr new PrintStream new DemuxOutputStream project true if projectHelp project fireBuildStarted project init project setUserProperty getAntVersion Enumeration definedProps keys while hasMoreElements String arg String nextElement String value String definedProps get arg project setUserProperty arg value project setUserProperty buildFile getAbsolutePath project setKeepGoingMode keepGoingMode ProjectHelper configureProject project buildFile if projectHelp printDescription project printTargets project msgOutputLevel Project MSG_INFO return if targets size if project getDefaultTarget null targets addElement project getDefaultTarget project executeTargets targets finally if oldsm null System setSecurityManager oldsm System setOut out System setErr err System setIn in catch RuntimeException exc error exc throw exc catch Error err error err throw err finally if projectHelp project fireBuildFinished error protected void addBuildListeners Project project project addBuildListener createLogger for int listeners size String className String listeners elementAt try BuildListener listener BuildListener Class forName className newInstance if project null project setProjectReference listener project addBuildListener listener catch Throwable exc throw new BuildException className exc private void addInputHandler Project project throws BuildException InputHandler handler null if inputHandlerClassname null handler new DefaultInputHandler else try handler InputHandler Class forName inputHandlerClassname newInstance if project null project setProjectReference handler catch ClassCastException String msg inputHandlerClassname throw new BuildException msg catch Exception String msg inputHandlerClassname getClass getName throw new BuildException msg project setInputHandler handler private BuildLogger createLogger BuildLogger logger null if loggerClassname null try Class loggerClass Class forName loggerClassname logger BuildLogger loggerClass newInstance catch ClassCastException System err println loggerClassname throw new RuntimeException catch Exception System err println loggerClassname getClass getName throw new RuntimeException else logger new DefaultLogger logger setMessageOutputLevel msgOutputLevel logger setOutputPrintStream out logger setErrorPrintStream err logger setEmacsMode emacsMode return logger private static void printUsage String lSep System getProperty StringBuffer msg new StringBuffer msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep msg append lSep System out println msg toString private static void printVersion throws BuildException System out println getAntVersion private static String antVersion null public static synchronized String getAntVersion throws BuildException if antVersion null try Properties props new Properties InputStream in Main class getResourceAsStream props load in in close StringBuffer msg new StringBuffer msg append msg append props getProperty msg append msg append props getProperty antVersion msg toString catch IOException ioe throw new BuildException ioe getMessage catch NullPointerException npe throw new BuildException return antVersion private static void printDescription Project project if project getDescription null project log project getDescription private static void printTargets Project project boolean printSubTargets int maxLength Enumeration ptargets project getTargets elements String targetName String targetDescription Target currentTarget Vector topNames new Vector Vector topDescriptions new Vector Vector subNames new Vector while ptargets hasMoreElements currentTarget Target ptargets nextElement targetName currentTarget getName if targetName equals continue targetDescription currentTarget getDescription if targetDescription null int pos findTargetPosition subNames targetName subNames insertElementAt targetName pos else int pos findTargetPosition topNames targetName topNames insertElementAt targetName pos topDescriptions insertElementAt targetDescription pos if targetName length maxLength maxLength targetName length printTargets project topNames topDescriptions maxLength if topNames size printSubTargets true if printSubTargets printTargets project subNames null String defaultTarget project getDefaultTarget if defaultTarget null equals defaultTarget project log defaultTarget private static int findTargetPosition Vector names String name int res names size for int names size res names size if name compareTo String names elementAt res return res private static void printTargets Project project Vector names Vector descriptions String heading int maxlen String lSep System getProperty String spaces while spaces length maxlen spaces spaces StringBuffer msg new StringBuffer msg append heading lSep lSep for int names size msg append msg append names elementAt if descriptions null msg append spaces substring maxlen String names elementAt length msg append descriptions elementAt msg append lSep project log msg toString', 'bug': '0'}
{'sequence': 'public interface Regexp extends RegexpMatcher int REPLACE_FIRST int REPLACE_ALL String substitute String input String argument int options throws BuildException', 'bug': '0'}
{'sequence': 'public class FacadeTaskHelper private Vector args new Vector private String userChoice private String magicValue private String defaultValue public FacadeTaskHelper String defaultValue this defaultValue null public FacadeTaskHelper String defaultValue String magicValue this defaultValue defaultValue this magicValue magicValue public void setMagicValue String magicValue this magicValue magicValue public void setImplementation String userChoice this userChoice userChoice public String getImplementation return userChoice null userChoice magicValue null magicValue defaultValue public String getExplicitChoice return userChoice public void addImplementationArgument ImplementationSpecificArgument arg args addElement arg public String getArgs Vector tmp new Vector args size for Enumeration args elements hasMoreElements ImplementationSpecificArgument arg ImplementationSpecificArgument nextElement String curr arg getParts getImplementation for int curr length tmp addElement curr String res new String tmp size tmp copyInto res return res public boolean hasBeenSet return userChoice null magicValue null', 'bug': '0'}
{'sequence': 'public class Mkdir extends Task private static final int MKDIR_RETRY_SLEEP_MILLIS private File dir public void execute throws BuildException if dir null throw new BuildException getLocation if dir isFile throw new BuildException dir getAbsolutePath if dir exists boolean result mkdirs dir if result String msg dir getAbsolutePath throw new BuildException msg getLocation log dir getAbsolutePath public void setDir File dir this dir dir private boolean mkdirs File if mkdirs try Thread sleep MKDIR_RETRY_SLEEP_MILLIS return mkdirs catch InterruptedException ex return mkdirs return true', 'bug': '0'}
{'sequence': 'public class TeeOutputStream extends OutputStream private OutputStream left private OutputStream right public TeeOutputStream OutputStream left OutputStream right this left left this right right public void close throws IOException left close right close public void flush throws IOException left flush right flush public void write byte throws IOException left write right write public void write byte int off int len throws IOException left write off len right write off len public void write int throws IOException left write right write', 'bug': '0'}
{'sequence': 'public interface FileNameMapper void setFrom String from void setTo String to String mapFileName String sourceFileName', 'bug': '0'}
{'sequence': 'public class Http extends ProjectComponent implements Condition private String spec null public void setUrl String url spec url private int errorsBeginAt public void setErrorsBeginAt int errorsBeginAt this errorsBeginAt errorsBeginAt public boolean eval throws BuildException if spec null throw new BuildException log spec Project MSG_VERBOSE try URL url new URL spec try URLConnection conn url openConnection if conn instanceof HttpURLConnection HttpURLConnection http HttpURLConnection conn int code http getResponseCode log spec code Project MSG_VERBOSE if code code errorsBeginAt return true else return false catch java io IOException return false catch MalformedURLException throw new BuildException spec return true', 'bug': '0'}
{'sequence': 'public class Patch extends Task private File originalFile private File directory private boolean havePatchfile false private Commandline cmd new Commandline public void setOriginalfile File file originalFile file public void setDestfile File file if file null cmd createArgument setValue cmd createArgument setFile file public void setPatchfile File file if file exists throw new BuildException file getLocation cmd createArgument setValue cmd createArgument setFile file havePatchfile true public void setBackups boolean backups if backups cmd createArgument setValue public void setIgnorewhitespace boolean ignore if ignore cmd createArgument setValue public void setStrip int num throws BuildException if num throw new BuildException getLocation cmd createArgument setValue num public void setQuiet boolean if cmd createArgument setValue public void setReverse boolean if cmd createArgument setValue public void setDir File directory this directory directory public void execute throws BuildException if havePatchfile throw new BuildException getLocation Commandline toExecute Commandline cmd clone toExecute setExecutable if originalFile null toExecute createArgument setFile originalFile Execute exe new Execute new LogStreamHandler this Project MSG_INFO Project MSG_WARN null exe setCommandline toExecute getCommandline if directory null if directory exists directory isDirectory exe setWorkingDirectory directory else if directory isDirectory throw new BuildException directory getLocation else throw new BuildException directory getLocation else exe setWorkingDirectory getProject getBaseDir log toExecute describeCommand Project MSG_VERBOSE try exe execute catch IOException throw new BuildException getLocation', 'bug': '0'}
{'sequence': 'public class FixCRLF extends MatchingTask private static final int UNDEF private static final int NOTJAVA private static final int LOOKING private static final int IN_CHAR_CONST private static final int IN_STR_CONST private static final int IN_SINGLE_COMMENT private static final int IN_MULTI_COMMENT private static final int ASIS private static final int CR private static final int LF private static final int CRLF private static final int ADD private static final int REMOVE private static final int SPACES private static final int TABS private static final int INBUFLEN private static final int LINEBUFLEN private static final char CTRLZ private int tablength private String spaces private StringBuffer linebuf new StringBuffer private StringBuffer linebuf2 new StringBuffer private int eol private String eolstr private int ctrlz private int tabs private boolean javafiles false private File srcDir private File destDir null private FileUtils fileUtils FileUtils newFileUtils private String encoding null public FixCRLF tabs ASIS if Os isFamily ctrlz REMOVE eol CR eolstr else if Os isFamily ctrlz ASIS eol CRLF eolstr else ctrlz REMOVE eol LF eolstr public void setSrcdir File srcDir this srcDir srcDir public void setDestdir File destDir this destDir destDir public void setJavafiles boolean javafiles this javafiles javafiles public void setEol CrLf attr String option attr getValue if option equals eol ASIS else if option equals option equals eol CR eolstr else if option equals option equals eol LF eolstr else eol CRLF eolstr public void setCr AddAsisRemove attr log Project MSG_WARN log Project MSG_WARN String option attr getValue CrLf new CrLf if option equals setValue else if option equals setValue else setValue setEol public void setTab AddAsisRemove attr String option attr getValue if option equals tabs SPACES else if option equals tabs ASIS else tabs TABS public void setTablength int tlength throws BuildException if tlength tlength throw new BuildException getLocation tablength tlength StringBuffer sp new StringBuffer for int tablength sp append spaces sp toString public void setEof AddAsisRemove attr String option attr getValue if option equals ctrlz REMOVE else if option equals ctrlz ASIS else ctrlz ADD public void setEncoding String encoding this encoding encoding public void execute throws BuildException if srcDir null throw new BuildException if srcDir exists throw new BuildException if srcDir isDirectory throw new BuildException if destDir null if destDir exists throw new BuildException if destDir isDirectory throw new BuildException log eol ASIS eol CR eol LF tabs TABS tabs ASIS ctrlz ADD ctrlz ASIS tablength encoding null encoding Project MSG_VERBOSE DirectoryScanner ds super getDirectoryScanner srcDir String files ds getIncludedFiles for int files length processFile files private Reader getReader File throws IOException return encoding null new FileReader new InputStreamReader new FileInputStream encoding private void processFile String file throws BuildException File srcFile new File srcDir file File destD destDir null srcDir destDir File tmpFile null BufferedWriter outWriter OneLiner BufferLine line OneLiner lines new OneLiner srcFile try try tmpFile fileUtils createTempFile null tmpFile deleteOnExit Writer writer encoding null new FileWriter tmpFile new OutputStreamWriter new FileOutputStream tmpFile encoding outWriter new BufferedWriter writer catch IOException throw new BuildException while lines hasMoreElements int endComment try line OneLiner BufferLine lines nextElement catch NoSuchElementException throw new BuildException String lineString line getLineString int linelen line length if tabs ASIS try outWriter write lineString catch IOException throw new BuildException while line getNext linelen switch lines getState case NOTJAVA notInConstant line line length outWriter break case IN_MULTI_COMMENT endComment if endComment lines setState LOOKING else endComment linelen notInConstant line endComment outWriter break case IN_SINGLE_COMMENT notInConstant line line length outWriter lines setState LOOKING break case IN_CHAR_CONST case IN_STR_CONST int begin line getNext char terminator lines getState IN_STR_CONST endOfCharConst line terminator while line getNext line getLookahead if line getNextCharInc line setColumn line getColumn tablength line getColumn tablength else line incColumn try outWriter write line substring begin line getNext catch IOException throw new BuildException lines setState LOOKING break case LOOKING nextStateChange line notInConstant line line getLookahead outWriter break try outWriter write eolstr catch IOException throw new BuildException try if ctrlz ASIS outWriter write lines getEofStr else if ctrlz ADD outWriter write CTRLZ catch IOException throw new BuildException finally try outWriter close catch IOException throw new BuildException try lines close lines null catch IOException throw new BuildException srcFile File destFile new File destD file boolean destIsWrong true if destFile exists log Project MSG_DEBUG if fileUtils contentEquals destFile tmpFile log destFile Project MSG_DEBUG else log destFile Project MSG_DEBUG destIsWrong false if destIsWrong fileUtils rename tmpFile destFile tmpFile null catch IOException throw new BuildException finally try if lines null lines close catch IOException io log srcFile Project MSG_ERR if tmpFile null tmpFile delete private void nextStateChange OneLiner BufferLine bufline throws BuildException int eol bufline length int ptr bufline getNext while ptr eol switch bufline getChar ptr case bufline setState IN_CHAR_CONST bufline setLookahead ptr return case bufline setState IN_STR_CONST bufline setLookahead ptr return case if ptr eol if bufline getChar ptr bufline setState IN_MULTI_COMMENT bufline setLookahead ptr return else if bufline getChar ptr bufline setState IN_SINGLE_COMMENT bufline setLookahead ptr return break bufline setLookahead ptr private void endOfCharConst OneLiner BufferLine bufline char terminator throws BuildException int ptr bufline getNext int eol bufline length char while ptr eol if bufline getChar ptr ptr else if terminator bufline setLookahead ptr return throw new BuildException private void notInConstant OneLiner BufferLine bufline int end BufferedWriter outWriter int nextTab int nextStop int tabspaces String line bufline substring bufline getNext end linebuf new StringBuffer while nextTab line indexOf int place col nextTab place tabspaces tablength col tablength linebuf append spaces substring tabspaces col tabspaces place nextTab linebuf append line substring place line length String linestring new String linebuf substring if tabs REMOVE try outWriter write linestring catch IOException throw new BuildException int tabCol linebuf2 new StringBuffer place col bufline getColumn int placediff col nextStop col tablength col tablength if nextStop col linebuf2 append linestring substring place nextStop placediff place nextStop placediff nextStop tablength for nextStop placediff linestring length nextStop tablength for tabCol nextStop tabCol placediff place linestring charAt tabCol placediff if nextStop tabCol linebuf2 append linestring substring place tabCol placediff linebuf2 append else linebuf2 append linestring substring place nextStop placediff place nextStop placediff linebuf2 append linestring substring place linestring length try outWriter write linebuf2 substring catch IOException throw new BuildException bufline setColumn bufline getColumn linestring length bufline setNext end class OneLiner implements Enumeration private int state javafiles LOOKING NOTJAVA private StringBuffer eolStr new StringBuffer LINEBUFLEN private StringBuffer eofStr new StringBuffer private BufferedReader reader private StringBuffer line new StringBuffer private boolean reachedEof false private File srcFile public OneLiner File srcFile throws BuildException this srcFile srcFile try reader new BufferedReader getReader srcFile INBUFLEN nextLine catch IOException throw new BuildException srcFile getMessage getLocation protected void nextLine throws BuildException int ch int eolcount eolStr new StringBuffer line new StringBuffer try ch reader read while ch ch ch line append char ch ch reader read if ch line length reachedEof true return switch char ch case eolcount eolStr append reader mark switch ch reader read case if char ch reader read eolcount eolStr append else reader reset break case eolcount eolStr append break case break default reader reset break break case eolcount eolStr append break if eolcount int line length while line charAt CTRLZ if line length eofStr append line toString substring if line setLength reachedEof true else line setLength catch IOException throw new BuildException srcFile getMessage getLocation public String getEofStr return eofStr substring public int getState return state public void setState int state this state state public boolean hasMoreElements return reachedEof public Object nextElement throws NoSuchElementException if hasMoreElements throw new NoSuchElementException BufferLine tmpLine new BufferLine line toString eolStr substring nextLine return tmpLine public void close throws IOException if reader null reader close class BufferLine private int next private int column private int lookahead UNDEF private String line private String eolStr public BufferLine String line String eolStr throws BuildException next column this line line this eolStr eolStr public int getNext return next public void setNext int next this next next public int getLookahead return lookahead public void setLookahead int lookahead this lookahead lookahead public char getChar int return line charAt public char getNextChar return getChar next public char getNextCharInc return getChar next public int getColumn return column public void setColumn int col column col public int incColumn return column public int length return line length public int getEolLength return eolStr length public String getLineString return line public String getEol return eolStr public String substring int begin return line substring begin public String substring int begin int end return line substring begin end public void setState int state OneLiner this setState state public int getState return OneLiner this getState public static class AddAsisRemove extends EnumeratedAttribute public String getValues return new String public static class CrLf extends EnumeratedAttribute public String getValues return new String', 'bug': '1'}
{'sequence': 'public class StreamPumper implements Runnable private static final int SIZE private InputStream is private OutputStream os private boolean finished private boolean closeWhenExhausted public StreamPumper InputStream is OutputStream os boolean closeWhenExhausted this is is this os os this closeWhenExhausted closeWhenExhausted public StreamPumper InputStream is OutputStream os this is os false public void run synchronized this finished false final byte buf new byte SIZE int length try while length is read buf os write buf length catch Exception finally if closeWhenExhausted try os close catch IOException synchronized this finished true notifyAll public synchronized boolean isFinished return finished public synchronized void waitFor throws InterruptedException while isFinished wait', 'bug': '1'}
{'sequence': 'public class RegularExpression extends DataType public static final String DATA_TYPE_NAME private static final RegexpFactory factory new RegexpFactory private Regexp regexp public RegularExpression this regexp factory newRegexp public void setPattern String pattern this regexp setPattern pattern public String getPattern Project if isReference return getRef getPattern return regexp getPattern public Regexp getRegexp Project if isReference return getRef getRegexp return this regexp public RegularExpression getRef Project if isChecked Stack stk new Stack stk push this dieOnCircularReference stk Object getRefid getReferencedObject if instanceof RegularExpression String msg getRefid getRefId DATA_TYPE_NAME throw new BuildException msg else return RegularExpression', 'bug': '0'}
{'sequence': 'public class Javadoc extends Task public class DocletParam private String name private String value public void setName String name this name name public String getName return name public void setValue String value this value value public String getValue return value public static class ExtensionInfo extends ProjectComponent private String name private Path path public void setName String name this name name public String getName return name public void setPath Path path if this path null this path path else this path append path public Path getPath return path public Path createPath if path null path new Path getProject return path createPath public void setPathRef Reference createPath setRefid public class DocletInfo extends ExtensionInfo private Vector params new Vector public DocletParam createParam DocletParam param new DocletParam params addElement param return param public Enumeration getParams return params elements public static class PackageName private String name public void setName String name this name name trim public String getName return name public String toString return getName public static class SourceFile private File file public SourceFile public SourceFile File file this file file public void setFile File file this file file public File getFile return file public static class Html private StringBuffer text new StringBuffer public void addText String text append public String getText return text substring public static class AccessType extends EnumeratedAttribute public String getValues private Commandline cmd new Commandline private static boolean javadoc1 JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 private static boolean javadoc4 JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_2 JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_3 private void addArgIf boolean String arg if cmd createArgument setValue arg private void add12ArgIfNotEmpty String key String value if javadoc1 if value null value length cmd createArgument setValue key cmd createArgument setValue value else log key Project MSG_WARN private void add12ArgIf boolean String arg if javadoc1 cmd createArgument setValue arg private boolean failOnError false private Path sourcePath null private File destDir null private Vector sourceFiles new Vector private Vector excludePackageNames new Vector private boolean author true private boolean version true private DocletInfo doclet null private Path classpath null private Path bootclasspath null private String group null private Vector links new Vector private Vector groups new Vector private Vector tags new Vector private boolean useDefaultExcludes true private Html doctitle null private Html header null private Html footer null private Html bottom null private boolean useExternalFile false private FileUtils fileUtils FileUtils newFileUtils private String source null private boolean linksource false private boolean breakiterator false private String noqualifier private Vector fileSets new Vector public void setUseExternalFile boolean if javadoc1 useExternalFile public void setDefaultexcludes boolean useDefaultExcludes this useDefaultExcludes useDefaultExcludes public void setMaxmemory String max if javadoc1 cmd createArgument setValue max else cmd createArgument setValue max public void setAdditionalparam String add cmd createArgument setLine add public Commandline Argument createArg return cmd createArgument public void setSourcepath Path src if sourcePath null sourcePath src else sourcePath append src public Path createSourcepath if sourcePath null sourcePath new Path getProject return sourcePath createPath public void setSourcepathRef Reference createSourcepath setRefid public void setDestdir File dir destDir dir cmd createArgument setValue cmd createArgument setFile destDir public void setSourcefiles String src StringTokenizer tok new StringTokenizer src while tok hasMoreTokens String tok nextToken SourceFile sf new SourceFile sf setFile getProject resolveFile trim addSource sf public void addSource SourceFile sf sourceFiles addElement sf while tok hasMoreTokens String tok nextToken PackageName pn new PackageName pn setName addPackage pn public void addPackage PackageName pn while tok hasMoreTokens String tok nextToken PackageName pn new PackageName pn setName addExcludePackage pn public void addExcludePackage PackageName pn excludePackageNames addElement pn public void setOverview File if javadoc1 cmd createArgument setValue cmd createArgument setFile public void setPublic boolean addArgIf public void setProtected boolean addArgIf public void setPackage boolean public void setPrivate boolean addArgIf public void setAccess AccessType at cmd createArgument setValue at getValue public void setDoclet String docletName if doclet null doclet new DocletInfo doclet setProject getProject doclet setName docletName public void setDocletPath Path docletPath if doclet null doclet new DocletInfo doclet setProject getProject doclet setPath docletPath public void setDocletPathRef Reference if doclet null doclet new DocletInfo doclet setProject getProject doclet createPath setRefid public DocletInfo createDoclet doclet new DocletInfo return doclet public void addTaglet ExtensionInfo tagletInfo tags addElement tagletInfo public void setOld boolean if if javadoc1 log Project MSG_WARN else if javadoc4 log Project MSG_WARN else cmd createArgument setValue public void setClasspath Path path if classpath null classpath path else classpath append path public Path createClasspath if classpath null classpath new Path getProject return classpath createPath public void setClasspathRef Reference createClasspath setRefid public void setBootclasspath Path path if bootclasspath null bootclasspath path else bootclasspath append path public Path createBootclasspath if bootclasspath null bootclasspath new Path getProject return bootclasspath createPath public void setBootClasspathRef Reference createBootclasspath setRefid public void setExtdirs String path if javadoc1 cmd createArgument setValue cmd createArgument setValue path public void setExtdirs Path path if javadoc1 cmd createArgument setValue cmd createArgument setPath path public void setVerbose boolean add12ArgIf public void setLocale String locale if javadoc1 cmd createArgument true setValue locale cmd createArgument true setValue public void setEncoding String enc cmd createArgument setValue cmd createArgument setValue enc public void setVersion boolean this version public void setUse boolean add12ArgIf public void setAuthor boolean author public void setSplitindex boolean add12ArgIf public void setWindowtitle String title add12ArgIfNotEmpty title public void setDoctitle String doctitle Html new Html addText doctitle addDoctitle public void addDoctitle Html text if javadoc1 doctitle text public void setHeader String header Html new Html addText header addHeader public void addHeader Html text if javadoc1 header text public void setFooter String footer Html new Html addText footer addFooter public void addFooter Html text if javadoc1 footer text public void setBottom String bottom Html new Html addText bottom addBottom public void addBottom Html text if javadoc1 bottom text public void setLinkoffline String src if javadoc1 LinkArgument le createLink le setOffline true String linkOfflineError if src trim length throw new BuildException linkOfflineError StringTokenizer tok new StringTokenizer src false le setHref tok nextToken if tok hasMoreTokens throw new BuildException linkOfflineError le setPackagelistLoc getProject resolveFile tok nextToken public void setGroup String src group src public void setLink String src if javadoc1 createLink setHref src public void setNodeprecated boolean addArgIf public void setNodeprecatedlist boolean add12ArgIf public void setNotree boolean addArgIf public void setNoindex boolean addArgIf public void setNohelp boolean add12ArgIf public void setNonavbar boolean add12ArgIf public void setSerialwarn boolean add12ArgIf public void setStylesheetfile File if javadoc1 cmd createArgument setValue cmd createArgument setFile public void setHelpfile File if javadoc1 cmd createArgument setValue cmd createArgument setFile public void setDocencoding String enc cmd createArgument setValue cmd createArgument setValue enc public void setPackageList String src if javadoc1 public LinkArgument createLink LinkArgument la new LinkArgument links addElement la return la public class LinkArgument private String href private boolean offline false public LinkArgument public void setHref String hr href hr public String getHref return href public void setPackagelistLoc File src public File getPackagelistLoc public void setOffline boolean offline this offline offline public boolean isLinkOffline return offline public TagArgument createTag if javadoc4 log Project MSG_VERBOSE TagArgument ta new TagArgument tags addElement ta return ta static final String SCOPE_ELEMENTS public class TagArgument extends FileSet private String name null private String description null private boolean enabled true private String scope public TagArgument public void setName String name this name name public void setDescription String description this description description public void setScope String verboseScope throws BuildException verboseScope verboseScope toLowerCase Locale US boolean elements new boolean SCOPE_ELEMENTS length boolean gotAll false boolean gotNotAll false StringTokenizer tok new StringTokenizer verboseScope while tok hasMoreTokens String next tok nextToken trim if next equals if gotAll getProject log Project MSG_VERBOSE gotAll true else int for SCOPE_ELEMENTS length if next equals SCOPE_ELEMENTS break if SCOPE_ELEMENTS length throw new BuildException next else if elements getProject log next Project MSG_VERBOSE elements true gotNotAll true if gotNotAll gotAll throw new BuildException if gotNotAll gotAll throw new BuildException if gotAll this scope else StringBuffer buff new StringBuffer elements length for int elements length if elements buff append SCOPE_ELEMENTS charAt this scope buff toString public void setEnabled boolean enabled this enabled enabled public String getParameter throws BuildException if name null name equals throw new BuildException if description null return name enabled scope description else return name public GroupArgument createGroup GroupArgument ga new GroupArgument groups addElement ga return ga public class GroupArgument private Html title public GroupArgument public void setTitle String src Html new Html addText src addTitle public void addTitle Html text title text public String getTitle return title null title getText null public void setPackages String src StringTokenizer tok new StringTokenizer src while tok hasMoreTokens String tok nextToken PackageName pn new PackageName pn setName addPackage pn public void addPackage PackageName pn public String getPackages StringBuffer new StringBuffer if append return toString public void setCharset String src this add12ArgIfNotEmpty src public void setFailonerror boolean failOnError public void setSource String source if javadoc4 log Project MSG_VERBOSE this source source public void addFileset FileSet fs fileSets addElement fs public void setLinksource boolean if javadoc4 log Project MSG_VERBOSE this linksource public void setBreakiterator boolean if javadoc4 log Project MSG_VERBOSE this breakiterator public void setNoqualifier String noqualifier if javadoc4 log Project MSG_VERBOSE this noqualifier noqualifier public void execute throws BuildException if equals getTaskType log Path sourceDirs new Path getProject String msg throw new BuildException msg if sourcePath null sourceDirs addExisting sourcePath String msg throw new BuildException msg Vector sourceFilesToDoc Vector sourceFiles clone addFileSets sourceFilesToDoc sourceFilesToDoc size log Project MSG_INFO Commandline toExecute Commandline cmd clone toExecute setExecutable JavaEnvUtils getJdkExecutable if doctitle null toExecute createArgument setValue toExecute createArgument setValue expand doctitle getText if header null toExecute createArgument setValue toExecute createArgument setValue expand header getText if footer null toExecute createArgument setValue toExecute createArgument setValue expand footer getText if bottom null toExecute createArgument setValue toExecute createArgument setValue expand bottom getText if classpath null classpath new Path getProject concatSystemClasspath else classpath classpath concatSystemClasspath if javadoc1 if classpath size toExecute createArgument setValue toExecute createArgument setPath classpath if sourceDirs size toExecute createArgument setValue toExecute createArgument setPath sourceDirs else sourceDirs append classpath if sourceDirs size toExecute createArgument setValue toExecute createArgument setPath sourceDirs if version doclet null toExecute createArgument setValue if author doclet null toExecute createArgument setValue if javadoc1 doclet null if destDir null String msg throw new BuildException msg if javadoc1 if doclet null if doclet getName null throw new BuildException getLocation else toExecute createArgument setValue toExecute createArgument setValue doclet getName if doclet getPath null Path docletPath doclet getPath concatSystemClasspath if docletPath size toExecute createArgument setValue toExecute createArgument setPath docletPath for Enumeration doclet getParams hasMoreElements DocletParam param DocletParam nextElement if param getName null throw new BuildException toExecute createArgument setValue param getName if param getValue null toExecute createArgument setValue param getValue if bootclasspath null bootclasspath size toExecute createArgument setValue toExecute createArgument setPath bootclasspath if links size for Enumeration links elements hasMoreElements LinkArgument la LinkArgument nextElement if la getHref null la getHref length log Project MSG_VERBOSE continue else try new URL base la getHref catch MalformedURLException mue log la getHref Project MSG_WARN continue if la isLinkOffline la getHref try toExternalForm toExecute createArgument setValue toExecute createArgument setValue la getHref toExecute createArgument catch MalformedURLException ex log Project MSG_WARN else else toExecute createArgument setValue toExecute createArgument setValue la getHref if group null StringTokenizer tok new StringTokenizer group false while tok hasMoreTokens String grp tok nextToken trim int space grp indexOf if space String name grp substring space String pkgList grp substring space toExecute createArgument setValue toExecute createArgument setValue name toExecute createArgument setValue pkgList if groups size for Enumeration groups elements hasMoreElements GroupArgument ga GroupArgument nextElement String title ga getTitle toExecute createArgument setValue toExecute createArgument setValue expand title if javadoc4 for Enumeration tags elements hasMoreElements Object element nextElement if element instanceof TagArgument TagArgument ta TagArgument element File tagDir ta getDir getProject if tagDir null toExecute createArgument setValue toExecute createArgument setValue ta getParameter else DirectoryScanner tagDefScanner ta getDirectoryScanner getProject String files tagDefScanner getIncludedFiles for int files length File tagDefFile new File tagDir files try BufferedReader in new BufferedReader new FileReader tagDefFile String line null while line in readLine null toExecute createArgument setValue toExecute createArgument setValue line in close catch IOException ioe throw new BuildException tagDefFile getAbsolutePath ioe else ExtensionInfo tagletInfo ExtensionInfo element toExecute createArgument setValue toExecute createArgument setValue tagletInfo getName if tagletInfo getPath null Path tagletPath tagletInfo getPath concatSystemClasspath if tagletPath size toExecute createArgument setValue toExecute createArgument setPath tagletPath if source null toExecute createArgument setValue toExecute createArgument setValue source if linksource doclet null toExecute createArgument setValue if breakiterator doclet null toExecute createArgument setValue if noqualifier null doclet null toExecute createArgument setValue toExecute createArgument setValue noqualifier File tmpList null PrintWriter srcListWriter null try if useExternalFile if tmpList null tmpList fileUtils createTempFile null tmpList deleteOnExit toExecute createArgument setValue tmpList getAbsolutePath srcListWriter new PrintWriter new FileWriter tmpList getAbsolutePath true while hasMoreElements if useExternalFile else sourceFilesToDoc elements while hasMoreElements SourceFile sf SourceFile nextElement String sourceFileName sf getFile getAbsolutePath if useExternalFile if javadoc4 sourceFileName indexOf srcListWriter println sourceFileName else srcListWriter println sourceFileName else toExecute createArgument setValue sourceFileName catch IOException tmpList delete throw new BuildException getLocation finally if srcListWriter null srcListWriter close log toExecute describeCommand Project MSG_VERBOSE log Project MSG_INFO JavadocOutputStream out new JavadocOutputStream Project MSG_INFO JavadocOutputStream err new JavadocOutputStream Project MSG_WARN Execute exe new Execute new PumpStreamHandler out err exe setAntRun getProject exe setWorkingDirectory null try exe setCommandline toExecute getCommandline int ret exe execute if ret failOnError throw new BuildException ret getLocation catch IOException throw new BuildException getLocation finally if tmpList null tmpList delete tmpList null out logFlush err logFlush try out close err close catch IOException private void addFileSets Vector sf Enumeration fileSets elements while hasMoreElements FileSet fs FileSet nextElement if fs hasPatterns fs hasSelectors fs FileSet fs clone File baseDir fs getDir getProject DirectoryScanner ds fs getDirectoryScanner getProject String files ds getIncludedFiles for int files length sf addElement new SourceFile new File baseDir files private void parsePackages Vector pn Path sp Vector addedPackages new Vector PatternSet ps new PatternSet while hasMoreElements PackageName PackageName nextElement String pkg getName replace if pkg endsWith pkg ps createInclude setName pkg excludePackageNames elements while hasMoreElements PackageName PackageName nextElement String pkg getName replace if pkg endsWith pkg ps createExclude setName pkg String pathElements sourcePath list for int pathElements length DirSet ds new DirSet ds setDefaultexcludes useDefaultExcludes ds setDir new File pathElements ds createPatternSet addConfiguredPatternset ps dirSets addElement ds Enumeration dirSets elements while hasMoreElements DirSet ds DirSet nextElement File baseDir ds getDir getProject DirectoryScanner dsc ds getDirectoryScanner getProject String dirs dsc getIncludedDirectories boolean containsPackages false for int dirs length File pd new File baseDir dirs String files pd list new FilenameFilter public boolean accept File dir1 String name if name endsWith return true if files length containsPackages true dirs replace File separatorChar if containsPackages sp createPathElement setLocation baseDir else Project MSG_VERBOSE private class JavadocOutputStream extends LogOutputStream JavadocOutputStream int level super Javadoc this level private String queuedLine null protected void processLine String line int messageLevel if messageLevel Project MSG_INFO line startsWith if queuedLine null super processLine queuedLine Project MSG_VERBOSE queuedLine line else if queuedLine null if line startsWith super processLine queuedLine Project MSG_VERBOSE else super processLine queuedLine Project MSG_INFO queuedLine null super processLine line messageLevel protected void logFlush if queuedLine null super processLine queuedLine Project MSG_VERBOSE queuedLine null protected String expand String content return getProject replaceProperties content', 'bug': '1'}
{'sequence': 'public class Cvs extends AbstractCvsTask public Cvs', 'bug': '0'}
{'sequence': 'public interface ZipExtraField ZipShort getHeaderId ZipShort getLocalFileDataLength ZipShort getCentralDirectoryLength byte getLocalFileDataData byte getCentralDirectoryData void parseFromLocalFileData byte data int offset int length throws ZipException', 'bug': '0'}
{'sequence': 'public class EqualComparator implements Comparator public int compare Object o1 Object o2 if o1 null if o2 null return else return else return o1 equals o2 public String toString return', 'bug': '0'}
{'sequence': 'public class ImplementationSpecificArgument extends Commandline Argument private String impl public ImplementationSpecificArgument super public void setImplementation String impl this impl impl public final String getParts String chosenImpl if impl null impl equals chosenImpl return super getParts else return new String', 'bug': '0'}
{'sequence': 'public class NoneSelector extends BaseSelectorContainer public NoneSelector public String toString StringBuffer buf new StringBuffer if hasSelectors buf append buf append super toString buf append return buf toString public boolean isSelected File basedir String filename File file validate Enumeration selectorElements boolean result while hasMoreElements result FileSelector nextElement isSelected basedir filename file if result return false return true', 'bug': '0'}
{'sequence': 'public class Rename extends Task private File src private File dest private boolean replace true public void setSrc File src this src src public void setDest File dest this dest dest public void setReplace String replace this replace Project toBoolean replace public void execute throws BuildException log if dest null throw new BuildException getLocation if src null throw new BuildException getLocation if replace dest exists throw new BuildException dest try FileUtils newFileUtils rename src dest catch IOException throw new BuildException src dest getLocation', 'bug': '0'}
{'sequence': 'public class DefaultInputHandler implements InputHandler public DefaultInputHandler public void handleInput InputRequest request throws BuildException String prompt getPrompt request DataInputStream in null try in new DataInputStream new KeepAliveInputStream getInputStream do System err println prompt try String input in readLine request setInput input catch IOException throw new BuildException while request isInputValid finally if in null try in close catch IOException throw new BuildException protected String getPrompt InputRequest request String prompt request getPrompt if request instanceof MultipleChoiceInputRequest StringBuffer sb new StringBuffer prompt sb append Enumeration MultipleChoiceInputRequest request getChoices elements boolean first true while hasMoreElements if first sb append sb append nextElement first false sb append prompt sb toString return prompt protected InputStream getInputStream return System in', 'bug': '0'}
{'sequence': 'public class FilesMatch implements Condition private File file1 file2 private FileUtils fu FileUtils newFileUtils public void setFile1 File file1 this file1 file1 public void setFile2 File file2 this file2 file2 public boolean eval throws BuildException if file1 null file2 null throw new BuildException boolean matches false try matches fu contentEquals file1 file2 catch IOException ioe throw new BuildException ioe getMessage ioe return matches', 'bug': '0'}
{'sequence': 'public class AntClassLoader2 extends AntClassLoader private FileUtils fileUtils public AntClassLoader2 fileUtils FileUtils newFileUtils protected Class defineClassFromData File container byte classData String className throws IOException definePackage container className return defineClass className classData classData length Project class getProtectionDomain private Manifest getJarManifest File container throws IOException if container isDirectory return null JarFile jarFile null try jarFile new JarFile container return jarFile getManifest finally if jarFile null jarFile close protected void definePackage File container String className throws IOException int classIndex className lastIndexOf if classIndex return return Manifest manifest getJarManifest container if manifest null null null else Manifest manifest String specificationTitle null String specificationVendor null String specificationVersion null String implementationTitle null String implementationVendor null String implementationVersion null String sealedString null URL sealBase null Attributes sectionAttributes manifest getAttributes sectionName if sectionAttributes null specificationTitle sectionAttributes getValue Name SPECIFICATION_TITLE specificationVendor sectionAttributes getValue Name SPECIFICATION_VENDOR specificationVersion sectionAttributes getValue Name SPECIFICATION_VERSION implementationTitle sectionAttributes getValue Name IMPLEMENTATION_TITLE implementationVendor sectionAttributes getValue Name IMPLEMENTATION_VENDOR implementationVersion sectionAttributes getValue Name IMPLEMENTATION_VERSION sealedString sectionAttributes getValue Name SEALED Attributes mainAttributes manifest getMainAttributes if mainAttributes null if specificationTitle null specificationTitle mainAttributes getValue Name SPECIFICATION_TITLE if specificationVendor null specificationVendor mainAttributes getValue Name SPECIFICATION_VENDOR if specificationVersion null specificationVersion mainAttributes getValue Name SPECIFICATION_VERSION if implementationTitle null implementationTitle mainAttributes getValue Name IMPLEMENTATION_TITLE if implementationVendor null implementationVendor mainAttributes getValue Name IMPLEMENTATION_VENDOR if implementationVersion null implementationVersion mainAttributes getValue Name IMPLEMENTATION_VERSION if sealedString null sealedString mainAttributes getValue Name SEALED if sealedString null sealedString equalsIgnoreCase try sealBase new URL container getPath catch MalformedURLException specificationVendor implementationTitle implementationVersion implementationVendor sealBase protected void addPathFile File pathComponent throws IOException super addPathFile pathComponent if pathComponent isDirectory return String classpath null ZipFile jarFile null InputStream manifestStream null try jarFile new ZipFile pathComponent manifestStream jarFile getInputStream new ZipEntry if manifestStream null return Reader manifestReader new InputStreamReader manifestStream org apache tools ant taskdefs Manifest manifest new org apache tools ant taskdefs Manifest manifestReader classpath manifest getMainSection getAttributeValue catch org apache tools ant taskdefs ManifestException finally if manifestStream null manifestStream close if jarFile null jarFile close if classpath null URL baseURL fileUtils getFileURL pathComponent StringTokenizer st new StringTokenizer classpath while st hasMoreTokens String classpathElement st nextToken URL libraryURL new URL baseURL classpathElement if libraryURL getProtocol equals log classpathElement Project MSG_VERBOSE continue File libraryFile new File libraryURL getFile if libraryFile exists isInPath libraryFile addPathFile libraryFile', 'bug': '1'}
{'sequence': 'public class UnPackageNameMapper extends GlobPatternMapper protected String extractVariablePart String name String var name substring prefixLength name length postfixLength return var replace File separatorChar', 'bug': '0'}
{'sequence': 'public interface XSLTLoggerAware void setLogger XSLTLogger', 'bug': '0'}
{'sequence': 'public class AsiExtraField implements ZipExtraField UnixStat Cloneable private static final ZipShort HEADER_ID new ZipShort private int mode private int uid private int gid private String link private boolean dirFlag false private CRC32 crc new CRC32 public AsiExtraField public ZipShort getHeaderId return HEADER_ID public ZipShort getLocalFileDataLength getLinkedFile getBytes length public ZipShort getCentralDirectoryLength return getLocalFileDataLength public byte getLocalFileDataData byte data new byte getLocalFileDataLength getValue System arraycopy new ZipShort getMode getBytes data byte linkArray getLinkedFile getBytes System arraycopy new ZipLong linkArray length getBytes data System arraycopy new ZipShort getUserId getBytes data System arraycopy new ZipShort getGroupId getBytes data System arraycopy linkArray data linkArray length crc reset crc update data long checksum crc getValue byte result new byte data length System arraycopy new ZipLong checksum getBytes result System arraycopy data result data length return result public byte getCentralDirectoryData return getLocalFileDataData public void setUserId int uid this uid uid public int getUserId return uid public void setGroupId int gid this gid gid public int getGroupId return gid public void setLinkedFile String name link name mode getMode mode public String getLinkedFile return link public boolean isLink return getLinkedFile length public void setMode int mode this mode getMode mode public int getMode return mode public void setDirectory boolean dirFlag this dirFlag dirFlag mode getMode mode public boolean isDirectory return dirFlag isLink public void parseFromLocalFileData byte data int offset int length throws ZipException long givenChecksum new ZipLong data offset getValue byte tmp new byte length System arraycopy data offset tmp length crc reset crc update tmp long realChecksum crc getValue if givenChecksum realChecksum throw new ZipException Long toHexString givenChecksum Long toHexString realChecksum int newMode new ZipShort tmp getValue byte linkArray new byte int new ZipLong tmp getValue uid new ZipShort tmp getValue gid new ZipShort tmp getValue if linkArray length link else System arraycopy tmp linkArray linkArray length link new String linkArray setDirectory newMode DIR_FLAG setMode newMode protected int getMode int mode int type FILE_FLAG if isLink type LINK_FLAG else if isDirectory type DIR_FLAG return type mode PERM_MASK', 'bug': '0'}
{'sequence': 'public class Substitution extends DataType public static final String DATA_TYPE_NAME private String expression public Substitution this expression null public void setExpression String expression this expression expression public String getExpression Project if isReference return getRef getExpression return expression public Substitution getRef Project if isChecked Stack stk new Stack stk push this dieOnCircularReference stk Object getRefid getReferencedObject if instanceof Substitution String msg getRefid getRefId throw new BuildException msg else return Substitution', 'bug': '0'}
{'sequence': 'public class Checksum extends MatchingTask implements Condition private File file null private File todir private String algorithm private String provider null private String fileext private String property private Map allDigests new HashMap private Map relativeFilePaths new HashMap private String totalproperty private boolean forceOverwrite private String verifyProperty private Vector filesets new Vector private Hashtable includeFileMap new Hashtable private MessageDigest messageDigest private boolean isCondition private int readBufferSize public void setFile File file this file file public void setTodir File todir this todir todir public void setAlgorithm String algorithm this algorithm algorithm public void setProvider String provider this provider provider public void setFileext String fileext this fileext fileext public void setProperty String property this property property public void setTotalproperty String totalproperty this totalproperty totalproperty public void setVerifyproperty String verifyProperty this verifyProperty verifyProperty public void setForceOverwrite boolean forceOverwrite this forceOverwrite forceOverwrite public void setReadBufferSize int size this readBufferSize size public void addFileset FileSet set filesets addElement set public void execute throws BuildException isCondition false boolean value validateAndExecute if verifyProperty null getProject setNewProperty verifyProperty new Boolean value toString public boolean eval throws BuildException isCondition true return validateAndExecute private boolean validateAndExecute throws BuildException String savedFileExt fileext if file null filesets size throw new BuildException if file null file exists file isDirectory throw new BuildException if file null totalproperty null throw new BuildException if property null fileext null throw new BuildException if property null if forceOverwrite throw new BuildException if file null if filesets size throw new BuildException else if filesets size throw new BuildException if verifyProperty null isCondition true if verifyProperty null forceOverwrite throw new BuildException if isCondition forceOverwrite throw new BuildException messageDigest null if provider null try messageDigest MessageDigest getInstance algorithm provider catch NoSuchAlgorithmException noalgo throw new BuildException noalgo getLocation catch NoSuchProviderException noprovider throw new BuildException noprovider getLocation else try messageDigest MessageDigest getInstance algorithm catch NoSuchAlgorithmException noalgo throw new BuildException noalgo getLocation if messageDigest null throw new BuildException getLocation if fileext null fileext algorithm else if fileext trim length throw new BuildException try int sizeofFileSet filesets size for int sizeofFileSet FileSet fs FileSet filesets elementAt DirectoryScanner ds fs getDirectoryScanner getProject String srcFiles ds getIncludedFiles for int srcFiles length File src new File fs getDir getProject srcFiles if totalproperty null todir null String relativePath srcFiles replace File separatorChar relativeFilePaths put src relativePath addToIncludeFileMap src addToIncludeFileMap file return generateChecksums finally fileext savedFileExt includeFileMap clear private void addToIncludeFileMap File file throws BuildException if file null if file exists if property null File checksumFile getChecksumFile file if forceOverwrite isCondition file lastModified checksumFile lastModified includeFileMap put file checksumFile else log file checksumFile Project MSG_VERBOSE if totalproperty null String checksum null try BufferedReader diskChecksumReader new BufferedReader new FileReader checksumFile checksum diskChecksumReader readLine catch IOException throw new BuildException checksumFile byte digest decodeHex checksum toCharArray allDigests put file digest else includeFileMap put file property else String message file getAbsolutePath log message throw new BuildException message getLocation private File getChecksumFile File file File directory if todir null String path String relativeFilePaths get file directory new File todir path getParentFile directory mkdirs else directory file getParentFile File checksumFile new File directory file getName fileext return checksumFile private boolean generateChecksums throws BuildException boolean checksumMatches true FileInputStream fis null FileOutputStream fos null byte buf new byte readBufferSize try for Enumeration includeFileMap keys hasMoreElements messageDigest reset File src File nextElement if isCondition log algorithm src Project MSG_VERBOSE fis new FileInputStream src DigestInputStream dis new DigestInputStream fis messageDigest while dis read buf readBufferSize dis close fis close fis null byte fileDigest messageDigest digest if totalproperty null allDigests put src fileDigest String checksum createDigestString fileDigest Object destination includeFileMap get src if destination instanceof java lang String String prop String destination if isCondition checksumMatches checksumMatches checksum equals property else getProject setNewProperty prop checksum else if destination instanceof java io File if isCondition File existingFile File destination if existingFile exists fis new FileInputStream existingFile InputStreamReader isr new InputStreamReader fis BufferedReader br new BufferedReader isr String suppliedChecksum br readLine fis close fis null br close isr close checksumMatches checksumMatches checksum equals suppliedChecksum else checksumMatches false else File dest File destination fos new FileOutputStream dest fos write checksum getBytes fos close fos null if totalproperty null Set keys allDigests keySet Object keyArray keys toArray Arrays sort keyArray messageDigest reset for int keyArray length File src File keyArray byte digest byte allDigests get src messageDigest update digest String fileName String relativeFilePaths get src messageDigest update fileName getBytes String totalChecksum createDigestString messageDigest digest getProject setNewProperty totalproperty totalChecksum catch Exception throw new BuildException getLocation finally if fis null try fis close catch IOException if fos null try fos close catch IOException return checksumMatches private String createDigestString byte fileDigest StringBuffer checksumSb new StringBuffer for int fileDigest length String hexStr Integer toHexString fileDigest if hexStr length checksumSb append checksumSb append hexStr return checksumSb toString public static byte decodeHex char data throws BuildException int data length if throw new BuildException byte out new byte for int int Character digit data Character digit data out byte return out', 'bug': '1'}
{'sequence': 'public class DigestAlgorithm implements Algorithm private String algorithm private String provider null private MessageDigest messageDigest null private int readBufferSize public void setAlgorithm String algorithm this algorithm algorithm public void setProvider String provider this provider provider public void initMessageDigest if messageDigest null return if provider null equals provider equals provider try messageDigest MessageDigest getInstance algorithm provider catch NoSuchAlgorithmException noalgo throw new BuildException noalgo catch NoSuchProviderException noprovider throw new BuildException noprovider else try messageDigest MessageDigest getInstance algorithm catch NoSuchAlgorithmException noalgo throw new BuildException noalgo public boolean isValid return true public String getValue File file initMessageDigest String checksum null try if file canRead return null FileInputStream fis null FileOutputStream fos null byte buf new byte readBufferSize try messageDigest reset fis new FileInputStream file DigestInputStream dis new DigestInputStream fis messageDigest while dis read buf readBufferSize dis close fis close fis null byte fileDigest messageDigest digest StringBuffer checksumSb new StringBuffer for int fileDigest length String hexStr Integer toHexString fileDigest if hexStr length checksumSb append checksumSb append hexStr checksum checksumSb toString catch Exception return null catch Exception return null return checksum public String toString StringBuffer buf new StringBuffer buf append buf append append algorithm buf append append provider buf append return buf toString', 'bug': '1'}
{'sequence': 'public class JAXPUtils private static final FileUtils fu FileUtils newFileUtils private static SAXParserFactory parserFactory null private static SAXParserFactory nsParserFactory null private static DocumentBuilderFactory builderFactory null public static synchronized SAXParserFactory getParserFactory throws BuildException if parserFactory null parserFactory newParserFactory return parserFactory public static synchronized SAXParserFactory getNSParserFactory throws BuildException if nsParserFactory null nsParserFactory newParserFactory nsParserFactory setNamespaceAware true return nsParserFactory public static SAXParserFactory newParserFactory throws BuildException try return SAXParserFactory newInstance catch FactoryConfigurationError throw new BuildException getMessage public static Parser getParser throws BuildException try return newSAXParser getParserFactory getParser catch SAXException throw convertToBuildException public static XMLReader getXMLReader throws BuildException try return newSAXParser getParserFactory getXMLReader catch SAXException throw convertToBuildException public static XMLReader getNamespaceXMLReader throws BuildException try return newSAXParser getNSParserFactory getXMLReader catch SAXException throw convertToBuildException public static String getSystemId File file return fu toURI file getAbsolutePath public static DocumentBuilder getDocumentBuilder throws BuildException try return getDocumentBuilderFactory newDocumentBuilder catch ParserConfigurationException throw new BuildException private static SAXParser newSAXParser SAXParserFactory factory throws BuildException try return factory newSAXParser catch ParserConfigurationException throw new BuildException getMessage catch SAXException throw convertToBuildException private static BuildException convertToBuildException SAXException Exception nested getException if nested null return new BuildException nested else return new BuildException private static synchronized DocumentBuilderFactory getDocumentBuilderFactory throws BuildException if builderFactory null try builderFactory DocumentBuilderFactory newInstance catch FactoryConfigurationError throw new BuildException getMessage return builderFactory', 'bug': '0'}
{'sequence': 'public class TarEntry implements TarConstants private StringBuffer name private int mode private int userId private int groupId private long size private long modTime private int checkSum private byte linkFlag private StringBuffer linkName private StringBuffer magic private StringBuffer userName private StringBuffer groupName private int devMajor private int devMinor private File file public static final int MAX_NAMELEN public static final int DEFAULT_DIR_MODE public static final int DEFAULT_FILE_MODE public static final int MILLIS_PER_SECOND private TarEntry this magic new StringBuffer TMAGIC this name new StringBuffer this linkName new StringBuffer String user System getProperty if user length MAX_NAMELEN user user substring MAX_NAMELEN this userId this groupId this userName new StringBuffer user this groupName new StringBuffer this file null public TarEntry String name this boolean isDir name endsWith this devMajor this devMinor this name new StringBuffer name this mode isDir DEFAULT_DIR_MODE DEFAULT_FILE_MODE this linkFlag isDir LF_DIR LF_NORMAL this userId this groupId this size this checkSum this modTime new Date getTime MILLIS_PER_SECOND this linkName new StringBuffer this userName new StringBuffer this groupName new StringBuffer this devMajor this devMinor public TarEntry String name byte linkFlag this name this linkFlag linkFlag public TarEntry File file this this file file String name file getPath String osname System getProperty toLowerCase Locale US if osname null if osname startsWith if name length char ch1 name charAt char ch2 name charAt if ch2 ch1 ch1 ch1 ch1 name name substring else if osname indexOf int colon name indexOf if colon name name substring colon name name replace File separatorChar while name startsWith name name substring this linkName new StringBuffer this name new StringBuffer name if file isDirectory this mode DEFAULT_DIR_MODE this linkFlag LF_DIR if this name charAt this name length this name append else this mode DEFAULT_FILE_MODE this linkFlag LF_NORMAL this size file length this modTime file lastModified MILLIS_PER_SECOND this checkSum this devMajor this devMinor public TarEntry byte headerBuf this this parseTarHeader headerBuf public boolean equals TarEntry it return this getName equals it getName public boolean equals Object it if it null getClass it getClass return false return equals TarEntry it public int hashCode return getName hashCode public boolean isDescendent TarEntry desc return desc getName startsWith this getName public String getName return this name toString public void setName String name this name new StringBuffer name public void setMode int mode this mode mode public String getLinkName return this linkName toString public int getUserId return this userId public void setUserId int userId this userId userId public int getGroupId return this groupId public void setGroupId int groupId this groupId groupId public String getUserName return this userName toString public void setUserName String userName this userName new StringBuffer userName public String getGroupName return this groupName toString public void setGroupName String groupName this groupName new StringBuffer groupName public void setIds int userId int groupId this setUserId userId this setGroupId groupId public void setNames String userName String groupName this setUserName userName this setGroupName groupName public void setModTime long time this modTime time MILLIS_PER_SECOND public void setModTime Date time this modTime time getTime MILLIS_PER_SECOND public Date getModTime return new Date this modTime MILLIS_PER_SECOND public File getFile return this file public int getMode return this mode public long getSize return this size public void setSize long size this size size public boolean isGNULongNameEntry return linkFlag LF_GNUTYPE_LONGNAME name toString equals GNU_LONGLINK public boolean isDirectory if this file null return this file isDirectory if this linkFlag LF_DIR return true if this getName endsWith return true return false public TarEntry getDirectoryEntries if this file null this file isDirectory return new TarEntry String list this file list TarEntry result new TarEntry list length for int list length result new TarEntry new File this file list return result public void writeEntryHeader byte outbuf int offset offset TarUtils getNameBytes this name outbuf offset NAMELEN offset TarUtils getOctalBytes this mode outbuf offset MODELEN offset TarUtils getOctalBytes this userId outbuf offset UIDLEN offset TarUtils getOctalBytes this groupId outbuf offset GIDLEN offset TarUtils getLongOctalBytes this size outbuf offset SIZELEN offset TarUtils getLongOctalBytes this modTime outbuf offset MODTIMELEN int csOffset offset for int CHKSUMLEN outbuf offset byte outbuf offset this linkFlag offset TarUtils getNameBytes this linkName outbuf offset NAMELEN offset TarUtils getNameBytes this magic outbuf offset MAGICLEN offset TarUtils getNameBytes this userName outbuf offset UNAMELEN offset TarUtils getNameBytes this groupName outbuf offset GNAMELEN offset TarUtils getOctalBytes this devMajor outbuf offset DEVLEN offset TarUtils getOctalBytes this devMinor outbuf offset DEVLEN while offset outbuf length outbuf offset long checkSum TarUtils computeCheckSum outbuf TarUtils getCheckSumOctalBytes checkSum outbuf csOffset CHKSUMLEN public void parseTarHeader byte header int offset this name TarUtils parseName header offset NAMELEN offset NAMELEN this mode int TarUtils parseOctal header offset MODELEN offset MODELEN this userId int TarUtils parseOctal header offset UIDLEN offset UIDLEN this groupId int TarUtils parseOctal header offset GIDLEN offset GIDLEN this size TarUtils parseOctal header offset SIZELEN offset SIZELEN this modTime TarUtils parseOctal header offset MODTIMELEN offset MODTIMELEN this checkSum int TarUtils parseOctal header offset CHKSUMLEN offset CHKSUMLEN this linkFlag header offset this linkName TarUtils parseName header offset NAMELEN offset NAMELEN this magic TarUtils parseName header offset MAGICLEN offset MAGICLEN this userName TarUtils parseName header offset UNAMELEN offset UNAMELEN this groupName TarUtils parseName header offset GNAMELEN offset GNAMELEN this devMajor int TarUtils parseOctal header offset DEVLEN offset DEVLEN this devMinor int TarUtils parseOctal header offset DEVLEN', 'bug': '0'}
{'sequence': 'public class MagicNames public static final String SCRIPT_REPOSITORY public static final String SYSTEM_LOADER_REF', 'bug': '0'}
{'sequence': 'public class ChangeLogTask extends Task private File m_usersFile private Vector m_cvsUsers new Vector private File m_dir private File m_destfile private Date m_start private Date m_stop private final Vector m_filesets new Vector public void setDir final File dir m_dir dir public void setDestfile final File destfile m_destfile destfile public void setUsersfile final File usersFile m_usersFile usersFile public void addUser final CvsUser user m_cvsUsers addElement user public void setStart final Date start m_start start public void setEnd final Date stop m_stop stop public void setDaysinpast final int days final long time System currentTimeMillis long days setStart new Date time public void addFileset final FileSet fileSet m_filesets addElement fileSet public void execute throws BuildException try validate final Properties userList new Properties loadUserlist userList for Enumeration m_cvsUsers elements hasMoreElements final CvsUser user CvsUser nextElement user validate userList put user getUserID user getDisplayname final Commandline command new Commandline command setExecutable command createArgument setValue if null m_start final SimpleDateFormat outputDate new SimpleDateFormat final String dateRange outputDate format m_start command createArgument setValue command createArgument setValue dateRange if m_filesets isEmpty final Enumeration m_filesets elements while hasMoreElements final FileSet fileSet FileSet nextElement final DirectoryScanner scanner fileSet getDirectoryScanner getProject final String files scanner getIncludedFiles for int files length command createArgument setValue files final ChangeLogParser parser new ChangeLogParser final RedirectingStreamHandler handler new RedirectingStreamHandler parser log command describeCommand Project MSG_VERBOSE final Execute exe new Execute handler exe setWorkingDirectory m_dir exe setCommandline command getCommandline exe setAntRun getProject try final int resultCode exe execute if Execute isFailure resultCode throw new BuildException catch final IOException ioe throw new BuildException ioe toString final String errors handler getErrors if null errors log errors Project MSG_ERR final CVSEntry entrySet parser getEntrySetAsArray final CVSEntry filteredEntrySet filterEntrySet entrySet replaceAuthorIdWithName userList filteredEntrySet writeChangeLog filteredEntrySet finally m_dir savedDir private void validate throws BuildException if null m_dir m_dir getProject getBaseDir if null m_destfile final String message throw new BuildException message if m_dir exists final String message m_dir getAbsolutePath throw new BuildException message if null m_usersFile m_usersFile exists final String message m_usersFile getAbsolutePath throw new BuildException message private void loadUserlist final Properties userList throws BuildException if null m_usersFile try userList load new FileInputStream m_usersFile catch final IOException ioe throw new BuildException ioe toString ioe private CVSEntry filterEntrySet final CVSEntry entrySet final Vector results new Vector for int entrySet length final CVSEntry cvsEntry entrySet final Date date cvsEntry getDate if null m_start m_start after date continue if null m_stop m_stop before date continue results addElement cvsEntry final CVSEntry resultArray new CVSEntry results size results copyInto resultArray return resultArray private void replaceAuthorIdWithName final Properties userList final CVSEntry entrySet for int entrySet length final CVSEntry entry entrySet if userList containsKey entry getAuthor entry setAuthor userList getProperty entry getAuthor private void writeChangeLog final CVSEntry entrySet throws BuildException FileOutputStream output null try output new FileOutputStream m_destfile final PrintWriter writer new PrintWriter new OutputStreamWriter output final ChangeLogWriter serializer new ChangeLogWriter serializer printChangeLog writer entrySet catch final UnsupportedEncodingException uee getProject log uee toString Project MSG_ERR catch final IOException ioe throw new BuildException ioe toString ioe finally if null output try output close catch final IOException ioe', 'bug': '1'}
{'sequence': 'public class WLRmic extends DefaultRmicAdapter public boolean execute throws BuildException getRmic log Project MSG_VERBOSE Commandline cmd setupRmicCommand new String AntClassLoader loader null try Class null if getRmic getClasspath null Class forName else loader getRmic getProject createClassLoader getRmic getClasspath Class forName true loader Method doRmic getMethod new Class String class doRmic invoke null new Object cmd getArguments return true catch ClassNotFoundException ex throw new BuildException getRmic getLocation catch Exception ex if ex instanceof BuildException throw BuildException ex else throw new BuildException ex getRmic getLocation finally if loader null loader cleanup public String getStubClassSuffix return public String getSkelClassSuffix return', 'bug': '0'}
{'sequence': 'public class CBZip2OutputStream extends OutputStream implements BZip2Constants protected static final int SETMASK protected static final int CLEARMASK SETMASK protected static final int GREATER_ICOST protected static final int LESSER_ICOST protected static final int SMALL_THRESH protected static final int DEPTH_THRESH protected static final int QSORT_STACK_SIZE private static void panic System out println private void makeMaps int nInUse for if inUse seqToUnseq nInUse char unseqToSeq char nInUse nInUse protected static void hbMakeCodeLengths char len int freq int alphaSize int maxLen int nNodes nHeap n1 n2 boolean tooLong int heap new int MAX_ALPHA_SIZE int weight new int MAX_ALPHA_SIZE int parent new int MAX_ALPHA_SIZE for alphaSize weight freq freq while true nNodes alphaSize nHeap heap weight parent for alphaSize parent nHeap heap nHeap int zz tmp zz nHeap tmp heap zz while weight tmp weight heap zz heap zz heap zz zz heap zz tmp if nHeap MAX_ALPHA_SIZE panic while nHeap n1 heap heap heap nHeap nHeap int zz yy tmp zz tmp heap zz while true yy zz if yy nHeap break if yy nHeap weight heap yy weight heap yy yy if weight tmp weight heap yy break heap zz heap yy zz yy heap zz tmp n2 heap heap heap nHeap nHeap int zz yy tmp zz tmp heap zz while true yy zz if yy nHeap break if yy nHeap weight heap yy weight heap yy yy if weight tmp weight heap yy break heap zz heap yy zz yy heap zz tmp nNodes parent n1 parent n2 nNodes weight nNodes weight n1 weight n2 weight n1 weight n2 weight n1 weight n2 parent nNodes nHeap heap nHeap nNodes int zz tmp zz nHeap tmp heap zz while weight tmp weight heap zz heap zz heap zz zz heap zz tmp if nNodes MAX_ALPHA_SIZE panic tooLong false for alphaSize while parent parent len char if maxLen tooLong true if tooLong break for alphaSize weight weight int last int origPtr int blockSize100k boolean blockRandomised int bytesOut int bsBuff int bsLive CRC mCrc new CRC private boolean inUse new boolean private int nInUse private char seqToUnseq new char private char unseqToSeq new char private char selector new char MAX_SELECTORS private char selectorMtf new char MAX_SELECTORS private char block private int quadrant private int zptr private short szptr private int ftab private int nMTF private int mtfFreq new int MAX_ALPHA_SIZE private int workFactor private int workDone private int workLimit private boolean firstAttempt private int nBlocksRandomised private int currentChar private int runLength public CBZip2OutputStream OutputStream inStream throws IOException this inStream public CBZip2OutputStream OutputStream inStream int inBlockSize throws IOException block null quadrant null zptr null ftab null bsSetStream inStream workFactor if inBlockSize inBlockSize if inBlockSize inBlockSize blockSize100k inBlockSize allocateCompressStructures initialize initBlock public void write int bv throws IOException int bv if currentChar if currentChar runLength if runLength writeRun currentChar runLength else writeRun runLength currentChar else currentChar runLength private void writeRun throws IOException if last allowableBlockSize inUse currentChar true for int runLength mCrc updateCRC char currentChar switch runLength case last block last char currentChar break case last block last char currentChar last block last char currentChar break case last block last char currentChar last block last char currentChar last block last char currentChar break default inUse runLength true last block last char currentChar last block last char currentChar last block last char currentChar last block last char currentChar last block last char runLength break else endBlock initBlock writeRun boolean closed false protected void finalize throws Throwable close super finalize public void close throws IOException if closed return if runLength writeRun currentChar endBlock endCompression closed true super close bsStream close public void flush throws IOException super flush bsStream flush private int blockCRC combinedCRC private void initialize throws IOException bytesOut nBlocksRandomised bsPutUChar bsPutUChar blockSize100k combinedCRC private int allowableBlockSize private void initBlock mCrc initialiseCRC last for int inUse false allowableBlockSize baseBlockSize blockSize100k private void endBlock throws IOException blockCRC mCrc getFinalCRC combinedCRC combinedCRC combinedCRC combinedCRC blockCRC doReversibleTransformation bsPutUChar bsPutUChar bsPutUChar bsPutUChar bsPutUChar bsPutUChar bsPutint blockCRC if blockRandomised bsW nBlocksRandomised else bsW moveToFrontCodeAndSend private void endCompression throws IOException bsPutUChar bsPutUChar bsPutUChar bsPutUChar bsPutUChar bsPutUChar bsPutint combinedCRC bsFinishedWithStream private void hbAssignCodes int code char length int minLen int maxLen int alphaSize int vec vec for minLen maxLen for alphaSize if length code vec vec vec private void bsSetStream OutputStream bsStream bsLive bsBuff bytesOut private void bsFinishedWithStream throws IOException while bsLive int ch bsBuff try catch IOException throw bsBuff bsLive bytesOut private void bsW int int throws IOException while bsLive int ch bsBuff try catch IOException throw bsBuff bsLive bytesOut bsBuff bsLive bsLive private void bsPutUChar int throws IOException bsW private void bsPutint int throws IOException bsW bsW bsW bsW private void bsPutIntVS int numBits int throws IOException bsW numBits private void sendMTFValues throws IOException char len new char N_GROUPS MAX_ALPHA_SIZE int gs ge totc bt bc iter int nSelectors alphaSize minLen maxLen selCtr int nGroups nBytes alphaSize nInUse for N_GROUPS for alphaSize len char GREATER_ICOST if nMTF panic if nMTF nGroups else if nMTF nGroups else if nMTF nGroups else if nMTF nGroups else nGroups int nPart remF tFreq aFreq nPart nGroups remF nMTF gs while nPart tFreq remF nPart ge gs aFreq while aFreq tFreq ge alphaSize ge aFreq mtfFreq ge if ge gs nPart nGroups nPart nGroups nPart aFreq mtfFreq ge ge for alphaSize if gs ge len nPart char LESSER_ICOST else len nPart char GREATER_ICOST nPart gs ge remF aFreq int rfreq new int N_GROUPS MAX_ALPHA_SIZE int fave new int N_GROUPS short cost new short N_GROUPS for iter iter N_ITERS iter for nGroups fave for nGroups for alphaSize rfreq nSelectors totc gs while true if gs nMTF break ge gs G_SIZE if ge nMTF ge nMTF for nGroups cost if nGroups short cost0 cost1 cost2 cost3 cost4 cost5 cost0 cost1 cost2 cost3 cost4 cost5 for gs ge short icv szptr cost0 len icv cost1 len icv cost2 len icv cost3 len icv cost4 len icv cost5 len icv cost cost0 cost cost1 cost cost2 cost cost3 cost cost4 cost cost5 else for gs ge short icv szptr for nGroups cost len icv bc bt for nGroups if cost bc bc cost bt totc bc fave bt selector nSelectors char bt nSelectors for gs ge rfreq bt szptr gs ge for nGroups hbMakeCodeLengths len rfreq alphaSize rfreq null fave null cost null if nGroups panic if nSelectors nSelectors G_SIZE panic char pos new char N_GROUPS char ll_i tmp2 tmp for nGroups pos char for nSelectors ll_i selector tmp pos while ll_i tmp tmp2 tmp tmp pos pos tmp2 pos tmp selectorMtf char int code new int N_GROUPS MAX_ALPHA_SIZE for nGroups minLen maxLen for alphaSize if len maxLen maxLen len if len minLen minLen len if maxLen panic if minLen panic hbAssignCodes code len minLen maxLen alphaSize boolean inUse16 new boolean for inUse16 false for if inUse inUse16 true nBytes bytesOut for if inUse16 bsW else bsW for if inUse16 for if inUse bsW else bsW nBytes bytesOut bsW nGroups bsW nSelectors for nSelectors for selectorMtf bsW bsW nBytes bytesOut for nGroups int curr len bsW curr for alphaSize while curr len bsW while curr len bsW bsW nBytes bytesOut selCtr gs while true if gs nMTF break ge gs G_SIZE if ge nMTF ge nMTF for gs ge bsW len selector selCtr szptr code selector selCtr szptr gs ge selCtr if selCtr nSelectors panic private void moveToFrontCodeAndSend throws IOException bsPutIntVS origPtr generateMTFValues sendMTFValues private OutputStream bsStream private void simpleSort int lo int hi int int bigN hp int bigN hi lo if bigN return hp while incs hp bigN hp hp for hp hp incs hp lo while true if hi break zptr while fullGtU zptr zptr zptr if lo break zptr if hi break zptr while fullGtU zptr zptr zptr if lo break zptr if hi break zptr while fullGtU zptr zptr zptr if lo break zptr if workDone workLimit firstAttempt return private void vswap int p1 int p2 int int temp while temp zptr p1 zptr p1 zptr p2 zptr p2 temp p1 p2 private char med3 char char char char if if if return private static class StackElem int ll int hh int dd private void qSort3 int loSt int hiSt int dSt int unLo unHi ltLo gtHi med int sp lo hi StackElem stack new StackElem QSORT_STACK_SIZE for int count count QSORT_STACK_SIZE count stack count new StackElem sp stack sp ll loSt stack sp hh hiSt stack sp dd dSt sp while sp if sp QSORT_STACK_SIZE panic sp lo stack sp ll hi stack sp hh stack sp dd if hi lo SMALL_THRESH DEPTH_THRESH simpleSort lo hi if workDone workLimit firstAttempt return continue med med3 block zptr lo block zptr hi block zptr lo hi unLo ltLo lo unHi gtHi hi while true while true if unLo unHi break int block zptr unLo med if int temp temp zptr unLo zptr unLo zptr ltLo zptr ltLo temp ltLo unLo continue if break unLo while true if unLo unHi break int block zptr unHi med if int temp temp zptr unHi zptr unHi zptr gtHi zptr gtHi temp gtHi unHi continue if break unHi if unLo unHi break int temp temp zptr unLo zptr unLo zptr unHi zptr unHi temp unLo unHi if gtHi ltLo stack sp ll lo stack sp hh hi stack sp dd sp continue ltLo lo unLo ltLo ltLo lo unLo ltLo vswap lo unLo hi gtHi gtHi unHi hi gtHi gtHi unHi vswap unLo hi lo unLo ltLo hi gtHi unHi stack sp ll lo stack sp hh stack sp dd sp stack sp ll stack sp hh stack sp dd sp stack sp ll stack sp hh hi stack sp dd sp private void mainSort int ss sb int runningOrder new int int copy new int boolean bigDone new boolean int c1 c2 int numQSorted for NUM_OVERSHOOT_BYTES block last block last for last NUM_OVERSHOOT_BYTES quadrant block char block last if last for last zptr firstAttempt false workDone workLimit simpleSort last else numQSorted for bigDone false for ftab c1 block for last c2 block ftab c1 c2 c1 c2 for ftab ftab c1 block for last c2 block c1 c2 c1 c2 ftab zptr ftab block last block ftab zptr ftab last for runningOrder int vv int do while do for vv runningOrder while ftab runningOrder ftab runningOrder ftab vv ftab vv runningOrder runningOrder if break runningOrder vv while for ss runningOrder for sb ss if ftab sb SETMASK SETMASK int lo ftab sb CLEARMASK int hi ftab sb CLEARMASK if hi lo qSort3 lo hi numQSorted hi lo if workDone workLimit firstAttempt return ftab sb SETMASK bigDone ss true if int bbStart ftab ss CLEARMASK int bbSize ftab ss CLEARMASK bbStart int shifts while bbSize shifts shifts for bbSize int a2update zptr bbStart int qVal shifts quadrant a2update qVal if a2update NUM_OVERSHOOT_BYTES quadrant a2update last qVal if bbSize shifts panic for copy ftab ss CLEARMASK for ftab ss CLEARMASK ftab ss CLEARMASK c1 block zptr if bigDone c1 zptr copy c1 zptr last zptr copy c1 for ftab ss SETMASK private void randomiseBlock int int rNToGo int rTPos for inUse false for last if rNToGo rNToGo char rNums rTPos rTPos if rTPos rTPos rNToGo block rNToGo block inUse block true private void doReversibleTransformation int workLimit workFactor last workDone blockRandomised false firstAttempt true mainSort if workDone workLimit firstAttempt randomiseBlock workLimit workDone blockRandomised true firstAttempt false mainSort origPtr for last if zptr origPtr break if origPtr panic private boolean fullGtU int i1 int i2 int char c1 c2 int s1 s2 c1 block i1 c2 block i2 if c1 c2 return c1 c2 i1 i2 c1 block i1 c2 block i2 if c1 c2 return c1 c2 i1 i2 c1 block i1 c2 block i2 if c1 c2 return c1 c2 i1 i2 c1 block i1 c2 block i2 if c1 c2 return c1 c2 i1 i2 c1 block i1 c2 block i2 if c1 c2 return c1 c2 i1 i2 c1 block i1 c2 block i2 if c1 c2 return c1 c2 i1 i2 last do c1 block i1 c2 block i2 if c1 c2 return c1 c2 s1 quadrant i1 s2 quadrant i2 if s1 s2 return s1 s2 i1 i2 c1 block i1 c2 block i2 if c1 c2 return c1 c2 s1 quadrant i1 s2 quadrant i2 if s1 s2 return s1 s2 i1 i2 c1 block i1 c2 block i2 if c1 c2 return c1 c2 s1 quadrant i1 s2 quadrant i2 if s1 s2 return s1 s2 i1 i2 c1 block i1 c2 block i2 if c1 c2 return c1 c2 s1 quadrant i1 s2 quadrant i2 if s1 s2 return s1 s2 i1 i2 if i1 last i1 last i1 if i2 last i2 last i2 workDone while return false private int incs private void allocateCompressStructures int baseBlockSize blockSize100k block new char NUM_OVERSHOOT_BYTES quadrant new int NUM_OVERSHOOT_BYTES zptr new int ftab new int if block null quadrant null zptr null ftab null szptr new short private void generateMTFValues char yy new char int char tmp char tmp2 int zPend int wr int EOB makeMaps EOB nInUse for EOB mtfFreq wr zPend for nInUse yy char for last char ll_i ll_i unseqToSeq block zptr tmp yy while ll_i tmp tmp2 tmp tmp yy yy tmp2 yy tmp if zPend else if zPend zPend while true switch zPend case szptr wr short RUNA wr mtfFreq RUNA break case szptr wr short RUNB wr mtfFreq RUNB break if zPend break zPend zPend zPend szptr wr short wr mtfFreq if zPend zPend while true switch zPend case szptr wr short RUNA wr mtfFreq RUNA break case szptr wr short RUNB wr mtfFreq RUNB break if zPend break zPend zPend szptr wr short EOB wr mtfFreq EOB nMTF wr', 'bug': '0'}
{'sequence': 'public class Execute public static final int INVALID Integer MAX_VALUE private String cmdl null private String env null private int exitValue INVALID private ExecuteStreamHandler streamHandler private ExecuteWatchdog watchdog private File workingDirectory null private Project project null private boolean newEnvironment false private boolean useVMLauncher true private static String antWorkingDirectory System getProperty private static CommandLauncher vmLauncher null private static CommandLauncher shellLauncher null private static Vector procEnvironment null private boolean spawn false private static ProcessDestroyer processDestroyer new ProcessDestroyer static try if Os isFamily vmLauncher new VmsCommandLauncher else if Os isFamily vmLauncher new Java13CommandLauncher catch NoSuchMethodException exc if Os isFamily Os isFamily shellLauncher new MacCommandLauncher new CommandLauncher else if Os isFamily shellLauncher new OS2CommandLauncher new CommandLauncher else if Os isFamily CommandLauncher baseLauncher if System getProperty startsWith baseLauncher new Java11CommandLauncher else baseLauncher new CommandLauncher if Os isFamily shellLauncher new WinNTCommandLauncher baseLauncher else shellLauncher new ScriptCommandLauncher baseLauncher else if Os isFamily CommandLauncher baseLauncher if System getProperty startsWith baseLauncher new Java11CommandLauncher else baseLauncher new CommandLauncher shellLauncher new PerlScriptCommandLauncher baseLauncher else if Os isFamily shellLauncher vmLauncher else shellLauncher new ScriptCommandLauncher new CommandLauncher public void setSpawn boolean spawn this spawn spawn public static synchronized Vector getProcEnvironment if procEnvironment null return procEnvironment procEnvironment new Vector try ByteArrayOutputStream out new ByteArrayOutputStream Execute exe new Execute new PumpStreamHandler out exe setCommandline getProcEnvCommand exe setNewenvironment true int retval exe execute if retval BufferedReader in new BufferedReader new StringReader toString out if Os isFamily procEnvironment addVMSLogicals procEnvironment in return procEnvironment String var null String line lineSep System getProperty while line in readLine null if line indexOf if var null var lineSep line else var lineSep line else if var null procEnvironment addElement var var line if var null procEnvironment addElement var catch java io IOException exc exc printStackTrace return procEnvironment private static String getProcEnvCommand if Os isFamily String cmd return cmd else if Os isFamily if Os isFamily String cmd return cmd else String cmd return cmd else if Os isFamily Os isFamily String cmd new String if new File canRead cmd else if new File canRead cmd else cmd return cmd else if Os isFamily Os isFamily String cmd return cmd else if Os isFamily String cmd return cmd else String cmd null return cmd public static String toString ByteArrayOutputStream bos if Os isFamily try return bos toString catch java io UnsupportedEncodingException else if Os isFamily try return bos toString catch java io UnsupportedEncodingException return bos toString public Execute this new PumpStreamHandler null public Execute ExecuteStreamHandler streamHandler this streamHandler null public Execute ExecuteStreamHandler streamHandler ExecuteWatchdog watchdog setStreamHandler streamHandler this watchdog watchdog public void setStreamHandler ExecuteStreamHandler streamHandler this streamHandler streamHandler public String getCommandline return cmdl public void setCommandline String commandline cmdl commandline public void setNewenvironment boolean newenv newEnvironment newenv public String getEnvironment if env null newEnvironment return env return patchEnvironment public void setEnvironment String env this env env public void setWorkingDirectory File wd if wd null wd getAbsolutePath equals antWorkingDirectory workingDirectory null else workingDirectory wd public void setAntRun Project project throws BuildException this project project public void setVMLauncher boolean useVMLauncher this useVMLauncher useVMLauncher public static Process launch Project project String command String env File dir boolean useVM throws IOException CommandLauncher launcher vmLauncher null vmLauncher shellLauncher if useVM launcher shellLauncher return launcher exec project command env dir public int execute throws IOException final Process process launch project getCommandline getEnvironment workingDirectory useVMLauncher try streamHandler setProcessInputStream process getOutputStream streamHandler setProcessOutputStream process getInputStream streamHandler setProcessErrorStream process getErrorStream catch IOException process destroy throw streamHandler start try processDestroyer add process if watchdog null watchdog start process waitFor process if watchdog null watchdog stop streamHandler stop if watchdog null watchdog checkException return getExitValue finally processDestroyer remove process public void spawn throws IOException final Process process launch project getCommandline getEnvironment workingDirectory useVMLauncher if Os isFamily try Thread sleep catch InterruptedException project log Project MSG_VERBOSE project log process toString Project MSG_VERBOSE protected void waitFor Process process try process waitFor setExitValue process exitValue catch InterruptedException process destroy protected void setExitValue int value exitValue value public int getExitValue return exitValue public static boolean isFailure int exitValue if Os isFamily return exitValue else return exitValue public boolean killedProcess return watchdog null watchdog killedProcess private String patchEnvironment if Os isFamily return env Vector osEnv Vector getProcEnvironment clone for int env length int pos env indexOf String key env substring pos int size osEnv size for int size if String osEnv elementAt startsWith key osEnv removeElementAt break osEnv addElement env String result new String osEnv size osEnv copyInto result return result public static void runCommand Task task String cmdline throws BuildException try task log Commandline describeCommand cmdline Project MSG_VERBOSE Execute exe new Execute new LogStreamHandler task Project MSG_INFO Project MSG_ERR exe setAntRun task getProject exe setCommandline cmdline int retval exe execute if isFailure retval throw new BuildException cmdline retval task getLocation catch java io IOException exc throw new BuildException cmdline exc task getLocation private static Vector addVMSLogicals Vector environment BufferedReader in throws IOException HashMap logicals new HashMap String logName null logValue null newLogName String line null while line in readLine null if line startsWith if logName null logValue line substring line length else if line startsWith if logName null logicals put logName logValue int eqIndex line indexOf newLogName line substring eqIndex if logicals containsKey newLogName logName null else logName newLogName logValue line substring eqIndex line length if logName null logicals put logName logValue for Iterator logicals keySet iterator hasNext String logical String next environment add logical logicals get logical return environment private static class CommandLauncher public Process exec Project project String cmd String env throws IOException if project null project log Commandline describeCommand cmd Project MSG_DEBUG return Runtime getRuntime exec cmd env public Process exec Project project String cmd String env File workingDir throws IOException if workingDir null return exec project cmd env throw new IOException private static class Java11CommandLauncher extends CommandLauncher public Process exec Project project String cmd String env throws IOException String newcmd new String cmd length for int cmd length newcmd Commandline quoteArgument cmd if project null project log Commandline describeCommand newcmd Project MSG_DEBUG return Runtime getRuntime exec newcmd env private static class Java13CommandLauncher extends CommandLauncher public Java13CommandLauncher throws NoSuchMethodException myExecWithCWD Runtime class getMethod new Class String class String class File class public Process exec Project project String cmd String env File workingDir throws IOException try if project null project log Commandline describeCommand cmd Project MSG_DEBUG Object arguments cmd env workingDir return Process myExecWithCWD invoke Runtime getRuntime arguments catch InvocationTargetException exc Throwable realexc exc getTargetException if realexc instanceof ThreadDeath throw ThreadDeath realexc else if realexc instanceof IOException throw IOException realexc else throw new BuildException realexc catch Exception exc throw new BuildException exc private Method myExecWithCWD private static class CommandLauncherProxy extends CommandLauncher CommandLauncherProxy CommandLauncher launcher myLauncher launcher public Process exec Project project String cmd String env throws IOException return myLauncher exec project cmd env private CommandLauncher myLauncher private static class OS2CommandLauncher extends CommandLauncherProxy OS2CommandLauncher CommandLauncher launcher super launcher public Process exec Project project String cmd String env File workingDir throws IOException File commandDir workingDir if workingDir null if project null commandDir project getBaseDir else return exec project cmd env final int preCmdLength final String cmdDir commandDir getAbsolutePath String newcmd new String cmd length preCmdLength newcmd newcmd newcmd cmdDir substring newcmd newcmd newcmd cmdDir substring newcmd System arraycopy cmd newcmd preCmdLength cmd length return exec project newcmd env private static class WinNTCommandLauncher extends CommandLauncherProxy WinNTCommandLauncher CommandLauncher launcher super launcher public Process exec Project project String cmd String env File workingDir throws IOException File commandDir workingDir if workingDir null if project null commandDir project getBaseDir else return exec project cmd env final int preCmdLength String newcmd new String cmd length preCmdLength newcmd newcmd newcmd newcmd newcmd commandDir getAbsolutePath newcmd System arraycopy cmd newcmd preCmdLength cmd length return exec project newcmd env private static class MacCommandLauncher extends CommandLauncherProxy MacCommandLauncher CommandLauncher launcher super launcher public Process exec Project project String cmd String env File workingDir throws IOException if workingDir null return exec project cmd env System getProperties put workingDir getAbsolutePath try return exec project cmd env finally System getProperties put antWorkingDirectory private static class ScriptCommandLauncher extends CommandLauncherProxy ScriptCommandLauncher String script CommandLauncher launcher super launcher myScript script public Process exec Project project String cmd String env File workingDir throws IOException if project null if workingDir null return exec project cmd env throw new IOException String antHome project getProperty if antHome null throw new IOException String antRun project resolveFile antHome File separator myScript toString File commandDir workingDir if workingDir null project null commandDir project getBaseDir String newcmd new String cmd length newcmd antRun newcmd commandDir getAbsolutePath System arraycopy cmd newcmd cmd length return exec project newcmd env private String myScript private static class PerlScriptCommandLauncher extends CommandLauncherProxy PerlScriptCommandLauncher String script CommandLauncher launcher super launcher myScript script public Process exec Project project String cmd String env File workingDir throws IOException if project null if workingDir null return exec project cmd env throw new IOException String antHome project getProperty if antHome null throw new IOException String antRun project resolveFile antHome File separator myScript toString File commandDir workingDir if workingDir null project null commandDir project getBaseDir String newcmd new String cmd length newcmd newcmd antRun newcmd commandDir getAbsolutePath System arraycopy cmd newcmd cmd length return exec project newcmd env private String myScript private static class VmsCommandLauncher extends Java13CommandLauncher public VmsCommandLauncher throws NoSuchMethodException super public Process exec Project project String cmd String env throws IOException String vmsCmd createCommandFile cmd env getPath return super exec project vmsCmd env public Process exec Project project String cmd String env File workingDir throws IOException String vmsCmd createCommandFile cmd env getPath return super exec project vmsCmd env workingDir private File createCommandFile String cmd String env throws IOException File script File createTempFile script deleteOnExit PrintWriter out null try out new PrintWriter new FileWriter script if env null int eqIndex for int env length eqIndex env indexOf if eqIndex out print out print env substring eqIndex out print out print env substring eqIndex out println out print cmd for int cmd length out println out print cmd finally if out null out close return script', 'bug': '1'}
{'sequence': 'public final class DateUtils public static final String ISO8601_DATETIME_PATTERN public static final String ISO8601_DATE_PATTERN public static final String ISO8601_TIME_PATTERN public static final DateFormat DATE_HEADER_FORMAT new SimpleDateFormat Locale US private static final MessageFormat MINUTE_SECONDS new MessageFormat private static final double LIMITS private static final String MINUTES_PART private static final String SECONDS_PART private static final ChoiceFormat MINUTES_FORMAT new ChoiceFormat LIMITS MINUTES_PART private static final ChoiceFormat SECONDS_FORMAT new ChoiceFormat LIMITS SECONDS_PART static MINUTE_SECONDS setFormat MINUTES_FORMAT MINUTE_SECONDS setFormat SECONDS_FORMAT private DateUtils public static String format long date String pattern return format new Date date pattern public static String format Date date String pattern DateFormat df createDateFormat pattern return df format date public static String formatElapsedTime long millis long seconds millis long minutes seconds Object args new Long minutes new Long seconds return MINUTE_SECONDS format args private static DateFormat createDateFormat String pattern SimpleDateFormat sdf new SimpleDateFormat pattern TimeZone gmt TimeZone getTimeZone sdf setTimeZone gmt sdf setLenient true return sdf public static int getPhaseOfMoon Calendar cal int dayOfTheYear cal get Calendar DAY_OF_YEAR int yearInMetonicCycle cal get Calendar YEAR int epact yearInMetonicCycle if epact yearInMetonicCycle epact epact return dayOfTheYear epact public static String getDateForHeader Calendar cal Calendar getInstance TimeZone tz cal getTimeZone int offset tz getOffset cal get Calendar ERA cal get Calendar YEAR cal get Calendar MONTH cal get Calendar DAY_OF_MONTH cal get Calendar DAY_OF_WEEK cal get Calendar MILLISECOND StringBuffer tzMarker new StringBuffer offset offset Math abs offset int hours offset int minutes offset hours if hours tzMarker append tzMarker append hours if minutes tzMarker append tzMarker append minutes return DATE_HEADER_FORMAT format cal getTime tzMarker toString public static Date parseIso8601DateTime String datestr throws ParseException return new SimpleDateFormat ISO8601_DATETIME_PATTERN parse datestr public static Date parseIso8601Date String datestr throws ParseException return new SimpleDateFormat ISO8601_DATE_PATTERN parse datestr public static Date parseIso8601DateTimeOrDate String datestr throws ParseException try return parseIso8601DateTime datestr catch ParseException px return parseIso8601Date datestr', 'bug': '0'}
{'sequence': 'public final class LineContains extends BaseParamFilterReader implements ChainableReader private static final String CONTAINS_KEY private Vector contains new Vector private String line null public LineContains super public LineContains final Reader in super in public final int read throws IOException if getInitialized initialize setInitialized true int ch if line null ch line charAt if line length line null else line line substring else line readLine final int containsSize contains size while line null for int containsSize String containsStr String contains elementAt if line indexOf containsStr line null break if line null line readLine else break if line null return read return ch public final void addConfiguredContains final Contains contains this contains addElement contains getValue private void setContains final Vector contains this contains contains private final Vector getContains return contains public final Reader chain final Reader rdr LineContains newFilter new LineContains rdr newFilter setContains getContains newFilter setInitialized true return newFilter private final void initialize Parameter params getParameters if params null for int params length if CONTAINS_KEY equals params getType contains addElement params getValue public static class Contains private String value public final void setValue String contains value contains public final String getValue return value', 'bug': '0'}
{'sequence': 'public class Target implements TaskContainer private String name private String ifCondition private String unlessCondition private List dependencies null private List children new ArrayList private Project project private String description null public Target public void setProject Project project this project project public Project getProject return project public void setDepends String depS if depS length StringTokenizer tok new StringTokenizer depS true while tok hasMoreTokens String token tok nextToken trim if token equals token equals throw new BuildException getName addDependency token if tok hasMoreTokens token tok nextToken if tok hasMoreTokens token equals throw new BuildException getName public void setName String name this name name public String getName return name public void addTask Task task children add task public void addDataType RuntimeConfigurable children add public Task getTasks List tasks new ArrayList children size Iterator it children iterator while it hasNext Object it next if instanceof Task tasks add return Task tasks toArray new Task tasks size public void addDependency String dependency if dependencies null dependencies new ArrayList dependencies add dependency public Enumeration getDependencies if dependencies null return Collections enumeration dependencies else return new CollectionUtils EmptyEnumeration public boolean dependsOn String other if getProject null List getProject topoSort getName getProject getTargets int myIdx indexOf this int otherIdx indexOf getProject getTargets get other return myIdx otherIdx return false public void setIf String property this ifCondition property null property public void setUnless String property this unlessCondition property null property public void setDescription String description this description description public String getDescription return description public String toString return name public void execute throws BuildException if testIfCondition testUnlessCondition for int taskPosition taskPosition children size taskPosition Object children get taskPosition if instanceof Task Task task Task task perform else RuntimeConfigurable RuntimeConfigurable maybeConfigure project else if testIfCondition project log this project replaceProperties this ifCondition Project MSG_VERBOSE else project log this project replaceProperties this unlessCondition Project MSG_VERBOSE public final void performTasks try project fireTargetStarted this execute project fireTargetFinished this null catch RuntimeException exc project fireTargetFinished this exc throw exc void replaceChild Task el RuntimeConfigurable int index while index children indexOf el children set index void replaceChild Task el Task int index while index children indexOf el children set index private boolean testIfCondition if equals ifCondition return true String test project replaceProperties ifCondition return project getProperty test null private boolean testUnlessCondition if equals unlessCondition return true String test project replaceProperties unlessCondition return project getProperty test null', 'bug': '1'}
{'sequence': 'public final class FilterChain extends DataType implements Cloneable private Vector filterReaders new Vector public final void addFilterReader final AntFilterReader filterReader filterReaders addElement filterReader public final Vector getFilterReaders return filterReaders public final void addClassConstants final ClassConstants classConstants filterReaders addElement classConstants public final void addExpandProperties final ExpandProperties expandProperties filterReaders addElement expandProperties public final void addHeadFilter final HeadFilter headFilter filterReaders addElement headFilter public final void addLineContains final LineContains lineContains filterReaders addElement lineContains public final void addLineContainsRegExp final LineContainsRegExp lineContainsRegExp filterReaders addElement lineContainsRegExp public final void addPrefixLines final PrefixLines prefixLines filterReaders addElement prefixLines public final void addReplaceTokens final ReplaceTokens replaceTokens filterReaders addElement replaceTokens public final void addStripJavaComments final StripJavaComments stripJavaComments filterReaders addElement stripJavaComments public final void addStripLineBreaks final StripLineBreaks stripLineBreaks filterReaders addElement stripLineBreaks public final void addStripLineComments final StripLineComments stripLineComments filterReaders addElement stripLineComments public final void addTabsToSpaces final TabsToSpaces tabsToSpaces filterReaders addElement tabsToSpaces public final void addTailFilter final TailFilter tailFilter filterReaders addElement tailFilter public final void addEscapeUnicode final EscapeUnicode escapeUnicode filterReaders addElement escapeUnicode public final void addTokenFilter final TokenFilter tokenFilter filterReaders addElement tokenFilter public void addDeleteCharacters TokenFilter DeleteCharacters filter filterReaders addElement filter public void addContainsRegex TokenFilter ContainsRegex filter filterReaders addElement filter public void addReplaceRegex TokenFilter ReplaceRegex filter filterReaders addElement filter public void addTrim TokenFilter Trim filter filterReaders addElement filter public void addReplaceString TokenFilter ReplaceString filter filterReaders addElement filter public void addIgnoreBlank TokenFilter IgnoreBlank filter filterReaders addElement filter public void setRefid Reference throws BuildException if filterReaders isEmpty throw tooManyAttributes Object getReferencedObject getProject if instanceof FilterChain FilterChain fc FilterChain filterReaders fc getFilterReaders else String msg getRefId throw new BuildException msg super setRefid public void add ChainableReader filter filterReaders addElement filter', 'bug': '0'}
{'sequence': 'public class IdentityMapper implements FileNameMapper public void setFrom String from public void setTo String to public String mapFileName String sourceFileName return new String sourceFileName', 'bug': '0'}
{'sequence': 'public class DateSelector extends BaseExtendSelector private long millis private String dateTime null private boolean includeDirs false private int granularity private int cmp public static final String MILLIS_KEY public static final String DATETIME_KEY public static final String CHECKDIRS_KEY public static final String GRANULARITY_KEY public static final String WHEN_KEY public DateSelector if Os isFamily granularity public String toString StringBuffer buf new StringBuffer buf append dateTime buf append if cmp buf append else if cmp buf append else buf append buf append buf append granularity buf append return buf toString public void setMillis long millis this millis millis public long getMillis return millis public void setDatetime String dateTime this dateTime dateTime if dateTime null DateFormat df DateFormat getDateTimeInstance DateFormat SHORT DateFormat SHORT Locale US try setMillis df parse dateTime getTime if millis setError dateTime catch ParseException pe setError dateTime public void setCheckdirs boolean includeDirs this includeDirs includeDirs public void setGranularity int granularity this granularity granularity public void setWhen TimeComparisons cmp this cmp cmp getIndex public void setParameters Parameter parameters super setParameters parameters if parameters null for int parameters length String paramname parameters getName if MILLIS_KEY equalsIgnoreCase paramname try setMillis new Long parameters getValue longValue catch NumberFormatException nfe setError parameters getValue else if DATETIME_KEY equalsIgnoreCase paramname setDatetime parameters getValue else if CHECKDIRS_KEY equalsIgnoreCase paramname setCheckdirs Project toBoolean parameters getValue else if GRANULARITY_KEY equalsIgnoreCase paramname try setGranularity new Integer parameters getValue intValue catch NumberFormatException nfe setError parameters getValue else if WHEN_KEY equalsIgnoreCase paramname TimeComparisons cmp new TimeComparisons cmp setValue parameters getValue setWhen cmp else setError paramname public void verifySettings if dateTime null millis setError else if millis setError dateTime public boolean isSelected File basedir String filename File file validate if file isDirectory includeDirs return true if cmp return file lastModified granularity millis else if cmp return file lastModified granularity millis else return Math abs file lastModified millis granularity public static class TimeComparisons extends EnumeratedAttribute public String getValues return new String', 'bug': '0'}
{'sequence': 'public class ExecuteJava implements Runnable TimeoutObserver private Commandline javaCommand null private Path classpath null private CommandlineJava SysProperties sysProperties null private Permissions perm null private Method main null private Long timeout null private Throwable caught null private boolean timedOut false private Thread thread null public void setJavaCommand Commandline javaCommand this javaCommand javaCommand public void setClasspath Path classpath public void setSystemProperties CommandlineJava SysProperties sysProperties public void setPermissions Permissions permissions perm permissions public void setOutput PrintStream out public void setTimeout Long timeout this timeout timeout public void execute Project project throws BuildException final String classname javaCommand getExecutable AntClassLoader loader null try if sysProperties null sysProperties setSystem final Class param Class forName Class target null if classpath null target Class forName classname else loader project createClassLoader classpath loader setParent project getCoreLoader loader setParentFirst false loader addJavaLibraries loader setIsolated true loader setThreadContextLoader loader forceLoadClass classname target Class forName classname true loader main target getMethod param if main null throw new BuildException classname if main getModifiers Modifier STATIC throw new BuildException classname if timeout null run else thread new Thread this Task currentThreadTask project getThreadTask Thread currentThread project registerThreadTask thread currentThreadTask thread setDaemon true Watchdog new Watchdog timeout longValue addTimeoutObserver this synchronized this thread start start try wait catch InterruptedException if timedOut project log Project MSG_WARN else thread null stop if caught null throw caught catch ClassNotFoundException throw new BuildException classname catch SecurityException throw catch Throwable throw new BuildException finally if loader null loader resetThreadContextLoader loader cleanup if sysProperties null sysProperties restoreSystem public void run final Object argument javaCommand getArguments try if perm null perm setSecurityManager main invoke null argument catch InvocationTargetException Throwable getTargetException if instanceof InterruptedException caught catch Throwable caught finally if perm null perm restoreSecurityManager synchronized this notifyAll public synchronized void timeoutOccured Watchdog if thread null timedOut true thread interrupt notifyAll public synchronized boolean killedProcess return timedOut', 'bug': '1'}
{'sequence': 'public class FlexInteger private Integer value public FlexInteger String value this value Integer decode value public int intValue return value intValue public String toString return value toString', 'bug': '0'}
{'sequence': 'public class Sleep extends Task private boolean failOnError true private int seconds private int hours private int minutes private int milliseconds public Sleep public void setSeconds int seconds this seconds seconds public void setHours int hours this hours hours public void setMinutes int minutes this minutes minutes public void setMilliseconds int milliseconds this milliseconds milliseconds public void doSleep long millis try Thread sleep millis catch InterruptedException ie public void setFailOnError boolean failOnError this failOnError failOnError private long getSleepTime return long hours minutes seconds milliseconds public void validate throws BuildException if getSleepTime throw new BuildException public void execute throws BuildException try validate long sleepTime getSleepTime log sleepTime Project MSG_VERBOSE doSleep sleepTime catch Exception if failOnError throw new BuildException else String text toString log text Project MSG_ERR', 'bug': '0'}
{'sequence': 'public abstract class Task extends ProjectComponent protected Target target protected String description protected Location location Location UNKNOWN_LOCATION protected String taskName protected String taskType protected RuntimeConfigurable wrapper private boolean invalid public Task public void setOwningTarget Target target this target target public Target getOwningTarget return target public void setTaskName String name this taskName name public String getTaskName return taskName public void setTaskType String type this taskType type public void setDescription String desc description desc public String getDescription return description public void init throws BuildException public void execute throws BuildException public Location getLocation return location public void setLocation Location location this location location public RuntimeConfigurable getRuntimeConfigurableWrapper if wrapper null wrapper new RuntimeConfigurable this getTaskName return wrapper public void setRuntimeConfigurableWrapper RuntimeConfigurable wrapper this wrapper wrapper public void maybeConfigure throws BuildException if invalid if wrapper null wrapper maybeConfigure getProject else getReplacement public void reconfigure if wrapper null wrapper reconfigure getProject protected void handleOutput String output log output Project MSG_INFO protected void handleFlush String output handleOutput output protected int handleInput byte buffer int offset int length throws IOException return getProject defaultInput buffer offset length protected void handleErrorOutput String output log output Project MSG_WARN protected void handleErrorFlush String output handleErrorOutput output public void log String msg log msg Project MSG_INFO public void log String msg int msgLevel getProject log this msg msgLevel public final void perform if invalid try getProject fireTaskStarted this maybeConfigure execute getProject fireTaskFinished this null catch RuntimeException exc if exc instanceof BuildException BuildException be BuildException exc if be getLocation Location UNKNOWN_LOCATION be setLocation getLocation getProject fireTaskFinished this exc throw exc else UnknownElement ue getReplacement Task task ue getTask task perform final void markInvalid invalid true protected final boolean isInvalid return invalid private UnknownElement replacement private UnknownElement getReplacement if replacement null replacement new UnknownElement taskType replacement setProject getProject replacement setTaskType taskType replacement setTaskName taskName replacement setLocation location replacement setOwningTarget target replacement setRuntimeConfigurableWrapper wrapper wrapper setProxy replacement replaceChildren wrapper replacement target replaceChild this replacement replacement maybeConfigure return replacement private void replaceChildren RuntimeConfigurable wrapper UnknownElement parentElement Enumeration wrapper getChildren while hasMoreElements RuntimeConfigurable childWrapper RuntimeConfigurable nextElement UnknownElement childElement new UnknownElement childWrapper getElementTag parentElement addChild childElement childElement setProject getProject childElement setRuntimeConfigurableWrapper childWrapper childWrapper setProxy childElement replaceChildren childWrapper childElement public String getTaskType return taskType protected RuntimeConfigurable getWrapper return wrapper', 'bug': '1'}
{'sequence': 'class RedirectingStreamHandler extends PumpStreamHandler RedirectingStreamHandler final ChangeLogParser parser super new RedirectingOutputStream parser new ByteArrayOutputStream String getErrors try final ByteArrayOutputStream error ByteArrayOutputStream getErr return error toString catch final Exception return null public void stop super stop try getErr close getOut close catch final IOException throw new BuildException', 'bug': '0'}
{'sequence': 'public class Kjc extends DefaultCompilerAdapter public boolean execute throws BuildException attributes log Project MSG_VERBOSE Commandline cmd setupKjcCommand try Class Class forName Method compile getMethod new Class String class Boolean ok Boolean compile invoke null new Object cmd getArguments return ok booleanValue catch ClassNotFoundException ex throw new BuildException location catch Exception ex if ex instanceof BuildException throw BuildException ex else throw new BuildException ex location protected Commandline setupKjcCommand Commandline cmd new Commandline Path classpath getCompileClasspath if deprecation true cmd createArgument setValue if destDir null cmd createArgument setValue cmd createArgument setFile destDir cmd createArgument setValue Path cp new Path project if bootclasspath null cp append bootclasspath if extdirs null cp addExtdirs extdirs cp append classpath if compileSourcepath null cp append compileSourcepath else cp append src cmd createArgument setPath cp if encoding null cmd createArgument setValue cmd createArgument setValue encoding if debug cmd createArgument setValue if optimize cmd createArgument setValue if verbose cmd createArgument setValue addCurrentCompilerArgs cmd logAndAddFilesToCompile cmd return cmd', 'bug': '0'}
{'sequence': 'public final class AnsiColorLogger extends DefaultLogger private static final int ATTR_DIM private static final int FG_RED private static final int FG_GREEN private static final int FG_BLUE private static final int FG_MAGENTA private static final int FG_CYAN private static final String PREFIX private static final String SUFFIX private static final char SEPARATOR private static final String END_COLOR PREFIX SUFFIX private String errColor PREFIX ATTR_DIM SEPARATOR FG_RED SUFFIX private String warnColor PREFIX ATTR_DIM SEPARATOR FG_MAGENTA SUFFIX private String infoColor PREFIX ATTR_DIM SEPARATOR FG_CYAN SUFFIX private String verboseColor PREFIX ATTR_DIM SEPARATOR FG_GREEN SUFFIX private String debugColor PREFIX ATTR_DIM SEPARATOR FG_BLUE SUFFIX private boolean colorsSet false private final void setColors String userColorFile System getProperty String systemColorFile InputStream in null try Properties prop new Properties if userColorFile null in new FileInputStream userColorFile else in getClass getResourceAsStream systemColorFile if in null prop load in String err prop getProperty String warn prop getProperty String info prop getProperty String verbose prop getProperty String debug prop getProperty if err null errColor PREFIX err SUFFIX if warn null warnColor PREFIX warn SUFFIX if info null infoColor PREFIX info SUFFIX if verbose null verboseColor PREFIX verbose SUFFIX if debug null debugColor PREFIX debug SUFFIX catch IOException ioe finally if in null try in close catch IOException protected final void printMessage final String message final PrintStream stream final int priority if message null stream null if colorsSet setColors colorsSet true final StringBuffer msg new StringBuffer message switch priority case Project MSG_ERR msg insert errColor msg append END_COLOR break case Project MSG_WARN msg insert warnColor msg append END_COLOR break case Project MSG_INFO msg insert infoColor msg append END_COLOR break case Project MSG_VERBOSE msg insert verboseColor msg append END_COLOR break case Project MSG_DEBUG msg insert debugColor msg append END_COLOR break final String strmessage msg toString stream println strmessage', 'bug': '0'}
{'sequence': 'public final class StringUtils public static final String LINE_SEP System getProperty public static Vector lineSplit String data return split data public static Vector split String data int ch Vector elems new Vector int pos int while pos data indexOf ch String elem data substring pos elems addElement elem pos elems addElement data substring return elems public static String replace String data String from String to StringBuffer buf new StringBuffer data length int pos int while pos data indexOf from buf append data substring pos append to pos from length buf append data substring return buf toString public static String getStackTrace Throwable StringWriter sw new StringWriter PrintWriter pw new PrintWriter sw true printStackTrace pw pw flush pw close return sw toString', 'bug': '0'}
{'sequence': 'public class XmlProperty extends org apache tools ant Task private File src private String prefix private boolean keepRoot true private boolean validate false private boolean collapseAttributes false private boolean semanticAttributes false private boolean includeSemanticAttribute false private File rootDirectory null private FileUtils fileUtils FileUtils newFileUtils private Hashtable addedAttributes new Hashtable private static final String ID private static final String REF_ID private static final String LOCATION private static final String VALUE private static final String PATH private static final String PATHID private static final String ATTRIBUTES new String ID REF_ID LOCATION VALUE PATH PATHID public XmlProperty super public void init super init public void execute throws BuildException if getFile null String msg throw new BuildException msg try log src getAbsolutePath Project MSG_VERBOSE if src exists DocumentBuilderFactory factory DocumentBuilderFactory newInstance factory setValidating validate factory setNamespaceAware false Document document factory newDocumentBuilder parse src Element topElement document getDocumentElement addedAttributes new Hashtable if keepRoot addNodeRecursively topElement prefix null else NodeList topChildren topElement getChildNodes int numChildren topChildren getLength for int numChildren addNodeRecursively topChildren item prefix null else log src getAbsolutePath Project MSG_VERBOSE catch SAXException sxe Exception sxe if sxe getException null sxe getException throw new BuildException catch ParserConfigurationException pce throw new BuildException pce catch IOException ioe throw new BuildException ioe private void addNodeRecursively Node node String prefix Object container String nodePrefix prefix if node getNodeType Node TEXT_NODE if prefix trim length nodePrefix nodePrefix node getNodeName Object nodeObject processNode node nodePrefix container if node hasChildNodes NodeList nodeChildren node getChildNodes int numChildren nodeChildren getLength for int numChildren addNodeRecursively nodeChildren item nodePrefix nodeObject void addNodeRecursively org w3c dom Node node String prefix addNodeRecursively node prefix null public Object processNode Node node String prefix Object container Object addedPath null String id null if node hasAttributes NamedNodeMap nodeAttributes node getAttributes Node idNode nodeAttributes getNamedItem ID id semanticAttributes idNode null idNode getNodeValue null for int nodeAttributes getLength Node attributeNode nodeAttributes item if semanticAttributes String attributeName getAttributeName attributeNode String attributeValue getAttributeValue attributeNode addProperty prefix attributeName attributeValue null else String nodeName attributeNode getNodeName String attributeValue getAttributeValue attributeNode Path containingPath container null container instanceof Path Path container null if nodeName equals ID continue else if containingPath null nodeName equals PATH containingPath setPath attributeValue else if container instanceof Path nodeName equals REF_ID containingPath setPath attributeValue else if container instanceof Path nodeName equals LOCATION containingPath setLocation resolveFile attributeValue else if nodeName equals PATHID if container null throw new BuildException addedPath new Path getProject getProject addReference attributeValue addedPath else String attributeName getAttributeName attributeNode addProperty prefix attributeName attributeValue id String nodeText null if node getNodeType Node TEXT_NODE nodeText getAttributeValue node else if node getNodeType Node ELEMENT_NODE node getChildNodes getLength node getFirstChild getNodeType Node CDATA_SECTION_NODE nodeText node getFirstChild getNodeValue if nodeText null if semanticAttributes id null container instanceof String id String container System out println id if nodeText trim length addProperty prefix nodeText id return addedPath null addedPath id private void addProperty String name String value String id String msg name value if id null msg id log msg Project MSG_DEBUG if addedAttributes containsKey name value String addedAttributes get name value getProject setProperty name value else getProject setNewProperty name value addedAttributes put name value if id null getProject addReference id value private String getAttributeName Node attributeNode String attributeName attributeNode getNodeName if semanticAttributes if attributeName equals REF_ID return else if isSemanticAttribute attributeName includeSemanticAttribute return attributeName else return else if collapseAttributes return attributeName else return attributeName private static boolean isSemanticAttribute String attributeName for int ATTRIBUTES length if attributeName equals ATTRIBUTES return true return false private String getAttributeValue Node attributeNode String nodeValue attributeNode getNodeValue trim if semanticAttributes String attributeName attributeNode getNodeName nodeValue getProject replaceProperties nodeValue if attributeName equals LOCATION File resolveFile nodeValue return getPath else if attributeName equals REF_ID Object ref getProject getReference nodeValue if ref null return ref toString return nodeValue public void setFile File src this src src public void setPrefix String prefix this prefix prefix trim public void setKeeproot boolean keepRoot this keepRoot keepRoot public void setValidate boolean validate this validate validate public void setCollapseAttributes boolean collapseAttributes this collapseAttributes collapseAttributes public void setSemanticAttributes boolean semanticAttributes this semanticAttributes semanticAttributes public void setRootDirectory File rootDirectory this rootDirectory rootDirectory public void setIncludeSemanticAttribute boolean includeSemanticAttribute this includeSemanticAttribute includeSemanticAttribute protected File getFile return this src protected String getPrefix return this prefix protected boolean getKeeproot return this keepRoot protected boolean getValidate return this validate protected boolean getCollapseAttributes return this collapseAttributes protected boolean getSemanticAttributes return this semanticAttributes protected File getRootDirectory return this rootDirectory protected boolean getIncludeSementicAttribute return this includeSemanticAttribute private File resolveFile String fileName if rootDirectory null return getProject resolveFile fileName return fileUtils resolveFile rootDirectory fileName', 'bug': '1'}
{'sequence': 'public class ContainsSelector extends BaseExtendSelector private String contains null private boolean casesensitive true private boolean ignorewhitespace false public static final String EXPRESSION_KEY public static final String CONTAINS_KEY public static final String CASE_KEY public static final String WHITESPACE_KEY public ContainsSelector public String toString StringBuffer buf new StringBuffer buf append contains buf append if casesensitive buf append else buf append buf append if ignorewhitespace buf append else buf append buf append return buf toString public void setText String contains this contains contains public void setCasesensitive boolean casesensitive this casesensitive casesensitive public void setIgnorewhitespace boolean ignorewhitespace this ignorewhitespace ignorewhitespace public void setParameters Parameter parameters super setParameters parameters if parameters null for int parameters length String paramname parameters getName if CONTAINS_KEY equalsIgnoreCase paramname setText parameters getValue else if CASE_KEY equalsIgnoreCase paramname setCasesensitive Project toBoolean parameters getValue else if WHITESPACE_KEY equalsIgnoreCase paramname setIgnorewhitespace Project toBoolean parameters getValue else setError paramname public void verifySettings if contains null setError public boolean isSelected File basedir String filename File file validate if file isDirectory return true String userstr contains if casesensitive userstr contains toLowerCase if ignorewhitespace userstr SelectorUtils removeWhitespace userstr BufferedReader in null try in new BufferedReader new InputStreamReader new FileInputStream file String teststr in readLine while teststr null if casesensitive teststr teststr toLowerCase if ignorewhitespace teststr SelectorUtils removeWhitespace teststr if teststr indexOf userstr return true teststr in readLine return false catch IOException ioe throw new BuildException filename finally if in null try in close catch Exception throw new BuildException filename', 'bug': '0'}
{'sequence': 'public class ResourceUtils public static Resource selectOutOfDateSources ProjectComponent logTo Resource source FileNameMapper mapper ResourceFactory targets long now new java util Date getTime if Os isFamily now Vector vresult new Vector for int counter counter source length counter if source counter getLastModified now logTo log source counter getName Project MSG_WARN String targetnames mapper mapFileName source counter getName replace File separatorChar if targetnames null boolean added false StringBuffer targetList new StringBuffer for int ctarget added ctarget targetnames length ctarget Resource atarget targets getResource targetnames ctarget replace File separatorChar if atarget isExists logTo log source counter getName atarget getName Project MSG_VERBOSE vresult addElement source counter added true else if atarget isDirectory atarget getLastModified source counter getLastModified logTo log source counter getName atarget getName Project MSG_VERBOSE vresult addElement source counter added true else if targetList length targetList append targetList append atarget getName if added logTo log source counter getName targetList toString targetnames length Project MSG_VERBOSE else logTo log source counter getName Project MSG_VERBOSE Resource result new Resource vresult size vresult copyInto result return result', 'bug': '1'}
{'sequence': 'public final class PrefixLines extends BaseParamFilterReader implements ChainableReader private static final String PREFIX_KEY private String prefix null private String queuedData null public PrefixLines super public PrefixLines final Reader in super in public final int read throws IOException if getInitialized initialize setInitialized true int ch if queuedData null queuedData length queuedData null if queuedData null ch queuedData charAt queuedData queuedData substring if queuedData length queuedData null else queuedData readLine if queuedData null ch else if prefix null queuedData prefix queuedData return read return ch public final void setPrefix final String prefix this prefix prefix private final String getPrefix return prefix public final Reader chain final Reader rdr PrefixLines newFilter new PrefixLines rdr newFilter setPrefix getPrefix newFilter setInitialized true return newFilter private final void initialize Parameter params getParameters if params null for int params length if PREFIX_KEY equals params getName prefix params getValue break', 'bug': '0'}
{'sequence': 'public class Javac13 extends DefaultCompilerAdapter private static final int MODERN_COMPILER_SUCCESS public boolean execute throws BuildException attributes log Project MSG_VERBOSE Commandline cmd setupModernJavacCommand try Class Class forName Object compiler newInstance Method compile getMethod new Class new String getClass int result Integer compile invoke compiler new Object cmd getArguments intValue return result MODERN_COMPILER_SUCCESS catch Exception ex if ex instanceof BuildException throw BuildException ex else throw new BuildException ex location', 'bug': '0'}
{'sequence': 'public final class HeadFilter extends BaseParamFilterReader implements ChainableReader private static final String LINES_KEY private static final String SKIP_KEY private long linesRead private static final int DEFAULT_NUM_LINES private long lines DEFAULT_NUM_LINES private long skip private LineTokenizer lineTokenizer null private String line null private int linePos public HeadFilter super public HeadFilter final Reader in super in lineTokenizer new LineTokenizer lineTokenizer setIncludeDelims true public final int read throws IOException if getInitialized initialize setInitialized true while line null line length line lineTokenizer getToken in if line null return line headFilter line linePos int ch line charAt linePos linePos if linePos line length line null return ch public final void setLines final long lines this lines lines private final long getLines return lines public final void setSkip final long skip this skip skip private final long getSkip return skip public final Reader chain final Reader rdr HeadFilter newFilter new HeadFilter rdr newFilter setLines getLines newFilter setSkip getSkip newFilter setInitialized true return newFilter private final void initialize Parameter params getParameters if params null for int params length if LINES_KEY equals params getName lines new Long params getValue longValue continue if SKIP_KEY equals params getName skip new Long params getValue longValue continue private String headFilter String line linesRead if skip if linesRead skip return null if lines if linesRead lines skip return null return line', 'bug': '0'}
{'sequence': 'public abstract class DefaultCompilerAdapter implements CompilerAdapter protected Path src protected File destDir protected String encoding protected boolean debug false protected boolean optimize false protected boolean deprecation false protected boolean depend false protected boolean verbose false protected String target protected Path bootclasspath protected Path extdirs protected Path compileClasspath protected Path compileSourcepath protected Project project protected Location location protected boolean includeAntRuntime protected boolean includeJavaRuntime protected String memoryInitialSize protected String memoryMaximumSize protected File compileList protected static final String lSep System getProperty protected Javac attributes private FileUtils fileUtils FileUtils newFileUtils public void setJavac Javac attributes this attributes attributes src attributes getSrcdir destDir attributes getDestdir encoding attributes getEncoding debug attributes getDebug optimize attributes getOptimize deprecation attributes getDeprecation depend attributes getDepend verbose attributes getVerbose target attributes getTarget bootclasspath attributes getBootclasspath extdirs attributes getExtdirs compileList attributes getFileList compileClasspath attributes getClasspath compileSourcepath attributes getSourcepath project attributes getProject location attributes getLocation includeAntRuntime attributes getIncludeantruntime includeJavaRuntime attributes getIncludejavaruntime memoryInitialSize attributes getMemoryInitialSize memoryMaximumSize attributes getMemoryMaximumSize public Javac getJavac return attributes protected Project getProject return project protected Path getCompileClasspath Path classpath new Path project if destDir null classpath setLocation destDir Path cp compileClasspath if cp null cp new Path project if includeAntRuntime classpath addExisting cp concatSystemClasspath else classpath addExisting cp concatSystemClasspath if includeJavaRuntime classpath addJavaRuntime return classpath protected Commandline setupJavacCommandlineSwitches Commandline cmd return setupJavacCommandlineSwitches cmd false protected Commandline setupJavacCommandlineSwitches Commandline cmd boolean useDebugLevel Path classpath getCompileClasspath Path sourcepath null if compileSourcepath null sourcepath compileSourcepath else sourcepath src String memoryParameterPrefix assumeJava11 if memoryInitialSize null if attributes isForkedJavac attributes log Project MSG_WARN else cmd createArgument setValue memoryParameterPrefix memoryInitialSize if memoryMaximumSize null if attributes isForkedJavac attributes log Project MSG_WARN else cmd createArgument setValue memoryParameterPrefix memoryMaximumSize if attributes getNowarn cmd createArgument setValue if deprecation true cmd createArgument setValue if destDir null cmd createArgument setValue cmd createArgument setFile destDir cmd createArgument setValue if assumeJava11 Path cp new Path project if bootclasspath null cp append bootclasspath if extdirs null cp addExtdirs extdirs cp append classpath cp append sourcepath cmd createArgument setPath cp else cmd createArgument setPath classpath if sourcepath size cmd createArgument setValue cmd createArgument setPath sourcepath if target null cmd createArgument setValue cmd createArgument setValue target if bootclasspath null bootclasspath size cmd createArgument setValue cmd createArgument setPath bootclasspath if extdirs null extdirs size cmd createArgument setValue cmd createArgument setPath extdirs if encoding null cmd createArgument setValue cmd createArgument setValue encoding if debug if useDebugLevel assumeJava11 String debugLevel attributes getDebugLevel if debugLevel null cmd createArgument setValue debugLevel else cmd createArgument setValue else cmd createArgument setValue else if assumeJava11 cmd createArgument setValue if optimize cmd createArgument setValue if depend if assumeJava11 cmd createArgument setValue else if assumeJava12 cmd createArgument setValue else attributes log Project MSG_WARN if verbose cmd createArgument setValue addCurrentCompilerArgs cmd return cmd protected Commandline setupModernJavacCommandlineSwitches Commandline cmd setupJavacCommandlineSwitches cmd true if attributes getSource null assumeJava13 cmd createArgument setValue cmd createArgument setValue attributes getSource return cmd protected Commandline setupModernJavacCommand Commandline cmd new Commandline setupModernJavacCommandlineSwitches cmd logAndAddFilesToCompile cmd return cmd protected Commandline setupJavacCommand return setupJavacCommand false protected Commandline setupJavacCommand boolean debugLevelCheck Commandline cmd new Commandline setupJavacCommandlineSwitches cmd debugLevelCheck logAndAddFilesToCompile cmd return cmd protected void logAndAddFilesToCompile Commandline cmd attributes log cmd describeArguments Project MSG_VERBOSE StringBuffer niceSourceList new StringBuffer if compileList length niceSourceList append niceSourceList append niceSourceList append lSep for int compileList length String arg compileList getAbsolutePath cmd createArgument setValue arg niceSourceList append arg lSep attributes log niceSourceList toString Project MSG_VERBOSE protected int executeExternalCompile String args int firstFileName return executeExternalCompile args firstFileName true protected int executeExternalCompile String args int firstFileName boolean quoteFiles String commandArray null File tmpFile null try if Commandline toString args length firstFileName PrintWriter out null try File userDir getJavac getTempdir if userDir null String userDirName System getProperty userDir new File userDirName tmpFile fileUtils createTempFile userDir tmpFile deleteOnExit out new PrintWriter new FileWriter tmpFile for int firstFileName args length if quoteFiles args indexOf args args replace out println args else out println args out flush commandArray new String firstFileName System arraycopy args commandArray firstFileName commandArray firstFileName tmpFile catch IOException throw new BuildException location finally if out null try out close catch Throwable else commandArray args try Execute exe new Execute new LogStreamHandler attributes Project MSG_INFO Project MSG_WARN exe setAntRun project exe setWorkingDirectory project getBaseDir exe setCommandline commandArray exe execute return exe getExitValue catch IOException throw new BuildException args location finally if tmpFile null tmpFile delete protected void addExtdirsToClasspath Path classpath classpath addExtdirs extdirs protected void addCurrentCompilerArgs Commandline cmd cmd addArguments getJavac getCurrentCompilerArgs protected boolean assumeJava11 return equals attributes getCompilerVersion equals attributes getCompilerVersion JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 equals attributes getCompilerVersion JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 protected boolean assumeJava12 return equals attributes getCompilerVersion equals attributes getCompilerVersion JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_2 equals attributes getCompilerVersion JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_2 protected boolean assumeJava13 return equals attributes getCompilerVersion equals attributes getCompilerVersion JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_3 equals attributes getCompilerVersion JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_3 equals attributes getCompilerVersion JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_3', 'bug': '1'}
{'sequence': 'public class NoBannerLogger extends DefaultLogger protected String targetName public NoBannerLogger public void targetStarted BuildEvent event targetName event getTarget getName public void targetFinished BuildEvent event targetName null public void messageLogged BuildEvent event if event getPriority msgOutputLevel null event getMessage equals event getMessage trim return if null targetName out println StringUtils LINE_SEP targetName targetName null super messageLogged event', 'bug': '0'}
{'sequence': 'public class IsFalse extends ProjectComponent implements Condition private Boolean value null public void setValue boolean value this value value Boolean TRUE Boolean FALSE public boolean eval throws BuildException if value null throw new BuildException return value booleanValue', 'bug': '0'}
{'sequence': 'public abstract class BaseParamFilterReader extends BaseFilterReader implements Parameterizable private Parameter parameters public BaseParamFilterReader super public BaseParamFilterReader final Reader in super in public final void setParameters final Parameter parameters this parameters parameters setInitialized false protected final Parameter getParameters return parameters', 'bug': '0'}
{'sequence': 'public class MajoritySelector extends BaseSelectorContainer private boolean allowtie true public MajoritySelector public String toString StringBuffer buf new StringBuffer if hasSelectors buf append buf append super toString buf append return buf toString public void setAllowtie boolean tiebreaker allowtie tiebreaker public boolean isSelected File basedir String filename File file validate int yesvotes int novotes Enumeration selectorElements boolean result while hasMoreElements result FileSelector nextElement isSelected basedir filename file if result yesvotes yesvotes else novotes novotes if yesvotes novotes return true else if novotes yesvotes return false return allowtie', 'bug': '0'}
{'sequence': 'public class Sync extends Task private MyCopy public void init throws BuildException new MyCopy configureTask setFiltering false setIncludeEmptyDirs false setPreserveLastModified true private void configureTask Task helper helper setProject getProject helper setTaskName getTaskName helper setOwningTarget getOwningTarget helper init public void execute throws BuildException File toDir getToDir Hashtable allFiles boolean noRemovalNecessary toDir exists toDir list length log toDir Project MSG_DEBUG execute if noRemovalNecessary log toDir Project MSG_DEBUG log toDir Project MSG_DEBUG int removedFileCount removeOrphanFiles allFiles toDir logRemovedCount removedFileCount logRemovedCount removedFileCount if getIncludeEmptyDirs log toDir Project MSG_DEBUG int removedDirCount removeEmptyDirectories toDir false logRemovedCount removedDirCount private void logRemovedCount int count String prefix String singularSuffix String pluralSuffix File toDir getToDir String what prefix null prefix what count singularSuffix pluralSuffix if count log count what toDir Project MSG_INFO else log what toDir Project MSG_VERBOSE private int removeOrphanFiles Hashtable nonOrphans File file int removedCount new int if file isDirectory File children file listFiles for int children length int temp removeOrphanFiles nonOrphans children removedCount temp removedCount temp removedCount temp if nonOrphans get file null removedCount log file Project MSG_DEBUG file delete removedCount else removedCount else if nonOrphans get file null log file Project MSG_DEBUG file delete removedCount else removedCount return removedCount private int removeEmptyDirectories File dir boolean removeIfEmpty int removedCount if dir isDirectory File children dir listFiles for int children length File file children if file isDirectory removedCount removeEmptyDirectories file true if children length children dir listFiles if children length removeIfEmpty log dir Project MSG_DEBUG dir delete removedCount return removedCount public void setTodir File destDir setTodir destDir public void setVerbose boolean verbose setVerbose verbose public void setOverwrite boolean overwrite setOverwrite overwrite public void setIncludeEmptyDirs boolean includeEmpty setIncludeEmptyDirs includeEmpty public void setFailOnError boolean failonerror setFailOnError failonerror public void addFileset FileSet set addFileset set public static class MyCopy extends Copy private Hashtable new Hashtable public MyCopy protected void buildMap File fromDir File toDir String names FileNameMapper mapper Hashtable map assertTrue mapper instanceof IdentityMapper super buildMap fromDir toDir names mapper map for int names length String name names File dest new File toDir name put dest fromDir public File getToDir return destDir public boolean getIncludeEmptyDirs return includeEmpty private static void assertTrue String message boolean condition if condition throw new BuildException message', 'bug': '1'}
{'sequence': 'public class ModifiedSelector extends BaseExtendSelector private Cache cache null private Algorithm algorithm null private Comparator comparator null private boolean update true private boolean selectDirectories true private boolean isConfigured false private AlgorithmName algoName null private CacheName cacheName null private ComparatorName compName null private Vector configParameter new Vector private Vector specialParameter new Vector public ModifiedSelector public void verifySettings configure if cache null setError else if algorithm null setError else if cache isValid setError else if algorithm isValid setError public void configure if isConfigured return isConfigured true org apache tools ant Project project getProject String filename File cachefile null if project null cachefile new File project getBaseDir filename else cachefile new File filename cache new PropertiesfileCache cachefile algorithm new DigestAlgorithm comparator new EqualComparator update true selectDirectories true for Iterator itConfig configParameter iterator itConfig hasNext Parameter par Parameter itConfig next if par getName indexOf specialParameter add par else useParameter par configParameter new Vector String className null String pkg if algorithm null if equals algoName getValue className pkg else if equals algoName getValue className pkg if className null try algorithm Algorithm Class forName className newInstance catch Exception printStackTrace if cache null if equals cacheName getValue className pkg if className null try cache Cache Class forName className newInstance catch Exception printStackTrace if comparator null if equals compName getValue className pkg else if equals compName getValue className if className null try comparator Comparator Class forName className newInstance catch Exception printStackTrace for Iterator itSpecial specialParameter iterator itSpecial hasNext Parameter par Parameter itSpecial next useParameter par specialParameter new Vector public boolean isSelected File basedir String filename File file validate File new File basedir filename if isDirectory return selectDirectories String cachedValue String valueOf cache get getAbsolutePath String newValue algorithm getValue boolean rv comparator compare cachedValue newValue if update cachedValue equals newValue cache put getAbsolutePath newValue cache save return rv public void setUpdate boolean update this update update public void setSeldirs boolean seldirs selectDirectories seldirs public void addParam String key Object value Parameter par new Parameter par setName key par setValue String valueOf value configParameter add par public void addParam Parameter parameter configParameter add parameter public void setParameters Parameter parameters if parameters null for int parameters length configParameter add parameters public void useParameter Parameter parameter String key parameter getName String value parameter getValue if equals key CacheName cn new CacheName cn setValue value setCache cn else if equals key AlgorithmName an new AlgorithmName an setValue value setAlgorithm an else if equals key ComparatorName cn new ComparatorName cn setValue value setComparator cn else if equals key boolean updateValue equalsIgnoreCase value true false setUpdate updateValue else if equals key boolean sdValue equalsIgnoreCase value true false setSeldirs sdValue else if key startsWith String name key substring tryToSetAParameter cache name value else if key startsWith String name key substring tryToSetAParameter algorithm name value else if key startsWith String name key substring tryToSetAParameter comparator name value else setError key protected void tryToSetAParameter Object obj String name String value Project prj getProject null getProject new Project IntrospectionHelper iHelper IntrospectionHelper getHelper prj obj getClass try iHelper setAttribute prj obj name value catch org apache tools ant BuildException public String toString StringBuffer buf new StringBuffer buf append append update buf append append selectDirectories buf append append cache buf append append algorithm buf append append comparator buf append return buf toString public Cache getCache return cache public void setCache CacheName name cacheName name public static class CacheName extends EnumeratedAttribute public String getValues return new String public Algorithm getAlgorithm return algorithm public void setAlgorithm AlgorithmName name algoName name public static class AlgorithmName extends EnumeratedAttribute public String getValues return new String public Comparator getComparator return comparator public void setComparator ComparatorName name compName name public static class ComparatorName extends EnumeratedAttribute public String getValues return new String', 'bug': '1'}
{'sequence': 'public class RegexpFactory extends RegexpMatcherFactory public RegexpFactory public Regexp newRegexp throws BuildException return Regexp newRegexp null public Regexp newRegexp Project throws BuildException String systemDefault null if null systemDefault System getProperty else systemDefault getProperty if systemDefault null return createRegexpInstance systemDefault try testAvailability return createRegexpInstance catch BuildException be try testAvailability return createRegexpInstance catch BuildException be try testAvailability return createRegexpInstance catch BuildException be throw new BuildException protected Regexp createRegexpInstance String classname throws BuildException RegexpMatcher createInstance classname if instanceof Regexp return Regexp else throw new BuildException classname', 'bug': '0'}
{'sequence': 'public final class ZipShort implements Cloneable private int value public ZipShort int value this value value public ZipShort byte bytes this bytes public ZipShort byte bytes int offset value bytes offset value bytes offset public byte getBytes byte result new byte result byte value result byte value return result public int getValue return value public boolean equals Object if null instanceof ZipShort return false return value ZipShort getValue public int hashCode return value', 'bug': '0'}
{'sequence': 'public interface Condition boolean eval throws BuildException', 'bug': '0'}
{'sequence': 'class RedirectingOutputStream extends LogOutputStream private final ChangeLogParser parser public RedirectingOutputStream final ChangeLogParser parser super null this parser parser protected void processLine final String line parser stdout line', 'bug': '0'}
{'sequence': 'public abstract class Pack extends Task protected File zipFile protected File source public void setZipfile File zipFile this zipFile zipFile public void setDestfile File zipFile setZipfile zipFile public void setSrc File src source src private void validate throws BuildException if zipFile null throw new BuildException getLocation if zipFile isDirectory throw new BuildException getLocation if source null throw new BuildException getLocation if source isDirectory throw new BuildException getLocation public void execute throws BuildException validate if source exists log source getAbsolutePath else if zipFile lastModified source lastModified log zipFile getAbsolutePath pack else log zipFile getAbsolutePath private void zipFile InputStream in OutputStream zOut throws IOException byte buffer new byte int count do zOut write buffer count count in read buffer buffer length while count protected void zipFile File file OutputStream zOut throws IOException FileInputStream fIn new FileInputStream file try zipFile fIn zOut finally fIn close protected abstract void pack', 'bug': '0'}
{'sequence': 'public class Mapper extends DataType implements Cloneable protected MapperType type null public Mapper Project setProject public void setType MapperType type if isReference throw tooManyAttributes this type type protected String classname null public void setClassname String classname if isReference throw tooManyAttributes this classname classname protected Path classpath null public void setClasspath Path classpath if isReference throw tooManyAttributes if this classpath null this classpath classpath else this classpath append classpath public Path createClasspath if isReference throw noChildrenAllowed if this classpath null this classpath new Path getProject return this classpath createPath public void setClasspathRef Reference if isReference throw tooManyAttributes createClasspath setRefid protected String from null public void setFrom String from if isReference throw tooManyAttributes this from from protected String to null public void setTo String to if isReference throw tooManyAttributes this to to public void setRefid Reference throws BuildException if type null from null to null throw tooManyAttributes super setRefid public FileNameMapper getImplementation throws BuildException if isReference return getRef getImplementation if type null classname null throw new BuildException if type null classname null throw new BuildException try if type null classname type getImplementation Class null if classpath null Class forName classname else AntClassLoader al getProject createClassLoader classpath Class forName classname true al FileNameMapper FileNameMapper newInstance final Project project getProject if project null project setProjectReference setFrom from setTo to return catch BuildException be throw be catch Throwable throw new BuildException finally if type null classname null protected Mapper getRef if isChecked Stack stk new Stack stk push this dieOnCircularReference stk getProject Object getRefid getReferencedObject getProject if instanceof Mapper String msg getRefid getRefId throw new BuildException msg else return Mapper public static class MapperType extends EnumeratedAttribute private Properties implementations public MapperType implementations new Properties implementations put implementations put implementations put implementations put implementations put public String getValues return new String public String getImplementation return implementations getProperty getValue', 'bug': '1'}
{'sequence': 'public abstract class BaseExtendSelector extends BaseSelector implements ExtendFileSelector protected Parameter parameters null public BaseExtendSelector public void setParameters Parameter parameters this parameters parameters protected Parameter getParameters return parameters public abstract boolean isSelected File basedir String filename File file throws BuildException', 'bug': '0'}
{'sequence': 'public class Ear extends Jar private File deploymentDescriptor private boolean descriptorAdded private static final FileUtils fu FileUtils newFileUtils public Ear super archiveType emptyBehavior public void setEarfile File earFile setDestFile earFile public void setAppxml File descr deploymentDescriptor descr if deploymentDescriptor exists throw new BuildException deploymentDescriptor ZipFileSet fs new ZipFileSet fs setFile deploymentDescriptor fs setFullpath super addFileset fs public void addArchives ZipFileSet fs fs setPrefix super addFileset fs protected void initZipOutputStream ZipOutputStream zOut throws IOException BuildException if deploymentDescriptor null isInUpdateMode throw new BuildException getLocation super initZipOutputStream zOut protected void zipFile File file ZipOutputStream zOut String vPath int mode throws IOException if vPath equalsIgnoreCase if deploymentDescriptor null fu fileNameEquals deploymentDescriptor file descriptorAdded log archiveType archiveType Project MSG_WARN else super zipFile file zOut vPath mode descriptorAdded true else super zipFile file zOut vPath mode protected void cleanUp descriptorAdded false super cleanUp', 'bug': '0'}
{'sequence': 'public class Taskdef extends Typedef public Taskdef setAdapterClass TaskAdapter class setAdaptToClass Task class', 'bug': '0'}
{'sequence': 'public final class TabsToSpaces extends BaseParamFilterReader implements ChainableReader private static final int DEFAULT_TAB_LENGTH private static final String TAB_LENGTH_KEY private int tabLength DEFAULT_TAB_LENGTH private int spacesRemaining public TabsToSpaces super public TabsToSpaces final Reader in super in public final int read throws IOException if getInitialized initialize setInitialized true int ch if spacesRemaining spacesRemaining ch else ch in read if ch spacesRemaining tabLength ch return ch public final void setTablength final int tabLength this tabLength tabLength private final int getTablength return tabLength public final Reader chain final Reader rdr TabsToSpaces newFilter new TabsToSpaces rdr newFilter setTablength getTablength newFilter setInitialized true return newFilter private final void initialize Parameter params getParameters if params null for int params length if params null if TAB_LENGTH_KEY equals params getName tabLength new Integer params getValue intValue break', 'bug': '0'}
{'sequence': 'public class MailLogger extends DefaultLogger private StringBuffer buffer new StringBuffer public void buildFinished BuildEvent event super buildFinished event Project project event getProject Hashtable properties project getProperties Properties fileProperties new Properties String filename String properties get if filename null InputStream is null try is new FileInputStream filename fileProperties load is catch IOException ioe finally if is null try is close catch IOException for Enumeration fileProperties keys hasMoreElements String key String nextElement String value fileProperties getProperty key properties put key project replaceProperties value boolean success event getException null String prefix success try boolean notify Project toBoolean getValue properties prefix if notify return String mailhost getValue properties int port Integer parseInt getValue properties String valueOf MailMessage DEFAULT_PORT String user getValue properties String password getValue properties boolean ssl Project toBoolean getValue properties String from getValue properties null String replytoList getValue properties String toList getValue properties prefix null String subject getValue properties prefix success if user equals password equals ssl sendMail mailhost port from replytoList toList subject buffer substring else sendMimeMail event getProject mailhost port user password ssl from replytoList toList subject buffer substring catch Exception System out println printStackTrace System err protected void log String message buffer append message append StringUtils LINE_SEP private String getValue Hashtable properties String name String defaultValue throws Exception String propertyName name String value String properties get propertyName if value null value defaultValue if value null throw new Exception propertyName return value private void sendMail String mailhost int port String from String replyToList String toList String subject String message throws IOException MailMessage mailMessage new MailMessage mailhost port mailMessage setHeader DateUtils getDateForHeader mailMessage from from if replyToList equals StringTokenizer new StringTokenizer replyToList false while hasMoreTokens mailMessage replyto nextToken StringTokenizer new StringTokenizer toList false while hasMoreTokens mailMessage to nextToken mailMessage setSubject subject PrintStream ps mailMessage getPrintStream ps println message mailMessage sendAndClose private void sendMimeMail Project project String host int port String user String password boolean ssl String from String replyToString String toString String subject String message Mailer mailer null try mailer Mailer Class forName newInstance catch Throwable log getMessage return Vector replyToList vectorizeEmailAddresses replyToString mailer setHost host mailer setPort port mailer setUser user mailer setPassword password mailer setSSL ssl Message mymessage new Message message mymessage setProject project mailer setMessage mymessage mailer setFrom new EmailAddress from mailer setReplyToList replyToList Vector toList vectorizeEmailAddresses toString mailer setToList toList mailer setCcList new Vector mailer setBccList new Vector mailer setFiles new Vector mailer setSubject subject mailer send private Vector vectorizeEmailAddresses String listString Vector emailList new Vector StringTokenizer tokens new StringTokenizer listString while tokens hasMoreTokens emailList addElement new EmailAddress tokens nextToken return emailList', 'bug': '0'}
{'sequence': 'public class Concat extends Task private static final int BUFFER_SIZE private File destinationFile null private boolean append false private String encoding null private String outputEncoding null private StringBuffer textBuffer private Vector sources new Vector private Vector filterChains null private boolean forceOverwrite true private TextElement footer private TextElement header private boolean fixLastLine false private String eolString System getProperty private Writer outputWriter null private Vector sourceFiles new Vector private static FileUtils fileUtils FileUtils newFileUtils public void setDestfile File destinationFile this destinationFile destinationFile public void setAppend boolean append this append append public void setEncoding String encoding this encoding encoding if outputEncoding null outputEncoding encoding public void setOutputEncoding String outputEncoding this outputEncoding outputEncoding public void setForce boolean force this forceOverwrite force public Path createPath Path path new Path getProject sources addElement path return path public void addFileset FileSet set sources addElement set public void addFilelist FileList list sources addElement list public void addFilterChain FilterChain filterChain if filterChains null filterChains new Vector filterChains addElement filterChain public void addText String text if textBuffer null textBuffer new StringBuffer text length textBuffer append text public void addHeader TextElement header this header header public void addFooter TextElement footer this footer footer public void setFixLastLine boolean fixLastLine this fixLastLine fixLastLine public void setEol FixCRLF CrLf crlf String crlf getValue if equals equals eolString else if equals equals eolString else if equals equals eolString public void setWriter Writer outputWriter this outputWriter outputWriter public void execute sanitizeText if destinationFile null outputWriter null throw new BuildException if sources size textBuffer null throw new BuildException if sources size textBuffer null throw new BuildException for Enumeration sources elements hasMoreElements Object nextElement if instanceof Path Path path Path checkAddFiles null path list else if instanceof FileSet FileSet fileSet FileSet DirectoryScanner scanner fileSet getDirectoryScanner getProject checkAddFiles fileSet getDir getProject scanner getIncludedFiles else if instanceof FileList FileList fileList FileList checkAddFiles fileList getDir getProject fileList getFiles getProject if destinationFile null forceOverwrite sourceFiles size destinationFile exists boolean outofdate false for int sourceFiles size File file File sourceFiles elementAt if file lastModified destinationFile lastModified outofdate true break if outofdate log destinationFile Project MSG_VERBOSE if textBuffer null sourceFiles size header null footer null log Project MSG_INFO return cat public void reset append false forceOverwrite true destinationFile null encoding null outputEncoding null fixLastLine false sources removeAllElements sourceFiles removeAllElements filterChains null footer null header null private void checkAddFiles File base String filenames for int filenames length File file new File base filenames if file exists log file Project MSG_ERR continue if destinationFile null fileUtils fileNameEquals destinationFile file throw new BuildException file sourceFiles addElement file private void cat OutputStream os null Reader reader null char buffer new char BUFFER_SIZE try PrintWriter writer null if outputWriter null writer new PrintWriter outputWriter else if destinationFile null os new LogOutputStream this Project MSG_WARN else File parent fileUtils getParentFile destinationFile if parent exists parent mkdirs os new FileOutputStream destinationFile getAbsolutePath append if outputEncoding null writer new PrintWriter new BufferedWriter new OutputStreamWriter os else writer new PrintWriter new BufferedWriter new OutputStreamWriter os outputEncoding if header null if header getFiltering concatenate buffer writer new StringReader header getValue else writer print header getValue if textBuffer null reader new StringReader getProject replaceProperties textBuffer substring else reader new MultiReader concatenate buffer writer reader if footer null if footer getFiltering concatenate buffer writer new StringReader footer getValue else writer print footer getValue writer flush if os null os flush catch IOException ioex throw new BuildException ioex getMessage ioex finally if reader null try reader close catch IOException ignore if os null try os close catch IOException ignore private void concatenate char buffer Writer writer Reader in throws IOException if filterChains null ChainReaderHelper helper new ChainReaderHelper helper setBufferSize BUFFER_SIZE helper setPrimaryReader in helper setFilterChains filterChains helper setProject getProject in new BufferedReader helper getAssembledReader while true int nRead in read buffer buffer length if nRead break writer write buffer nRead writer flush private void sanitizeText if textBuffer null if textBuffer substring trim length textBuffer null public static class TextElement extends ProjectComponent private String value private boolean trimLeading false private boolean trim false private boolean filtering true private String encoding null public void setFiltering boolean filtering this filtering filtering private boolean getFiltering return filtering public void setEncoding String encoding this encoding encoding public void setFile File file if file exists throw new BuildException file BufferedReader reader null try if this encoding null reader new BufferedReader new FileReader file else reader new BufferedReader new InputStreamReader new FileInputStream file this encoding value fileUtils readFully reader catch IOException ex throw new BuildException ex finally if reader null try reader close catch Throwable public void addText String value this value getProject replaceProperties value public void setTrimLeading boolean strip this trimLeading strip public void setTrim boolean trim this trim trim public String getValue if value null value if value trim length value if trimLeading char current value toCharArray StringBuffer new StringBuffer current length boolean startOfLine true int pos while pos current length char ch current pos if startOfLine if ch ch continue startOfLine false append ch if ch ch startOfLine true value toString if trim value value trim return value private class MultiReader extends Reader private int pos private Reader reader null private int lastPos private char lastChars new char eolString length private boolean needAddSeparator false private Reader getReader throws IOException if reader null if encoding null reader new BufferedReader new FileReader File sourceFiles elementAt pos else reader new BufferedReader new InputStreamReader new FileInputStream File sourceFiles elementAt pos encoding for int lastChars length lastChars return reader public int read throws IOException if needAddSeparator int ret eolString charAt lastPos if lastPos eolString length lastPos needAddSeparator false return ret while pos sourceFiles size int ch getReader read if ch reader close reader null if fixLastLine isMissingEndOfLine needAddSeparator true lastPos else addLastChar char ch return ch pos return public int read char cbuf int off int len throws IOException int amountRead while pos sourceFiles size needAddSeparator if needAddSeparator cbuf off eolString charAt lastPos if lastPos eolString length lastPos needAddSeparator false pos len off amountRead if len return amountRead continue int nRead getReader read cbuf off len if nRead nRead reader close reader null if fixLastLine isMissingEndOfLine needAddSeparator true lastPos else pos else if fixLastLine for int nRead nRead lastChars length if break addLastChar cbuf off len nRead off nRead amountRead nRead if len return amountRead if amountRead return else return amountRead public void close throws IOException if reader null reader close private void addLastChar char ch for int lastChars length lastChars lastChars lastChars lastChars length ch private boolean isMissingEndOfLine for int lastChars length if lastChars eolString charAt return true return false', 'bug': '0'}
{'sequence': 'public class BuildEvent extends EventObject private Project project private Target target private Task task private String message private int priority Project MSG_VERBOSE private Throwable exception public BuildEvent Project project super project this project project this target null this task null public BuildEvent Target target super target this project target getProject this target target this task null public BuildEvent Task task super task this project task getProject this target task getOwningTarget this task task public void setMessage String message int priority this message message this priority priority public void setException Throwable exception this exception exception public Project getProject return project public Target getTarget return target public Task getTask return task public String getMessage return message public int getPriority return priority public Throwable getException return exception', 'bug': '0'}
{'sequence': 'public class Jar extends Zip private static final String INDEX_NAME private static final String MANIFEST_NAME private Manifest configuredManifest private Manifest savedConfiguredManifest private Manifest filesetManifest private Manifest originalManifest private FilesetManifestConfig filesetManifestConfig private boolean mergeManifestsMain true private Manifest manifest private String manifestEncoding private File manifestFile private boolean index false private boolean createEmpty false private Vector rootEntries public Jar super archiveType emptyBehavior setEncoding rootEntries new Vector public void setWhenempty WhenEmpty we log Project MSG_WARN public void setJarfile File jarFile setDestFile jarFile public void setIndex boolean flag index flag public void setManifestEncoding String manifestEncoding this manifestEncoding manifestEncoding public void addConfiguredManifest Manifest newManifest throws ManifestException if configuredManifest null configuredManifest newManifest else configuredManifest merge newManifest savedConfiguredManifest configuredManifest public void setManifest File manifestFile if manifestFile exists throw new BuildException manifestFile getLocation this manifestFile manifestFile private Manifest getManifest File manifestFile Manifest newManifest null FileInputStream fis null InputStreamReader isr null try fis new FileInputStream manifestFile if manifestEncoding null isr new InputStreamReader fis else isr new InputStreamReader fis manifestEncoding newManifest getManifest isr catch UnsupportedEncodingException throw new BuildException getMessage catch IOException throw new BuildException manifestFile getMessage finally if isr null try isr close catch IOException return newManifest private Manifest getManifestFromJar File jarFile throws IOException ZipFile zf null try zf new ZipFile jarFile Enumeration zf entries while hasMoreElements ZipEntry ze ZipEntry nextElement if ze getName equalsIgnoreCase MANIFEST_NAME InputStreamReader isr new InputStreamReader zf getInputStream ze return getManifest isr return null finally if zf null try zf close catch IOException private Manifest getManifest Reader Manifest newManifest null try newManifest new Manifest catch ManifestException log getMessage Project MSG_ERR throw new BuildException manifestFile getLocation catch IOException throw new BuildException getMessage return newManifest public void setFilesetmanifest FilesetManifestConfig config filesetManifestConfig config mergeManifestsMain equals config getValue if filesetManifestConfig null filesetManifestConfig getValue equals doubleFilePass true public void addMetainf ZipFileSet fs fs setPrefix super addFileset fs protected void initZipOutputStream ZipOutputStream zOut throws IOException BuildException if skipWriting Manifest jarManifest createManifest writeManifest zOut jarManifest private Manifest createManifest throws BuildException try Manifest finalManifest Manifest getDefaultManifest if manifest null if manifestFile null manifest getManifest manifestFile if isInUpdateMode finalManifest merge originalManifest finalManifest merge filesetManifest finalManifest merge configuredManifest finalManifest merge manifest mergeManifestsMain return finalManifest catch ManifestException log getMessage Project MSG_ERR throw new BuildException getLocation private void writeManifest ZipOutputStream zOut Manifest manifest throws IOException for Enumeration manifest getWarnings hasMoreElements log String nextElement Project MSG_WARN zipDir null zOut ZipFileSet DEFAULT_DIR_MODE ByteArrayOutputStream baos new ByteArrayOutputStream OutputStreamWriter osw new OutputStreamWriter baos PrintWriter writer new PrintWriter osw manifest write writer writer flush ByteArrayInputStream bais new ByteArrayInputStream baos toByteArray super zipFile bais zOut MANIFEST_NAME System currentTimeMillis null ZipFileSet DEFAULT_FILE_MODE super initZipOutputStream zOut protected void finalizeZipOutputStream ZipOutputStream zOut throws IOException BuildException if index createIndexList zOut private void createIndexList ZipOutputStream zOut throws IOException ByteArrayOutputStream baos new ByteArrayOutputStream PrintWriter writer new PrintWriter new OutputStreamWriter baos writer println writer println writer println zipFile getName Enumeration addedDirs keys while hasMoreElements String dir String nextElement dir dir replace int pos dir lastIndexOf if pos dir dir substring pos if dir startsWith continue writer println dir rootEntries elements while hasMoreElements writer println nextElement writer flush ByteArrayInputStream bais new ByteArrayInputStream baos toByteArray super zipFile bais zOut INDEX_NAME System currentTimeMillis null ZipFileSet DEFAULT_FILE_MODE protected void zipFile InputStream is ZipOutputStream zOut String vPath long lastModified File fromArchive int mode throws IOException if MANIFEST_NAME equalsIgnoreCase vPath if doubleFilePass doubleFilePass skipWriting filesetManifest fromArchive is else if INDEX_NAME equalsIgnoreCase vPath index log archiveType Project MSG_WARN else if index vPath indexOf rootEntries addElement vPath super zipFile is zOut vPath lastModified fromArchive mode private void filesetManifest File file InputStream is throws IOException if manifestFile null manifestFile equals file log file Project MSG_VERBOSE try if is null InputStreamReader isr if manifestEncoding null isr new InputStreamReader is else isr new InputStreamReader is manifestEncoding manifest getManifest isr else manifest getManifest file catch UnsupportedEncodingException throw new BuildException getMessage else if filesetManifestConfig null filesetManifestConfig getValue equals log file Project MSG_VERBOSE try Manifest newManifest null if is null InputStreamReader isr if manifestEncoding null isr new InputStreamReader is else isr new InputStreamReader is manifestEncoding newManifest getManifest isr else newManifest getManifest file if filesetManifest null filesetManifest newManifest else filesetManifest merge newManifest catch UnsupportedEncodingException throw new BuildException getMessage catch ManifestException log file getMessage Project MSG_ERR throw new BuildException getLocation else protected ArchiveState getResourcesToAdd FileSet filesets File zipFile boolean needsUpdate throws BuildException if zipFile exists try originalManifest getManifestFromJar zipFile if originalManifest null log Project MSG_VERBOSE needsUpdate true else Manifest mf createManifest if mf equals originalManifest log Project MSG_VERBOSE needsUpdate true catch Throwable log getMessage Project MSG_WARN needsUpdate true else needsUpdate true createEmpty needsUpdate return super getResourcesToAdd filesets zipFile needsUpdate protected boolean createEmptyZip File zipFile throws BuildException if createEmpty return true ZipOutputStream zOut null try log getDestFile getAbsolutePath zOut new ZipOutputStream new FileOutputStream getDestFile zOut setEncoding getEncoding if isCompress zOut setMethod ZipOutputStream DEFLATED else zOut setMethod ZipOutputStream STORED initZipOutputStream zOut finalizeZipOutputStream zOut catch IOException ioe throw new BuildException ioe getMessage ioe getLocation finally try if zOut null zOut close catch IOException ex createEmpty false return true protected void cleanUp super cleanUp if doubleFilePass doubleFilePass skipWriting manifest null configuredManifest savedConfiguredManifest filesetManifest null originalManifest null rootEntries removeAllElements public void reset super reset configuredManifest null filesetManifestConfig null mergeManifestsMain false manifestFile null index false public static class FilesetManifestConfig extends EnumeratedAttribute public String getValues return new String', 'bug': '1'}
{'sequence': 'public class Delete extends MatchingTask private static final int DELETE_RETRY_SLEEP_MILLIS protected File file null protected File dir null protected Vector filesets new Vector protected boolean usedMatchingTask false protected boolean includeEmpty false private int verbosity Project MSG_VERBOSE private boolean quiet false private boolean failonerror true public void setFile File file this file file public void setDir File dir this dir dir public void setVerbose boolean verbose if verbose this verbosity Project MSG_INFO else this verbosity Project MSG_VERBOSE public void setQuiet boolean quiet this quiet quiet if quiet this failonerror false public void setFailOnError boolean failonerror this failonerror failonerror public void setIncludeEmptyDirs boolean includeEmpty this includeEmpty includeEmpty public void addFileset FileSet set filesets addElement set public PatternSet NameEntry createInclude usedMatchingTask true return super createInclude public PatternSet NameEntry createIncludesFile usedMatchingTask true return super createIncludesFile public PatternSet NameEntry createExclude usedMatchingTask true return super createExclude public PatternSet NameEntry createExcludesFile usedMatchingTask true return super createExcludesFile public PatternSet createPatternSet usedMatchingTask true return super createPatternSet public void setIncludes String includes usedMatchingTask true super setIncludes includes public void setExcludes String excludes usedMatchingTask true super setExcludes excludes public void setDefaultexcludes boolean useDefaultExcludes usedMatchingTask true super setDefaultexcludes useDefaultExcludes public void setIncludesfile File includesfile usedMatchingTask true super setIncludesfile includesfile public void setExcludesfile File excludesfile usedMatchingTask true super setExcludesfile excludesfile public void setCaseSensitive boolean isCaseSensitive usedMatchingTask true super setCaseSensitive isCaseSensitive public void setFollowSymlinks boolean followSymlinks usedMatchingTask true super setFollowSymlinks followSymlinks public void addSelector SelectSelector selector usedMatchingTask true super addSelector selector public void addAnd AndSelector selector usedMatchingTask true super addAnd selector public void addOr OrSelector selector usedMatchingTask true super addOr selector public void addNot NotSelector selector usedMatchingTask true super addNot selector public void addNone NoneSelector selector usedMatchingTask true super addNone selector public void addMajority MajoritySelector selector usedMatchingTask true super addMajority selector public void addDate DateSelector selector usedMatchingTask true super addDate selector public void addSize SizeSelector selector usedMatchingTask true super addSize selector public void addFilename FilenameSelector selector usedMatchingTask true super addFilename selector public void addCustom ExtendSelector selector usedMatchingTask true super addCustom selector public void addContains ContainsSelector selector usedMatchingTask true super addContains selector public void addPresent PresentSelector selector usedMatchingTask true super addPresent selector public void addDepth DepthSelector selector usedMatchingTask true super addDepth selector public void addDepend DependSelector selector usedMatchingTask true super addDepend selector public void addContainsRegexp ContainsRegexpSelector selector usedMatchingTask true super addContainsRegexp selector public void addModified ModifiedSelector selector usedMatchingTask true super addModified selector public void add FileSelector selector usedMatchingTask true super add selector public void execute throws BuildException if usedMatchingTask log if file null dir null filesets size throw new BuildException if quiet failonerror throw new BuildException getLocation if file null if file exists if file isDirectory log file getAbsolutePath else log file getAbsolutePath if delete file String message file getAbsolutePath if failonerror throw new BuildException message else log message quiet Project MSG_VERBOSE Project MSG_WARN else log file getAbsolutePath Project MSG_VERBOSE if dir null dir exists dir isDirectory usedMatchingTask if verbosity Project MSG_VERBOSE log dir getAbsolutePath removeDir dir for int filesets size FileSet fs FileSet filesets elementAt try DirectoryScanner ds fs getDirectoryScanner getProject String files ds getIncludedFiles String dirs ds getIncludedDirectories removeFiles fs getDir getProject files dirs catch BuildException be if failonerror throw be else log be getMessage quiet Project MSG_VERBOSE Project MSG_WARN if usedMatchingTask dir null try DirectoryScanner ds super getDirectoryScanner dir String files ds getIncludedFiles String dirs ds getIncludedDirectories removeFiles dir files dirs catch BuildException be if failonerror throw be else log be getMessage quiet Project MSG_VERBOSE Project MSG_WARN private boolean delete File if delete try Thread sleep DELETE_RETRY_SLEEP_MILLIS return delete catch InterruptedException ex return delete return true protected void removeDir File String list list if list null list new String for int list length String list File new File if isDirectory removeDir else log getAbsolutePath verbosity if delete String message getAbsolutePath if failonerror throw new BuildException message else log message quiet Project MSG_VERBOSE Project MSG_WARN log getAbsolutePath verbosity if delete String message dir getAbsolutePath if failonerror throw new BuildException message else log message quiet Project MSG_VERBOSE Project MSG_WARN protected void removeFiles File String files String dirs if files length log files length getAbsolutePath for int files length File new File files log getAbsolutePath verbosity if delete String message getAbsolutePath if failonerror throw new BuildException message else log message quiet Project MSG_VERBOSE Project MSG_WARN if dirs length includeEmpty int dirCount for int dirs length File dir new File dirs String dirFiles dir list if dirFiles null dirFiles length log dir getAbsolutePath verbosity if delete dir String message dir getAbsolutePath if failonerror throw new BuildException message else log message quiet Project MSG_VERBOSE Project MSG_WARN else dirCount if dirCount log dirCount dirCount getAbsolutePath', 'bug': '1'}
{'sequence': 'public class JavacExternal extends DefaultCompilerAdapter public boolean execute throws BuildException attributes log Project MSG_VERBOSE Commandline cmd new Commandline cmd setExecutable getJavac getJavacExecutable setupModernJavacCommandlineSwitches cmd int firstFileName assumeJava11 cmd size logAndAddFilesToCompile cmd return executeExternalCompile cmd getCommandline firstFileName true', 'bug': '1'}
{'sequence': 'public class WhichResource extends Task private Path classpath private String classname private String resource private String property public void setClasspath Path cp if classpath null classpath cp else classpath append cp public Path createClasspath if classpath null classpath new Path getProject return classpath createPath private void validate int setcount if classname null setcount if resource null setcount if setcount throw new BuildException if setcount throw new BuildException if property null throw new BuildException public void execute throws BuildException validate if classpath null getProject log classpath Project MSG_DEBUG classpath classpath concatSystemClasspath else classpath new Path getProject classpath classpath concatSystemClasspath getProject log classpath Project MSG_DEBUG AntClassLoader loader loader new AntClassLoader getProject getCoreLoader getProject classpath false String location null if classname null classname classname replace resource classname else if resource startsWith resource resource log resource Project MSG_VERBOSE URL url url loader getResource resource if url null location url toExternalForm getProject setNewProperty property location public void setResource String resource this resource resource public void setClass String classname this classname classname public void setProperty String property this property property', 'bug': '0'}
{'sequence': 'class PlainMailer extends Mailer public void send try MailMessage mailMessage new MailMessage host port mailMessage from from toString Enumeration replyToList elements while hasMoreElements mailMessage replyto nextElement toString toList elements while hasMoreElements mailMessage to nextElement toString ccList elements while hasMoreElements mailMessage cc nextElement toString bccList elements while hasMoreElements mailMessage bcc nextElement toString if subject null mailMessage setSubject subject mailMessage setHeader getDate if message getCharset null mailMessage setHeader message getMimeType message getCharset else mailMessage setHeader message getMimeType PrintStream out mailMessage getPrintStream message print out files elements while hasMoreElements File file File nextElement attach file out mailMessage sendAndClose catch IOException ioe throw new BuildException ioe protected void attach File file PrintStream out throws IOException if file exists file canRead throw new BuildException file getName if includeFileNames out println String filename file getName int filenamelength filename length out println filename for int star star filenamelength star out print out println int length final int maxBuf byte buf new byte maxBuf FileInputStream finstr new FileInputStream file try BufferedInputStream in new BufferedInputStream finstr buf length while length in read buf out write buf length finally finstr close', 'bug': '0'}
{'sequence': 'public class BuildException extends RuntimeException private Throwable cause private Location location Location UNKNOWN_LOCATION public BuildException super public BuildException String message super message public BuildException String message Throwable cause super message this cause cause public BuildException String msg Throwable cause Location location this msg cause this location location public BuildException Throwable cause super cause toString this cause cause public BuildException String message Location location super message this location location public BuildException Throwable cause Location location this cause this location location public Throwable getException return cause public Throwable getCause return getException public String toString return location toString getMessage public void setLocation Location location this location location public Location getLocation return location public void printStackTrace printStackTrace System err public void printStackTrace PrintStream ps synchronized ps super printStackTrace ps if cause null ps println cause printStackTrace ps public void printStackTrace PrintWriter pw synchronized pw super printStackTrace pw if cause null pw println cause printStackTrace pw', 'bug': '0'}
{'sequence': 'public class CVSPass extends Task private String cvsRoot null private File passFile null private String password null private final char shifts public CVSPass passFile new File System getProperty System getProperty File separatorChar public final void execute throws BuildException if cvsRoot null throw new BuildException if password null throw new BuildException log cvsRoot Project MSG_DEBUG log password Project MSG_DEBUG log passFile Project MSG_DEBUG BufferedReader reader null PrintWriter writer null try StringBuffer buf new StringBuffer if passFile exists reader new BufferedReader new FileReader passFile String line null while line reader readLine null if line startsWith cvsRoot buf append line append StringUtils LINE_SEP String pwdfile buf toString cvsRoot mangle password log pwdfile Project MSG_DEBUG writer new PrintWriter new FileWriter passFile writer println pwdfile catch IOException throw new BuildException finally if reader null try reader close catch IOException if writer null writer close private final String mangle String password StringBuffer buf new StringBuffer for int password length buf append shifts password charAt return buf toString public void setCvsroot String cvsRoot this cvsRoot cvsRoot public void setPassfile File passFile this passFile passFile public void setPassword String password this password password', 'bug': '0'}
{'sequence': 'public abstract class ProjectComponent protected Project project public ProjectComponent public void setProject Project project this project project public Project getProject return project public void log String msg log msg Project MSG_INFO public void log String msg int msgLevel if project null project log msg msgLevel else if msgLevel Project MSG_INFO System err println msg', 'bug': '1'}
{'sequence': 'public class GZip extends Pack protected void pack GZIPOutputStream zOut null try zOut new GZIPOutputStream new FileOutputStream zipFile zipFile source zOut catch IOException ioe String msg ioe getMessage throw new BuildException msg ioe getLocation finally if zOut null try zOut close catch IOException', 'bug': '0'}
{'sequence': 'public abstract class ConditionBase extends ProjectComponent private Vector conditions new Vector protected int countConditions return conditions size protected final Enumeration getConditions return conditions elements public void addAvailable Available conditions addElement public void addChecksum Checksum conditions addElement public void addUptodate UpToDate conditions addElement public void addNot Not conditions addElement public void addAnd And conditions addElement public void addOr Or conditions addElement public void addEquals Equals conditions addElement public void addOs Os conditions addElement public void addIsSet IsSet conditions addElement public void addHttp Http conditions addElement public void addSocket Socket conditions addElement public void addFilesMatch FilesMatch test conditions addElement test public void addContains Contains test conditions addElement test public void addIsTrue IsTrue test conditions addElement test public void addIsFalse IsFalse test conditions addElement test public void addIsReference IsReference conditions addElement public void add Condition conditions addElement', 'bug': '0'}
{'sequence': 'public final class ReplaceTokens extends BaseParamFilterReader implements ChainableReader private static final char DEFAULT_BEGIN_TOKEN private static final char DEFAULT_END_TOKEN private String queuedData null private String replaceData null private int replaceIndex private int queueIndex private Hashtable hash new Hashtable private char beginToken DEFAULT_BEGIN_TOKEN private char endToken DEFAULT_END_TOKEN public ReplaceTokens super public ReplaceTokens final Reader in super in private int getNextChar throws IOException if queueIndex final int ch queuedData charAt queueIndex if queueIndex queuedData length queueIndex return ch return in read public final int read throws IOException if getInitialized initialize setInitialized true if replaceIndex final int ch replaceData charAt replaceIndex if replaceIndex replaceData length replaceIndex return ch int ch getNextChar if ch beginToken final StringBuffer key new StringBuffer do ch getNextChar if ch key append char ch else break while ch endToken if ch if queuedData null queueIndex queuedData key toString else queuedData key toString queuedData substring queueIndex queueIndex return beginToken else key setLength key length final String replaceWith String hash get key toString if replaceWith null if replaceWith length replaceData replaceWith replaceIndex return read else String newData key toString endToken if queuedData null queueIndex queuedData newData else queuedData newData queuedData substring queueIndex queueIndex return beginToken return ch public final void setBeginToken final char beginToken this beginToken beginToken private final char getBeginToken return beginToken public final void setEndToken final char endToken this endToken endToken private final char getEndToken return endToken public final void addConfiguredToken final Token token hash put token getKey token getValue private void setTokens final Hashtable hash this hash hash private final Hashtable getTokens return hash public final Reader chain final Reader rdr ReplaceTokens newFilter new ReplaceTokens rdr newFilter setBeginToken getBeginToken newFilter setEndToken getEndToken newFilter setTokens getTokens newFilter setInitialized true return newFilter private final void initialize Parameter params getParameters if params null for int params length if params null final String type params getType if equals type final String name params getName String value params getValue if equals name if value length throw new BuildException beginToken params getValue charAt else if equals name if value length throw new BuildException endToken params getValue charAt else if equals type final String name params getName final String value params getValue hash put name value public static class Token private String key private String value public final void setKey String key this key key public final void setValue String value this value value public final String getKey return key public final String getValue return value', 'bug': '1'}
{'sequence': 'public class RegexpPatternMapper implements FileNameMapper protected RegexpMatcher reg null protected char to null protected StringBuffer result new StringBuffer public RegexpPatternMapper throws BuildException reg new RegexpMatcherFactory newRegexpMatcher public void setFrom String from throws BuildException try reg setPattern from catch NoClassDefFoundError throw new BuildException public void setTo String to this to to toCharArray public String mapFileName String sourceFileName if reg null to null reg matches sourceFileName return null return new String replaceReferences sourceFileName protected String replaceReferences String source Vector reg getGroups source result setLength for int to length if to if to length int value Character digit to if value result append String elementAt value else result append to else result append else result append to return result substring', 'bug': '0'}
{'sequence': 'public class Equals implements Condition private String arg1 arg2 private boolean trim false private boolean caseSensitive true public void setArg1 String a1 arg1 a1 public void setArg2 String a2 arg2 a2 public void setTrim boolean trim public void setCasesensitive boolean caseSensitive public boolean eval throws BuildException if arg1 null arg2 null throw new BuildException if trim arg1 arg1 trim arg2 arg2 trim return caseSensitive arg1 equals arg2 arg1 equalsIgnoreCase arg2', 'bug': '0'}
{'sequence': 'public class LogOutputStream extends OutputStream private static final int INTIAL_SIZE private static final int CR private static final int LF private ByteArrayOutputStream buffer new ByteArrayOutputStream INTIAL_SIZE private boolean skip false private Task task private int level Project MSG_INFO public LogOutputStream Task task int level this task task this level level public void write int cc throws IOException final byte byte cc if if skip processBuffer else buffer write cc skip public void flush processBuffer protected void processBuffer processLine buffer toString buffer reset protected void processLine String line processLine line level protected void processLine String line int level task log line level public void close throws IOException if buffer size processBuffer super close public int getMessageLevel return level public void write byte int off int len throws IOException int offset off int blockStartOffset offset int remaining len while remaining while remaining offset LF offset CR offset remaining int blockLength offset blockStartOffset if blockLength buffer write blockStartOffset blockLength while remaining offset LF offset CR write offset offset remaining blockStartOffset offset', 'bug': '0'}
{'sequence': 'public class WaitFor extends ConditionBase private long maxWaitMillis private long maxWaitMultiplier private long checkEveryMillis private long checkEveryMultiplier private String timeoutProperty public void setMaxWait long time maxWaitMillis time public void setMaxWaitUnit Unit unit maxWaitMultiplier unit getMultiplier public void setCheckEvery long time checkEveryMillis time public void setCheckEveryUnit Unit unit checkEveryMultiplier unit getMultiplier public void setTimeoutProperty String timeoutProperty public void execute throws BuildException if countConditions throw new BuildException if countConditions throw new BuildException Condition Condition getConditions nextElement long savedMaxWaitMillis maxWaitMillis long savedCheckEveryMillis checkEveryMillis try maxWaitMillis maxWaitMultiplier checkEveryMillis checkEveryMultiplier long start System currentTimeMillis long end start maxWaitMillis while System currentTimeMillis end if eval return try Thread sleep checkEveryMillis catch InterruptedException if timeoutProperty null getProject setNewProperty timeoutProperty finally maxWaitMillis savedMaxWaitMillis checkEveryMillis savedCheckEveryMillis public static class Unit extends EnumeratedAttribute private static final String MILLISECOND private static final String SECOND private static final String MINUTE private static final String HOUR private static final String DAY private static final String WEEK private static final String units MILLISECOND SECOND MINUTE HOUR DAY WEEK private Hashtable timeTable new Hashtable public Unit timeTable put MILLISECOND new Long timeTable put SECOND new Long timeTable put MINUTE new Long timeTable put HOUR new Long timeTable put DAY new Long timeTable put WEEK new Long public long getMultiplier String key getValue toLowerCase Long Long timeTable get key return longValue public String getValues return units', 'bug': '0'}
{'sequence': 'public abstract class DefBase extends AntlibDefinition private ClassLoader createdLoader private ClasspathUtils Delegate cpDelegate public void setReverseLoader boolean reverseLoader this cpDelegate setReverseLoader reverseLoader log Project MSG_WARN public Path getClasspath return cpDelegate getClasspath public boolean isReverseLoader return cpDelegate isReverseLoader public String getLoaderId return cpDelegate getClassLoadId public String getClasspathId return cpDelegate getClassLoadId public void setClasspath Path classpath this cpDelegate setClasspath classpath public Path createClasspath return this cpDelegate createClasspath public void setClasspathRef Reference this cpDelegate setClasspathref public void setLoaderRef Reference this cpDelegate setLoaderRef protected ClassLoader createLoader if getAntlibClassLoader null return getAntlibClassLoader if createdLoader null createdLoader this cpDelegate getClassLoader AntClassLoader createdLoader addSystemPackageRoot return createdLoader public void init throws BuildException this cpDelegate ClasspathUtils getDelegate this super init', 'bug': '0'}
{'sequence': 'public final class ZipLong implements Cloneable private long value public ZipLong long value this value value public ZipLong byte bytes this bytes public ZipLong byte bytes int offset value bytes offset value bytes offset value bytes offset value bytes offset public byte getBytes byte result new byte result byte value result byte value result byte value result byte value return result public long getValue return value public boolean equals Object if null instanceof ZipLong return false return value ZipLong getValue public int hashCode return int value', 'bug': '0'}
{'sequence': 'public interface RmicAdapter void setRmic Rmic attributes boolean execute throws BuildException FileNameMapper getMapper Path getClasspath', 'bug': '0'}
{'sequence': 'public interface ChainableReader Reader chain Reader rdr', 'bug': '0'}
{'sequence': 'public class Socket extends ProjectComponent implements Condition private String server null private int port public void setServer String server this server server public void setPort int port this port port public boolean eval throws BuildException if server null throw new BuildException if port throw new BuildException log server port Project MSG_VERBOSE java net Socket null try new java net Socket server port catch IOException return false finally if null try close catch IOException ioe return true', 'bug': '0'}
{'sequence': 'public abstract class Mailer protected String host null protected int port protected String user null protected String password null protected boolean SSL false protected Message message protected EmailAddress from protected Vector replyToList null protected Vector toList null protected Vector ccList null protected Vector bccList null protected Vector files null protected String subject null protected Task task protected boolean includeFileNames false public void setHost String host this host host public void setPort int port this port port public void setUser String user this user user public void setPassword String password this password password public void setSSL boolean SSL this SSL SSL public void setMessage Message this message public void setFrom EmailAddress from this from from public void setReplyToList Vector list this replyToList list public void setToList Vector list this toList list public void setCcList Vector list this ccList list public void setBccList Vector list this bccList list public void setFiles Vector files this files files public void setSubject String subject this subject subject public void setTask Task task this task task public void setIncludeFileNames boolean this includeFileNames public abstract void send throws BuildException protected final String getDate return DateUtils getDateForHeader', 'bug': '0'}
{'sequence': 'public class UpToDate extends Task implements Condition private String private String private File private File private Vector sourceFileSets new Vector protected Mapper mapperElement null public void setProperty String property property public void setValue String value value private String getValue return null public void setTargetFile File file file public void setSrcfile File file file public void addSrcfiles FileSet fs sourceFileSets addElement fs public Mapper createMapper throws BuildException if mapperElement null throw new BuildException getLocation mapperElement new Mapper getProject return mapperElement public boolean eval if sourceFileSets size null throw new BuildException if sourceFileSets size null throw new BuildException if null mapperElement null throw new BuildException if null exists log getAbsolutePath Project MSG_VERBOSE return false if null exists throw new BuildException getAbsolutePath Enumeration sourceFileSets elements boolean upToDate true while upToDate hasMoreElements FileSet fs FileSet nextElement DirectoryScanner ds fs getDirectoryScanner getProject upToDate upToDate scanDir fs getDir getProject ds getIncludedFiles if null if mapperElement null upToDate upToDate lastModified lastModified else SourceFileScanner sfs new SourceFileScanner this upToDate upToDate sfs restrict new String getAbsolutePath null null mapperElement getImplementation length return upToDate public void execute throws BuildException if null throw new BuildException getLocation boolean upToDate eval if upToDate this getProject setNewProperty getValue if mapperElement null log getAbsolutePath Project MSG_VERBOSE else log Project MSG_VERBOSE protected boolean scanDir File srcDir String files SourceFileScanner sfs new SourceFileScanner this FileNameMapper mapper null File dir srcDir if mapperElement null MergingMapper mm new MergingMapper mm setTo getAbsolutePath mapper mm dir null else mapper mapperElement getImplementation return sfs restrict files srcDir dir mapper length', 'bug': '0'}
{'sequence': 'public class JavaEnvUtils private static final boolean isDos Os isFamily private static final boolean isNetware Os isName private static final boolean isAix Os isName private static final String javaHome System getProperty private static final FileUtils fileUtils FileUtils newFileUtils private static String javaVersion private static int javaVersionNumber public static final String JAVA_1_0 public static final String JAVA_1_1 public static final String JAVA_1_2 public static final String JAVA_1_3 public static final String JAVA_1_4 private static Vector jrePackages static try javaVersion JAVA_1_0 javaVersionNumber Class forName javaVersion JAVA_1_1 javaVersionNumber Class forName javaVersion JAVA_1_2 javaVersionNumber Class forName javaVersion JAVA_1_3 javaVersionNumber Class forName javaVersion JAVA_1_4 javaVersionNumber catch Throwable public static String getJavaVersion return javaVersion public static boolean isJavaVersion String version return javaVersion version public static String getJreExecutable String command if isNetware return command File jExecutable null if isAix jExecutable findInDir javaHome command if jExecutable null jExecutable findInDir javaHome command if jExecutable null return jExecutable getAbsolutePath else return addExtension command public static String getJdkExecutable String command if isNetware return command File jExecutable null if isAix jExecutable findInDir javaHome command if jExecutable null jExecutable findInDir javaHome command if jExecutable null return jExecutable getAbsolutePath else return getJreExecutable command private static String addExtension String command return command isDos private static File findInDir String dirName String commandName File dir fileUtils normalize dirName File executable null if dir exists executable new File dir addExtension commandName if executable exists executable null return executable private static void buildJrePackages jrePackages new Vector switch javaVersionNumber case jrePackages addElement jrePackages addElement jrePackages addElement jrePackages addElement jrePackages addElement jrePackages addElement jrePackages addElement case jrePackages addElement jrePackages addElement jrePackages addElement jrePackages addElement jrePackages addElement jrePackages addElement jrePackages addElement jrePackages addElement jrePackages addElement case jrePackages addElement jrePackages addElement case default jrePackages addElement jrePackages addElement jrePackages addElement break public static Vector getJrePackageTestCases Vector tests new Vector tests addElement switch javaVersionNumber case tests addElement tests addElement tests addElement tests addElement tests addElement tests addElement tests addElement tests addElement case tests addElement tests addElement tests addElement tests addElement tests addElement tests addElement tests addElement tests addElement case tests addElement tests addElement tests addElement case default tests addElement tests addElement tests addElement break return tests public static Vector getJrePackages if jrePackages null buildJrePackages return jrePackages', 'bug': '1'}
{'sequence': 'public class KeepAliveInputStream extends FilterInputStream public KeepAliveInputStream InputStream in super in public void close throws IOException', 'bug': '0'}
{'sequence': 'public abstract class MappingSelector extends BaseSelector protected File targetdir null protected Mapper mapperElement null protected FileNameMapper map null protected int granularity public MappingSelector granularity int FileUtils newFileUtils getFileTimestampGranularity public void setTargetdir File targetdir this targetdir targetdir public Mapper createMapper throws BuildException if mapperElement null throw new BuildException mapperElement new Mapper getProject return mapperElement public void verifySettings if targetdir null setError if mapperElement null map new IdentityMapper else map mapperElement getImplementation if map null setError public boolean isSelected File basedir String filename File file validate String destfiles map mapFileName filename if destfiles null return false if destfiles length destfiles null throw new BuildException targetdir getName filename String destname destfiles File destfile new File targetdir destname boolean selected selectionTest file destfile return selected protected abstract boolean selectionTest File srcfile File destfile public void setGranularity int granularity this granularity granularity', 'bug': '0'}
{'sequence': 'public class Project public static final int MSG_ERR public static final int MSG_WARN public static final int MSG_INFO public static final int MSG_VERBOSE public static final int MSG_DEBUG private static final String VISITING private static final String VISITED private static final String ANTCLASSLOADER_JDK12 public static final String JAVA_1_0 JavaEnvUtils JAVA_1_0 public static final String JAVA_1_1 JavaEnvUtils JAVA_1_1 public static final String JAVA_1_2 JavaEnvUtils JAVA_1_2 public static final String JAVA_1_3 JavaEnvUtils JAVA_1_3 public static final String JAVA_1_4 JavaEnvUtils JAVA_1_4 public static final String TOKEN_START FilterSet DEFAULT_TOKEN_START public static final String TOKEN_END FilterSet DEFAULT_TOKEN_END private String name private String description private Hashtable references new AntRefTable this private String defaultTarget private Hashtable targets new Hashtable private FilterSet globalFilterSet new FilterSet private FilterSetCollection globalFilters new FilterSetCollection globalFilterSet private File baseDir private Vector listeners new Vector private ClassLoader coreLoader null private Hashtable threadTasks new Hashtable private Hashtable threadGroupTasks new Hashtable private InputHandler inputHandler null private InputStream defaultInputStream null private boolean keepGoingMode false public void setInputHandler InputHandler handler inputHandler handler public void setDefaultInputStream InputStream defaultInputStream this defaultInputStream defaultInputStream public InputStream getDefaultInputStream return defaultInputStream public InputHandler getInputHandler return inputHandler private FileUtils fileUtils private boolean loggingMessage false public Project fileUtils FileUtils newFileUtils inputHandler new DefaultInputHandler public void initSubProject Project subProject ComponentHelper getComponentHelper subProject initSubProject ComponentHelper getComponentHelper this subProject setKeepGoingMode this isKeepGoingMode public void init throws BuildException setJavaVersionProperty ComponentHelper getComponentHelper this initDefaultDefinitions setSystemProperties private AntClassLoader createClassLoader AntClassLoader loader null if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 try Class loaderClass Class forName ANTCLASSLOADER_JDK12 loader AntClassLoader loaderClass newInstance catch Exception log getMessage Project MSG_DEBUG if loader null loader new AntClassLoader loader setProject this return loader public AntClassLoader createClassLoader Path path AntClassLoader loader createClassLoader loader setClassPath path return loader public void setCoreLoader ClassLoader coreLoader this coreLoader coreLoader public ClassLoader getCoreLoader return coreLoader public synchronized void addBuildListener BuildListener listener Vector newListeners getBuildListeners newListeners addElement listener listeners newListeners public synchronized void removeBuildListener BuildListener listener Vector newListeners getBuildListeners newListeners removeElement listener listeners newListeners public Vector getBuildListeners return Vector listeners clone public void log String message log message MSG_INFO public void log String message int msgLevel fireMessageLogged this message msgLevel public void log Task task String message int msgLevel fireMessageLogged task message msgLevel public void log Target target String message int msgLevel fireMessageLogged target message msgLevel public FilterSet getGlobalFilterSet return globalFilterSet public void setProperty String name String value PropertyHelper getPropertyHelper this setProperty null name value true public void setNewProperty String name String value PropertyHelper getPropertyHelper this setNewProperty null name value public void setUserProperty String name String value PropertyHelper getPropertyHelper this setUserProperty null name value public void setInheritedProperty String name String value PropertyHelper ph PropertyHelper getPropertyHelper this ph setInheritedProperty null name value private void setPropertyInternal String name String value PropertyHelper ph PropertyHelper getPropertyHelper this ph setProperty null name value false public String getProperty String name PropertyHelper ph PropertyHelper getPropertyHelper this return String ph getProperty null name public String replaceProperties String value throws BuildException PropertyHelper ph PropertyHelper getPropertyHelper this return ph replaceProperties null value null public String getUserProperty String name PropertyHelper ph PropertyHelper getPropertyHelper this return String ph getUserProperty null name public Hashtable getProperties PropertyHelper ph PropertyHelper getPropertyHelper this return ph getProperties public Hashtable getUserProperties PropertyHelper ph PropertyHelper getPropertyHelper this return ph getUserProperties public void copyUserProperties Project other PropertyHelper ph PropertyHelper getPropertyHelper this ph copyUserProperties other public void copyInheritedProperties Project other PropertyHelper ph PropertyHelper getPropertyHelper this ph copyInheritedProperties other public void setDefaultTarget String defaultTarget this defaultTarget defaultTarget public String getDefaultTarget return defaultTarget public void setDefault String defaultTarget this defaultTarget defaultTarget public void setName String name setUserProperty name this name name public String getName return name public void setDescription String description this description description public String getDescription if description null description Description getDescription this return description public void addFilter String token String value if token null return globalFilterSet addFilter new FilterSet Filter token value public Hashtable getFilters return globalFilterSet getFilterHash public void setBasedir String baseD throws BuildException setBaseDir new File baseD public void setBaseDir File baseDir throws BuildException baseDir fileUtils normalize baseDir getAbsolutePath if baseDir exists throw new BuildException baseDir getAbsolutePath if baseDir isDirectory throw new BuildException baseDir getAbsolutePath this baseDir baseDir setPropertyInternal this baseDir getPath String msg this baseDir log msg MSG_VERBOSE public File getBaseDir if baseDir null try setBasedir catch BuildException ex ex printStackTrace return baseDir public void setKeepGoingMode boolean keepGoingMode this keepGoingMode keepGoingMode public boolean isKeepGoingMode return this keepGoingMode public static String getJavaVersion return JavaEnvUtils getJavaVersion public void setJavaVersionProperty throws BuildException String javaVersion JavaEnvUtils getJavaVersion setPropertyInternal javaVersion if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_0 throw new BuildException log javaVersion System getProperty MSG_VERBOSE log System getProperty MSG_VERBOSE public void setSystemProperties Properties systemP System getProperties Enumeration systemP keys while hasMoreElements Object name nextElement String value systemP get name toString this setPropertyInternal name toString value public void addTaskDefinition String taskName Class taskClass throws BuildException ComponentHelper getComponentHelper this addTaskDefinition taskName taskClass public void checkTaskClass final Class taskClass throws BuildException ComponentHelper getComponentHelper this checkTaskClass taskClass if Modifier isPublic taskClass getModifiers final String message taskClass log message Project MSG_ERR throw new BuildException message if Modifier isAbstract taskClass getModifiers final String message taskClass log message Project MSG_ERR throw new BuildException message try taskClass getConstructor null catch NoSuchMethodException final String message taskClass log message Project MSG_ERR throw new BuildException message if Task class isAssignableFrom taskClass TaskAdapter checkTaskClass taskClass this public Hashtable getTaskDefinitions return ComponentHelper getComponentHelper this getTaskDefinitions public void addDataTypeDefinition String typeName Class typeClass ComponentHelper getComponentHelper this addDataTypeDefinition typeName typeClass public Hashtable getDataTypeDefinitions return ComponentHelper getComponentHelper this getDataTypeDefinitions public void addTarget Target target throws BuildException String name target getName if targets get name null throw new BuildException name addOrReplaceTarget name target public void addTarget String targetName Target target throws BuildException if targets get targetName null throw new BuildException targetName addOrReplaceTarget targetName target public void addOrReplaceTarget Target target addOrReplaceTarget target getName target public void addOrReplaceTarget String targetName Target target String msg targetName log msg MSG_DEBUG target setProject this targets put targetName target public Hashtable getTargets return targets public Task createTask String taskType throws BuildException return ComponentHelper getComponentHelper this createTask taskType public Object createDataType String typeName throws BuildException return ComponentHelper getComponentHelper this createDataType typeName public void executeTargets Vector targetNames throws BuildException for int targetNames size executeTarget String targetNames elementAt public void demuxOutput String output boolean isWarning Task task getThreadTask Thread currentThread if task null log output isWarning MSG_WARN MSG_INFO else if isWarning task handleErrorOutput output else task handleOutput output public int defaultInput byte buffer int offset int length throws IOException if defaultInputStream null System out flush return defaultInputStream read buffer offset length else throw new EOFException public int demuxInput byte buffer int offset int length throws IOException Task task getThreadTask Thread currentThread if task null return defaultInput buffer offset length else return task handleInput buffer offset length public void demuxFlush String output boolean isError Task task getThreadTask Thread currentThread if task null fireMessageLogged this output isError MSG_ERR MSG_INFO else if isError task handleErrorFlush output else task handleFlush output public void executeTarget String targetName throws BuildException if targetName null String msg throw new BuildException msg Vector sortedTargets topoSort targetName targets Set succeededTargets new HashSet for Enumeration iter sortedTargets elements iter hasMoreElements Target curtarget Target iter nextElement boolean canExecute true for Enumeration depIter curtarget getDependencies depIter hasMoreElements String dependencyName String depIter nextElement if succeededTargets contains dependencyName canExecute false log curtarget curtarget getName dependencyName MSG_ERR break if canExecute Throwable thrownException null try curtarget performTasks succeededTargets add curtarget getName catch RuntimeException ex if keepGoingMode thrownException ex catch Throwable ex if keepGoingMode throw new BuildException ex thrownException ex if thrownException null if thrownException instanceof BuildException log curtarget curtarget getName thrownException getMessage MSG_ERR if buildException null buildException BuildException thrownException else log curtarget curtarget getName thrownException getMessage MSG_ERR thrownException printStackTrace System err if buildException null buildException new BuildException thrownException break if buildException null throw buildException public File resolveFile String fileName File rootDir return fileUtils resolveFile rootDir fileName public File resolveFile String fileName return fileUtils resolveFile baseDir fileName public static String translatePath String toProcess if toProcess null toProcess length return StringBuffer path new StringBuffer toProcess length PathTokenizer tokenizer new PathTokenizer toProcess while tokenizer hasMoreTokens String pathComponent tokenizer nextToken pathComponent pathComponent replace File separatorChar pathComponent pathComponent replace File separatorChar if path length path append File pathSeparatorChar path append pathComponent return path toString public void copyFile String sourceFile String destFile throws IOException fileUtils copyFile sourceFile destFile public void copyFile String sourceFile String destFile boolean filtering throws IOException fileUtils copyFile sourceFile destFile filtering globalFilters null public void copyFile String sourceFile String destFile boolean filtering boolean overwrite throws IOException fileUtils copyFile sourceFile destFile filtering globalFilters null overwrite public void copyFile String sourceFile String destFile boolean filtering boolean overwrite boolean preserveLastModified throws IOException fileUtils copyFile sourceFile destFile filtering globalFilters null overwrite preserveLastModified public void copyFile File sourceFile File destFile throws IOException fileUtils copyFile sourceFile destFile public void copyFile File sourceFile File destFile boolean filtering throws IOException fileUtils copyFile sourceFile destFile filtering globalFilters null public void copyFile File sourceFile File destFile boolean filtering boolean overwrite throws IOException fileUtils copyFile sourceFile destFile filtering globalFilters null overwrite public void copyFile File sourceFile File destFile boolean filtering boolean overwrite boolean preserveLastModified throws IOException fileUtils copyFile sourceFile destFile filtering globalFilters null overwrite preserveLastModified public void setFileLastModified File file long time throws BuildException if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 log file Project MSG_WARN return fileUtils setFileLastModified file time log file MSG_VERBOSE public static boolean toBoolean String return equalsIgnoreCase equalsIgnoreCase equalsIgnoreCase public final Vector topoSort String root Hashtable targets throws BuildException Vector ret new Vector Hashtable state new Hashtable Stack visiting new Stack tsort root targets state visiting ret log root ret MSG_VERBOSE for Enumeration en targets keys en hasMoreElements String curTarget String en nextElement String st String state get curTarget if st null tsort curTarget targets state visiting ret else if st VISITING throw new RuntimeException curTarget log ret MSG_VERBOSE return ret private final void tsort String root Hashtable targets Hashtable state Stack visiting Vector ret throws BuildException state put root VISITING visiting push root Target target Target targets get root if target null StringBuffer sb new StringBuffer sb append root sb append visiting pop if visiting empty String parent String visiting peek sb append sb append parent sb append throw new BuildException new String sb for Enumeration en target getDependencies en hasMoreElements String cur String en nextElement String String state get cur if null tsort cur targets state visiting ret else if VISITING throw makeCircularException cur visiting String String visiting pop if root throw new RuntimeException root state put root VISITED ret addElement target private static BuildException makeCircularException String end Stack stk StringBuffer sb new StringBuffer sb append end String do String stk pop sb append sb append while equals end return new BuildException new String sb public void addReference String name Object value synchronized references Object old AntRefTable references getReal name if old value return if old null old instanceof UnknownElement log name MSG_WARN log name MSG_DEBUG references put name value public Hashtable getReferences return references public Object getReference String key return references get key public String getElementName Object element return ComponentHelper getComponentHelper this getElementName element public void fireBuildStarted BuildEvent event new BuildEvent this Iterator iter listeners iterator while iter hasNext BuildListener listener BuildListener iter next listener buildStarted event public void fireBuildFinished Throwable exception BuildEvent event new BuildEvent this event setException exception Iterator iter listeners iterator while iter hasNext BuildListener listener BuildListener iter next listener buildFinished event protected void fireTargetStarted Target target BuildEvent event new BuildEvent target Iterator iter listeners iterator while iter hasNext BuildListener listener BuildListener iter next listener targetStarted event protected void fireTargetFinished Target target Throwable exception BuildEvent event new BuildEvent target event setException exception Iterator iter listeners iterator while iter hasNext BuildListener listener BuildListener iter next listener targetFinished event protected void fireTaskStarted Task task registerThreadTask Thread currentThread task BuildEvent event new BuildEvent task Iterator iter listeners iterator while iter hasNext BuildListener listener BuildListener iter next listener taskStarted event protected void fireTaskFinished Task task Throwable exception registerThreadTask Thread currentThread null System out flush System err flush BuildEvent event new BuildEvent task event setException exception Iterator iter listeners iterator while iter hasNext BuildListener listener BuildListener iter next listener taskFinished event private void fireMessageLoggedEvent BuildEvent event String message int priority if message endsWith StringUtils LINE_SEP int endIndex message length StringUtils LINE_SEP length event setMessage message substring endIndex priority else event setMessage message priority synchronized this if loggingMessage throw new BuildException priority MSG_ERR try loggingMessage true Iterator iter listeners iterator while iter hasNext BuildListener listener BuildListener iter next listener messageLogged event finally loggingMessage false protected void fireMessageLogged Project project String message int priority BuildEvent event new BuildEvent project fireMessageLoggedEvent event message priority protected void fireMessageLogged Target target String message int priority BuildEvent event new BuildEvent target fireMessageLoggedEvent event message priority protected void fireMessageLogged Task task String message int priority BuildEvent event new BuildEvent task fireMessageLoggedEvent event message priority public synchronized void registerThreadTask Thread thread Task task if task null threadTasks put thread task threadGroupTasks put thread getThreadGroup task else threadTasks remove thread threadGroupTasks remove thread getThreadGroup public Task getThreadTask Thread thread Task task Task threadTasks get thread if task null ThreadGroup group thread getThreadGroup while task null group null task Task threadGroupTasks get group group group getParent return task private static class AntRefTable extends Hashtable private Project project public AntRefTable Project project super this project project public Object getReal Object key return super get key public Object get Object key Object super get key if instanceof UnknownElement UnknownElement ue UnknownElement ue maybeConfigure ue getRealThing return public final void setProjectReference final Object obj if obj instanceof ProjectComponent ProjectComponent obj setProject this return try Method method obj getClass getMethod new Class Project class if method null method invoke obj new Object this catch Throwable', 'bug': '1'}
{'sequence': 'public class RecorderEntry implements BuildLogger private String filename null private boolean record true private int loglevel Project MSG_INFO private PrintStream out null private long targetStartTime private boolean emacsMode false protected RecorderEntry String name targetStartTime System currentTimeMillis filename name public String getFilename return filename public void setRecordState Boolean state if state null record state booleanValue public void buildStarted BuildEvent event log Project MSG_DEBUG public void buildFinished BuildEvent event log Project MSG_DEBUG Throwable error event getException if error null out println StringUtils LINE_SEP else out println StringUtils LINE_SEP StringUtils LINE_SEP error printStackTrace out out flush out close public void targetStarted BuildEvent event log event getTarget Project MSG_DEBUG log StringUtils LINE_SEP event getTarget getName Project MSG_INFO targetStartTime System currentTimeMillis public void targetFinished BuildEvent event log event getTarget Project MSG_DEBUG String time formatTime System currentTimeMillis targetStartTime log event getTarget time Project MSG_VERBOSE out flush public void taskStarted BuildEvent event log event getTask Project MSG_DEBUG public void taskFinished BuildEvent event log event getTask Project MSG_DEBUG out flush public void messageLogged BuildEvent event log Project MSG_DEBUG StringBuffer buf new StringBuffer if event getTask null String name event getTask getTaskName if emacsMode String label name int size DefaultLogger LEFT_COLUMN_SIZE label length for int size buf append buf append label buf append event getMessage log buf toString event getPriority private void log String mesg int level if record level loglevel out println mesg public void setMessageOutputLevel int level if level Project MSG_ERR level Project MSG_DEBUG loglevel level public void setOutputPrintStream PrintStream output out output public void setEmacsMode boolean emacsMode this emacsMode emacsMode public void setErrorPrintStream PrintStream err out err private static String formatTime long millis long seconds millis long minutes seconds if minutes return Long toString minutes minutes Long toString seconds seconds else return Long toString seconds seconds', 'bug': '1'}
{'sequence': 'public class Javac extends MatchingTask private static final String FAIL_MSG private Path src private File destDir private Path compileClasspath private Path compileSourcepath private String encoding private boolean debug false private boolean optimize false private boolean deprecation false private boolean depend false private boolean verbose false private String target private Path bootclasspath private Path extdirs private boolean includeAntRuntime true private boolean includeJavaRuntime false private boolean fork false private String forkedExecutable null private boolean nowarn false private String memoryInitialSize private String memoryMaximumSize private FacadeTaskHelper facade null protected boolean failOnError true protected boolean listFiles false protected File compileList new File private String source private String debugLevel private File tmpDir public Javac if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 facade new FacadeTaskHelper else if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_2 facade new FacadeTaskHelper else if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_3 facade new FacadeTaskHelper else if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_4 facade new FacadeTaskHelper else facade new FacadeTaskHelper public String getDebugLevel return debugLevel public void setDebugLevel String this debugLevel public String getSource return source public void setSource String this source public Path createSrc if src null src new Path getProject return src createPath protected Path recreateSrc src null return createSrc public void setSrcdir Path srcDir if src null src srcDir else src append srcDir public Path getSrcdir return src public void setDestdir File destDir this destDir destDir public File getDestdir return destDir public void setSourcepath Path sourcepath if compileSourcepath null compileSourcepath sourcepath else compileSourcepath append sourcepath public Path getSourcepath return compileSourcepath public Path createSourcepath if compileSourcepath null compileSourcepath new Path getProject return compileSourcepath createPath public void setSourcepathRef Reference createSourcepath setRefid public void setClasspath Path classpath if compileClasspath null compileClasspath classpath else compileClasspath append classpath public Path getClasspath return compileClasspath public Path createClasspath if compileClasspath null compileClasspath new Path getProject return compileClasspath createPath public void setClasspathRef Reference createClasspath setRefid public void setBootclasspath Path bootclasspath if this bootclasspath null this bootclasspath bootclasspath else this bootclasspath append bootclasspath public Path getBootclasspath return bootclasspath public Path createBootclasspath if bootclasspath null bootclasspath new Path getProject return bootclasspath createPath public void setBootClasspathRef Reference createBootclasspath setRefid public void setExtdirs Path extdirs if this extdirs null this extdirs extdirs else this extdirs append extdirs public Path getExtdirs return extdirs public Path createExtdirs if extdirs null extdirs new Path getProject return extdirs createPath public void setListfiles boolean list listFiles list public boolean getListfiles return listFiles public void setFailonerror boolean fail failOnError fail public void setProceed boolean proceed failOnError proceed public boolean getFailonerror return failOnError public void setDeprecation boolean deprecation this deprecation deprecation public boolean getDeprecation return deprecation public void setMemoryInitialSize String memoryInitialSize this memoryInitialSize memoryInitialSize public String getMemoryInitialSize return memoryInitialSize public void setMemoryMaximumSize String memoryMaximumSize this memoryMaximumSize memoryMaximumSize public String getMemoryMaximumSize return memoryMaximumSize public void setEncoding String encoding this encoding encoding public String getEncoding return encoding public void setDebug boolean debug this debug debug public boolean getDebug return debug public void setOptimize boolean optimize this optimize optimize public boolean getOptimize return optimize public void setDepend boolean depend this depend depend public boolean getDepend return depend public void setVerbose boolean verbose this verbose verbose public boolean getVerbose return verbose public void setTarget String target this target target public String getTarget return target public void setIncludeantruntime boolean include includeAntRuntime include public boolean getIncludeantruntime return includeAntRuntime public void setIncludejavaruntime boolean include includeJavaRuntime include public boolean getIncludejavaruntime return includeJavaRuntime public void setFork boolean fork public void setExecutable String forkExec forkedExecutable forkExec public String getExecutable return forkedExecutable public boolean isForkedJavac return fork equals getCompiler public String getJavacExecutable if forkedExecutable null isForkedJavac forkedExecutable getSystemJavac else if forkedExecutable null isForkedJavac forkedExecutable null return forkedExecutable public void setNowarn boolean flag this nowarn flag public boolean getNowarn return nowarn public ImplementationSpecificArgument createCompilerArg ImplementationSpecificArgument arg new ImplementationSpecificArgument facade addImplementationArgument arg return arg public String getCurrentCompilerArgs String chosen facade getExplicitChoice facade setImplementation getCompiler try return facade getArgs finally facade setImplementation chosen public void setTempdir File tmpDir this tmpDir tmpDir public File getTempdir return tmpDir public void execute throws BuildException checkParameters resetFileLists String list src list for int list length File srcDir getProject resolveFile list if srcDir exists throw new BuildException srcDir getPath getLocation DirectoryScanner ds this getDirectoryScanner srcDir String files ds getIncludedFiles scanDir srcDir destDir null destDir srcDir files compile protected void resetFileLists compileList new File protected void scanDir File srcDir File destDir String files GlobPatternMapper new GlobPatternMapper setFrom setTo SourceFileScanner sfs new SourceFileScanner this File newFiles sfs restrictAsFiles files srcDir destDir if newFiles length File newCompileList new File compileList length newFiles length System arraycopy compileList newCompileList compileList length System arraycopy newFiles newCompileList compileList length newFiles length compileList newCompileList public File getFileList return compileList protected boolean isJdkCompiler String compilerImpl return equals compilerImpl equals compilerImpl equals compilerImpl equals compilerImpl equals compilerImpl equals compilerImpl protected String getSystemJavac return JavaEnvUtils getJdkExecutable public void setCompiler String compiler facade setImplementation compiler public String getCompiler String compilerImpl getCompilerVersion if fork if isJdkCompiler compilerImpl if facade hasBeenSet log Project MSG_WARN compilerImpl else log Project MSG_WARN return compilerImpl public String getCompilerVersion facade setMagicValue getProject getProperty return facade getImplementation protected void checkParameters throws BuildException if src null throw new BuildException getLocation if src size throw new BuildException getLocation if destDir null destDir isDirectory throw new BuildException destDir getLocation protected void compile String compilerImpl getCompiler if compileList length log compileList length compileList length destDir null destDir if listFiles for int compileList length String filename compileList getAbsolutePath log filename CompilerAdapter adapter CompilerAdapterFactory getCompiler compilerImpl this adapter setJavac this if adapter execute if failOnError throw new BuildException FAIL_MSG getLocation else log FAIL_MSG Project MSG_ERR public class ImplementationSpecificArgument extends org apache tools ant util facade ImplementationSpecificArgument public void setCompiler String impl super setImplementation impl', 'bug': '1'}
{'sequence': 'public class ImportTask extends Task private String file private boolean optional private static final FileUtils FILE_UTILS FileUtils newFileUtils public void setOptional boolean optional this optional true public void setFile String file this file file public void execute if file null if getOwningTarget null equals getOwningTarget getName ProjectHelper helper ProjectHelper getProject getReference if getLocation null getLocation getFileName null File buildFile new File getLocation getFileName buildFile new File buildFile getAbsolutePath getProject log file buildFile getAbsolutePath Project MSG_VERBOSE File buildFileParent new File buildFile getParent String message buildFile getAbsolutePath if optional getProject log message Project MSG_VERBOSE return else throw new BuildException message getProject log return try catch BuildException ex throw ProjectHelper addLocationToBuildException ex getLocation private static String getPath File file try return file getCanonicalPath catch IOException return file getAbsolutePath', 'bug': '1'}
{'sequence': 'public class Tar extends MatchingTask public static final String WARN public static final String FAIL public static final String TRUNCATE public static final String GNU public static final String OMIT File tarFile File baseDir private TarLongFileMode longFileMode new TarLongFileMode Vector filesets new Vector Vector fileSetFiles new Vector private boolean longWarningGiven false private TarCompressionMethod compression new TarCompressionMethod public TarFileSet createTarFileSet TarFileSet fileset new TarFileSet filesets addElement fileset return fileset public void setTarfile File tarFile this tarFile tarFile public void setDestFile File destFile this tarFile destFile public void setBasedir File baseDir this baseDir baseDir public void setLongfile String mode log this longFileMode new TarLongFileMode longFileMode setValue mode public void setLongfile TarLongFileMode mode this longFileMode mode public void setCompression TarCompressionMethod mode this compression mode public void execute throws BuildException if tarFile null throw new BuildException getLocation if tarFile exists tarFile isDirectory throw new BuildException getLocation if tarFile exists tarFile canWrite throw new BuildException getLocation Vector savedFileSets Vector filesets clone try if baseDir null if baseDir exists throw new BuildException getLocation TarFileSet mainFileSet new TarFileSet fileset mainFileSet setDir baseDir filesets addElement mainFileSet if filesets size throw new BuildException getLocation boolean upToDate true for Enumeration filesets elements hasMoreElements TarFileSet fs TarFileSet nextElement String files fs getFiles getProject if archiveIsUpToDate files fs getDir getProject upToDate false for int files length if tarFile equals new File fs getDir getProject files throw new BuildException getLocation if upToDate log tarFile getAbsolutePath Project MSG_INFO return log tarFile getAbsolutePath Project MSG_INFO TarOutputStream tOut null try tOut new TarOutputStream compression compress new BufferedOutputStream new FileOutputStream tarFile tOut setDebug true if longFileMode isTruncateMode tOut setLongFileMode TarOutputStream LONGFILE_TRUNCATE else if longFileMode isFailMode longFileMode isOmitMode tOut setLongFileMode TarOutputStream LONGFILE_ERROR else tOut setLongFileMode TarOutputStream LONGFILE_GNU longWarningGiven false for Enumeration filesets elements hasMoreElements TarFileSet fs TarFileSet nextElement String files fs getFiles getProject if files length fs getFullpath length throw new BuildException for int files length File new File fs getDir getProject files String name files replace File separatorChar tarFile tOut name fs catch IOException ioe String msg ioe getMessage throw new BuildException msg ioe getLocation finally if tOut null try tOut close catch IOException finally filesets savedFileSets protected void tarFile File file TarOutputStream tOut String vPath TarFileSet tarFileSet throws IOException FileInputStream fIn null String fullpath tarFileSet getFullpath if fullpath length vPath fullpath else if vPath length return if file isDirectory vPath endsWith vPath String prefix tarFileSet getPrefix if prefix length prefix endsWith prefix prefix vPath prefix vPath if vPath startsWith tarFileSet getPreserveLeadingSlashes int vPath length if return vPath vPath substring try if vPath length TarConstants NAMELEN if longFileMode isOmitMode log vPath Project MSG_INFO return else if longFileMode isWarnMode log vPath TarConstants NAMELEN Project MSG_WARN if longWarningGiven log Project MSG_WARN longWarningGiven true else if longFileMode isFailMode throw new BuildException vPath TarConstants NAMELEN getLocation TarEntry te new TarEntry vPath te setModTime file lastModified if file isDirectory te setSize file length te setMode tarFileSet getMode else te setMode tarFileSet getDirMode te setUserName tarFileSet getUserName te setGroupName tarFileSet getGroup tOut putNextEntry te if file isDirectory fIn new FileInputStream file byte buffer new byte int count do tOut write buffer count count fIn read buffer buffer length while count tOut closeEntry finally if fIn null fIn close protected boolean archiveIsUpToDate String files return archiveIsUpToDate files baseDir protected boolean archiveIsUpToDate String files File dir SourceFileScanner sfs new SourceFileScanner this MergingMapper mm new MergingMapper mm setTo tarFile getAbsolutePath return sfs restrict files dir null mm length public static class TarFileSet extends FileSet private String files null private int fileMode UnixStat FILE_FLAG UnixStat DEFAULT_FILE_PERM private int dirMode UnixStat DIR_FLAG UnixStat DEFAULT_DIR_PERM private String userName private String groupName private String prefix private String fullpath private boolean preserveLeadingSlashes false public TarFileSet FileSet fileset super fileset public TarFileSet super public String getFiles Project if files null DirectoryScanner ds getDirectoryScanner String directories ds getIncludedDirectories String filesPerSe ds getIncludedFiles files new String directories length filesPerSe length System arraycopy directories files directories length System arraycopy filesPerSe files directories length filesPerSe length return files public void setMode String octalString this fileMode UnixStat FILE_FLAG Integer parseInt octalString public int getMode return fileMode public void setDirMode String octalString this dirMode UnixStat DIR_FLAG Integer parseInt octalString public int getDirMode return dirMode public void setUserName String userName this userName userName public String getUserName return userName public void setGroup String groupName this groupName groupName public String getGroup return groupName public void setPrefix String prefix this prefix prefix public String getPrefix return prefix public void setFullpath String fullpath this fullpath fullpath public String getFullpath return fullpath public void setPreserveLeadingSlashes boolean this preserveLeadingSlashes public boolean getPreserveLeadingSlashes return preserveLeadingSlashes public static class TarLongFileMode extends EnumeratedAttribute public static final String WARN public static final String FAIL public static final String TRUNCATE public static final String GNU public static final String OMIT private final String validModes WARN FAIL TRUNCATE GNU OMIT public TarLongFileMode super setValue WARN public String getValues return validModes public boolean isTruncateMode return TRUNCATE equalsIgnoreCase getValue public boolean isWarnMode return WARN equalsIgnoreCase getValue public boolean isGnuMode return GNU equalsIgnoreCase getValue public boolean isFailMode return FAIL equalsIgnoreCase getValue public boolean isOmitMode return OMIT equalsIgnoreCase getValue public static final class TarCompressionMethod extends EnumeratedAttribute private static final String NONE private static final String GZIP private static final String BZIP2 public TarCompressionMethod super setValue NONE public String getValues return new String NONE GZIP BZIP2 private OutputStream compress final OutputStream ostream throws IOException final String value getValue if GZIP equals value return new GZIPOutputStream ostream else if BZIP2 equals value ostream write ostream write return new CBZip2OutputStream ostream return ostream', 'bug': '1'}
{'sequence': 'class CvsTagEntry String m_filename String m_prevRevision String m_revision public CvsTagEntry String filename this filename null null public CvsTagEntry String filename String revision this filename revision null public CvsTagEntry String filename String revision String prevRevision m_filename filename m_revision revision m_prevRevision prevRevision public String getFile return m_filename public String getRevision return m_revision public String getPreviousRevision return m_prevRevision public String toString StringBuffer buffer new StringBuffer buffer append m_filename if m_revision null buffer append if m_prevRevision null buffer append append m_prevRevision else if m_revision null m_prevRevision null buffer append append m_revision else if m_revision null m_prevRevision null buffer append append m_prevRevision append append m_revision return buffer toString', 'bug': '0'}
{'sequence': 'public class Redirector private File out private File error private File input private boolean logError false private ByteArrayOutputStream baos null private ByteArrayOutputStream errorBaos null private String outputProperty private String errorProperty private String inputString private boolean append false private Task managingTask private OutputStream outputStream null private OutputStream errorStream null private InputStream inputStream null private PrintStream outPrintStream null private PrintStream errorPrintStream null public Redirector Task managingTask this managingTask managingTask public void setInput File input this input input public void setInputString String inputString this inputString inputString public void setOutput File out this out out public void setLogError boolean logError this logError logError public void setError File error this error error public void setOutputProperty String outputProperty this outputProperty outputProperty public void setAppend boolean append this append append public void setErrorProperty String errorProperty this errorProperty errorProperty private void setPropertyFromBAOS ByteArrayOutputStream baos String propertyName throws IOException BufferedReader in new BufferedReader new StringReader Execute toString baos String line null StringBuffer val new StringBuffer while line in readLine null if val length val append StringUtils LINE_SEP val append line managingTask getProject setNewProperty propertyName val toString public void createStreams if out null outputProperty null outputStream new LogOutputStream managingTask Project MSG_INFO errorStream new LogOutputStream managingTask Project MSG_WARN else if out null outputStream new LazyFileOutputStream out append managingTask log out Project MSG_VERBOSE if outputProperty null baos new ByteArrayOutputStream managingTask log outputProperty Project MSG_VERBOSE if out null outputStream baos else outputStream new TeeOutputStream outputStream baos else baos null errorStream outputStream if logError errorStream new LogOutputStream managingTask Project MSG_WARN if error null errorStream new LazyFileOutputStream error append managingTask log error Project MSG_VERBOSE if errorProperty null errorBaos new ByteArrayOutputStream managingTask log errorProperty Project MSG_VERBOSE if error null errorStream errorBaos else errorStream new TeeOutputStream errorStream errorBaos else errorBaos null if input null inputString null throw new BuildException if input null try inputStream new FileInputStream input catch FileNotFoundException fne throw new BuildException input fne else if inputString null inputStream new ByteArrayInputStream inputString getBytes public ExecuteStreamHandler createHandler throws BuildException createStreams return new PumpStreamHandler outputStream errorStream inputStream protected void handleOutput String output if outPrintStream null outPrintStream new PrintStream outputStream outPrintStream print output protected int handleInput byte buffer int offset int length throws IOException if inputStream null return managingTask getProject defaultInput buffer offset length else return inputStream read buffer offset length protected void handleFlush String output if outPrintStream null outPrintStream new PrintStream outputStream outPrintStream print output outPrintStream flush protected void handleErrorOutput String output if errorPrintStream null errorPrintStream new PrintStream errorStream errorPrintStream print output protected void handleErrorFlush String output if errorPrintStream null errorPrintStream new PrintStream errorStream errorPrintStream print output public OutputStream getOutputStream return outputStream public OutputStream getErrorStream return errorStream public InputStream getInputStream return inputStream public void complete throws IOException System out flush System err flush if inputStream null inputStream close if outputStream instanceof LazyFileOutputStream LazyFileOutputStream outputStream open outputStream close if errorStream outputStream if errorStream instanceof LazyFileOutputStream LazyFileOutputStream errorStream open errorStream close if baos null setPropertyFromBAOS baos outputProperty if errorBaos null setPropertyFromBAOS errorBaos errorProperty', 'bug': '1'}
{'sequence': 'public final class JavaClassHelper private static final String LS System getProperty public static final StringBuffer getConstants byte bytes throws IOException final StringBuffer sb new StringBuffer final ByteArrayInputStream bis new ByteArrayInputStream bytes final ClassParser parser new ClassParser bis final JavaClass javaClass parser parse final Field fields javaClass getFields for int fields length final Field field fields if field null final ConstantValue cv field getConstantValue if cv null String cvs cv toString if cvs startsWith cvs endsWith cvs cvs substring cvs length sb append field getName sb append sb append cvs sb append LS return sb', 'bug': '0'}
{'sequence': 'public class TempFile extends Task private String property private File destDir null private String prefix private String suffix public void setProperty String property this property property public void setDestDir File destDir this destDir destDir public void setPrefix String prefix this prefix prefix public void setSuffix String suffix this suffix suffix public void execute throws BuildException if property null property length throw new BuildException if destDir null destDir getProject resolveFile FileUtils utils FileUtils newFileUtils File tfile utils createTempFile prefix suffix destDir getProject setNewProperty property tfile toString', 'bug': '1'}
{'sequence': 'public abstract class BaseSelector extends DataType implements FileSelector private String errmsg null public BaseSelector public void setError String msg if errmsg null errmsg msg public String getError return errmsg public void verifySettings public void validate if getError null verifySettings if getError null throw new BuildException errmsg public abstract boolean isSelected File basedir String filename File file', 'bug': '0'}
{'sequence': 'public class AndSelector extends BaseSelectorContainer public AndSelector public String toString StringBuffer buf new StringBuffer if hasSelectors buf append buf append super toString buf append return buf toString public boolean isSelected File basedir String filename File file validate Enumeration selectorElements boolean result while hasMoreElements result FileSelector nextElement isSelected basedir filename file if result return false return true', 'bug': '0'}
{'sequence': 'public class DemuxInputStream extends InputStream private Project project public DemuxInputStream Project project this project project public int read throws IOException byte buffer new byte if project demuxInput buffer return return buffer public int read byte buffer int offset int length throws IOException return project demuxInput buffer offset length', 'bug': '0'}
{'sequence': 'public class PatternSet extends DataType implements Cloneable private Vector includeList new Vector private Vector excludeList new Vector private Vector includesFileList new Vector private Vector excludesFileList new Vector public class NameEntry private String name private String ifCond private String unlessCond public void setName String name this name name public void setIf String cond ifCond cond public void setUnless String cond unlessCond cond public String getName return name public String evalName Project return valid name null private boolean valid Project if ifCond null getProperty ifCond null return false else if unlessCond null getProperty unlessCond null return false return true public String toString StringBuffer buf new StringBuffer name if ifCond null unlessCond null buf append String connector if ifCond null buf append buf append ifCond connector if unlessCond null buf append connector buf append buf append unlessCond return buf toString public PatternSet super public void setRefid Reference throws BuildException if includeList isEmpty excludeList isEmpty throw tooManyAttributes super setRefid public void addConfiguredPatternset PatternSet if isReference throw noChildrenAllowed String nestedIncludes getIncludePatterns getProject String nestedExcludes getExcludePatterns getProject if nestedIncludes null for int nestedIncludes length createInclude setName nestedIncludes if nestedExcludes null for int nestedExcludes length createExclude setName nestedExcludes public NameEntry createInclude if isReference throw noChildrenAllowed return addPatternToList includeList public NameEntry createIncludesFile if isReference throw noChildrenAllowed return addPatternToList includesFileList public NameEntry createExclude if isReference throw noChildrenAllowed return addPatternToList excludeList public NameEntry createExcludesFile if isReference throw noChildrenAllowed return addPatternToList excludesFileList public void setIncludes String includes if isReference throw tooManyAttributes if includes null includes length StringTokenizer tok new StringTokenizer includes false while tok hasMoreTokens createInclude setName tok nextToken public void setExcludes String excludes if isReference throw tooManyAttributes if excludes null excludes length StringTokenizer tok new StringTokenizer excludes false while tok hasMoreTokens createExclude setName tok nextToken private NameEntry addPatternToList Vector list NameEntry result new NameEntry list addElement result return result public void setIncludesfile File includesFile throws BuildException if isReference throw tooManyAttributes createIncludesFile setName includesFile getAbsolutePath public void setExcludesfile File excludesFile throws BuildException if isReference throw tooManyAttributes createExcludesFile setName excludesFile getAbsolutePath private void readPatterns File patternfile Vector patternlist Project throws BuildException BufferedReader patternReader null try patternReader new BufferedReader new FileReader patternfile String line patternReader readLine while line null if line length line replaceProperties line addPatternToList patternlist setName line line patternReader readLine catch IOException ioe String msg patternfile throw new BuildException msg ioe finally if null patternReader try patternReader close catch IOException ioe public void append PatternSet other Project if isReference throw new BuildException String incl other getIncludePatterns if incl null for int incl length createInclude setName incl String excl other getExcludePatterns if excl null for int excl length createExclude setName excl public String getIncludePatterns Project if isReference return getRef getIncludePatterns else readFiles return makeArray includeList public String getExcludePatterns Project if isReference return getRef getExcludePatterns else readFiles return makeArray excludeList boolean hasPatterns Project if isReference return getRef hasPatterns else return includesFileList size excludesFileList size includeList size excludeList size private PatternSet getRef Project if isChecked Stack stk new Stack stk push this dieOnCircularReference stk Object getRefid getReferencedObject if instanceof PatternSet String msg getRefid getRefId throw new BuildException msg else return PatternSet private String makeArray Vector list Project if list size return null Vector tmpNames new Vector for Enumeration list elements hasMoreElements NameEntry ne NameEntry nextElement String pattern ne evalName if pattern null pattern length tmpNames addElement pattern String result new String tmpNames size tmpNames copyInto result return result private void readFiles Project if includesFileList size Enumeration includesFileList elements while hasMoreElements NameEntry ne NameEntry nextElement String fileName ne evalName if fileName null File inclFile resolveFile fileName if inclFile exists throw new BuildException inclFile getAbsolutePath readPatterns inclFile includeList includesFileList removeAllElements if excludesFileList size Enumeration excludesFileList elements while hasMoreElements NameEntry ne NameEntry nextElement String fileName ne evalName if fileName null File exclFile resolveFile fileName if exclFile exists throw new BuildException exclFile getAbsolutePath readPatterns exclFile excludeList excludesFileList removeAllElements public String toString return includeList excludeList public Object clone if isReference return getRef getProject clone else try PatternSet ps PatternSet super clone ps includeList Vector includeList clone ps excludeList Vector excludeList clone ps includesFileList Vector includesFileList clone ps excludesFileList Vector excludesFileList clone return ps catch CloneNotSupportedException throw new BuildException', 'bug': '1'}
{'sequence': 'public class CompilerAdapterFactory private static final String MODERN_COMPILER private CompilerAdapterFactory public static CompilerAdapter getCompiler String compilerType Task task throws BuildException boolean isClassicCompilerSupported true if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_4 isClassicCompilerSupported false if compilerType equalsIgnoreCase return new Jikes if compilerType equalsIgnoreCase return new JavacExternal if compilerType equalsIgnoreCase compilerType equalsIgnoreCase compilerType equalsIgnoreCase if isClassicCompilerSupported return new Javac12 else task log Project MSG_WARN compilerType if compilerType equalsIgnoreCase compilerType equalsIgnoreCase compilerType equalsIgnoreCase if doesModernCompilerExist return new Javac13 else if isClassicCompilerSupported task log Project MSG_WARN return new Javac12 else throw new BuildException MODERN_COMPILER if compilerType equalsIgnoreCase compilerType equalsIgnoreCase return new Jvc if compilerType equalsIgnoreCase return new Kjc if compilerType equalsIgnoreCase return new Gcj if compilerType equalsIgnoreCase compilerType equalsIgnoreCase return new Sj return resolveClassName compilerType private static boolean doesModernCompilerExist try Class forName MODERN_COMPILER return true catch ClassNotFoundException cnfe try CompilerAdapterFactory class getClassLoader loadClass MODERN_COMPILER return true catch ClassNotFoundException cnfe2 return false private static CompilerAdapter resolveClassName String className throws BuildException try Class Class forName className Object newInstance return CompilerAdapter catch ClassNotFoundException cnfe throw new BuildException className cnfe catch ClassCastException cce throw new BuildException className cce catch Throwable throw new BuildException className', 'bug': '1'}
{'sequence': 'public abstract class JDBCTask extends Task private static Hashtable loaderMap new Hashtable private boolean caching true private Path classpath private AntClassLoader loader private boolean autocommit false private String driver null private String url null private String userId null private String password null private String rdbms null private String version null public void setClasspath Path classpath this classpath classpath public void setCaching boolean enable caching enable public Path createClasspath if this classpath null this classpath new Path getProject return this classpath createPath public void setClasspathRef Reference createClasspath setRefid public void setDriver String driver this driver driver public void setUrl String url this url url public void setPassword String password this password password public void setAutocommit boolean autocommit this autocommit autocommit public void setRdbms String rdbms this rdbms rdbms public void setVersion String version this version version protected boolean isValidRdbms Connection conn if rdbms null version null return true try DatabaseMetaData dmd conn getMetaData if rdbms null String theVendor dmd getDatabaseProductName toLowerCase log theVendor Project MSG_VERBOSE if theVendor null theVendor indexOf rdbms log rdbms Project MSG_VERBOSE return false if version null String theVersion dmd getDatabaseProductVersion toLowerCase log theVersion Project MSG_VERBOSE if theVersion null theVersion startsWith version theVersion indexOf version log version Project MSG_VERBOSE return false catch SQLException log Project MSG_ERR return false return true protected static Hashtable getLoaderMap return loaderMap protected AntClassLoader getLoader return loader protected Connection getConnection throws BuildException if userId null throw new BuildException getLocation if password null throw new BuildException getLocation if url null throw new BuildException getLocation try log getUrl Project MSG_VERBOSE Properties info new Properties info put getUserId info put getPassword Connection conn getDriver connect getUrl info if conn null throw new SQLException url conn setAutoCommit autocommit return conn catch SQLException throw new BuildException getLocation private Driver getDriver throws BuildException if driver null throw new BuildException getLocation Driver driverInstance null try Class dc if classpath null synchronized loaderMap if caching loader AntClassLoader loaderMap get driver if loader null log driver classpath Project MSG_VERBOSE loader getProject createClassLoader classpath if caching loaderMap put driver loader else log driver Project MSG_VERBOSE dc loader loadClass driver else log driver Project MSG_VERBOSE dc Class forName driver driverInstance Driver dc newInstance catch ClassNotFoundException throw new BuildException driver getLocation catch IllegalAccessException throw new BuildException driver getLocation catch InstantiationException throw new BuildException driver getLocation return driverInstance public void isCaching boolean value caching value public Path getClasspath return classpath public boolean isAutocommit return autocommit public String getUrl return url public String getUserId return userId public void setUserid String userId this userId userId public String getPassword return password public String getRdbms return rdbms public String getVersion return version', 'bug': '1'}
{'sequence': 'public class SourceFileScanner implements ResourceFactory protected Task task private FileUtils fileUtils public SourceFileScanner Task task this task task fileUtils FileUtils newFileUtils public String restrict String files File srcDir File destDir FileNameMapper mapper this destDir destDir Vector new Vector for int files length File src fileUtils resolveFile srcDir files addElement new Resource files src exists src lastModified src isDirectory Resource sourceresources new Resource size copyInto sourceresources Resource outofdate ResourceUtils selectOutOfDateSources task sourceresources mapper this String result new String outofdate length for int counter counter outofdate length counter result counter outofdate counter getName return result public File restrictAsFiles String files File srcDir File destDir FileNameMapper mapper String res restrict files srcDir destDir mapper File result new File res length for int res length result new File srcDir res return result public Resource getResource String name File src fileUtils resolveFile destDir name return new Resource name src exists src lastModified src isDirectory', 'bug': '1'}
{'sequence': 'public abstract class EnumeratedAttribute protected String value private int index public abstract String getValues protected EnumeratedAttribute public final void setValue String value throws BuildException int index indexOfValue value if index throw new BuildException value this index index this value value public final boolean containsValue String value return indexOfValue value public final int indexOfValue String value String values getValues if values null value null return for int values length if value equals values return return public final String getValue return value public final int getIndex return index public String toString return getValue', 'bug': '0'}
{'sequence': 'public interface BZip2Constants int baseBlockSize int MAX_ALPHA_SIZE int MAX_CODE_LEN int RUNA int RUNB int N_GROUPS int G_SIZE int N_ITERS int MAX_SELECTORS G_SIZE int NUM_OVERSHOOT_BYTES int rNums', 'bug': '0'}
{'sequence': 'public abstract class DataType extends ProjectComponent protected String description protected Reference ref protected boolean checked true public void setDescription final String desc description desc public String getDescription return description public boolean isReference return ref null public void setRefid final Reference ref this ref ref checked false protected void dieOnCircularReference final Stack stack final Project project throws BuildException if checked isReference return Object ref getReferencedObject project if instanceof DataType if stack contains throw circularReference else stack push DataType dieOnCircularReference stack project stack pop checked true protected Object getCheckedRef final Class requiredClass final String dataTypeName if checked Stack stk new Stack stk push this dieOnCircularReference stk getProject Object ref getReferencedObject getProject if requiredClass isAssignableFrom getClass String msg ref getRefId dataTypeName throw new BuildException msg else return protected BuildException tooManyAttributes return new BuildException protected BuildException noChildrenAllowed return new BuildException protected BuildException circularReference return new BuildException protected boolean isChecked return checked protected void setChecked final boolean checked this checked checked protected Reference getRefid return ref protected void checkAttributesAllowed if isReference throw tooManyAttributes protected void checkChildrenAllowed if isReference throw noChildrenAllowed', 'bug': '0'}
{'sequence': 'public class PreSetDef extends AntlibDefinition implements TaskContainer private UnknownElement nestedTask private String name public void setName String name this name name public void addTask Task nestedTask if this nestedTask null throw new BuildException if nestedTask instanceof UnknownElement throw new BuildException this nestedTask UnknownElement nestedTask public void execute if nestedTask null throw new BuildException if name null throw new BuildException name ProjectHelper genComponentName getURI name ComponentHelper helper ComponentHelper getComponentHelper getProject String componentName ProjectHelper genComponentName nestedTask getNamespace nestedTask getTag AntTypeDefinition def helper getDefinition componentName if def null throw new BuildException componentName PreSetDefinition newDef new PreSetDefinition def nestedTask newDef setName name helper addDataTypeDefinition newDef public static class PreSetDefinition extends AntTypeDefinition private AntTypeDefinition parent private UnknownElement element public PreSetDefinition AntTypeDefinition parent UnknownElement el if parent instanceof PreSetDefinition PreSetDefinition PreSetDefinition parent el applyPreSet element parent parent this parent parent this element el public void setClass Class clazz throw new BuildException public void setClassName String className throw new BuildException public String getClassName return parent getClassName public void setAdapterClass Class adapterClass throw new BuildException public void setAdaptToClass Class adaptToClass throw new BuildException public void setClassLoader ClassLoader classLoader throw new BuildException public ClassLoader getClassLoader return parent getClassLoader public Class getExposedClass Project project return parent getExposedClass project public Class getTypeClass Project project return parent getTypeClass project public void checkClass Project project parent checkClass project public Object createObject Project project Object parent create project if null return null return public UnknownElement getPreSets return element public Object create Project project return this public boolean sameDefinition AntTypeDefinition other Project project if other null return false if other getClass getClass return false PreSetDefinition otherDef PreSetDefinition other if parent sameDefinition otherDef parent project return false if element similar otherDef element return false return true public boolean similarDefinition AntTypeDefinition other Project project if other null return false if other getClass getName equals getClass getName return false PreSetDefinition otherDef PreSetDefinition other if parent similarDefinition otherDef parent project return false if element similar otherDef element return false return true', 'bug': '0'}
{'sequence': 'public class ClasspathUtils private static final String LOADER_ID_PREFIX public static final String REUSE_LOADER_REF public static ClassLoader getClassLoaderForPath Project Reference ref return getClassLoaderForPath ref false public static ClassLoader getClassLoaderForPath Project Reference ref boolean reverseLoader String pathId ref getRefId Object path getReference pathId if path instanceof Path throw new BuildException pathId String loaderId LOADER_ID_PREFIX pathId return getClassLoaderForPath Path path loaderId reverseLoader public static ClassLoader getClassLoaderForPath Project Path path String loaderId return getClassLoaderForPath path loaderId false public static ClassLoader getClassLoaderForPath Project Path path String loaderId boolean reverseLoader return getClassLoaderForPath path loaderId reverseLoader isMagicPropertySet public static ClassLoader getClassLoaderForPath Project Path path String loaderId boolean reverseLoader boolean reuseLoader ClassLoader cl null if loaderId null reuseLoader Object reusedLoader getReference loaderId if reusedLoader null reusedLoader instanceof ClassLoader throw new BuildException loaderId cl ClassLoader reusedLoader if cl null cl getUniqueClassLoaderForPath path reverseLoader if loaderId null reuseLoader addReference loaderId cl return cl public static ClassLoader getUniqueClassLoaderForPath Project Path path boolean reverseLoader AntClassLoader acl createClassLoader path null path Path systemClasspath if reverseLoader acl setParentFirst false acl addJavaLibraries return acl public static Object newInstance String className ClassLoader userDefinedLoader try Class clazz userDefinedLoader loadClass className Object clazz newInstance return catch ClassNotFoundException throw new BuildException className catch InstantiationException throw new BuildException className catch IllegalAccessException throw new BuildException className public static Delegate getDelegate ProjectComponent component return new Delegate component private static boolean isMagicPropertySet Project return getProperty REUSE_LOADER_REF null public static class Delegate private final ProjectComponent component private Path classpath private String classpathId private String className private String loaderId private boolean reverseLoader false Delegate ProjectComponent component this component component public void setClasspath Path classpath if this classpath null this classpath classpath else this classpath append classpath public Path createClasspath if this classpath null this classpath new Path component getProject return this classpath createPath public void setClassname String fcqn this className fcqn public void setClasspathref Reference this classpathId getRefId createClasspath setRefid public void setReverseLoader boolean reverseLoader this reverseLoader reverseLoader public void setLoaderRef Reference this loaderId getRefId public ClassLoader getClassLoader ClassLoader cl cl ClasspathUtils getClassLoaderForPath getContextProject this classpath getClassLoadId this reverseLoader loaderId null isMagicPropertySet getContextProject return cl private Project getContextProject return this component getProject public String getClassLoadId if this loaderId null this classpathId null return ClasspathUtils LOADER_ID_PREFIX this classpathId else return this loaderId public Object newInstance ClassLoader cl getClassLoader return ClasspathUtils newInstance this className cl public Path getClasspath return classpath public boolean isReverseLoader return reverseLoader', 'bug': '1'}
{'sequence': 'class ChangeLogParser private static final int GET_FILE private static final int GET_DATE private static final int GET_COMMENT private static final int GET_REVISION private static final int GET_PREVIOUS_REV private static final SimpleDateFormat c_inputDate new SimpleDateFormat static TimeZone utc TimeZone getTimeZone c_inputDate setTimeZone utc private String m_file private String m_date private String m_author private String m_comment private String m_revision private String m_previousRevision private int m_status GET_FILE private final Hashtable m_entries new Hashtable CVSEntry getEntrySetAsArray final CVSEntry array new CVSEntry m_entries size Enumeration m_entries elements int while hasMoreElements array CVSEntry nextElement return array public void stdout final String line switch m_status case GET_FILE reset processFile line break case GET_REVISION processRevision line break case GET_DATE processDate line break case GET_COMMENT processComment line break case GET_PREVIOUS_REV processGetPreviousRevision line break private void processComment final String line final String lineSeparator System getProperty if line startsWith final int end m_comment m_comment substring end saveEntry m_status GET_FILE else if line startsWith final int end m_comment m_comment substring end m_status GET_PREVIOUS_REV else m_comment line lineSeparator private void processFile final String line if line startsWith m_file line substring line length m_status GET_REVISION private void processRevision final String line if line startsWith m_revision line substring m_status GET_DATE else if line startsWith m_status GET_FILE private void processDate final String line if line startsWith m_date line substring String lineData line substring line indexOf m_author lineData substring lineData indexOf m_status GET_COMMENT m_comment private void processGetPreviousRevision final String line if line startsWith throw new IllegalStateException line m_previousRevision line substring saveEntry m_revision m_previousRevision m_status GET_DATE private void saveEntry final String entryKey m_date m_author m_comment CVSEntry entry if m_entries containsKey entryKey entry new CVSEntry parseDate m_date m_author m_comment m_entries put entryKey entry else entry CVSEntry m_entries get entryKey entry addFile m_file m_revision m_previousRevision private Date parseDate final String date try return c_inputDate parse date catch ParseException return null private void reset m_file null m_date null m_author null m_comment null m_revision null m_previousRevision null', 'bug': '0'}
{'sequence': 'public class RegexpUtil public static final boolean hasFlag int options int flag return options flag public static final int removeFlag int options int flag return options flag', 'bug': '0'}
{'sequence': 'public class ApacheCatalogResolver extends CatalogResolver private XMLCatalog xmlCatalog null static CatalogManager getStaticManager setIgnoreMissingProperties true System getProperties put ApacheCatalog class getName CatalogManager getStaticManager setUseStaticCatalog false public void setXMLCatalog XMLCatalog xmlCatalog this xmlCatalog xmlCatalog public void parseCatalog String file Catalog getCatalog if instanceof ApacheCatalog throw new BuildException getClass getName ApacheCatalog catalog ApacheCatalog catalog setResolver this try catalog parseCatalog file catch MalformedURLException ex throw new BuildException ex catch IOException ex throw new BuildException ex public void addPublicEntry String publicid String systemid URL base ResourceLocation dtd new ResourceLocation dtd setBase base dtd setPublicId publicid dtd setLocation systemid xmlCatalog addDTD dtd public void addURIEntry String uri String altURI URL base ResourceLocation entity new ResourceLocation entity setBase base entity setPublicId uri entity setLocation altURI xmlCatalog addEntity entity', 'bug': '0'}
{'sequence': 'public abstract class BaseFilterReader extends FilterReader private static final int BUFFER_SIZE private boolean initialized false private Project project null public BaseFilterReader super new StringReader new String try close catch IOException ioe public BaseFilterReader final Reader in super in public final int read final char cbuf final int off final int len throws IOException for int len final int ch read if ch if return else return cbuf off char ch return len public final long skip final long throws IOException IllegalArgumentException if throw new IllegalArgumentException for long if read return return protected final void setInitialized final boolean initialized this initialized initialized protected final boolean getInitialized return initialized public final void setProject final Project project this project project protected final Project getProject return project protected final String readLine throws IOException int ch in read if ch return null StringBuffer line new StringBuffer while ch line append char ch if ch break ch in read return line toString protected final String readFully throws IOException return FileUtils readFully in BUFFER_SIZE', 'bug': '0'}
{'sequence': 'public class ZipOutputStream extends FilterOutputStream private ZipEntry entry private String comment private int level Deflater DEFAULT_COMPRESSION private boolean hasCompressionLevelChanged false private int method DEFLATED private Vector entries new Vector private CRC32 crc new CRC32 private long written private long dataStart private long localDataStart private ZipLong cdOffset new ZipLong private ZipLong cdLength new ZipLong private static final byte ZERO private static final byte LZERO private Hashtable offsets new Hashtable private String encoding null protected Deflater def new Deflater Deflater DEFAULT_COMPRESSION true protected byte buf new byte private RandomAccessFile raf null public static final int DEFLATED ZipEntry DEFLATED public static final int STORED ZipEntry STORED public ZipOutputStream OutputStream out super out public ZipOutputStream File file throws IOException super null try raf new RandomAccessFile file raf setLength catch IOException if raf null try raf close catch IOException inner raf null out new FileOutputStream file public boolean isSeekable return raf null public void setEncoding String encoding this encoding encoding public String getEncoding return encoding public void finish throws IOException closeEntry cdOffset new ZipLong written for int entries size writeCentralFileHeader ZipEntry entries elementAt cdLength new ZipLong written cdOffset getValue writeCentralDirectoryEnd offsets clear entries removeAllElements public void closeEntry throws IOException if entry null return long realCrc crc getValue crc reset if entry getMethod DEFLATED def finish while def finished deflate entry setSize def getTotalIn entry setComprSize def getTotalOut entry setCrc realCrc def reset written entry getCompressedSize else if raf null if entry getCrc realCrc throw new ZipException entry getName Long toHexString entry getCrc Long toHexString realCrc if entry getSize written dataStart throw new ZipException entry getName entry getSize written dataStart long size written dataStart entry setSize size entry setComprSize size entry setCrc realCrc if raf null long save raf getFilePointer raf seek localDataStart writeOut new ZipLong entry getCrc getBytes writeOut new ZipLong entry getCompressedSize getBytes writeOut new ZipLong entry getSize getBytes raf seek save writeDataDescriptor entry entry null public void putNextEntry ZipEntry ze throws IOException closeEntry entry ze entries addElement entry entry setMethod method entry setTime System currentTimeMillis if entry getMethod STORED raf null if entry getSize throw new ZipException if entry getCrc throw new ZipException entry setComprSize entry getSize if entry getMethod DEFLATED hasCompressionLevelChanged def setLevel level hasCompressionLevelChanged false writeLocalFileHeader entry public void setComment String comment this comment comment public void setLevel int level hasCompressionLevelChanged this level level this level level public void setMethod int method this method method public void write byte int offset int length throws IOException if entry getMethod DEFLATED if length if def finished def setInput offset length while def needsInput deflate else writeOut offset length written length crc update offset length public void write int throws IOException byte buf new byte buf byte write buf public void close throws IOException finish if raf null raf close if out null out close public void flush throws IOException if out null out flush protected static final ZipLong LFH_SIG new ZipLong protected static final ZipLong DD_SIG new ZipLong protected static final ZipLong CFH_SIG new ZipLong protected static final ZipLong EOCD_SIG new ZipLong protected final void deflate throws IOException int len def deflate buf buf length if len writeOut buf len protected void writeLocalFileHeader ZipEntry ze throws IOException offsets put ze new ZipLong written writeOut LFH_SIG getBytes written if ze getMethod DEFLATED raf null writeOut new ZipShort getBytes writeOut new ZipShort getBytes else writeOut new ZipShort getBytes writeOut ZERO written writeOut new ZipShort ze getMethod getBytes written writeOut toDosTime new Date ze getTime getBytes written localDataStart written if ze getMethod DEFLATED raf null writeOut LZERO writeOut LZERO writeOut LZERO else writeOut new ZipLong ze getCrc getBytes writeOut new ZipLong ze getSize getBytes writeOut new ZipLong ze getSize getBytes written byte name getBytes ze getName writeOut new ZipShort name length getBytes written byte extra ze getLocalFileDataExtra writeOut new ZipShort extra length getBytes written writeOut name written name length writeOut extra written extra length dataStart written protected void writeDataDescriptor ZipEntry ze throws IOException if ze getMethod DEFLATED raf null return writeOut DD_SIG getBytes writeOut new ZipLong entry getCrc getBytes writeOut new ZipLong entry getCompressedSize getBytes writeOut new ZipLong entry getSize getBytes written protected void writeCentralFileHeader ZipEntry ze throws IOException writeOut CFH_SIG getBytes written writeOut new ZipShort ze getPlatform getBytes written if ze getMethod DEFLATED raf null writeOut new ZipShort getBytes writeOut new ZipShort getBytes else writeOut new ZipShort getBytes writeOut ZERO written writeOut new ZipShort ze getMethod getBytes written writeOut toDosTime new Date ze getTime getBytes written writeOut new ZipLong ze getCrc getBytes writeOut new ZipLong ze getCompressedSize getBytes writeOut new ZipLong ze getSize getBytes written byte name getBytes ze getName writeOut new ZipShort name length getBytes written byte extra ze getCentralDirectoryExtra writeOut new ZipShort extra length getBytes written String comm ze getComment if comm null comm byte comment getBytes comm writeOut new ZipShort comment length getBytes written writeOut ZERO written writeOut new ZipShort ze getInternalAttributes getBytes written writeOut new ZipLong ze getExternalAttributes getBytes written writeOut ZipLong offsets get ze getBytes written writeOut name written name length writeOut extra written extra length writeOut comment written comment length protected void writeCentralDirectoryEnd throws IOException writeOut EOCD_SIG getBytes writeOut ZERO writeOut ZERO byte num new ZipShort entries size getBytes writeOut num writeOut num writeOut cdLength getBytes writeOut cdOffset getBytes byte data getBytes comment writeOut new ZipShort data length getBytes writeOut data private static final ZipLong DOS_TIME_MIN new ZipLong protected static ZipLong toDosTime Date time int year time getYear int month time getMonth if year return DOS_TIME_MIN long value year month time getDate time getHours time getMinutes time getSeconds byte result new byte result byte value result byte value result byte value result byte value return new ZipLong result protected byte getBytes String name throws ZipException if encoding null return name getBytes else try return name getBytes encoding catch UnsupportedEncodingException uee throw new ZipException uee getMessage protected final void writeOut byte data throws IOException writeOut data data length protected final void writeOut byte data int offset int length throws IOException if raf null raf write data offset length else out write data offset length', 'bug': '1'}
{'sequence': 'public class Rmic extends MatchingTask private static final String FAIL_MSG private File baseDir private String classname private File sourceBase private String stubVersion private Path compileClasspath private Path extdirs private boolean verify false private boolean filtering false private boolean iiop false private String iiopopts private boolean idl false private String idlopts private boolean debug false private boolean includeAntRuntime true private boolean includeJavaRuntime false private Vector compileList new Vector private ClassLoader loader null private FileUtils fileUtils FileUtils newFileUtils private FacadeTaskHelper facade public Rmic try Class forName facade new FacadeTaskHelper catch ClassNotFoundException cnfe facade new FacadeTaskHelper public void setBase File base this baseDir base public File getBase return this baseDir public void setClassname String classname this classname classname public String getClassname return classname public void setSourceBase File sourceBase this sourceBase sourceBase public File getSourceBase return sourceBase public void setStubVersion String stubVersion this stubVersion stubVersion public String getStubVersion return stubVersion public void setFiltering boolean filter filtering filter public boolean getFiltering return filtering public void setDebug boolean debug this debug debug public boolean getDebug return debug public void setClasspath Path classpath if compileClasspath null compileClasspath classpath else compileClasspath append classpath public Path createClasspath if compileClasspath null compileClasspath new Path getProject return compileClasspath createPath public void setClasspathRef Reference createClasspath setRefid public Path getClasspath return compileClasspath public void setVerify boolean verify this verify verify public boolean getVerify return verify public void setIiop boolean iiop this iiop iiop public boolean getIiop return iiop public void setIiopopts String iiopopts this iiopopts iiopopts public String getIiopopts return iiopopts public void setIdl boolean idl this idl idl public boolean getIdl return idl public void setIdlopts String idlopts this idlopts idlopts public String getIdlopts return idlopts public Vector getFileList return compileList public void setIncludeantruntime boolean include includeAntRuntime include public boolean getIncludeantruntime return includeAntRuntime public void setIncludejavaruntime boolean include includeJavaRuntime include public boolean getIncludejavaruntime return includeJavaRuntime public void setExtdirs Path extdirs if this extdirs null this extdirs extdirs else this extdirs append extdirs public Path createExtdirs if extdirs null extdirs new Path getProject return extdirs createPath public Path getExtdirs return extdirs public Vector getCompileList return compileList public void setCompiler String compiler facade setImplementation compiler public String getCompiler facade setMagicValue getProject getProperty return facade getImplementation public ImplementationSpecificArgument createCompilerArg ImplementationSpecificArgument arg new ImplementationSpecificArgument facade addImplementationArgument arg return arg public String getCurrentCompilerArgs getCompiler return facade getArgs public void execute throws BuildException if baseDir null throw new BuildException getLocation if baseDir exists throw new BuildException getLocation if verify log Project MSG_VERBOSE RmicAdapter adapter RmicAdapterFactory getRmic getCompiler this adapter setRmic this Path classpath adapter getClasspath loader getProject createClassLoader classpath try if classname null DirectoryScanner ds this getDirectoryScanner baseDir String files ds getIncludedFiles scanDir baseDir files adapter getMapper else scanDir baseDir new String classname replace File separatorChar adapter getMapper int fileCount compileList size if fileCount log fileCount fileCount baseDir Project MSG_INFO if adapter execute throw new BuildException FAIL_MSG getLocation if null sourceBase baseDir equals sourceBase fileCount if idl log Project MSG_WARN log Project MSG_WARN else for int fileCount moveGeneratedFile baseDir sourceBase String compileList elementAt adapter finally compileList removeAllElements private void moveGeneratedFile File baseDir File sourceBaseFile String classname RmicAdapter adapter throws BuildException String classFileName classname replace File separatorChar String generatedFiles adapter getMapper mapFileName classFileName for int generatedFiles length final String generatedFile generatedFiles if generatedFile endsWith continue final int pos generatedFile length length String sourceFileName generatedFile substring pos File oldFile new File baseDir sourceFileName if oldFile exists continue File newFile new File sourceBaseFile sourceFileName try if filtering fileUtils copyFile oldFile newFile new FilterSetCollection getProject getGlobalFilterSet else fileUtils copyFile oldFile newFile oldFile delete catch IOException ioe String msg oldFile newFile ioe getMessage throw new BuildException msg ioe getLocation protected void scanDir File baseDir String files FileNameMapper mapper String newFiles files if idl log Project MSG_VERBOSE else if iiop iiopopts null iiopopts indexOf log Project MSG_VERBOSE else SourceFileScanner sfs new SourceFileScanner this newFiles sfs restrict files baseDir baseDir mapper for int newFiles length String classname newFiles replace File separatorChar classname classname substring classname lastIndexOf compileList addElement classname public boolean isValidRmiRemote String classname try Class testClass loader loadClass classname if testClass isInterface iiop idl return false return isValidRmiRemote testClass catch ClassNotFoundException log classname Project MSG_WARN catch NoClassDefFoundError log classname Project MSG_WARN catch Throwable log classname getMessage Project MSG_WARN return false public Class getRemoteInterface Class testClass if Remote class isAssignableFrom testClass Class interfaces testClass getInterfaces if interfaces null for int interfaces length if Remote class isAssignableFrom interfaces return interfaces return null private boolean isValidRmiRemote Class testClass return getRemoteInterface testClass null public ClassLoader getLoader return loader public class ImplementationSpecificArgument extends org apache tools ant util facade ImplementationSpecificArgument public void setCompiler String impl super setImplementation impl', 'bug': '0'}
{'sequence': 'public class TaskOutputStream extends OutputStream private Task task private StringBuffer line private int msgOutputLevel TaskOutputStream Task task int msgOutputLevel System err println System err println System err println this task task this msgOutputLevel msgOutputLevel line new StringBuffer public void write int throws IOException char cc char if cc cc if line length processLine else line append cc private void processLine String line toString task log msgOutputLevel line new StringBuffer', 'bug': '0'}
{'sequence': 'public abstract class AbstractCvsTask extends Task public static final int DEFAULT_COMPRESSION_LEVEL private static final int MAXIMUM_COMRESSION_LEVEL private Commandline cmd new Commandline private Vector vecCommandlines new Vector private String cvsRoot private String cvsRsh private String cvsPackage private static final String DEFAULT_COMMAND private String command null private boolean quiet false private boolean reallyquiet false private int compression private boolean noexec false private int port private File passFile null private File dest private boolean append false private File output private File error private boolean failOnError false private ExecuteStreamHandler executeStreamHandler private OutputStream outputStream private OutputStream errorStream public AbstractCvsTask super public void setExecuteStreamHandler ExecuteStreamHandler handler this executeStreamHandler handler protected ExecuteStreamHandler getExecuteStreamHandler if this executeStreamHandler null setExecuteStreamHandler new PumpStreamHandler getOutputStream getErrorStream return this executeStreamHandler protected void setOutputStream OutputStream outputStream this outputStream outputStream protected OutputStream getOutputStream if this outputStream null if output null try setOutputStream new PrintStream new BufferedOutputStream new FileOutputStream output getPath append catch IOException throw new BuildException getLocation else setOutputStream new LogOutputStream this Project MSG_INFO return this outputStream protected void setErrorStream OutputStream errorStream this errorStream errorStream protected OutputStream getErrorStream if this errorStream null if error null try setErrorStream new PrintStream new BufferedOutputStream new FileOutputStream error getPath append catch IOException throw new BuildException getLocation else setErrorStream new LogOutputStream this Project MSG_WARN return this errorStream protected void runCommand Commandline toExecute throws BuildException Environment env new Environment if port Environment Variable var new Environment Variable var setKey var setValue String valueOf port env addVariable var if passFile null File defaultPassFile new File System getProperty System getProperty File separatorChar if defaultPassFile exists this setPassfile defaultPassFile if passFile null if passFile isFile passFile canRead Environment Variable var new Environment Variable var setKey var setValue String valueOf passFile env addVariable var log String valueOf passFile Project MSG_INFO else if passFile canRead log String valueOf passFile Project MSG_WARN else log String valueOf passFile Project MSG_WARN if cvsRsh null Environment Variable var new Environment Variable var setKey var setValue String valueOf cvsRsh env addVariable var Execute exe new Execute getExecuteStreamHandler null exe setAntRun getProject if dest null dest getProject getBaseDir if dest exists dest mkdirs exe setWorkingDirectory dest exe setCommandline toExecute getCommandline exe setEnvironment env getVariables try String actualCommandLine executeToString exe log actualCommandLine Project MSG_VERBOSE int retCode exe execute log retCode Project MSG_DEBUG if failOnError Execute isFailure retCode throw new BuildException retCode StringUtils LINE_SEP actualCommandLine getLocation catch IOException if failOnError throw new BuildException getLocation else log getMessage Project MSG_WARN catch BuildException if failOnError throw else Throwable getException if null log getMessage Project MSG_WARN catch Exception if failOnError throw new BuildException getLocation else log getMessage Project MSG_WARN finally if outputStream null try outputStream close catch IOException if errorStream null try errorStream close catch IOException public void execute throws BuildException String savedCommand getCommand if this getCommand null vecCommandlines size this setCommand AbstractCvsTask DEFAULT_COMMAND String this getCommand Commandline cloned null if null cloned Commandline cmd clone cloned createArgument true setLine this addConfiguredCommandline cloned true try for int vecCommandlines size this runCommand Commandline vecCommandlines elementAt finally if cloned null removeCommandline cloned setCommand savedCommand private String executeToString Execute execute StringBuffer stringBuffer new StringBuffer Commandline describeCommand execute getCommandline String newLine StringUtils LINE_SEP String variableArray execute getEnvironment if variableArray null stringBuffer append newLine stringBuffer append newLine stringBuffer append stringBuffer append newLine for int variableArray length stringBuffer append newLine stringBuffer append stringBuffer append variableArray return stringBuffer toString public void setCvsRoot String root if root null if root trim equals root null this cvsRoot root public String getCvsRoot return this cvsRoot public void setCvsRsh String rsh if rsh null if rsh trim equals rsh null this cvsRsh rsh public String getCvsRsh return this cvsRsh public void setPort int port this port port public int getPort return this port public void setPassfile File passFile this passFile passFile public File getPassFile return this passFile public void setDest File dest this dest dest public File getDest return this dest public void setPackage String this cvsPackage public String getPackage return this cvsPackage public void setTag String if null trim length addCommandArgument addCommandArgument public void addCommandArgument String arg this addCommandArgument cmd arg public void addCommandArgument Commandline String arg createArgument setValue arg public void setDate String if null trim length addCommandArgument addCommandArgument public void setCommand String this command public String getCommand return this command public void setQuiet boolean quiet public void setReallyquiet boolean reallyquiet public void setNoexec boolean ne noexec ne public void setOutput File output this output output public void setError File error this error error public void setAppend boolean value this append value public void setFailOnError boolean failOnError this failOnError failOnError protected void configureCommandline Commandline if null return setExecutable if cvsPackage null createArgument setLine cvsPackage if this compression this compression MAXIMUM_COMRESSION_LEVEL createArgument true setValue this compression if quiet reallyquiet createArgument true setValue if reallyquiet createArgument true setValue if noexec createArgument true setValue if cvsRoot null createArgument true setLine cvsRoot protected void removeCommandline Commandline vecCommandlines removeElement public void addConfiguredCommandline Commandline this addConfiguredCommandline false public void addConfiguredCommandline Commandline boolean insertAtStart if null return this configureCommandline if insertAtStart vecCommandlines insertElementAt else vecCommandlines addElement public void setCompressionLevel int level this compression level public void setCompression boolean usecomp setCompressionLevel usecomp AbstractCvsTask DEFAULT_COMPRESSION_LEVEL', 'bug': '0'}
{'sequence': 'public interface Tokenizer String getToken Reader in throws IOException String getPostToken', 'bug': '0'}
{'sequence': 'public class AntTypeDefinition private String name private Class clazz private Class adapterClass private Class adaptToClass private String className private ClassLoader classLoader public void setName String name this name name public String getName return name public void setClass Class clazz this clazz clazz if clazz null return if classLoader null this classLoader clazz getClassLoader if className null this className clazz getName public void setClassName String className this className className public String getClassName return className public void setAdapterClass Class adapterClass this adapterClass adapterClass public void setAdaptToClass Class adaptToClass this adaptToClass adaptToClass public void setClassLoader ClassLoader classLoader this classLoader classLoader public ClassLoader getClassLoader return classLoader public Class getExposedClass Project project if adaptToClass null Class getTypeClass project if null return null if adaptToClass isAssignableFrom return if adapterClass null return adapterClass return getTypeClass project public Class getTypeClass Project project if clazz null return clazz try if classLoader null clazz Class forName className else clazz classLoader loadClass className catch NoClassDefFoundError ncdfe project log ncdfe getMessage name Project MSG_DEBUG catch ClassNotFoundException cnfe project log className name Project MSG_DEBUG return clazz public Object create Project project return icreate project private Object icreate Project project Class getTypeClass project if null return null Object createAndSet project if null adapterClass null return if adaptToClass null if adaptToClass isAssignableFrom getClass return TypeAdapter adapterObject TypeAdapter createAndSet project adapterClass if adapterObject null return null adapterObject setProxy return adapterObject public void checkClass Project project if clazz null clazz getTypeClass project if clazz null throw new BuildException getName if adapterClass null boolean needToCheck true if adaptToClass null adaptToClass isAssignableFrom clazz needToCheck false if needToCheck TypeAdapter adapter TypeAdapter createAndSet project adapterClass if adapter null throw new BuildException adapter checkProxyClass clazz private Object createAndSet Project project Class try java lang reflect Constructor ctor null boolean noArg false try ctor getConstructor new Class noArg true catch NoSuchMethodException nse ctor getConstructor new Class Project class noArg false Object null if noArg ctor newInstance new Object else ctor newInstance new Object project project setProjectReference return catch java lang reflect InvocationTargetException ex Throwable ex getTargetException throw new BuildException name catch NoClassDefFoundError ncdfe String msg name ncdfe getMessage throw new BuildException msg ncdfe catch Throwable throw new BuildException name public boolean sameDefinition AntTypeDefinition other Project project if other null return false if other getClass this getClass return false if other getTypeClass project equals getTypeClass project return false if other getExposedClass project equals getExposedClass project return false if other adapterClass adapterClass return false if other adaptToClass adaptToClass return false return true public boolean similarDefinition AntTypeDefinition other Project project if other null return false if getClass other getClass return false if getClassName equals other getClassName return false if extractClassname adapterClass equals extractClassname other adapterClass return false if extractClassname adaptToClass equals extractClassname other adaptToClass return false ClassLoader oldLoader other getClassLoader ClassLoader newLoader this getClassLoader if oldLoader null newLoader null oldLoader instanceof AntClassLoader newLoader instanceof AntClassLoader AntClassLoader oldLoader getClasspath equals AntClassLoader newLoader getClasspath return true else return false private String extractClassname Class if null return else return getClass getName', 'bug': '0'}
{'sequence': 'public class Replace extends MatchingTask private File src null private NestedString token null private NestedString value new NestedString private File propertyFile null private File replaceFilterFile null private Properties properties null private Vector replacefilters new Vector private File dir null private int fileCount private int replaceCount private boolean summary false private String encoding null private FileUtils fileUtils FileUtils newFileUtils public class NestedString private StringBuffer buf new StringBuffer public void addText String val buf append val public String getText return buf substring public class Replacefilter private String token private String value private String property public void validate throws BuildException if token null String message throw new BuildException message if equals token String message throw new BuildException message if value null property null String message throw new BuildException message if property null if propertyFile null String message throw new BuildException message if properties null properties getProperty property null String message property propertyFile getPath throw new BuildException message public String getReplaceValue if property null return properties getProperty property else if value null return value else if Replace this value null return Replace this value getText else return new String public void setToken String token this token token public String getToken return token public void setValue String value this value value public String getValue return value public void setProperty String property this property property public String getProperty return property public void execute throws BuildException Vector savedFilters Vector replacefilters clone Properties savedProperties properties null null Properties properties clone try if replaceFilterFile null Properties props getProperties replaceFilterFile Enumeration props keys while hasMoreElements String token nextElement toString Replacefilter replaceFilter createReplacefilter replaceFilter setToken token replaceFilter setValue props getProperty token validateAttributes if propertyFile null properties getProperties propertyFile validateReplacefilters fileCount replaceCount if src null processFile src if dir null DirectoryScanner ds super getDirectoryScanner dir String srcs ds getIncludedFiles for int srcs length File file new File dir srcs processFile file if summary log replaceCount fileCount Project MSG_INFO finally replacefilters savedFilters properties savedProperties public void validateAttributes throws BuildException if src null dir null String message throw new BuildException message getLocation if propertyFile null propertyFile exists String message propertyFile getPath throw new BuildException message getLocation if token null replacefilters size String message throw new BuildException message getLocation if token null equals token getText String message throw new BuildException message getLocation public void validateReplacefilters throws BuildException for int replacefilters size Replacefilter element Replacefilter replacefilters elementAt element validate public Properties getProperties File propertyFile throws BuildException Properties properties new Properties try properties load new FileInputStream propertyFile catch FileNotFoundException String message propertyFile getPath throw new BuildException message catch IOException String message propertyFile getPath throw new BuildException message return properties private void processFile File src throws BuildException if src exists throw new BuildException src getPath getLocation File temp fileUtils createTempFile fileUtils getParentFile src temp deleteOnExit Reader reader null Writer writer null try reader encoding null new FileReader src new InputStreamReader new FileInputStream src encoding writer encoding null new FileWriter temp new OutputStreamWriter new FileOutputStream temp encoding BufferedReader br new BufferedReader reader BufferedWriter bw new BufferedWriter writer String buf fileUtils readFully br if buf null buf String newString new String buf if token null String val stringReplace value getText false val stringReplace val StringUtils LINE_SEP false String tok stringReplace token getText false tok stringReplace tok StringUtils LINE_SEP false log src getPath token getText value getText Project MSG_VERBOSE newString stringReplace newString tok val true if replacefilters size newString processReplacefilters newString src getPath boolean changes newString equals buf if changes bw write newString newString length bw flush bw close writer null br close reader null if changes fileCount fileUtils rename temp src temp null catch IOException ioe throw new BuildException src ioe getClass getName ioe getMessage ioe getLocation finally if reader null try reader close catch IOException if writer null try writer close catch IOException if temp null temp delete private String processReplacefilters String buffer String filename String newString new String buffer for int replacefilters size Replacefilter filter Replacefilter replacefilters elementAt log filename filter getToken filter getReplaceValue Project MSG_VERBOSE newString stringReplace newString filter getToken filter getReplaceValue true return newString public void setFile File file this src file public void setSummary boolean summary this summary summary public void setReplaceFilterFile File filename replaceFilterFile filename public void setDir File dir this dir dir public void setToken String token createReplaceToken addText token public void setValue String value createReplaceValue addText value public void setEncoding String encoding this encoding encoding public NestedString createReplaceToken if token null token new NestedString return token public NestedString createReplaceValue return value public void setPropertyFile File filename propertyFile filename public Replacefilter createReplacefilter Replacefilter filter new Replacefilter replacefilters addElement filter return filter private String stringReplace String str String str1 String str2 boolean countReplaces StringBuffer ret new StringBuffer int start int found str indexOf str1 while found if found start ret append str substring start found if str2 null ret append str2 start found str1 length found str indexOf str1 start if countReplaces replaceCount if str length start ret append str substring start str length return ret toString', 'bug': '1'}
{'sequence': 'public class DOMElementWriter private static String lSep System getProperty protected String knownEntities public void write Element root OutputStream out throws IOException Writer wri new OutputStreamWriter out wri write write root wri wri flush public void write Element element Writer out int indent String indentWith throws IOException for int indent out write indentWith out write out write element getTagName NamedNodeMap attrs element getAttributes for int attrs getLength Attr attr Attr attrs item out write out write attr getName out write out write encode attr getValue out write out write boolean hasChildren false NodeList children element getChildNodes for int children getLength Node child children item switch child getNodeType case Node ELEMENT_NODE if hasChildren out write lSep hasChildren true write Element child out indent indentWith break case Node TEXT_NODE out write encode child getNodeValue break case Node CDATA_SECTION_NODE out write out write encodedata Text child getData out write break case Node ENTITY_REFERENCE_NODE out write out write child getNodeName out write break case Node PROCESSING_INSTRUCTION_NODE out write out write child getNodeName String data child getNodeValue if data null data length out write out write data out write break if hasChildren for int indent out write indentWith out write out write element getTagName out write out write lSep out flush public String encode String value StringBuffer sb new StringBuffer int len value length for int len char value charAt switch case sb append break case sb append break case sb append break case sb append break case int nextSemi value indexOf if nextSemi isReference value substring nextSemi sb append else sb append break default if isLegalCharacter sb append break return sb substring public String encodedata final String value StringBuffer sb new StringBuffer int len value length for int len char value charAt if isLegalCharacter sb append String result sb substring int cdEnd result indexOf while cdEnd sb setLength cdEnd sb append append result substring cdEnd result sb substring cdEnd result indexOf return result public boolean isReference String ent if ent charAt ent endsWith return false if ent charAt if ent charAt try Integer parseInt ent substring ent length return true catch NumberFormatException nfe return false else try Integer parseInt ent substring ent length return true catch NumberFormatException nfe return false String name ent substring ent length for int knownEntities length if name equals knownEntities return true return false public boolean isLegalCharacter char if return true else if return false else if return true else if return false else if return true return false', 'bug': '0'}
{'sequence': 'public class RegexpMatcherFactory public RegexpMatcherFactory public RegexpMatcher newRegexpMatcher throws BuildException return newRegexpMatcher null public RegexpMatcher newRegexpMatcher Project throws BuildException String systemDefault null if null systemDefault System getProperty else systemDefault getProperty if systemDefault null return createInstance systemDefault try testAvailability return createInstance catch BuildException be try testAvailability return createInstance catch BuildException be try testAvailability return createInstance catch BuildException be throw new BuildException protected RegexpMatcher createInstance String className throws BuildException try Class implClass Class forName className return RegexpMatcher implClass newInstance catch Throwable throw new BuildException protected void testAvailability String className throws BuildException try Class forName className catch Throwable throw new BuildException', 'bug': '0'}
{'sequence': 'public class Input extends Task private String validargs null private String message private String addproperty null private String defaultvalue null public void setValidargs String validargs this validargs validargs public void setAddproperty String addproperty this addproperty addproperty public void setMessage String message this message message public void setDefaultvalue String defaultvalue this defaultvalue defaultvalue public void addText String msg message getProject replaceProperties msg public Input public void execute throws BuildException if addproperty null getProject getProperty addproperty null log getTaskName addproperty return InputRequest request null if validargs null Vector accept StringUtils split validargs request new MultipleChoiceInputRequest message accept else request new InputRequest message getProject getInputHandler handleInput request String value request getInput if value null value trim length defaultvalue null value defaultvalue if addproperty null value null getProject setNewProperty addproperty value', 'bug': '0'}
{'sequence': 'public class ContainsRegexpSelector extends BaseExtendSelector private String userProvidedExpression null private RegularExpression myRegExp null private Regexp myExpression null public static final String EXPRESSION_KEY public ContainsRegexpSelector public String toString StringBuffer buf new StringBuffer buf append userProvidedExpression buf append return buf toString public void setExpression String theexpression this userProvidedExpression theexpression public void setParameters Parameter parameters super setParameters parameters if parameters null for int parameters length String paramname parameters getName if EXPRESSION_KEY equalsIgnoreCase paramname setExpression parameters getValue else setError paramname public void verifySettings if userProvidedExpression null setError public boolean isSelected File basedir String filename File file String teststr null BufferedReader in null validate if file isDirectory return true if myRegExp null myRegExp new RegularExpression myRegExp setPattern userProvidedExpression myExpression myRegExp getRegexp getProject try in new BufferedReader new InputStreamReader new FileInputStream file teststr in readLine while teststr null if myExpression matches teststr return true teststr in readLine return false catch IOException ioe throw new BuildException filename finally if in null try in close catch Exception throw new BuildException filename', 'bug': '0'}
{'sequence': 'public class Os implements Condition private static final String OS_NAME System getProperty toLowerCase Locale US private static final String OS_ARCH System getProperty toLowerCase Locale US private static final String OS_VERSION System getProperty toLowerCase Locale US private static final String PATH_SEP System getProperty private String family private String name private String version private String arch public Os public Os String family setFamily family public void setFamily String family toLowerCase Locale US public void setName String name this name name toLowerCase Locale US public void setArch String arch this arch arch toLowerCase Locale US public void setVersion String version this version version toLowerCase Locale US public boolean eval throws BuildException return isOs family name arch version public static boolean isFamily String family return isOs family null null null public static boolean isName String name return isOs null name null null public static boolean isArch String arch return isOs null null arch null public static boolean isVersion String version return isOs null null null version public static boolean isOs String family String name String arch String version boolean retValue false if family null name null arch null version null boolean isFamily true boolean isName true boolean isArch true boolean isVersion true if family null if family equals isFamily OS_NAME indexOf else if family equals isFamily OS_NAME indexOf else if family equals isFamily OS_NAME indexOf else if family equals isFamily PATH_SEP equals isFamily else if family equals isFamily OS_NAME indexOf else if family equals isFamily OS_NAME indexOf else if family equals isFamily PATH_SEP equals isFamily isFamily OS_NAME endsWith else if family equals isFamily isFamily OS_NAME indexOf OS_NAME indexOf OS_NAME indexOf OS_NAME indexOf else if family equals isFamily OS_NAME indexOf OS_NAME indexOf else if family equals isFamily OS_NAME indexOf else if family equals isFamily OS_NAME indexOf else throw new BuildException family if name null isName name equals OS_NAME if arch null isArch arch equals OS_ARCH if version null isVersion version equals OS_VERSION retValue isFamily isName isArch isVersion return retValue', 'bug': '0'}
{'sequence': 'public final class AntFilterReader extends DataType implements Cloneable private String className private final Vector parameters new Vector private Path classpath public final void setClassName final String className this className className public final String getClassName return className public final void addParam final Parameter param parameters addElement param public final void setClasspath Path classpath if isReference throw tooManyAttributes if this classpath null this classpath classpath else this classpath append classpath public final Path createClasspath if isReference throw noChildrenAllowed if this classpath null this classpath new Path getProject return this classpath createPath public final Path getClasspath return classpath public void setClasspathRef Reference if isReference throw tooManyAttributes createClasspath setRefid public final Parameter getParams Parameter params new Parameter parameters size parameters copyInto params return params public void setRefid Reference throws BuildException if parameters isEmpty className null classpath null throw tooManyAttributes Object getReferencedObject getProject if instanceof AntFilterReader AntFilterReader afr AntFilterReader setClassName afr getClassName setClasspath afr getClasspath Parameter afr getParams if null for int length addParam else String msg getRefId throw new BuildException msg super setRefid', 'bug': '0'}
{'sequence': 'public class KaffeRmic extends DefaultRmicAdapter public boolean execute throws BuildException getRmic log Project MSG_VERBOSE Commandline cmd setupRmicCommand try Class Class forName Constructor cons getConstructor new Class String class Object rmic cons newInstance new Object cmd getArguments Method doRmic getMethod null Boolean ok Boolean doRmic invoke rmic null return ok booleanValue catch ClassNotFoundException ex throw new BuildException getRmic getLocation catch Exception ex if ex instanceof BuildException throw BuildException ex else throw new BuildException ex getRmic getLocation', 'bug': '0'}
{'sequence': 'public class AntXMLContext private Project project private File buildFile private Vector targetVector new Vector private File buildFileParent private String currentProjectName private Locator locator private Target implicitTarget new Target private Target currentTarget null private Vector wStack new Vector private boolean ignoreProjectTag false private Map prefixMapping new HashMap public AntXMLContext Project project this project project implicitTarget setProject project implicitTarget setName targetVector addElement implicitTarget public void setBuildFile File buildFile this buildFile buildFile this buildFileParent new File buildFile getParent public File getBuildFile return buildFile public File getBuildFileParent return buildFileParent public Project getProject return project public String getCurrentProjectName return currentProjectName public void setCurrentProjectName String name this currentProjectName name public RuntimeConfigurable currentWrapper if wStack size return null return RuntimeConfigurable wStack elementAt wStack size public RuntimeConfigurable parentWrapper if wStack size return null return RuntimeConfigurable wStack elementAt wStack size public void pushWrapper RuntimeConfigurable wrapper wStack addElement wrapper public void popWrapper if wStack size wStack removeElementAt wStack size public Vector getWrapperStack return wStack public void addTarget Target target targetVector addElement target currentTarget target public Target getCurrentTarget return currentTarget public Target getImplicitTarget return implicitTarget public void setCurrentTarget Target target this currentTarget target public void setImplicitTarget Target target this implicitTarget target public Vector getTargets return targetVector public void configureId Object element Attributes attr String id attr getValue if id null project addReference id element public Locator getLocator return locator public void setLocator Locator locator this locator locator public boolean isIgnoringProjectTag return ignoreProjectTag public void setIgnoreProjectTag boolean flag this ignoreProjectTag flag public void startPrefixMapping String prefix String uri List list List prefixMapping get prefix if list null list new ArrayList prefixMapping put prefix list list add uri public void endPrefixMapping String prefix List list List prefixMapping get prefix if list null list size list remove list size public String getPrefixMapping String prefix List list List prefixMapping get prefix if list null list size return null return String list get list size', 'bug': '1'}
{'sequence': 'public interface UnixStat int PERM_MASK int LINK_FLAG int FILE_FLAG int DIR_FLAG int DEFAULT_LINK_PERM int DEFAULT_DIR_PERM int DEFAULT_FILE_PERM', 'bug': '0'}
{'sequence': 'public class ComponentHelper private AntTypeTable antTypeTable private Hashtable taskClassDefinitions new Hashtable private boolean rebuildTaskClassDefinitions true private Hashtable typeClassDefinitions new Hashtable private boolean rebuildTypeClassDefinitions true private Set checkedNamespaces new HashSet private Stack antLibStack new Stack private String antLibCurrentUri null private Hashtable createdTasks new Hashtable private ComponentHelper next private Project project public static ComponentHelper getComponentHelper Project project ComponentHelper ph ComponentHelper project getReference if ph null return ph ph new ComponentHelper ph setProject project project addReference ph return ph protected ComponentHelper public void setNext ComponentHelper next this next next public ComponentHelper getNext return next public void setProject Project project this project project antTypeTable new AntTypeTable project public void initSubProject ComponentHelper helper AntTypeTable typeTable helper antTypeTable for Iterator typeTable values iterator hasNext AntTypeDefinition def AntTypeDefinition next antTypeTable put def getName def checkedNamespaces add helper checkedNamespaces public Object createComponent UnknownElement ue String ns String componentType throws BuildException Object component createComponent componentType if component null return null if component instanceof Task Task task Task component task setLocation ue getLocation task setTaskType componentType task setTaskName ue getTaskName task setOwningTarget ue getOwningTarget task init addCreatedTask componentType task return component public Object createComponent String componentName AntTypeDefinition def getDefinition componentName if def null return null return def create project public Class getComponentClass String componentName AntTypeDefinition def getDefinition componentName if def null return null return def getExposedClass project public AntTypeDefinition getDefinition String componentName checkNamespace componentName AntTypeDefinition ret null ret antTypeTable getDefinition componentName return ret public void initDefaultDefinitions initTasks initTypes public void addTaskDefinition String taskName Class taskClass checkTaskClass taskClass AntTypeDefinition def new AntTypeDefinition def setName taskName def setClassLoader taskClass getClassLoader def setClass taskClass def setAdapterClass TaskAdapter class def setClassName taskClass getName def setAdaptToClass Task class updateDataTypeDefinition def public void checkTaskClass final Class taskClass throws BuildException if Modifier isPublic taskClass getModifiers final String message taskClass project log message Project MSG_ERR throw new BuildException message if Modifier isAbstract taskClass getModifiers final String message taskClass project log message Project MSG_ERR throw new BuildException message try taskClass getConstructor null catch NoSuchMethodException final String message taskClass project log message Project MSG_ERR throw new BuildException message if Task class isAssignableFrom taskClass TaskAdapter checkTaskClass taskClass project public Hashtable getTaskDefinitions synchronized taskClassDefinitions synchronized antTypeTable if rebuildTaskClassDefinitions taskClassDefinitions clear for Iterator antTypeTable keySet iterator hasNext String name String next Class clazz Class antTypeTable getExposedClass name if clazz null continue if Task class isAssignableFrom clazz taskClassDefinitions put name antTypeTable getTypeClass name rebuildTaskClassDefinitions false return taskClassDefinitions public Hashtable getDataTypeDefinitions synchronized typeClassDefinitions synchronized antTypeTable if rebuildTypeClassDefinitions typeClassDefinitions clear for Iterator antTypeTable keySet iterator hasNext String name String next Class clazz Class antTypeTable getExposedClass name if clazz null continue if Task class isAssignableFrom clazz typeClassDefinitions put name antTypeTable getTypeClass name rebuildTypeClassDefinitions false return typeClassDefinitions public void addDataTypeDefinition String typeName Class typeClass AntTypeDefinition def new AntTypeDefinition def setName typeName def setClass typeClass updateDataTypeDefinition def String msg typeName typeClass getName project log msg Project MSG_DEBUG public void addDataTypeDefinition AntTypeDefinition def updateDataTypeDefinition def public Hashtable getAntTypeTable return antTypeTable public Task createTask String taskType throws BuildException Task task createNewTask taskType if task null taskType equals addTaskDefinition org apache tools ant taskdefs Property class task createNewTask taskType if task null addCreatedTask taskType task return task private Task createNewTask String taskType throws BuildException Class getComponentClass taskType if null return null if Task class isAssignableFrom return null Task task Task createComponent taskType if task null return null task setTaskType taskType task setTaskName taskType String msg taskType project log msg Project MSG_DEBUG return task private void addCreatedTask String type Task task synchronized createdTasks Vector Vector createdTasks get type if null new Vector createdTasks put type addElement new WeakReference task private void invalidateCreatedTasks String type synchronized createdTasks Vector Vector createdTasks get type if null Enumeration taskEnum elements while taskEnum hasMoreElements WeakReference ref WeakReference taskEnum nextElement Task Task ref get if null markInvalid removeAllElements createdTasks remove type public Object createDataType String typeName throws BuildException return createComponent typeName public String getElementName Object element Class elementClass element getClass for Iterator antTypeTable values iterator hasNext AntTypeDefinition def AntTypeDefinition next if elementClass def getExposedClass project return def getName return elementClass getName private boolean validDefinition AntTypeDefinition def if def getTypeClass project null def getExposedClass project null return false return true private boolean sameDefinition AntTypeDefinition def AntTypeDefinition old if validDefinition def validDefinition old return validDefinition def validDefinition old return def sameDefinition old project private void updateDataTypeDefinition AntTypeDefinition def String name def getName synchronized antTypeTable rebuildTaskClassDefinitions true rebuildTypeClassDefinitions true AntTypeDefinition old antTypeTable getDefinition name if old null if sameDefinition def old return int logLevel Project MSG_WARN if def similarDefinition old project logLevel Project MSG_VERBOSE Class oldClass antTypeTable getExposedClass name boolean isTask oldClass null Task class isAssignableFrom oldClass project log isTask name logLevel if isTask invalidateCreatedTasks name project log name def getClassName Project MSG_DEBUG antTypeTable put name def public void enterAntLib String uri antLibCurrentUri uri antLibStack push uri public String getCurrentAntlibUri return antLibCurrentUri public void exitAntLib antLibStack pop if antLibStack size antLibCurrentUri String antLibStack peek else antLibCurrentUri null private void initTasks ClassLoader classLoader null if project getCoreLoader null equals project getProperty classLoader project getCoreLoader String dataDefs InputStream in null try Properties props new Properties in this getClass getResourceAsStream dataDefs if in null throw new BuildException props load in Enumeration props propertyNames while hasMoreElements String name String nextElement String className props getProperty name AntTypeDefinition def new AntTypeDefinition def setName name def setClassName className def setClassLoader classLoader def setAdaptToClass Task class def setAdapterClass TaskAdapter class antTypeTable put name def catch IOException ex throw new BuildException finally if in null try in close catch Exception ignore private void initTypes ClassLoader classLoader null if project getCoreLoader null equals project getProperty classLoader project getCoreLoader String dataDefs InputStream in null try Properties props new Properties in this getClass getResourceAsStream dataDefs if in null throw new BuildException props load in Enumeration props propertyNames while hasMoreElements String name String nextElement String className props getProperty name AntTypeDefinition def new AntTypeDefinition def setName name def setClassName className def setClassLoader classLoader antTypeTable put name def catch IOException ex throw new BuildException finally if in null try in close catch Exception ignore private synchronized void checkNamespace String componentName if componentName indexOf String uri ProjectHelper extractUriFromComponentName componentName if uri startsWith ProjectHelper ANTLIB_URI if checkedNamespaces contains uri checkedNamespaces add uri Typedef definer new Typedef definer setProject project definer setURI uri definer setResource uri substring length replace definer setOnError new Typedef OnError definer init definer execute private static class AntTypeTable extends Hashtable private Project project public AntTypeTable Project project this project project public AntTypeDefinition getDefinition String key AntTypeDefinition ret AntTypeDefinition super get key return ret public Object get Object key return getTypeClass String key public Object create String name AntTypeDefinition def getDefinition name if def null return null return def create project public Class getTypeClass String name AntTypeDefinition def getDefinition name if def null return null return def getTypeClass project public Class getExposedClass String name AntTypeDefinition def getDefinition name if def null return null return def getExposedClass project public boolean contains Object clazz for Iterator values iterator hasNext AntTypeDefinition def AntTypeDefinition next Class def getExposedClass project if clazz return true return false public boolean containsValue Object value return contains value', 'bug': '1'}
{'sequence': 'public class SendEmail extends EmailTask public void setMailport Integer value setMailport value intValue', 'bug': '0'}
{'sequence': 'public class PathConvert extends Task private Path path null private Reference refid null private String targetOS null private boolean targetWindows false private boolean onWindows false private boolean setonempty true private Vector prefixMap new Vector private String pathSep null private String dirSep null public PathConvert onWindows Os isFamily public class MapEntry public void setFrom String from this from from public void setTo String to this to to public String apply String elem if from null to null throw new BuildException String cmpElem onWindows elem toLowerCase elem String cmpFrom onWindows from toLowerCase from if cmpElem startsWith cmpFrom int len from length if len elem length elem to else elem to elem substring len return elem private String from null private String to null public static class TargetOs extends EnumeratedAttribute public String getValues return new String public Path createPath if isReference throw noChildrenAllowed if path null path new Path getProject return path createPath public MapEntry createMap MapEntry entry new MapEntry prefixMap addElement entry return entry public void setTargetos String target TargetOs to new TargetOs to setValue target setTargetos to public void setTargetos TargetOs target targetOS target getValue targetWindows targetOS equals targetOS equals public void setSetonempty boolean setonempty this setonempty setonempty public void setProperty String property public void setRefid Reference if path null throw noChildrenAllowed refid public void setPathSep String sep pathSep sep public void setDirSep String sep dirSep sep public boolean isReference return refid null public void execute throws BuildException Path savedPath path try if isReference path new Path getProject createPath Object obj refid getReferencedObject getProject if obj instanceof Path path setRefid refid else if obj instanceof FileSet FileSet fs FileSet obj path addFileset fs else if obj instanceof DirSet DirSet ds DirSet obj path addDirset ds else if obj instanceof FileList FileList fl FileList obj path addFilelist fl else throw new BuildException String fromDirSep onWindows StringBuffer rslt new StringBuffer String elems path list for int elems length String elem elems if rslt append pathSep StringTokenizer stDirectory new StringTokenizer elem fromDirSep true String token null while stDirectory hasMoreTokens token stDirectory nextToken if fromDirSep equals token rslt append dirSep else rslt append token String value rslt toString if setonempty log property value Project MSG_VERBOSE getProject setNewProperty property value else if rslt length log property value Project MSG_VERBOSE getProject setNewProperty property value finally path savedPath dirSep savedDirSep pathSep savedPathSep private String mapElement String elem int size prefixMap size if size for int size MapEntry entry MapEntry prefixMap elementAt String newElem entry apply elem if newElem elem elem newElem return elem private void validateSetup throws BuildException if path null throw new BuildException if property null throw new BuildException if targetOS null pathSep null dirSep null throw new BuildException String dsep File separator String psep File pathSeparator if targetOS null psep targetWindows dsep targetWindows if pathSep null psep pathSep if dirSep null dsep dirSep pathSep psep dirSep dsep private BuildException noChildrenAllowed return new BuildException', 'bug': '0'}
{'sequence': 'public class LazyFileOutputStream extends OutputStream private FileOutputStream fos private File file private boolean append private boolean opened false private boolean closed false public LazyFileOutputStream String name this name false public LazyFileOutputStream String name boolean append this new File name append public LazyFileOutputStream File this false public LazyFileOutputStream File file boolean append this file file this append append public void open throws IOException ensureOpened public synchronized void close throws IOException if opened fos close closed true public void write byte throws IOException write length public synchronized void write byte int offset int len throws IOException ensureOpened fos write offset len public synchronized void write int throws IOException ensureOpened fos write private synchronized void ensureOpened throws IOException if closed throw new IOException file if opened fos new FileOutputStream file getAbsolutePath append opened true', 'bug': '0'}
{'sequence': 'public class AntClassLoader extends ClassLoader implements BuildListener private class ResourceEnumeration implements Enumeration private String resourceName private int pathElementsIndex private URL nextResource ResourceEnumeration String name this resourceName name this pathElementsIndex findNextResource public boolean hasMoreElements return this nextResource null public Object nextElement URL ret this nextResource findNextResource return ret private void findNextResource URL url null while pathElementsIndex pathComponents size url null try File pathComponent File pathComponents elementAt pathElementsIndex url getResourceURL pathComponent this resourceName pathElementsIndex catch BuildException this nextResource url private static final int BUFFER_SIZE private static final int NUMBER_OF_STRINGS private Vector pathComponents new Vector private Project project private boolean parentFirst true private Vector systemPackages new Vector private Vector loaderPackages new Vector private boolean ignoreBase false private ClassLoader parent null private Hashtable zipFiles new Hashtable private ClassLoader savedContextLoader null private boolean isContextLoaderSaved false private static Method getProtectionDomain null private static Method defineClassProtectionDomain null static try getProtectionDomain Class class getMethod new Class Class protectionDomain Class forName Class args new Class String class byte class Integer TYPE Integer TYPE protectionDomain defineClassProtectionDomain ClassLoader class getDeclaredMethod args catch Exception public AntClassLoader setParent null public AntClassLoader Project project Path classpath setParent null setProject project setClassPath classpath public AntClassLoader ClassLoader parent Project project Path classpath boolean parentFirst this project classpath if parent null setParent parent setParentFirst parentFirst addJavaLibraries public AntClassLoader Project project Path classpath boolean parentFirst this null project classpath parentFirst public AntClassLoader ClassLoader parent boolean parentFirst setParent parent project null this parentFirst parentFirst public void setProject Project project this project project if project null project addBuildListener this public void setClassPath Path classpath pathComponents removeAllElements if classpath null Path actualClasspath classpath concatSystemClasspath String pathElements actualClasspath list for int pathElements length try addPathElement pathElements catch BuildException public void setParent ClassLoader parent if parent null this parent AntClassLoader class getClassLoader else this parent parent public void setParentFirst boolean parentFirst this parentFirst parentFirst protected void log String message int priority if project null project log message priority public void setThreadContextLoader if isContextLoaderSaved throw new BuildException if LoaderUtils isContextLoaderAvailable savedContextLoader LoaderUtils getContextClassLoader ClassLoader loader this if project null equals project getProperty loader this getClass getClassLoader LoaderUtils setContextClassLoader loader isContextLoaderSaved true public void resetThreadContextLoader if LoaderUtils isContextLoaderAvailable isContextLoaderSaved LoaderUtils setContextClassLoader savedContextLoader savedContextLoader null isContextLoaderSaved false public void addPathElement String pathElement throws BuildException File pathComponent project null project resolveFile pathElement new File pathElement try addPathFile pathComponent catch IOException throw new BuildException protected void addPathFile File pathComponent throws IOException pathComponents addElement pathComponent public String getClasspath StringBuffer sb new StringBuffer boolean firstPass true Enumeration componentEnum pathComponents elements while componentEnum hasMoreElements if firstPass sb append System getProperty else firstPass false sb append File componentEnum nextElement getAbsolutePath return sb toString public synchronized void setIsolated boolean isolated ignoreBase isolated public static void initializeClass Class theClass final Constructor cons theClass getDeclaredConstructors if cons null if cons length cons null final String strs new String NUMBER_OF_STRINGS try cons newInstance strs catch Throwable public Class forceLoadClass String classname throws ClassNotFoundException log classname Project MSG_DEBUG Class theClass findLoadedClass classname if theClass null theClass findClass classname return theClass public Class forceLoadSystemClass String classname throws ClassNotFoundException log classname Project MSG_DEBUG Class theClass findLoadedClass classname if theClass null theClass findBaseClass classname return theClass public InputStream getResourceAsStream String name InputStream resourceStream null if isParentFirst name resourceStream loadBaseResource name if resourceStream null log name Project MSG_DEBUG else resourceStream loadResource name if resourceStream null log name Project MSG_DEBUG else resourceStream loadResource name if resourceStream null log name Project MSG_DEBUG else resourceStream loadBaseResource name if resourceStream null log name Project MSG_DEBUG if resourceStream null log name Project MSG_DEBUG return resourceStream private InputStream loadResource String name InputStream stream null Enumeration pathComponents elements while hasMoreElements stream null File pathComponent File nextElement stream getResourceStream pathComponent name return stream private InputStream loadBaseResource String name if parent null return getSystemResourceAsStream name else return parent getResourceAsStream name private InputStream getResourceStream File file String resourceName try if file exists return null if file isDirectory File resource new File file resourceName if resource exists return new FileInputStream resource else ZipFile zipFile ZipFile zipFiles get file if zipFile null zipFile new ZipFile file zipFiles put file zipFile ZipEntry entry zipFile getEntry resourceName if entry null return zipFile getInputStream entry catch Exception log getClass getName getMessage resourceName file Project MSG_VERBOSE return null private boolean isParentFirst String resourceName boolean useParentFirst parentFirst for Enumeration systemPackages elements hasMoreElements useParentFirst true break for Enumeration loaderPackages elements hasMoreElements useParentFirst false break return useParentFirst public URL getResource String name URL url null if isParentFirst name url parent null super getResource name parent getResource name if url null log name Project MSG_DEBUG else Enumeration pathComponents elements while hasMoreElements url null File pathComponent File nextElement url getResourceURL pathComponent name if url null log name Project MSG_DEBUG if url null isParentFirst name url parent null super getResource name parent getResource name if url null log name Project MSG_DEBUG if url null log name Project MSG_DEBUG return url protected Enumeration findResources String name throws IOException return new ResourceEnumeration name protected URL getResourceURL File file String resourceName try if file exists return null if file isDirectory File resource new File file resourceName if resource exists try return new URL resource toString catch MalformedURLException ex return null else ZipFile zipFile ZipFile zipFiles get file if zipFile null zipFile new ZipFile file zipFiles put file zipFile ZipEntry entry zipFile getEntry resourceName if entry null try return new URL file toString entry catch MalformedURLException ex return null catch Exception printStackTrace return null protected synchronized Class loadClass String classname boolean resolve throws ClassNotFoundException Class theClass findLoadedClass classname if theClass null return theClass if isParentFirst classname try theClass findBaseClass classname log classname Project MSG_DEBUG catch ClassNotFoundException cnfe theClass findClass classname log classname Project MSG_DEBUG else try theClass findClass classname log classname Project MSG_DEBUG catch ClassNotFoundException cnfe if ignoreBase throw cnfe theClass findBaseClass classname log classname Project MSG_DEBUG if resolve resolveClass theClass return theClass private String getClassFilename String classname return classname replace protected Class defineClassFromData File container byte classData String classname throws IOException if defineClassProtectionDomain null try Object domain getProtectionDomain invoke Project class new Object Object args new Object classname classData new Integer new Integer classData length domain return Class defineClassProtectionDomain invoke this args catch InvocationTargetException ite Throwable ite getTargetException if instanceof ClassFormatError throw ClassFormatError else if instanceof NoClassDefFoundError throw NoClassDefFoundError else if instanceof SecurityException throw SecurityException else throw new IOException toString catch Exception throw new IOException toString else return defineClass classname classData classData length private Class getClassFromStream InputStream stream String classname File container throws IOException SecurityException ByteArrayOutputStream baos new ByteArrayOutputStream int bytesRead byte buffer new byte BUFFER_SIZE while bytesRead stream read buffer BUFFER_SIZE baos write buffer bytesRead byte classData baos toByteArray return defineClassFromData container classData classname public Class findClass String name throws ClassNotFoundException log name Project MSG_DEBUG return findClassInComponents name protected boolean isInPath File component for Enumeration pathComponents elements hasMoreElements File pathComponent File nextElement if pathComponent equals component return true return false private Class findClassInComponents String name throws ClassNotFoundException InputStream stream null String classFilename getClassFilename name try Enumeration pathComponents elements while hasMoreElements File pathComponent File nextElement try stream getResourceStream pathComponent classFilename if stream null log pathComponent classFilename Project MSG_DEBUG return getClassFromStream stream name pathComponent catch SecurityException se throw se catch IOException ioe log pathComponent ioe getMessage Project MSG_VERBOSE throw new ClassNotFoundException name finally try if stream null stream close catch IOException private Class findBaseClass String name throws ClassNotFoundException if parent null return findSystemClass name else return parent loadClass name public synchronized void cleanup for Enumeration zipFiles elements hasMoreElements ZipFile zipFile ZipFile nextElement try zipFile close catch IOException ioe zipFiles new Hashtable if project null project removeBuildListener this project null public void buildStarted BuildEvent event public void buildFinished BuildEvent event cleanup public void targetStarted BuildEvent event public void targetFinished BuildEvent event public void taskStarted BuildEvent event public void taskFinished BuildEvent event public void messageLogged BuildEvent event public void addJavaLibraries while hasMoreElements', 'bug': '1'}
{'sequence': 'public interface DynamicConfigurator void setDynamicAttribute String name String value throws BuildException Object createDynamicElement String name throws BuildException', 'bug': '0'}
{'sequence': 'public abstract class WeakishReference private static Constructor referenceConstructor private final static String WEAK_REFERENCE_NAME public static WeakishReference createReference Object object if referenceConstructor null createReferenceConstructor try return WeakishReference referenceConstructor newInstance new Object object catch Exception throw new BuildException private static void createReferenceConstructor Class ctor new Class Object class try referenceConstructor HardReference class getConstructor ctor catch NoSuchMethodException throw new BuildException if JavaEnvUtils isJavaVersion JavaEnvUtils JAVA_1_1 try Class clazz Class forName WEAK_REFERENCE_NAME referenceConstructor clazz getConstructor ctor catch ClassNotFoundException catch NoSuchMethodException public abstract Object get public static class HardReference extends WeakishReference private Object object public HardReference Object object this object object public Object get return object', 'bug': '1'}
{'sequence': 'public final class SelectorUtils private static SelectorUtils instance new SelectorUtils private SelectorUtils public static SelectorUtils getInstance return instance public static boolean matchPatternStart String pattern String str return matchPatternStart pattern str true public static boolean matchPatternStart String pattern String str boolean isCaseSensitive if str startsWith File separator pattern startsWith File separator return false String patDirs tokenizePathAsArray pattern String strDirs tokenizePathAsArray str int patIdxStart int patIdxEnd patDirs length int strIdxStart int strIdxEnd strDirs length while patIdxStart patIdxEnd strIdxStart strIdxEnd String patDir patDirs patIdxStart if patDir equals break if match patDir strDirs strIdxStart isCaseSensitive return false patIdxStart strIdxStart if strIdxStart strIdxEnd return true else if patIdxStart patIdxEnd return false else return true public static boolean matchPath String pattern String str return matchPath pattern str true public static boolean matchPath String pattern String str boolean isCaseSensitive if str startsWith File separator pattern startsWith File separator return false String patDirs tokenizePathAsArray pattern String strDirs tokenizePathAsArray str int patIdxStart int patIdxEnd patDirs length int strIdxStart int strIdxEnd strDirs length while patIdxStart patIdxEnd strIdxStart strIdxEnd String patDir patDirs patIdxStart if patDir equals break if match patDir strDirs strIdxStart isCaseSensitive patDirs null strDirs null return false patIdxStart strIdxStart if strIdxStart strIdxEnd for int patIdxStart patIdxEnd if patDirs equals patDirs null strDirs null return false return true else if patIdxStart patIdxEnd patDirs null strDirs null return false while patIdxStart patIdxEnd strIdxStart strIdxEnd String patDir patDirs patIdxEnd if patDir equals break if match patDir strDirs strIdxEnd isCaseSensitive patDirs null strDirs null return false patIdxEnd strIdxEnd if strIdxStart strIdxEnd for int patIdxStart patIdxEnd if patDirs equals patDirs null strDirs null return false return true while patIdxStart patIdxEnd strIdxStart strIdxEnd int patIdxTmp for int patIdxStart patIdxEnd if patDirs equals patIdxTmp break if patIdxTmp patIdxStart patIdxStart continue int patLength patIdxTmp patIdxStart int strLength strIdxEnd strIdxStart int foundIdx strLoop for int strLength patLength for int patLength String subPat patDirs patIdxStart String subStr strDirs strIdxStart if match subPat subStr isCaseSensitive continue strLoop foundIdx strIdxStart break if foundIdx patDirs null strDirs null return false patIdxStart patIdxTmp strIdxStart foundIdx patLength for int patIdxStart patIdxEnd if patDirs equals patDirs null strDirs null return false return true public static boolean match String pattern String str return match pattern str true public static boolean match String pattern String str boolean isCaseSensitive char patArr pattern toCharArray char strArr str toCharArray int patIdxStart int patIdxEnd patArr length int strIdxStart int strIdxEnd strArr length char ch boolean containsStar false for int patArr length if patArr containsStar true break if containsStar if patIdxEnd strIdxEnd for int patIdxEnd ch patArr if ch if isCaseSensitive ch strArr if isCaseSensitive Character toUpperCase ch Character toUpperCase strArr if patIdxEnd while ch patArr patIdxStart strIdxStart strIdxEnd if ch if isCaseSensitive ch strArr strIdxStart if isCaseSensitive Character toUpperCase ch Character toUpperCase strArr strIdxStart patIdxStart strIdxStart if strIdxStart strIdxEnd for int patIdxStart patIdxEnd if patArr return false return true while ch patArr patIdxEnd strIdxStart strIdxEnd if ch if isCaseSensitive ch strArr strIdxEnd if isCaseSensitive Character toUpperCase ch Character toUpperCase strArr strIdxEnd patIdxEnd strIdxEnd if strIdxStart strIdxEnd for int patIdxStart patIdxEnd if patArr return false return true while patIdxStart patIdxEnd strIdxStart strIdxEnd int patIdxTmp for int patIdxStart patIdxEnd if patArr patIdxTmp break if patIdxTmp patIdxStart patIdxStart continue int patLength patIdxTmp patIdxStart int strLength strIdxEnd strIdxStart int foundIdx strLoop for int strLength patLength for int patLength ch patArr patIdxStart if ch if isCaseSensitive ch strArr strIdxStart continue strLoop if isCaseSensitive Character toUpperCase ch Character toUpperCase strArr strIdxStart continue strLoop foundIdx strIdxStart break if foundIdx return false patIdxStart patIdxTmp strIdxStart foundIdx patLength for int patIdxStart patIdxEnd if patArr return false return true public static Vector tokenizePath String path return tokenizePath path File separator public static Vector tokenizePath String path String separator Vector ret new Vector StringTokenizer st new StringTokenizer path separator while st hasMoreTokens ret addElement st nextToken return ret private static String tokenizePathAsArray String path char sep File separatorChar int start int len path length int count for int pos pos len pos if path charAt pos sep if pos start count start pos if len start count String new String count count start for int pos pos len pos if path charAt pos sep if pos start String tok path substring start pos count tok start pos if len start String tok path substring start return public static boolean isOutOfDate File src File target int granularity if src exists return false if target exists return true if src lastModified granularity target lastModified return true return false public static boolean isOutOfDate Resource src Resource target int granularity if src isExists return false if target isExists return true if src getLastModified granularity target getLastModified return true return false public static String removeWhitespace String input StringBuffer result new StringBuffer if input null StringTokenizer st new StringTokenizer input while st hasMoreTokens result append st nextToken return result toString public static boolean hasWildcards String input return input indexOf input indexOf public static String rtrimWildcardTokens String input Vector tokenizePath input File separator StringBuffer sb new StringBuffer for int counter counter size counter if hasWildcards String elementAt counter break if counter sb append File separator sb append String elementAt counter return sb toString', 'bug': '0'}
{'sequence': 'public class SizeSelector extends BaseExtendSelector private long size private long multiplier private long sizelimit private int cmp public static final String SIZE_KEY public static final String UNITS_KEY public static final String WHEN_KEY public SizeSelector public String toString StringBuffer buf new StringBuffer buf append sizelimit buf append if cmp buf append else if cmp buf append else buf append buf append return buf toString public void setValue long size this size size if multiplier size sizelimit size multiplier public void setUnits ByteUnits units int units getIndex multiplier if multiplier else if multiplier else if multiplier else if multiplier else if multiplier else if multiplier else if multiplier else if multiplier if multiplier size sizelimit size multiplier public void setWhen SizeComparisons cmp this cmp cmp getIndex public void setParameters Parameter parameters super setParameters parameters if parameters null for int parameters length String paramname parameters getName if SIZE_KEY equalsIgnoreCase paramname try setValue new Long parameters getValue longValue catch NumberFormatException nfe setError parameters getValue else if UNITS_KEY equalsIgnoreCase paramname ByteUnits units new ByteUnits units setValue parameters getValue setUnits units else if WHEN_KEY equalsIgnoreCase paramname SizeComparisons cmp new SizeComparisons cmp setValue parameters getValue setWhen cmp else setError paramname public void verifySettings if size setError else if multiplier setError else if sizelimit setError public boolean isSelected File basedir String filename File file validate if file isDirectory return true if cmp return file length sizelimit else if cmp return file length sizelimit else return file length sizelimit public static class ByteUnits extends EnumeratedAttribute public String getValues return new String public static class SizeComparisons extends EnumeratedAttribute public String getValues return new String', 'bug': '0'}
{'sequence': 'public class RuntimeConfigurable implements Serializable private static final String ANT_TYPE private String elementTag null private transient Object wrappedObject null private transient IntrospectionHelper Creator creator private transient AttributeList attributes private StringBuffer characters null private boolean proxyConfigured false private String polyType null public RuntimeConfigurable Object proxy String elementTag wrappedObject proxy this elementTag elementTag proxyConfigured false if proxy instanceof Task Task proxy setRuntimeConfigurableWrapper this public void setProxy Object proxy wrappedObject proxy proxyConfigured false void setCreator IntrospectionHelper Creator creator this creator creator public Object getProxy return wrappedObject public String getPolyType return polyType public void setPolyType String polyType this polyType polyType public void setAttributes AttributeList attributes this attributes new AttributeListImpl attributes for int attributes getLength setAttribute attributes getName attributes getValue public void setAttribute String name String value if name equalsIgnoreCase ANT_TYPE this polyType value else if attributeNames null attributeNames new ArrayList attributeMap new HashMap attributeNames add name attributeMap put name value public Hashtable getAttributeMap if attributeMap null return new Hashtable attributeMap else return new Hashtable public AttributeList getAttributes return attributes public void addChild RuntimeConfigurable child if children null children new ArrayList children add child RuntimeConfigurable getChild int index return RuntimeConfigurable children get index public Enumeration getChildren if children null return Collections enumeration children else return new CollectionUtils EmptyEnumeration public void addText String data if data length return if characters null characters append data else characters new StringBuffer data public void addText char buf int start int count if count return if characters null characters new StringBuffer count characters append buf start count public StringBuffer getText if characters null return characters else return new StringBuffer public String getElementTag return elementTag public void maybeConfigure Project throws BuildException maybeConfigure true public void maybeConfigure Project boolean configureChildren throws BuildException String id null if proxyConfigured return Object target wrappedObject instanceof TypeAdapter TypeAdapter wrappedObject getProxy wrappedObject IntrospectionHelper ih IntrospectionHelper getHelper target getClass if attributeNames null for int attributeNames size String name String attributeNames get String value String attributeMap get name value replaceProperties value try ih setAttribute target name toLowerCase Locale US value catch BuildException be if name equals throw be id String attributeMap get if characters null ProjectHelper addText wrappedObject characters substring Enumeration getChildren while hasMoreElements RuntimeConfigurable child RuntimeConfigurable nextElement if child wrappedObject instanceof Task Task childTask Task child wrappedObject childTask setRuntimeConfigurableWrapper child if child creator null configureChildren child maybeConfigure child creator store continue String tag child getElementTag toLowerCase Locale US if configureChildren ih supportsNestedElement tag child maybeConfigure ProjectHelper storeChild target child wrappedObject tag if id null addReference id wrappedObject proxyConfigured true public void reconfigure Project proxyConfigured false maybeConfigure public void applyPreSet RuntimeConfigurable if attributeMap null for Iterator attributeMap keySet iterator hasNext String name String next if attributeMap null attributeMap get name null setAttribute name String attributeMap get name if polyType null polyType null polyType polyType if children null List newChildren new ArrayList newChildren addAll children if children null newChildren addAll children children newChildren if characters null if characters null characters toString trim length characters new StringBuffer characters toString', 'bug': '1'}
{'sequence': 'public class DefaultExcludes extends Task private String add private String remove private boolean defaultrequested false private boolean echo false private int logLevel Project MSG_WARN public void execute throws BuildException if defaultrequested add equals remove equals echo throw new BuildException if defaultrequested DirectoryScanner resetDefaultExcludes if add equals DirectoryScanner addDefaultExclude add if remove equals DirectoryScanner removeDefaultExclude remove if echo StringBuffer message new StringBuffer String excludes DirectoryScanner getDefaultExcludes for int excludes length message append excludes log message toString logLevel public void setDefault boolean def defaultrequested def public void setAdd String add this add add public void setRemove String remove this remove remove public void setEcho boolean echo this echo echo', 'bug': '0'}
{'sequence': 'public class AntStructure extends Task private final String lSep System getProperty private static final String BOOLEAN private static final String TASKS private static final String TYPES private Hashtable visited new Hashtable private File output public void setOutput File output this output output public void execute throws BuildException if output null throw new BuildException getLocation PrintWriter out null try try out new PrintWriter new OutputStreamWriter new FileOutputStream output catch UnsupportedEncodingException ue out new PrintWriter new FileWriter output printHead out getProject getTaskDefinitions keys getProject getDataTypeDefinitions keys printTargetDecl out Enumeration dataTypes getProject getDataTypeDefinitions keys while dataTypes hasMoreElements String typeName String dataTypes nextElement printElementDecl out typeName Class getProject getDataTypeDefinitions get typeName Enumeration tasks getProject getTaskDefinitions keys while tasks hasMoreElements String taskName String tasks nextElement printElementDecl out taskName Class getProject getTaskDefinitions get taskName catch IOException ioe throw new BuildException output getAbsolutePath ioe getLocation finally if out null out close visited clear private void printHead PrintWriter out Enumeration tasks Enumeration types out println out println out print boolean first true while tasks hasMoreElements String taskName String tasks nextElement if first out print else first false out print taskName out println out print first true while types hasMoreElements String typeName String types nextElement if first out print else first false out print typeName out println out println out print out print TASKS out print out print TYPES out println out println out println out println out println out println private void printTargetDecl PrintWriter out out print out print TASKS out print out print TYPES out println out println out println out println out println out println out println out println out println out println private void printElementDecl PrintWriter out String name Class element throws BuildException if visited containsKey name return visited put name IntrospectionHelper ih null try ih IntrospectionHelper getHelper element catch Throwable return StringBuffer sb new StringBuffer sb append name append if org apache tools ant types Reference class equals element sb append append lSep sb append append name sb append lSep append sb append lSep append sb append append lSep out println sb return Vector new Vector if ih supportsCharacters addElement if TaskContainer class isAssignableFrom element addElement TASKS Enumeration ih getNestedElements while hasMoreElements addElement nextElement if isEmpty sb append else sb append final int count size for int count if sb append sb append elementAt sb append if count elementAt equals sb append sb append out println sb sb new StringBuffer sb append name sb append lSep append ih getAttributes while hasMoreElements String attrName String nextElement if equals attrName continue sb append lSep append append attrName append Class type ih getAttributeType attrName if type equals java lang Boolean class type equals java lang Boolean TYPE sb append BOOLEAN append else if Reference class isAssignableFrom type sb append else if EnumeratedAttribute class isAssignableFrom type try EnumeratedAttribute ea EnumeratedAttribute type newInstance String values ea getValues if values null values length areNmtokens values sb append else sb append for int values length if sb append sb append values sb append catch InstantiationException ie sb append catch IllegalAccessException ie sb append else sb append sb append sb append append lSep out println sb final int count size for int count String nestedName String elementAt if equals nestedName TASKS equals nestedName TYPES equals nestedName printElementDecl out nestedName ih getElementType nestedName protected boolean isNmtoken String final int length length for int length char charAt if Character isLetterOrDigit return false return true protected boolean areNmtokens String for int length if isNmtoken return false return true', 'bug': '1'}
{'sequence': 'public class LoaderUtils public static void setContextClassLoader ClassLoader loader Thread currentThread Thread currentThread currentThread setContextClassLoader loader public static ClassLoader getContextClassLoader Thread currentThread Thread currentThread return currentThread getContextClassLoader public static boolean isContextLoaderAvailable return true private static File normalizeSource File source if source null FileUtils fileUtils FileUtils newFileUtils try source fileUtils normalize source getAbsolutePath catch BuildException return source public static File getClassSource Class return normalizeSource Locator getClassSource public static File getResourceSource ClassLoader String resource if null LoaderUtils class getClassLoader return normalizeSource Locator getResourceSource resource', 'bug': '0'}
